!function(){function e(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.toStringTag||"@@toStringTag";function i(t,a,o,u){var i=a&&a.prototype instanceof c?a:c,s=Object.create(i.prototype);return n(s,"_invoke",function(t,n,a){var o,u,i,c=0,s=a||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,u=0,i=e,d.n=n,l}};function m(t,n){for(u=t,i=n,r=0;!f&&c&&!a&&r<s.length;r++){var a,o=s[r],m=d.p,p=o[2];t>3?(a=p===n)&&(i=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=t<2&&m<o[1])?(u=0,d.v=n,d.n=o[1]):m<p&&(a=t<3||o[0]>n||n>p)&&(o[4]=t,o[5]=n,d.n=p,u=0))}if(a||t>1)return l;throw f=!0,n}return function(a,s,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),u=s,i=p;(r=u<2?e:i)||!f;){o||(u?u<3?(u>1&&(d.n=-1),m(u,i)):d.n=i:d.v=i);try{if(c=2,o){if(u||(a="next"),r=o[a]){if(!(r=r.call(o,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,u<2&&(u=0)}else 1===u&&(r=o.return)&&r.call(o),u<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),u=1);o=e}else if((r=(f=d.n<0)?i:t.call(n,d))!==l)break}catch(r){o=e,u=1,i=r}finally{c=1}}return{value:r,done:f}}}(t,o,u),!0),s}var l={};function c(){}function s(){}function f(){}r=Object.getPrototypeOf;var d=[][o]?r(r([][o]())):(n(r={},o,function(){return this}),r),m=f.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,n(m,"constructor",f),n(f,"constructor",s),s.displayName="GeneratorFunction",n(f,u,"GeneratorFunction"),n(m),n(m,u,"Generator"),n(m,o,function(){return this}),n(m,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:p}})()}function n(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}n=function(e,t,r,a){function u(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(u("next",0),u("throw",1),u("return",2))},n(e,t,r,a)}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,u=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw u}}}}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n,r,a,o,u){try{var i=e[o](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}System.register(["./base-lib-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./useStore-legacy10.js?v=1756369731","./ssl-legacy.js?v=1756369731","./useMethod-legacy10.js?v=1756369731","./useStore-legacy11.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./column-legacy.js?v=1756369731"],function(n,a){"use strict";var o,i,l,c,s,f,d,m,p,v,y,b,g,h,_,j,w,x,S,k,A,V,D,T,O,E;return{setters:[function(e){o=e.c,i=e.s,l=e.r,c=e.k,s=e.p,f=e.q,d=e.v,m=e.e,p=e.A,v=e.x,y=e.B,b=e.aB,g=e.S,h=e.aQ,_=e.a9,j=e.a7},function(e){w=e._},function(e){x=e.K,S=e.P,k=e.j,A=e.b},function(e){V=e.g},function(e){D=e.L,T=e.M},function(e){O=e.r},function(e){E=e.u},null,null,null],execute:function(){var a={class:"p-2rem"};n("default",o({__name:"index",props:{compData:{default:function(){return{isMulti:!1}}}},emits:["close"],setup:function(n,o){var I=o.expose,N=o.emit,P=n,q=N,G=A(),M=V().refs,U=M.tabActive,R=M.isRefreshDomainList,C=i(E()),F=C.activeTabs,$=C.sslIsRefresh,B=C.testIsRefresh,L=C.encryptIsRefresh,H=C.otherIsRefresh,K=l(),Q=l(!1),z=c({domain:"",title:"",cycle:30,allSsl:!1,total:2,sender:[]}),J=l({cycle:[{required:!0,message:"请输入剩余天数",trigger:"blur"},{validator:function(e,t,n){/^[1-9]\d*$/.test(t)?n():n(new Error("请输入大于0的正整数"))},trigger:["blur","change"]}],total:[{required:!0,message:"请输入总发送上线",trigger:"blur"},{validator:function(e,t,n){/^\d+$/.test(t)?n():n(new Error("请输入大于等于0的正整数"))},trigger:["blur","change"]}],sender:[{required:!0,message:"请选择通知方式",trigger:"blur"},{validator:function(e,t,n){0===t.length?n(new Error("请选择通知方式")):n()},trigger:["blur","change"]}]}),W=function(){var e,n=(e=t().m(function e(){var n,a,o,u,i,l,c,s,f,d,m,p,v,y,g,h;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,K.value.validate();case 1:if(e.v){e.n=2;break}return e.a(2);case 2:if(Q.value=!0,null!==(n=P.compData)&&void 0!==n&&n.isMulti){e.n=7;break}if(a={cycle:z.cycle,total:z.total,sender:z.sender.join(",")},"domain"===U.value?a.domain=z.domain:a.ssl_id=P.compData.ssl_id,"domain"!==U.value){e.n=4;break}return e.n=3,D(a);case 3:g=e.v,e.n=6;break;case 4:return e.n=5,T(a);case 5:g=e.v;case 6:o=g,G.request(o),o.status&&("domain"===U.value?R.value=!0:null===(u=(i={ssl:function(){return $.value=!0},test:function(){return B.value=!0},encrypt:function(){return L.value=!0},other:function(){return H.value=!0}})[F.value])||void 0===u||u.call(i),q("close")),e.n=18;break;case 7:c=[],s=G.load("正在批量设置告警..."),f=r(P.compData.data),e.p=8,f.s();case 9:if((d=f.n()).done){e.n=14;break}return m=d.value,e.p=10,p={cycle:z.cycle,total:z.total,sender:z.sender.join(","),ssl_id:m.ssl_id},e.n=11,T(p);case 11:v=e.v,c.push({name:m.title,status:v.status}),e.n=13;break;case 12:e.p=12,e.v,c.push({name:m.title,status:!1});case 13:e.n=9;break;case 14:e.n=16;break;case 15:e.p=15,h=e.v,f.e(h);case 16:return e.p=16,f.f(),e.f(16);case 17:s.close(),O({resultData:c,resultTitle:"设置告警",resultColumn:[{label:"名称",prop:"name"},{label:"结果",render:function(e){var t=e.status?"设置成功":"设置失败",n=e.status?"text-primary":"text-danger";return b("span",{class:n},t)}}]}),null===(l=(y={ssl:function(){return $.value=!0},test:function(){return B.value=!0},encrypt:function(){return L.value=!0},other:function(){return H.value=!0}})[F.value])||void 0===l||l.call(y),q("close");case 18:e.n=20;break;case 19:e.p=19,e.v;case 20:return e.p=20,Q.value=!1,e.f(20);case 21:return e.a(2)}},e,null,[[10,12],[8,15,16,17],[0,19,20,21]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,l,"next",e)}function l(e){u(o,r,a,i,l,"throw",e)}i(void 0)})});return function(){return n.apply(this,arguments)}}();return s(function(){var e;"domain"===U.value?z.domain=P.compData.domain:null!==(e=P.compData)&&void 0!==e&&e.isMulti?(z.title=P.compData.data.map(function(e){return e.title}).join(","),z.domain=P.compData.data.map(function(e){return!e.domainName||Array.isArray(e.domainName)&&0===e.domainName.length?"":Array.isArray(e.domainName)?e.domainName.join(","):e.domainName}).filter(function(e){return""!==e}).join(",")):(z.title=P.compData.title,z.domain=P.compData.domainName.join(","));x({request:S(),success:function(e){var t=e.data.data.find(function(e){return e.id===P.compData.report_id});t&&(z.sender=t.sender,z.cycle=t.task_data.cycle,z.total=t.number_rule.total)}})}),I({onConfirm:W}),function(t,n){var r=g,o=h,u=_,i=k,l=w,c=j;return f(),d("div",a,[m(c,{ref_key:"sslExpire",ref:K,disabled:v(Q),rules:v(J),model:v(z),"label-width":"100px"},{default:p(function(){return[m(u,{label:"域名"},{default:p(function(){return[m(o,{content:v(z).domain,placement:"top","popper-class":"!max-w-[300px]"},{default:p(function(){return[m(r,{class:"!w-[28rem]",modelValue:v(z).domain,"onUpdate:modelValue":n[0]||(n[0]=function(e){return v(z).domain=e}),disabled:""},null,8,["modelValue"])]}),_:1},8,["content"])]}),_:1}),m(u,{label:"证书"},{default:p(function(){return[m(o,{content:v(z).title,placement:"top","popper-class":"!max-w-[300px]"},{default:p(function(){return[m(r,{class:"!w-[28rem]",modelValue:v(z).title,"onUpdate:modelValue":n[1]||(n[1]=function(e){return v(z).title=e}),disabled:""},null,8,["modelValue"])]}),_:1},8,["content"])]}),_:1}),m(u,{label:"剩余天数",prop:"cycle"},{default:p(function(){return[m(i,{modelValue:v(z).cycle,"onUpdate:modelValue":n[2]||(n[2]=function(e){return v(z).cycle=e}),width:"14rem",textType:"天",min:"1",type:"number"},{append:p(function(){return e(n[5]||(n[5]=[y(" 天 ",-1)]))}),_:1},8,["modelValue"])]}),_:1}),m(u,{label:"总发送上限",prop:"total"},{default:p(function(){return[m(i,{modelValue:v(z).total,"onUpdate:modelValue":n[3]||(n[3]=function(e){return v(z).total=e}),width:"14rem",textType:"次",min:"0",type:"number"},{append:p(function(){return e(n[6]||(n[6]=[y(" 次 ",-1)]))}),_:1},8,["modelValue"])]}),_:1}),m(u,{label:"通知方式",prop:"sender"},{default:p(function(){return[m(l,{modelValue:v(z).sender,"onUpdate:modelValue":n[4]||(n[4]=function(e){return v(z).sender=e}),limit:["sms"],class:"!w-[28rem]"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["disabled","rules","model"])])}}}))}}})}();
