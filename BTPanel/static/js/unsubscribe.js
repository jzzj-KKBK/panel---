import{c as e,k as a,r as l,q as s,v as t,y as p,e as u,A as o,z as i,x as d,F as r,a_ as n,M as c,B as f,ai as m,aj as x,S as b,a9 as v,a7 as _,D as h}from"./base-lib.js?v=1756369731";import{o as y,K as g,iy as w,iz as j,a3 as V,iA as k,e as z}from"./utils-lib.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const C={class:"px-20px pt-24px pb-8px"},D={class:"mb-20px"},q={class:"w-260px"},A={class:"flex justify-end gap-0 w-full px-18px py-10px border-t border-[#edf1f2] rounded-b-4px bg-[#f6f8f8]"},I=z(e({__name:"unsubscribe",emits:["close"],setup(e,{expose:z,emit:I}){const P=I,U=a({http:"https://",url:""}),B=l(""),F=l([{label:"http://",value:"http://"},{label:"https://",value:"https://"}]),H=e=>{const{clipboardData:a}=e;if(a){const e=a.getData("text");if(e)if(-1===e.indexOf("://"))U.url=e;else{const a=e.split("://")[0]+"://";U.http=a,U.url=e.replace(a,"")}}e.preventDefault()},K=async()=>{y({title:"恢复默认",content:"确定要恢复默认退订设置吗？",onConfirm:async()=>{g({loading:"正在恢复...",message:!0,request:w(),success:()=>{M()}})}})},M=async()=>{const{data:e}=await j();if(V(e)){if(B.value=e.panel_url,B.value){const e=B.value.split("://")[0]+"://";U.http=e}if(e.url){const a=e.url.split("://")[0]+"://";U.http=a,U.url=e.url.replace(a,"")}}},O=()=>{P("close")},S=async()=>{g({loading:"正在设置...",message:!0,request:k({url:U.http+U.url}),success:()=>{P("close")}})};return M(),z({onConfirm:S}),(e,a)=>{const l=m,y=x,g=b,w=v,j=_,V=h;return s(),t("div",null,[p("div",C,[u(j,{model:d(U),"label-width":"auto"},{default:o(()=>[p("div",D,"链接："+i(d(B)||"--"),1),a[2]||(a[2]=p("div",{class:"mb-20px text-desc"},[p("div",{class:"mb-6px"},"注意："),p("div",{class:"leading-18px text-[#888] text-[12px]"}," 默认链接直接使用面板地址访问，用户可以根据IP端口判断出你的面板地址，建议你对原链接反向代理后填入以保证你的面板地址不被泄露。 ")],-1)),u(w,{label:"新链接：",prop:"url","label-position":"left","label-width":"50px"},{default:o(()=>[p("div",q,[u(g,{modelValue:d(U).url,"onUpdate:modelValue":a[1]||(a[1]=e=>d(U).url=e),class:"w-full",placeholder:"",onPaste:H},{prepend:o(()=>[u(y,{modelValue:d(U).http,"onUpdate:modelValue":a[0]||(a[0]=e=>d(U).http=e),style:{width:"90px"}},{default:o(()=>[(s(!0),t(r,null,n(d(F),e=>(s(),c(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),p("div",A,[u(V,{size:"default",onClick:K},{default:o(()=>[...a[3]||(a[3]=[f(" 恢复默认 ",-1)])]),_:1}),u(V,{type:"danger",size:"default",onClick:O},{default:o(()=>[...a[4]||(a[4]=[f(" 取消 ",-1)])]),_:1}),u(V,{type:"primary",size:"default",onClick:S},{default:o(()=>[...a[5]||(a[5]=[f(" 确定 ",-1)])]),_:1})])])}}}),[["__scopeId","data-v-c5c2726e"]]);export{I as default};
