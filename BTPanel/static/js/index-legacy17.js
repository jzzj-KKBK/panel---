!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",o=u.toStringTag||"@@toStringTag";function i(n,u,a,o){var i=u&&u.prototype instanceof l?u:l,s=Object.create(i.prototype);return t(s,"_invoke",function(n,t,u){var a,o,i,l=0,s=u||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(n,t){return a=n,o=0,i=e,p.n=t,c}};function d(n,t){for(o=n,i=t,r=0;!f&&l&&!u&&r<s.length;r++){var u,a=s[r],d=p.p,m=a[2];n>3?(u=m===t)&&(i=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=d&&((u=n<2&&d<a[1])?(o=0,p.v=t,p.n=a[1]):d<m&&(u=n<3||a[0]>t||t>m)&&(a[4]=n,a[5]=t,p.n=m,o=0))}if(u||n>1)return c;throw f=!0,t}return function(u,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),o=s,i=m;(r=o<2?e:i)||!f;){a||(o?o<3?(o>1&&(p.n=-1),d(o,i)):p.n=i:p.v=i);try{if(l=2,a){if(o||(u="next"),r=a[u]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,o<2&&(o=0)}else 1===o&&(r=a.return)&&r.call(a),o<2&&(i=TypeError("The iterator does not provide a '"+u+"' method"),o=1);a=e}else if((r=(f=p.n<0)?i:n.call(t,p))!==c)break}catch(r){a=e,o=1,i=r}finally{l=1}}return{value:r,done:f}}}(n,a,o),!0),s}var c={};function l(){}function s(){}function f(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(t(r={},a,function(){return this}),r),d=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,t(d,"constructor",f),t(f,"constructor",s),s.displayName="GeneratorFunction",t(f,o,"GeneratorFunction"),t(d),t(d,o,"Generator"),t(d,a,function(){return this}),t(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:m}})()}function t(e,n,r,u){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,n,r,u){function o(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?a?a(e,n,{value:r,enumerable:!u,configurable:!u,writable:!u}):e[n]=r:(o("next",0),o("throw",1),o("return",2))},t(e,n,r,u)}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){a(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function a(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var u=r.call(n,t||"default");if("object"!=e(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function o(e,n,t,r,u,a,o){try{var i=e[a](o),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(r,u)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,u){var a=e.apply(n,t);function i(e){o(a,r,u,i,c,"next",e)}function c(e){o(a,r,u,i,c,"throw",e)}i(void 0)})}}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return l(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./utils-lib-legacy.js?v=1756369731","./index-legacy103.js?v=1756369731","./index-legacy112.js?v=1756369731","./index-legacy123.js?v=1756369731","./index-legacy124.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./index-legacy130.js?v=1756369731","./column-legacy.js?v=1756369731","./database-legacy.js?v=1756369731","./useMethod-legacy4.js?v=1756369731","./useStore-legacy2.js?v=1756369731","./validator-legacy.js?v=1756369731","./index-legacy131.js?v=1756369731","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1756369731","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./index.vue_vue_type_style_index_0_scoped_b3c4124c_lang-legacy.js?v=1756369731"],function(e,t){"use strict";var r,a,o,l,s,f,p,d,m,y,v,b,g,h,_,w,k,j,x,C,S,O,q,P,A,M,T,D,L,E,V,R,U,G,I,F,N,B,H,Q,z,J,W,Y,K,Z,$,X,ee,ne,te,re,ue,ae,oe,ie,ce,le,se,fe,pe,de,me,ye,ve,be,ge,he,_e,we,ke,je,xe,Ce,Se,Oe,qe,Pe,Ae,Me,Te,De,Le,Ee,Ve,Re;return{setters:[function(e){r=e.u,a=e.K,o=e.l,l=e.L,s=e.an,f=e.M,p=e.ao,d=e.c,m=e.ap,y=e.J,v=e.ak,b=e.k,g=e.a0,h=e.aq,_=e.ar,e.as,w=e.S},function(e){k=e._},function(e){j=e._},function(e){x=e._},function(e){C=e.B},function(e){S=e.c,O=e.aE,q=e.g,P=e.k,A=e.r,M=e.w,T=e.Z,D=e.p,L=e.G,E=e.q,V=e.v,R=e.x,U=e.M,G=e.A,I=e.e,F=e.C,N=e.y,B=e.P,H=e.F,Q=e.z,z=e.B,J=e.Q,W=e.J,Y=e.H,K=e.al,Z=e.aW,$=e.D,X=e.ap,ee=e.ao,ne=e.an,te=e.aQ},function(e){re=e._},function(e){ue=e.a,ae=e.f,oe=e.g,ie=e.u},function(e){ce=e.addDbTypes,le=e.modifyDbTypes,se=e.delDbTypes,fe=e.getMysqlRootPwd,pe=e.getMysqlCloudServer,de=e.setAutoConfig,me=e.getDbTypes,ye=e.getMysqlList,ve=e.getAutoConfig},function(e){be=e.o,ge=e.a,he=e.b,_e=e.c,we=e.s,ke=e.d,je=e.e,xe=e.f,Ce=e.g,Se=e.h,Oe=e.i,qe=e.j,Pe=e.k,Ae=e.l},function(e){Me=e.g},function(e){Te=e.e,De=e.g,Le=e.p},function(e){Ee=e.B},function(e){Ve=e._},function(e){Re=e._},null,null,null],execute:function(){var Ue={class:"inline-flex items-center mr-2rem"},Ge={key:0,class:"text-[12px]"},Ie={class:"flex items-center"};e("default",S({__name:"index",setup:function(e){var S=Me(),Fe=S.refs,Ne=Fe.isRefreshTable,Be=Fe.isLoading,He=Fe.softData,Qe=Fe.isHaveServer,ze=Fe.isRefreshClassList,Je=S.resetRefresh,We=S.refreshTableList,Ye=O(),Ke=r(),Ze=Ke.payment,$e=Ke.mainWidth,Xe=q(function(){return Ze.value.authType}),en=P({status:!1,code:""}),nn=A(!1),tn=A(""),rn=P({total:0,page:1,row:10}),un=A([]),an=A([]),on=A(null),cn=A("all"),ln=A(""),sn=A([]),fn=A([]),pn=A([]),dn=q(function(){return $e.value>1530?280:$e.value>1440?200:$e.value>1200?150:120}),mn=q(function(){return!He.value.setup&&!Qe.value});M(ze,function(e){e&&(ze.value=!1,kn())});var yn,vn,bn=[{label:"设置权限",value:"permission",event:(vn=i(n().m(function e(t,r,a,o,i,c){return n().w(function(e){for(;;)if(0===e.n)return e.a(2,_e(a.value,"multlples",u(u({},c),{},{clearBatch:i})))},e)})),function(e,n,t,r,u,a){return vn.apply(this,arguments)})},{label:"设置分类",value:"class",event:(yn=i(n().m(function e(t,r,u,a,o,i){return n().w(function(e){for(;;)switch(e.n){case 0:we(u,o,gn,i);case 1:return e.a(2)}},e)})),function(e,n,t,r,u,a){return yn.apply(this,arguments)})}].concat(c(ke())),gn=A([]),hn=A([]),_n=function(e){ln.value=e,rn.page=1,We()},wn=function(){rn.page=1,We()},kn=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({request:me({db_type:"mysql"}),data:{msg:Array},success:function(e){var n=e.msg;gn.value=c(n.map(function(e){return{label:e.ps,value:String(e.id)}})),fn.value=[{label:"全部分类",value:"all"}].concat(c(n.map(function(e){return{label:e.ps,value:String(e.id)}}))),hn.value=fn.value.map(function(e){return e.value}).filter(function(e){return Number(e)>=0||"all"===e})}});case 1:return e.a(2,Promise.resolve(fn.value||[]))}},e)}));return function(){return e.apply(this,arguments)}}(),jn=function(){var e=i(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:"正在获取密码，请稍后...",request:fe({table:"config",id:1,key:"mysql_root"}),data:String});case 1:t=e.v,je(t);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),xn=function(e){o({title:"高级设置",area:[96,62],compData:e,component:function(){return l(function(){return t.import("./index-legacy128.js?v=1756369731")},void 0,t.meta.url)}})},Cn=function(){var e=i(n().m(function e(t,r){var u,a,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return u=f.success("正在跳转phpMyAdmin，请稍后..."),e.p=1,e.n=2,h({sName:"phpmyadmin"});case 2:if(a=e.v,o=a.data,"panel"!==r){e.n=5;break}if(null==o||!o.ext.auth){e.n=3;break}return e.a(2,f.error("当前phpMyAdmin已开启密码访问，请使用【通过公共访问】进行访问"));case 3:if("false"!==(null==o?void 0:o.setup)){e.n=4;break}return e.a(2,f.error("当前phpMyAdmin未安装，请先安装phpMyAdmin"));case 4:return e.n=5,_(t.username,t.password);case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:return e.p=7,u.close(),e.f(7);case 8:return e.a(2)}},e,null,[[1,6,7,8]])}));return function(n,t){return e.apply(this,arguments)}}(),Sn=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({request:pe(),data:[Array,sn]});case 1:return sn.value.length||(Qe.value=!1),e.a(2,sn.value)}},e)}));return function(){return e.apply(this,arguments)}}(),On=function(){var e=i(n().m(function e(){var t,r=arguments;return n().w(function(e){for(;;)switch(e.n){case 0:return""===(t=r.length>0&&void 0!==r[0]?r[0]:{p:rn.page,limit:rn.row,table:"databases",search:ln.value,sid:"all"===cn.value?"":cn.value}).sid&&delete t.sid,Number(t.sid)<0&&(t.type_id=t.sid,delete t.sid),e.n=1,a({loading:Be,request:ye(t),data:{data:[Array,un],page:w(rn),search_history:[Array,pn],error:String},success:function(e){Pe.value=e.data,e.error&&(en.status=!0,en.code=e.error)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),qn=function(){var e=i(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ve({name:"mysql"});case 1:t=e.v,r=t.data,nn.value=!!r.status,tn.value=r.cycle,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Pn=function(){var e=i(n().m(function e(t){return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return nn.value=t,e.p=1,e.n=2,a({loading:"正在设置自动备份数据库...",request:de({name:"mysql",status:t?1:0}),message:!0,success:function(e){e.status||(nn.value=!t)}});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,undefined.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}(),An=function(){return Ye.push({path:"/crontab/task"})},Mn=function(){localStorage.setItem("MYSQL-RECYCLE","true"),window.location.href="/files"},Tn=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return an.value=Ln(),!mn.value&&De({promises:[kn],delay:1e3}),qn(),On(),e.n=1,Sn();case 1:an.value=Ln(),s(an.value,"database_mysql_column");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Dn=[{name:"企业增量备份",ename:"increment",callback:function(){return xn("increment")}},{name:"远程数据库",ename:"server",callback:function(){return ge()}},{name:"关联服务",ename:"service",callback:function(){return xn("service")}},{name:"容量限制",ename:"capacity",callback:function(){return un.value.length?un.value.some(function(e){return 0===e.sid})?void function(e){"ltd"===Xe.value?0===e.sid?o({title:"数据库配额",area:50,component:function(){return l(function(){return t.import("./index-legacy129.js?v=1756369731")},void 0,t.meta.url)},compData:e,showFooter:!0}):f.error("仅本地数据库支持设置容量配额"):Le({sourceId:52})}(un.value.filter(function(e){return 0===e.sid})[0]):f.error("当前页暂无本地数据库进行容量配额！"):f.error("暂无数据库，请先添加数据库")}},{name:"敏感词检测",ename:"sensitive",callback:function(){return xn("sensitive")}},{name:"Mysql用户管理",ename:"user",callback:function(){return xn("user")}}],Ln=function(){return[ue({type:"page",key:"id"})].concat(c(xe(Oe)),[ae({event:function(e,n){return Ae(e,n)}}),Ce(sn.value,"mysql"),oe({table:"databases"}),ie([{isHide:function(e){return!!e.sid},onClick:function(e){return Cn(e,"panel")},title:"管理"},{onClick:_e,title:"权限"},{onClick:function(e){return Se(e)},title:"工具"},{onClick:function(e){return Oe(e)},title:"改密"},{onClick:function(e){return qe(e)},title:"删除"}])])};return M(function(){return Ne.value},function(){var e=i(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:if(!t){e.n=1;break}return e.n=1,On();case 1:Je();case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),T("serverList",sn),D(Tn),function(e,n){var t=re,r=p,u=K,a=Z,o=$,i=X,l=ee,s=ne,f=te,h=d,_=C,w=m,S=y,O=x,q=v,P=b,A=g,M=j,T=k,D=L("bt-loading");return E(),V("div",null,[R(mn)?(E(),U(t,{key:0,options:R(He)},{content:G(function(){return[I(Ve,{type:"Mysql"})]}),_:1},8,["options"])):F("",!0),R(en).status?(E(),U(r,{key:1,options:R(en)},null,8,["options"])):F("",!0),I(a,{type:"info",closable:!1,class:"!mb-[12px]","show-icon":""},{title:G(function(){return[N("div",Ue,[n[8]||(n[8]=N("div",{class:"mr-4 min-w-max text-[#555] text-[12px]"},"自动备份数据库",-1)),I(u,{size:"small",class:"mr-8px",modelValue:R(nn),"onUpdate:modelValue":n[0]||(n[0]=function(e){return B(nn)?nn.value=e:null}),width:36,onChange:Pn},null,8,["modelValue"]),R(nn)?(E(),V(H,{key:1},[N("span",null,Q(R(tn)),1),N("span",{class:"bt-link",onClick:An},"[前往计划任务]")],64)):(E(),V("div",Ge," 添加数据库后，可开启自动备份，保证数据安全。 "))])]}),_:1}),I(T,null,{"header-left":G(function(){return[N("div",Ie,[I(o,{type:"primary",onClick:n[1]||(n[1]=function(e){return R(be)(Sn)})},{default:G(function(){return c(n[9]||(n[9]=[z(" 添加数据库 ",-1)]))}),_:1}),R(He).setup?(E(),U(o,{key:0,onClick:jn},{default:G(function(){return c(n[10]||(n[10]=[z("root密码",-1)]))}),_:1})):F("",!0),I(o,{onClick:R(ge)},{default:G(function(){return c(n[11]||(n[11]=[z("远程数据库",-1)]))}),_:1},8,["onClick"]),I(o,{onClick:R(he)},{default:G(function(){return c(n[12]||(n[12]=[z("phpMyAdmin",-1)]))}),_:1},8,["onClick"]),I(s,{class:"ml-10px","split-button":"",type:"default",onClick:n[2]||(n[2]=J(function(e){return xn("route")},["stop"])),onCommand:xn},{dropdown:G(function(){return[I(l,null,{default:G(function(){return[I(i,{command:"route"},{default:G(function(){return c(n[13]||(n[13]=[z("数据库备份",-1)]))}),_:1}),I(i,{command:"user"},{default:G(function(){return c(n[14]||(n[14]=[z(" 用户管理 ",-1)]))}),_:1}),I(i,{command:"service"},{default:G(function(){return c(n[15]||(n[15]=[z("关联服务",-1)]))}),_:1}),I(i,{command:"process"},{default:G(function(){return c(n[16]||(n[16]=[z(" 守护进程 ",-1)]))}),_:1}),I(i,{command:"reinforce"},{default:G(function(){return c(n[17]||(n[17]=[z(" 等保加固 ",-1)]))}),_:1})]}),_:1})]}),default:G(function(){return[n[18]||(n[18]=z(" 高级设置 ",-1))]}),_:1}),I(Re,{"comp-data":R(sn),class:"mx-[1rem]"},null,8,["comp-data"]),I(f,{content:"点击跳转数据库回收站",placement:"top"},{default:G(function(){return[I(o,{type:"default",onClick:Mn},{default:G(function(){return c(n[19]||(n[19]=[N("i",{class:"svgtofont-el-delete mr-2px"},null,-1),N("span",{class:"<2xl:hidden"},"回收站",-1)]))}),_:1})]}),_:1}),R(He).setup&&R($e)>1200?(E(),U(Ee,{key:1,class:"ml-[1rem]","plugin-name":"mysql","is-request":!1,pluginInfo:R(He)},null,8,["pluginInfo"])):F("",!0),I(h,{onClick:n[3]||(n[3]=function(e){return R(Te)({name:"数据库",type:12,id:17})}),icon:"desired",class:"ml-[12px] <2xl:hidden",iconClass:"text-1.6rem"},{default:G(function(){return c(n[20]||(n[20]=[z(" 需求反馈 ",-1)]))}),_:1})])]}),"header-right":G(function(){return[I(_,{class:"mr-[10px] !w-[14rem]",modelValue:R(cn),"onUpdate:modelValue":n[4]||(n[4]=function(e){return B(cn)?cn.value=e:null}),onChange:wn,name:"Mysql",options:R(fn),config:{getClassList:kn,addClass:function(e){var n=e.ps;return ce({ps:n,db_type:"mysql"})},editClass:function(e){var n=e.ps,t=e.id;return le({ps:n,id:t,db_type:"mysql"})},deleteClass:function(e){var n=e.id;return se({id:n,db_type:"mysql"})}},ignore:R(hn)},null,8,["modelValue","options","config","ignore"]),I(S,{class:W("!w-[".concat(R(dn),"px]")),disabledPopover:!1,modelValue:R(ln),"onUpdate:modelValue":n[5]||(n[5]=function(e){return B(ln)?ln.value=e:null}),clearable:"",placeholder:"请输入数据库名称/备注",onSearch:_n},{default:G(function(){return[I(w,{list:{historyList:R(pn),recommendList:Dn},name:"databases",keys:"databases",onUpdate:R(We),onSearch:_n},null,8,["list","onUpdate"])]}),_:1},8,["class","modelValue"]),I(O,{class:"ml-[10px]",onRefresh:R(We)},null,8,["onRefresh"]),I(q,{name:"database_mysql",class:"ml-[10px]","table-ref":R(on),column:R(an)},null,8,["table-ref","column"])]}),content:G(function(){return[Y(I(P,{ref_key:"mysqlDbTableRef",ref:on,column:R(an),data:R(un),total:R(rn).total},null,8,["column","data","total"]),[[D,R(Be)]])]}),"footer-left":G(function(){return[I(A,{options:bn,"table-ref":R(on)},null,8,["table-ref"])]}),"footer-right":G(function(){return[I(M,{total:R(rn).total,page:R(rn).page,"onUpdate:page":n[6]||(n[6]=function(e){return R(rn).page=e}),row:R(rn).row,"onUpdate:row":n[7]||(n[7]=function(e){return R(rn).row=e}),onChange:R(We)},null,8,["total","page","row","onChange"])]}),_:1})])}}}))}}})}();
