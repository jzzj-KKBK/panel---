import{fj as e,bv as a,fk as t,a7 as s,a8 as l,W as r,h as i,b as o}from"./utils-lib.js?v=1756369731";import{_ as n}from"./index103.js?v=1756369731";import{B as p}from"./index140.js?v=1756369731";import{c as m,G as d,q as u,v as c,x as f,F as h,e as x,A as b,D as v,B as y,M as k,C as g,y as j,H as C,P as _}from"./base-lib.js?v=1756369731";import{a as B,b as V,u as F}from"./column.js?v=1756369731";import{u as S,S as w}from"./useStore4.js?v=1756369731";import{u as E,i as T,e as q,a as H,h as R,c as U,b as A,s as D,d as G,f as L,g as M,j as P,k as W}from"./useController17.js?v=1756369731";const z={class:"h-full"},I={key:1,class:"bg-[#7F7F7F] flex items-center justify-center h-full",style:{"min-height":"600px"}},J={class:"bg-white px-[48px] py-[16px] text-[#333] flex"},K={class:"p-[20px]"},N=m({__name:"index",setup(m,{expose:N}){const O=o(),{isBindExtranet:Q,siteType:X}=S(),{jumpTabEvent:Y}=w(),{isRefreshList:Z}=E(),$=l([{label:"启用重定向规则",value:"start",event:W},{label:"停用重定向规则",value:"stop",event:W},{label:"删除重定向规则",value:"delete",event:W}]),{BtTable:ee,BtRefresh:ae,BtBatch:te,refresh:se}=e({request:T,columns:[B(),{label:"被重定向",render:e=>{var t;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null==(t=a(e.redirectdomain,"array",[]))?void 0:t.join("、"):e.redirectpath}},{label:"重定向类型",prop:"domainorpath",render:e=>e.errorpage?"错误":"domain"===e.domainorpath?"域名":"路径"},{label:"重定向到",render:e=>e.topath?e.topath:e.tourl},V({prop:"type",event:L,data:["已停止","运行中"]}),F([{width:70,title:"配置文件",onClick:e=>{if(!e.type)return O.warn("请先启用重定向规则再查看配置文件");M(e)}},{title:"编辑",onClick:e=>{e.errorpage?H(e):q(e)}},{onClick:P,title:"删除"}])],extension:[t(),$,s(Z)]});return N({init:se}),(e,a)=>{const t=n,s=r,l=i,o=d("bt-loading");return u(),c("div",z,[f(Q)?(u(),c(h,{key:0},[x(t,null,{"header-left":b(()=>[x(f(v),{type:"primary",onClick:a[0]||(a[0]=e=>f(q)())},{default:b(()=>[...a[7]||(a[7]=[y("添加重定向",-1)])]),_:1}),["php","html"].includes(f(X))?(u(),k(f(v),{key:0,type:"default",onClick:a[1]||(a[1]=e=>f(H)())},{default:b(()=>[...a[8]||(a[8]=[y("404重定向",-1)])]),_:1})):g("",!0)]),"header-right":b(()=>[x(f(ae))]),content:b(()=>[x(f(ee),{"max-height":460})]),"footer-left":b(()=>[x(f(te))]),_:1}),x(s,{class:"mt-2rem",options:f(R),"list-style":"disc"},null,8,["options"])],64)):(u(),c("div",I,[j("div",J,[a[9]||(a[9]=y(" 请开启 ",-1)),j("span",{class:"mx-[.4rem] bt-link",onClick:a[2]||(a[2]=e=>f(Y)("mapping"))},"外网映射"),a[10]||(a[10]=y(" 后查看配置信息 ",-1))])])),x(l,{title:"编辑配置文件",modelValue:f(G),"onUpdate:modelValue":a[6]||(a[6]=e=>_(G)?G.value=e:null),area:54},{default:b(()=>[j("div",K,[a[12]||(a[12]=y(" 提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换 ",-1)),C(x(f(p),{class:"!h-[36rem] my-[8px]",ref:"aceEditor",modelValue:f(A),"onUpdate:modelValue":a[3]||(a[3]=e=>_(A)?A.value=e:null),onSave:a[4]||(a[4]=e=>f(D)())},null,8,["modelValue"]),[[o,f(U)]]),x(f(v),{type:"primary",onClick:a[5]||(a[5]=e=>f(D)())},{default:b(()=>[...a[11]||(a[11]=[y("保存",-1)])]),_:1}),a[13]||(a[13]=j("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[j("li",null,"此处为该重定向的配置文件，若您不了解配置规则,请勿随意修改。")],-1))])]),_:1},8,["modelValue"])])}}});export{N as _};
