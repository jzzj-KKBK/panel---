!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function u(n,a,l,o){var u=a&&a.prototype instanceof i?a:i,c=Object.create(u.prototype);return r(c,"_invoke",function(n,r,a){var l,o,u,i=0,c=a||[],p=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return l=t,o=0,u=e,f.n=n,s}};function v(n,r){for(o=n,u=r,t=0;!p&&i&&!a&&t<c.length;t++){var a,l=c[t],v=f.p,d=l[2];n>3?(a=d===r)&&(u=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=v&&((a=n<2&&v<l[1])?(o=0,f.v=r,f.n=l[1]):v<d&&(a=n<3||l[0]>r||r>d)&&(l[4]=n,l[5]=r,f.n=d,o=0))}if(a||n>1)return s;throw p=!0,r}return function(a,c,d){if(i>1)throw TypeError("Generator is already running");for(p&&1===c&&v(c,d),o=c,u=d;(t=o<2?e:u)||!p;){l||(o?o<3?(o>1&&(f.n=-1),v(o,u)):f.n=u:f.v=u);try{if(i=2,l){if(o||(a="next"),t=l[a]){if(!(t=t.call(l,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),o=1);l=e}else if((t=(p=f.n<0)?u:n.call(r,f))!==s)break}catch(t){l=e,o=1,u=t}finally{i=1}}return{value:t,done:p}}}(n,l,o),!0),c}var s={};function i(){}function c(){}function p(){}t=Object.getPrototypeOf;var f=[][l]?t(t([][l]())):(r(t={},l,function(){return this}),t),v=p.prototype=i.prototype=Object.create(f);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,r(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=p,r(v,"constructor",p),r(p,"constructor",c),c.displayName="GeneratorFunction",r(p,o,"GeneratorFunction"),r(v),r(v,o,"Generator"),r(v,l,function(){return this}),r(v,"toString",function(){return"[object Generator]"}),(n=function(){return{w:u,m:d}})()}function r(e,t,n,a){var l=Object.defineProperty;try{l({},"",{})}catch(e){l=0}r=function(e,t,n,a){function o(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?l?l(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},r(e,t,n,a)}function a(e,t,n,r,a,l,o){try{var u=e[l](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,l){var o=e.apply(t,n);function u(e){a(o,r,l,u,s,"next",e)}function s(e){a(o,r,l,u,s,"throw",e)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./index-legacy103.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./site-legacy.js?v=1756369731","./useController-legacy13.js?v=1756369731","./useStore-legacy11.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./column-legacy.js?v=1756369731","./useStore-legacy12.js?v=1756369731","./useStore-legacy4.js?v=1756369731","./useController-legacy6.js?v=1756369731","./validator-legacy.js?v=1756369731","./useController-legacy5.js?v=1756369731","./useMethod-legacy5.js?v=1756369731","./useController-legacy4.js?v=1756369731","./useStore-legacy10.js?v=1756369731"],function(t,r){"use strict";var a,o,u,s,i,c,p,f,v,d,y,m,h,g,b,x,w,k,_,j,S,C,O,T,D,A,P,I;return{setters:[function(e){a=e.A,o=e.k,u=e.W,s=e.h,i=e.b},function(e){c=e._},function(e){p=e.c,f=e.s,v=e.r,d=e.e,y=e.p,m=e.q,h=e.v,g=e.B,b=e.y,x=e.z,w=e.x,k=e.A,_=e.F,j=e.a_,S=e.C,C=e.M,O=e.D},function(e){T=e.validateDomain,D=e.authDomainApi,A=e.getOrderDetail},function(e){P=e.l},function(e){I=e.u},null,null,null,null,null,null,null,null,null,null,null],execute:function(){var r={class:"p-[1.5rem]"},M={class:"ml-[.4rem] text-danger"},G={class:"max-h-[38rem] overflow-auto"},E={key:0,class:"flex justify-end"},F={class:"h-full overflow-auto bg-black text-white"},L=["innerHTML"];t("default",p({__name:"index",props:{compData:{type:Object,default:function(){}}},emits:["close"],setup:function(t,p){var R=p.emit,H=f(I()),N=H.activeTabs,q=H.sslIsRefresh,U=H.testIsRefresh,z=H.encryptIsRefresh,B=H.otherIsRefresh,W=i(),X=t,$=R,J=v({}),K=v([]),Q=v(!1),V=v("");v();var Y=v([]),Z=v(!1),ee=v(""),te=v([{text:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{text:""},{text:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}]),ne=v([{label:"解析域名",prop:"domain",showOverflowTooltip:!0},{label:"记录值",prop:"auth_value",showOverflowTooltip:!0,render:function(e,t){var n="dns"===J.value.auth_type?e.auth_value:e.file_path;return d("div",{class:"flex items-center"},[d("div",{class:"truncate w-[15rem]"},[n]),d("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return a({value:n})}},null)])}},{label:"类型",prop:"type",showOverflowTooltip:!0,render:function(e,t){return"dns"===J.value.auth_type?d("span",null,[e.type]):d("div",{class:"flex items-center"},[d("div",{class:"truncate w-[15rem]"},[e.content]),d("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return a({value:e.content})}},null)])}},{label:"必需",prop:"must",width:100}]),re=function(e){var t="";if(void 0===e[1].challenges)t+="<p><span>响应状态：</span>"+e[1].status+"</p>",t+="<p><span>错误类型：</span>"+e[1].type+"</p>",t+="<p><span>错误来源：</span><a class='bt-link' href='https://letsencrypt.org/' target='_blank' rel='noreferrer noopener'>Let's Encrypt官网</a></p>",t+='<div class="flex flex-col">错误代码：<pre class="!text-white  !bg-[#333] !inline-block  ! ml-[4px] ">'+e[1].detail+"</pre></div>";else if(e[1].challenges[1]||e[1].challenges[0]&&(e[1].challenges[1]=e[1].challenges[0]),"invalid"===e[1].status){for(var n="",r=0;r<K.value.length;r++){var a,l;if(-1!=(null===(a=K.value[r].outerText)||void 0===a?void 0:a.indexOf(e[1].identifier.value))){var o=null===(l=K.value[r].outerText)||void 0===l?void 0:l.split("\t");if((null==o?void 0:o.length)>1){n=o[1];break}}}if(t+="<p><span>验证域名：</span>"+e[1].identifier.value+"</p>","dns"===J.value.type)t+="<p><span>验证解析：</span>"+("_acme-challenge."+e[1].identifier.value)+"</p>",t+="<p><span>验证内容：</span>"+n+"</p>",t+='<div class="flex flex-col">错误代码：<pre class="!text-white  !bg-[#333] !inline-block  ! ml-[4px] ">'+e[1].challenges[1].error.detail+"</pre></div>";else t+="<p><span>验证URL：</span><a class='bt-link' href='"+("http://"+e[1].identifier.value+"/.well-known/acme-challenge/"+e[1].challenges[0].token)+"' target='_blank' rel='noreferrer noopener'>点击查看</a></p>",t+="<p><span>验证内容：</span>"+e[1].challenges[0].token+"</p>",t+='<div class="flex flex-col">错误代码：<pre class="!text-white  !bg-[#333] !inline-block  ! ml-[4px] ">'+e[1].challenges[0].error.detail+"</pre></div>";t+="<p><span>验证结果：</span> <a style='color:red;'>验证失败</a></p>"}W.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,icon:"x",message:'<div class="flex items-center justify-center  mt-[8px]  mb-[20px]"><i class="svgtofont-el-circle-close-filled  mr-[8px] text-[#F56C6C] text-[3rem]"></i><a style="color: red;font-size:16px">'+e[0]+'</a></div><div class=" p-[20px] border border-1 border-color-[#dedede] ! rounded-[4px] ! mb-[12px] !leading-[26px] bg-[#f8f8f8]">'+t+"</div>",showClose:!0,duration:0})},ae=function(){var e=l(n().m(function e(){var t,r,a,l,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Q.value=!0,e.n=1,P();case 1:return t=e.v,e.n=2,T({index:J.value.index});case 2:if(r=e.v,a=r.data,t._props.onCancel(),Q.value=!1,!0!==a.status){e.n=3;break}null===(l=(o={ssl:function(){return q.value=!0},test:function(){return U.value=!0},encrypt:function(){return z.value=!0},other:function(){return B.value=!0}})[N.value])||void 0===l||l.call(o),$("close"),e.n=5;break;case 3:if("string"!=typeof(null==a?void 0:a.msg)){e.n=4;break}return e.a(2,W.error(a.msg));case 4:re(a);case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:return e.a(2)}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),le=function(){var e=l(n().m(function e(t){var r,a,l;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Q.value=!0,e.n=1,P();case 1:return r=e.v,e.n=2,D({index:J.value.index,domain:t});case 2:if(a=e.v,l=a.data,r._props.onCancel(),Q.value=!1,"valid"!==l.status){e.n=3;break}W.success("验证成功"),e.n=6;break;case 3:if(!0!==l.status){e.n=4;break}$("close"),e.n=6;break;case 4:if("string"!=typeof(null==l?void 0:l.msg)){e.n=5;break}return e.a(2,W.error(l.msg));case 5:re(l);case 6:e.n=8;break;case 7:e.p=7,e.v;case 8:return e.a(2)}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=l(n().m(function e(t){var r,a,l;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=null,e.p=1,r=W.load("正在验证证书申请状态，请稍后..."),e.n=2,A({index:t.index});case 2:(a=e.v).status?(Y.value=a.data.auths,a.data.hasOwnProperty("error")?(Z.value=a.data.error,ee.value=a.data.error_msg):(Z.value=!1,ee.value=""),J.value=t,ne.value[1].label="dns"===t.auth_type?"记录值":"文件路径",ne.value[1].prop="dns"===t.auth_type?"auth_value":"file_path",ne.value[2].label="dns"===t.auth_type?"类型":"文件内容",ne.value[2].prop="dns"===t.auth_type?"type":"content",te.value[1].text="可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(null===(l=K.value[0])||void 0===l||null===(l=l.domain)||void 0===l?void 0:l.replace("*.",""))):(W.request(a),$("close")),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,r&&r.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}();return y(function(){oe(X.compData.row)}),function(t,n){var a=o,l=O,i=c,p=u,f=s;return m(),h("div",r,[n[2]||(n[2]=g(" 请按以下列表做TXT解析: ",-1)),b("span",M,x(w(ee)),1),d(i,null,{content:k(function(){return[b("div",G,[(m(!0),h(_,null,j(w(Y),function(t,r){return m(),h(_,null,[t.data.length?(m(),h("div",{key:r},[b("span",null,"验证域名："+x(t.domain),1),d(a,{class:"my-[1rem]",column:w(ne),data:t.data},null,8,["column","data"]),w(Z)?(m(),h("div",E,[d(l,{type:"default",onClick:function(e){return le(t.domain)}},{default:k(function(){return e(n[0]||(n[0]=[g("验证",-1)]))}),_:2},1032,["onClick"])])):S("",!0)])):S("",!0)],64)}),256))])]}),"footer-right":k(function(){return[w(Z)?S("",!0):(m(),C(l,{key:0,type:"primary",onClick:ae},{default:k(function(){return e(n[1]||(n[1]=[g("验证",-1)]))}),_:1}))]}),_:1}),d(p,{list:w(te),listStyle:"disc",class:"ml-[2rem]"},null,8,["list"]),d(f,{visible:w(Q),area:[50,25],"show-close":!1},{default:k(function(){return[b("div",F,[b("pre",{innerHTML:w(V),class:"whitespace-pre-wrap p-[1rem]"},null,8,L)])]}),_:1},8,["visible"])])}}}))}}})}();
