import{ay as a,G as e,K as s,gG as r,gH as t,gI as l,e as m}from"./utils-lib.js?v=1756369731";import{c as o,g as i,aB as c,U as u,p,q as d,v as n,e as v,x as g}from"./base-lib.js?v=1756369731";import{d as f,k,F as _,b,c as h}from"./form-item.js?v=1756369731";import{k as j}from"./useMethods.js?v=1756369731";const y={class:"flex flex-col lib-box"},x=m(o({__name:"add-compose",props:{compData:{default:()=>({})}},emits:["close"],setup(m,{expose:o,emit:x}){const q=m,w=x,{refs:{orchestrationData:D}}=a(),{BtForm:C,submit:A,param:B}=e({data:()=>({template_id:"",project_name:"",remark:""}),options:a=>i(()=>[f([k("容器编排模板","template_id",G.value,{attrs:{class:"!w-[30rem]",placeholder:"请选择编排模板",onChange:e=>F(e,a)},rules:[{required:!0,message:"请选择编排模板",trigger:"change"}]}),_(()=>c("span",{class:"cursor-pointer text-primary h-[3.2rem] leading-[3.2rem] ml-[1.5rem] inline-block",onClick:async()=>{j(I)}},"创建"),{key:"create",rules:{}})]),b("名称","project_name",{attrs:{class:"!w-[30rem]",placeholder:"请输入容器编排名称"},rules:[{required:!0,message:"请输入容器编排名称",trigger:"blur"}]}),h("备注","remark",{attrs:{class:"!w-[30rem]",placeholder:"请输入备注"}})]),submit:async(a,e,l)=>{await e();const m={template_id:a.value.template_id,project_name:a.value.project_name,remark:a.value.remark,...q.compData.id?{project_id:q.compData.id}:{}};s({request:q.compData.isEdit?r({data:JSON.stringify(m)}):t({data:JSON.stringify(m)}),loading:"提交中...",message:!0,success:a=>{a.status&&(w("close"),D.value.refreshList="force")}})}}),F=(a,e)=>{var s;e.value.remark=null==(s=G.value.find(e=>e.value===a))?void 0:s.remark},G=u([]),I=async()=>{s({request:l(),data:Array,success:a=>{var e,s;G.value=a.map(a=>({value:a.id,label:a.name,remark:a.remark})),B.value.template_id=(null==(e=G.value[0])?void 0:e.value)||"",B.value.remark=(null==(s=G.value[0])?void 0:s.remark)||""}})};return p(()=>{I()}),o({onConfirm:A}),(a,e)=>(d(),n("div",y,[v(g(C),{"label-width":"90px"})]))}}),[["__scopeId","data-v-a5772048"]]);export{x as A};
