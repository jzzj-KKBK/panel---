import{_ as a}from"./index103.js?v=1756369731";import{R as t,v as e,K as s,k as r}from"./utils-lib.js?v=1756369731";import{c as o,r as i,aB as l,p as n,G as p,q as m,v as c,e as d,A as f,B as u,H as h,x as b,D as g}from"./base-lib.js?v=1756369731";import{backupSqlite as y,delSqliteBackup as _,getSqliteBackup as j}from"./database.js?v=1756369731";import{u as w}from"./column.js?v=1756369731";import{g as k}from"./useStore2.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";const x={class:"p-[20px] h-full"},q=o({__name:"back-sqlite",props:{compData:{default:()=>({})}},setup(o){const{refreshTableList:q}=k(),v=o,D=i(!1),O=i([]),S=async()=>{try{await s({loading:"正在备份数据库，请稍后...",message:!0,request:y({data:JSON.stringify({path:v.compData.path})})}),C(),q()}catch(a){}},B=[{label:"名称",prop:"name",showOverflowTooltip:!0},{label:"时间",width:160,render:a=>l("span",t(a.mtime))},{label:"大小",render:a=>e(a.size)},w([{onClick:a=>{window.open("/download?filename="+a.filepath,"_blank","noopener,noreferrer")},title:"下载"},{onClick:async a=>{try{await s({loading:"正在删除数据库备份文件...",message:!0,request:_({data:JSON.stringify({file:a.filepath})})}),C(),q()}catch(t){}},title:"删除"}])],C=async()=>{await s({loading:D,request:j({data:JSON.stringify({path:v.compData.path})}),data:[Array,O]})};return n(()=>{C()}),(t,e)=>{const s=g,o=r,i=a,l=p("bt-loading");return m(),c("div",x,[d(i,null,{"header-left":f(()=>[d(s,{type:"primary",onClick:S},{default:f(()=>[...e[0]||(e[0]=[u("备份",-1)])]),_:1})]),content:f(()=>[h(d(o,{ref:"routeBackup",data:b(O),"max-height":400,column:B},null,8,["data"]),[[l,b(D)],[l,"正在加载中，请稍后...","title"]])]),_:1})])}}});export{q as default};
