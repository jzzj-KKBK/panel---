!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",u=t.toStringTag||"@@toStringTag";function l(t,n,a,u){var l=n&&n.prototype instanceof s?n:s,c=Object.create(l.prototype);return o(c,"_invoke",function(t,n,o){var a,u,l,s=0,c=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return a=r,u=0,l=e,m.n=t,i}};function d(t,n){for(u=t,l=n,r=0;!f&&s&&!o&&r<c.length;r++){var o,a=c[r],d=m.p,p=a[2];t>3?(o=p===n)&&(l=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(u=0,m.v=n,m.n=a[1]):d<p&&(o=t<3||a[0]>n||n>p)&&(a[4]=t,a[5]=n,m.n=p,u=0))}if(o||t>1)return i;throw f=!0,n}return function(o,c,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,p),u=c,l=p;(r=u<2?e:l)||!f;){a||(u?u<3?(u>1&&(m.n=-1),d(u,l)):m.n=l:m.v=l);try{if(s=2,a){if(u||(o="next"),r=a[o]){if(!(r=r.call(a,l)))throw TypeError("iterator result is not an object");if(!r.done)return r;l=r.value,u<2&&(u=0)}else 1===u&&(r=a.return)&&r.call(a),u<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((r=(f=m.n<0)?l:t.call(n,m))!==i)break}catch(r){a=e,u=1,l=r}finally{s=1}}return{value:r,done:f}}}(t,a,u),!0),c}var i={};function s(){}function c(){}function f(){}r=Object.getPrototypeOf;var m=[][a]?r(r([][a]())):(o(r={},a,function(){return this}),r),d=f.prototype=s.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,u,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=f,o(d,"constructor",f),o(f,"constructor",c),c.displayName="GeneratorFunction",o(f,u,"GeneratorFunction"),o(d),o(d,u,"Generator"),o(d,a,function(){return this}),o(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:l,m:p}})()}function o(e,r,t,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,r,t,n){function u(r,t){o(e,r,function(e){return this._invoke(r,t,e)})}r?a?a(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(u("next",0),u("throw",1),u("return",2))},o(e,r,t,n)}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach(function(r){l(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function l(r,t,n){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function i(e,r,t,n,o,a,u){try{var l=e[a](u),i=l.value}catch(e){return void t(e)}l.done?r(i):Promise.resolve(i).then(n,o)}function s(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var a=e.apply(r,t);function u(e){i(a,n,o,u,l,"next",e)}function l(e){i(a,n,o,u,l,"throw",e)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./input-popover.vue_vue_type_script_setup_true_lang-legacy.js?v=1756369731","./useStore-legacy4.js?v=1756369731","./site-legacy.js?v=1756369731","./useStore-legacy11.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731"],function(e,t){"use strict";var o,a,l,i,c,f,m,d,p,g,y,b,v,h,w,S,_,j,O,P,C,T,V,A,k,x,L,E,D,U,q;return{setters:[function(e){o=e.fZ,a=e.K,l=e.c,i=e.W,c=e.b},function(e){f=e.c,m=e.s,d=e.r,p=e.p,g=e.q,y=e.v,b=e.e,v=e.A,h=e.y,w=e.B,S=e.x,_=e.F,j=e.a_,O=e.M,P=e.aW,C=e.a9,T=e.ai,V=e.aj,A=e.D,k=e.a7},function(e){x=e._},function(e){L=e.u},function(e){E=e.applyTrustAsiaCert,D=e.verifyTrustAsiaCret,U=e.getDomainList},function(e){q=e.u},null],execute:function(){var t={class:"relative p-[1.6rem] w-[90%] mx-[auto]"},N={class:"text-[1.2rem] flex items-center"},G={class:"leading-7 mt-[.2rem]"},I={class:"inline-block"},R={class:"flex flex-row"};e("default",f({__name:"apply-bt-ssl",emits:["close"],setup:function(e,f){var F=f.emit,H=m(q()).testIsRefresh,M=c(),W=F;L();var B=[{content:"注意：请勿将SSL证书用于非法网站，一经发现，吊销证书。",class:"text-danger"},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败(包括根域名)。"},{content:"宝塔SSL申请的是免费版TrustAsia DV SSL CA - G5证书，仅支持单个域名申请。"},{content:"建议使用二级域名为www的域名申请证书,此时系统会默认赠送顶级域名为可选名称"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:'测试SSL申请注意事项及教程<a href="https://www.bt.cn/bbs/thread-33113-1-1.html" target="_blank" class="bt-link" rel="noreferrer noopener"> 使用帮助</a>',isHtml:!0}],K=d(),Z=d(),$=d({domain:"",orgName:"",orgRegion:"",orgCity:"",orgAddress:"",orgPhone:"",orgPostalCode:"",orgDivision:"总务"}),z=d({orgName:[{required:!0,message:"请输入个人/公司名称",trigger:["blur","change"]}],orgRegion:[{required:!0,message:"请输入所在省份",trigger:["blur","change"]}],orgCity:[{required:!0,message:"请输入所在市/县",trigger:["blur","change"]}],orgAddress:[{required:!0,message:"请输入个人/公司地址",trigger:["blur","change"]}],orgPhone:[{required:!0,message:"请输入手机号码",validator:function(e,r,t){o(r)?t():t(new Error("请输入正确的手机号码"))},trigger:["blur","change"]}],orgPostalCode:[{required:!0,message:"请输入邮政编码",validator:function(e,r,t){6===r.length?t():t(new Error("请输入正确的邮政编码"))},trigger:["blur","change"]}]}),J=function(){var e=s(n().m(function e(){var r,t,o,l,i,s,c,f;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,Z.value.validate();case 1:if(!e.v){e.n=9;break}return e.p=2,e.n=3,a({loading:"正在提交证书申请资料，请稍后...",request:E(u({},$.value))});case 3:if(r=e.v,t=r.status,o=r.data,l=r.msg,!t){e.n=5;break}return W("close"),M.success(o.msg||l||"申请成功"),e.n=4,a({loading:"正在验证证书申请状态，请稍后...",request:D({partnerOrderId:o.partnerOrderId,siteName:$.value.domain})});case 4:i=e.v,s=i.status,c=i.data,f=i.msg,s?"COMPLETED"==c.stateCode?M.success("验证成功！"):M.success("等待CA验证中，若长时间未能成功验证，请登录官网使用DNS方式重新申请..."):M.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:f,type:"error",duration:0,showClose:!0}),e.n=6;break;case 5:M.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:(null==o?void 0:o.msg)||l,type:"error",duration:0,showClose:!0});case 6:H.value=!0,e.n=8;break;case 7:e.p=7,e.v;case 8:return e.p=8,e.f(8);case 9:return e.a(2)}},e,null,[[2,7,8,9]])}));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=s(n().m(function e(){var r,t,o,a;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=null,e.p=1,r=M.load("正在获取所有域名列表，请稍后..."),e.n=2,U();case 2:o=e.v,a=o.data,K.value=a,null!==(t=K.value)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.length&&($.value.domain=K.value.data[0].name),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,r&&r.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return p(function(){Q()}),function(e,n){var o=l,a=P,u=C,s=T,c=V,f=A,m=k,d=i;return g(),y("div",t,[b(a,{type:"error",closable:!1},{title:v(function(){return[h("span",N,[n[9]||(n[9]=h("span",{class:"svgtofont-hint-confirm-icon !text-[2rem] mr-[.5rem]"},null,-1)),h("div",G,[n[8]||(n[8]=w(" 提示：尊敬的用户您好，感谢您对宝塔免费证书的支持，由于证书签发机制的调整，原一年的免费证书，将缩短至90天。本调整将于2024年4月25日生效。请注意及时续签。 ",-1)),h("div",I,[b(o,{href:"https://www.trustasia.com/view-free-ssl-one-year-adjustment-announcement/",target:"_blank"},{default:v(function(){return r(n[7]||(n[7]=[w(" 查看详情 ",-1)]))}),_:1})])])])]}),_:1}),b(m,{class:"mt-[1rem]",rules:S(z),ref_key:"applySslInfoForm",ref:Z,model:S($),"label-width":"100px"},{default:v(function(){return[b(u,{label:"证书信息"},{default:v(function(){return r(n[10]||(n[10]=[h("span",{class:"text-primary"}," TrustAsia TLS RSA CA(免费版)",-1)]))}),_:1}),b(u,{label:"域名",prop:"domain"},{default:v(function(){return[b(c,{modelValue:S($).domain,"onUpdate:modelValue":n[0]||(n[0]=function(e){return S($).domain=e}),class:"!w-[36rem]",filterable:"",placeholder:"请选择"},{default:v(function(){var e;return[(g(!0),y(_,null,j(null===(e=S(K))||void 0===e?void 0:e.data,function(e){return g(),O(s,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),b(u,{label:"个人/公司名称",prop:"orgName"},{default:v(function(){return[b(x,{modelValue:S($).orgName,"onUpdate:modelValue":n[1]||(n[1]=function(e){return S($).orgName=e}),placeholderTips:"请输入个人/公司名称，必填项",customClass:"!w-[36rem]"},null,8,["modelValue"])]}),_:1}),b(u,{label:"所在地区",prop:"orgRegion"},{default:v(function(){return[h("div",R,[b(x,{modelValue:S($).orgRegion,"onUpdate:modelValue":n[2]||(n[2]=function(e){return S($).orgRegion=e}),placeholderTips:"请输入所在省份，必填项",customClass:"mr-[1.6rem] !w-[17rem]"},null,8,["modelValue"]),b(x,{modelValue:S($).orgCity,"onUpdate:modelValue":n[3]||(n[3]=function(e){return S($).orgCity=e}),placeholderTips:"请输入所在市/县，必填项",customClass:"!w-[17.4rem]"},null,8,["modelValue"])])]}),_:1}),b(u,{label:"地址",prop:"orgAddress"},{default:v(function(){return[b(x,{modelValue:S($).orgAddress,"onUpdate:modelValue":n[4]||(n[4]=function(e){return S($).orgAddress=e}),placeholderTips:"请输入个人/公司地址，必填项",customClass:"!w-[36rem]"},null,8,["modelValue"])]}),_:1}),b(u,{label:"手机",prop:"orgPhone"},{default:v(function(){return[b(x,{modelValue:S($).orgPhone,"onUpdate:modelValue":n[5]||(n[5]=function(e){return S($).orgPhone=e}),placeholderTips:"请输入手机号码，必填项",customClass:"!w-[36rem]"},null,8,["modelValue"])]}),_:1}),b(u,{label:"邮政编码",prop:"orgPostalCode"},{default:v(function(){return[b(x,{modelValue:S($).orgPostalCode,"onUpdate:modelValue":n[6]||(n[6]=function(e){return S($).orgPostalCode=e}),placeholderTips:"请输入邮政编码，必填项",customClass:"!w-[36rem]"},null,8,["modelValue"])]}),_:1}),b(u,{label:" "},{default:v(function(){return[b(f,{type:"primary",onClick:J},{default:v(function(){return r(n[11]||(n[11]=[w("申请证书",-1)]))}),_:1})]}),_:1})]}),_:1},8,["rules","model"]),b(d,{options:B,listStyle:"disc",class:"ml-[2rem] bottom-0"})])}}}))}}})}();
