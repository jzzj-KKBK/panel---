!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["type_id"];function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return c(s,"_invoke",function(n,r,o){var a,u,c,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return a=t,u=0,c=e,p.n=n,i}};function v(n,r){for(u=n,c=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],v=p.p,m=a[2];n>3?(o=m===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=v&&((o=n<2&&v<a[1])?(u=0,p.v=r,p.n=a[1]):v<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,u=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,m),u=s,c=m;(t=u<2?e:c)||!f;){a||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(l=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(t){a=e,u=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(c(t={},r,function(){return this}),t),v=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=f,c(v,"constructor",f),c(f,"constructor",s),s.displayName="GeneratorFunction",c(f,o,"GeneratorFunction"),c(v),c(v,o,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),(u=function(){return{w:a,m:m}})()}function c(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}c=function(e,t,n,r){function a(t,n){c(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},c(e,t,n,r)}function l(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./index-legacy103.js?v=1756369731","./index-legacy130.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./useController-legacy6.js?v=1756369731","./useStore-legacy4.js?v=1756369731","./index-legacy141.js?v=1756369731","./site-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731"],function(e,r){"use strict";var o,i,c,l,f,p,v,m,d,y,b,g,j,_,h,w,O,k,x,S,P,C,N,T,E,B,A,D,I,M,q,F,G,L,J,U,V,R,z,K,W,$,H,Q,X,Y,Z,ee,te,ne,re,oe,ae,ie,ue,ce,le,se,fe,pe,ve,me,de,ye,be,ge;return{setters:[function(e){o=e.K,i=e.aq,c=e.l,l=e.L,f=e.bv,p=e.b,v=e.o,m=e.at,d=e.u,y=e.aM,b=e.a6,g=e.p,j=e.v,_=e.a8,h=e.ag},function(e){w=e._},function(e){O=e._},function(e){k=e.g,x=e.r,S=e.as,P=e.c,C=e.s,N=e.e,T=e.B,E=e.w,B=e.p,A=e.n,D=e.q,I=e.v,M=e.x,q=e.M,F=e.A,G=e.y,L=e.C,J=e.P,U=e.J},function(e){V=e.c,R=e.a,z=e.d,K=e.g,W=e.u},function(e){$=e.b,H=e.g,Q=e.s,X=e.c,Y=e.d,Z=e.f,ee=e.h,te=e.u,ne=e.a,re=e.j},function(e){oe=e.u,ae=e.S},function(e){ie=e.u},function(e){ue=e.getNodeVersionList,ce=e.setDefaultEnv,le=e.getNodeJsEnvironment,se=e.delNodeProject,fe=e.getPackageManagers,pe=e.modifyNodeProject,ve=e.batchDelSite,me=e.batchStatus},function(e){de=e.l,ye=e.i,be=e.o,ge=e.h}],execute:function(){var je=p(),_e=oe(),he=_e.siteInfo,we=_e.isRefreshList,Oe=_e.activeType,ke=ae().setSiteInfo,xe=(e("i",k(function(){return!!he.value})),x("0")),Se=x([]),Pe=S("_node_mask",!1),Ce=function(){var e=s(u().m(function e(){var t,n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ue();case 1:if(n=e.v,Se.value=[],n.status){e.n=2;break}return Pe.value=!0,e.a(2);case 2:Pe.value=!1,null===(t=n.data)||void 0===t||t.forEach(function(e){e.setup&&Se.value.push({label:e.version,value:e.version}),1===e.is_default&&(xe.value=e.version)}),Se.value.unshift({label:"未设置",value:"0"}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=s(u().m(function e(){var t,n;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,o({loading:"正在设置，请稍后...",request:ce({version:xe.value})});case 1:n=e.v,je.request({status:null===(t=n.data)||void 0===t?void 0:t.status,msg:n.data.data||n.data.error_msg});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Te=e("o",s(u().m(function e(){var t,n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,i({sName:"nodejs"});case 1:return t=e.v,n=t.data,e.n=2,de({name:"nodejs",softData:n});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}))),Ee=function(){he.value=null,c({title:"添加Node项目",area:80,component:function(){return l(function(){return r.import("./index-legacy362.js?v=1756369731")},void 0,r.meta.url)},showFooter:!0})},Be=function(){c({title:"PM2监控",area:120,showFooter:!1,component:function(){return l(function(){return r.import("./index-legacy363.js?v=1756369731")},void 0,r.meta.url)}})},Ae=function(){var e=s(u().m(function e(t){var n,r,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,v({type:"default",title:"删除项目-".concat(t.name),content:"风险操作，此操作不可逆，删除【".concat(t.name,"】项目后您将无法管理该项目，是否继续操作？"),input:{content:"删除项目"}});case 1:return e.p=1,n=t.project_config,r={project_name:n.project_name,project_type:n.project_type||"nodejs"},n.pm2_name&&(r.pm2_name=n.pm2_name),e.n=2,se(r);case 2:o=e.v,je.request(o),we.value=!0,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),De=function(e,t){ke(e,t),c({isAsync:!0,title:"Node项目管理["+e.name+"] -- 添加时间["+e.addtime+"]",area:[87,71],component:function(){return l(function(){return r.import("./index-legacy364.js?v=1756369731")},void 0,r.meta.url)}})},Ie=(e("u",function(){var e=s(u().m(function e(t){var n,r,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fe({version:t});case 1:return n=e.v,r=n.data,e.a(2,r.package_managers);case 2:e.p=2,o=e.v,m(o);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),e("n",x({nodejs_versions:[],package_managers:[],user_list:[],maximum_memory:0}))),Me=(e("g",s(u().m(function e(){var t,n,r,o,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,le();case 1:return i=e.v,Object.assign(Ie.value,a(a({},null==i?void 0:i.data),{},{maximum_memory:(null==i||null===(t=i.data)||void 0===t?void 0:t.maximum_memory)||0,nodejs_versions:f(null==i||null===(n=i.data)||void 0===n?void 0:n.nodejs_versions,"array",[]),user_list:f(null==i||null===(r=i.data)||void 0===r?void 0:r.user_list,"array",[]),package_managers:f(null==i||null===(o=i.data)||void 0===o?void 0:o.package_managers,"array",[])})),e.a(2,i.data);case 2:return e.p=2,e.v,e.a(2,Ie.value)}},e,null,[[0,2]])}))),e("s",function(){var e=s(u().m(function e(t){return u().w(function(e){for(;;)switch(e.n){case 0:if(!t){e.n=2;break}return e.n=1,o({loading:"正在保存修改，请稍后...",request:pe(t),message:!0});case 1:we.value=!0;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),function(){var e=s(u().m(function e(t,n,r,o,i,c){var l,f,p,v,m,d;return u().w(function(e){for(;;)switch(e.n){case 0:return l=o.label,f=o.value,p=c.enable,v=c.exclude,m=new Map([["start","批量启动选中项目后，项目将正常访问"],["stop","批量停用选中的项目后，项目将会停止运行"],["restart","批量重启选中的项目后，项目将会重新启动"],["delete","批量删除选中的项目后，项目将无法恢复"]]),d=function(){var e=s(u().m(function e(t){var n,o,a,i,c,l,s;return u().w(function(e){for(;;)switch(e.n){case 0:n=new Map([["start",me],["stop",me],["restart",me]]),o=n.get(f),s=f,e.n="start"===s||"stop"===s||"restart"===s?1:"delete"===s?3:5;break;case 1:if(!o){e.n=3;break}return a=r.value.map(function(e){return e.project_config.pm2_name?{id:e.id,project_name:e.name,project_type:e.project_config.project_type||"nodejs",pm2_name:e.project_config.pm2_name}:{id:e.id,project_name:e.name,project_type:e.project_config.project_type||"nodejs"}}),i=ge(!1,v,p,{params:{site_list:JSON.stringify(a),status:f,project_type:"NODE"}}),e.n=2,o(i,Oe.value);case 2:case 4:return e.a(2,e.v);case 3:return c=r.value.map(function(e){return e.project_config.pm2_name?{id:e.id,name:e.name,project_type:e.project_config.project_type||"nodejs",pm2_name:e.project_config.pm2_name}:{id:e.id,name:e.name,project_type:e.project_config.project_type||"nodejs"}}),l=ge(!1,v,p,{params:{project_type:Oe.value.toUpperCase(),site_list:JSON.stringify(c)}}),e.n=4,ve(l);case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),e.n=1,t({title:"批量".concat(l),content:"".concat(m.get(f),"，是否继续操作？"),column:[{label:"项目名称",prop:"name"},V()],onConfirm:function(){var e=s(u().m(function e(){var t,n,r;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d();case 1:t=e.v,we.value=!0,i&&i(),n=ye(t.data),r=(r=n.data).map(function(e){return a(a({},e),{},{name:e.name||e.project_name})}),be(r,{title:"".concat(l,"网站")});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(t,n,r,o,a,i){return e.apply(this,arguments)}}()),qe={class:"content-mask"},Fe={class:"flex items-center mx-12px"},Ge=P({__name:"index",setup:function(e){d();var o=ae(),i=o.getSiteList,c=o.setSiteInfo,p=C(ae()),v=p.activeType,m=p.isRefreshList,k=p.siteInfo,x=p.searchWidth,S=y({options:[{type:"button",label:"添加项目",active:!0,onClick:function(){var e;if(null===(e=Se.value)||void 0===e||!e.length)return Te();Ee()}},{type:"button",label:"Node版本管理器",onClick:Te},{type:"button",label:"PM2监控",onClick:Be}]}).BtOperation,P=ie({key:"type_id",name:"Node分类",options:function(){return[{label:"全部分类",value:"all"}]},event:ee,ignore:["0"],field:"type_name"}),V=_([{label:"启动项目",value:"start",event:Me},{label:"停用项目",value:"stop",event:Me},{label:"重启项目",value:"restart",event:Me},te(),ne({classList:re}),{label:"删除项目",value:"delete",event:Me}]),oe=b({request:function(e){var n=e.type_id,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,t);return i({data:JSON.stringify(a(a({},r),{},{type_id:g(n)||"all"===n?"":n}))})},columns:[R({type:"page",key:"id"}),$({onClick:function(e){De(e)}}),H({type:v.value,onClick:function(e,t){if("setting"!==t){var n=e.run?"stop":"start";Q(e,"restart"===t?t:n)}else De(e,"state")}}),{label:"PID",isCustom:!0,render:function(e){var t=f(e.load_info,"object",{});if(0==Object.keys(t).length)return"--";var n=[];for(var r in e.load_info)e.load_info.hasOwnProperty(r)&&n.push(r);return n.join(",")}},{label:"CPU",isCustom:!1,render:function(e){var t=f(e.load_info,"object",{});if(0==Object.keys(t).length)return"--";var n=0;for(var r in e.load_info)n+=e.load_info[r].cpu_percent;return n.toFixed(2)+"%"}},{label:"内存",isCustom:!1,render:function(e){var t=f(e.load_info,"object",{});if(0==Object.keys(t).length)return"--";var n=0;for(var r in e.load_info)n+=e.load_info[r].memory_used;return j(n)}},z(),X(),K({table:"sites",width:200}),{label:"Node版本",isCustom:!0,render:function(e){return e.project_config.nodejs_version||"--"}},Y({onClick:function(e){De(e,"ssl")}}),W([{title:"设置",onClick:function(e){De(e)}},{title:"删除",onClick:function(e){Ae(e)}}])],extension:[P,V],empty:function(){return N("span",null,[T("您的列表为空，您可以"),N("span",{class:"bt-link",onClick:Ee},[T("添加一个项目")])])}}),ue=oe.BtTable,ce=oe.BtPage,le=oe.BtRefresh,se=oe.BtSearch,fe=oe.BtColumn,pe=oe.BtBatch,ve=oe.BtTableCategory,me=oe.refresh,de=oe.config;return E(m,function(){var e=s(u().m(function e(t){var n,r;return u().w(function(e){for(;;)switch(e.n){case 0:if(!t){e.n=2;break}return e.n=1,me();case 1:null!==(n=k.value)&&void 0!==n&&n.name&&(r=de.data.find(function(e){return e.name===k.value.name}))&&c(r),m.value=!1;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),B(function(){Ce(),A(function(){l(function(){return r.import("./index-legacy362.js?v=1756369731")},void 0,r.meta.url),l(function(){return r.import("./index-legacy364.js?v=1756369731")},void 0,r.meta.url)})}),function(e,t){var r=O,o=h,a=w;return D(),I("div",null,[M(Pe)?(D(),q(r,{key:0},{content:F(function(){return[G("div",qe,[t[3]||(t[3]=G("i",{class:"svgtofont-el-warning text-warning !text-[2.2rem] mr-4px"},null,-1)),t[4]||(t[4]=T(" 未安装Node版本管理器，",-1)),G("span",{class:"bt-link",onClick:t[0]||(t[0]=function(){return M(Te)&&M(Te).apply(void 0,arguments)})},"点击安装")])]}),_:1})):L("",!0),N(a,null,{"header-left":F(function(){return[N(M(S)),G("div",Fe,[t[5]||(t[5]=G("span",{class:"mr-4px"},"命令行版本",-1)),N(o,{class:"!w-[10rem]",modelValue:M(xe),"onUpdate:modelValue":t[1]||(t[1]=function(e){return J(xe)?xe.value=e:null}),options:M(Se),onChange:M(Ne)},null,8,["modelValue","options","onChange"])]),G("div",{class:"flex items-center ml-1rem",onClick:t[2]||(t[2]=function(){return M(Z)&&M(Z).apply(void 0,arguments)})},n(t[6]||(t[6]=[G("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),G("span",{class:"bt-link"},"需求反馈",-1)])))]}),"header-right":F(function(){return[N(M(ve),{class:"!w-[140px] mr-[10px]"}),N(M(se),{class:U(["mr-[10px]","!w-[".concat(M(x),"px]")]),placeholder:"请输入项目名称或备注"},null,8,["class"]),N(M(le),{class:"mr-[10px]"}),N(M(fe))]}),content:F(function(){return[N(M(ue))]}),"footer-left":F(function(){return[N(M(pe))]}),"footer-right":F(function(){return[N(M(ce))]}),_:1})])}}}),Le=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"}));e("a",Le)}}})}();
