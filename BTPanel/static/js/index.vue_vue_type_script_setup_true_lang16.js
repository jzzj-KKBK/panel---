import{fj as a,l as e,al as l,W as s,R as t}from"./utils-lib.js?v=1756369731";import{c as n,p as o,G as i,q as r,v as u,x as p,M as d,P as c,C as m,y as x,H as f,e as v,A as y,B as b,D as h,a$ as C}from"./base-lib.js?v=1756369731";import{aL as g}from"./validator.js?v=1756369731";import{i as k,c as w,d as j,t as V,a as F,b as _,e as B,s as S,h as D,r as E,v as U,f as q}from"./useController16.js?v=1756369731";import{u as H,S as N}from"./useStore4.js?v=1756369731";import{B as O}from"./index140.js?v=1756369731";const T={class:"h-full"},A={key:0},G={class:"w-full"},L={class:"my-[12px]"},M={key:1,class:"bg-[#7F7F7F] flex items-center justify-center h-full",style:{"min-height":"600px"}},P={class:"bg-white px-[48px] py-[16px] text-[#333] flex"},R=n({__name:"index",setup(n,{expose:R}){const{isBindExtranet:W}=H(),{jumpTabEvent:$}=N(),z=()=>{let l;const{BtTable:s}=a({request:()=>({data:D.value,total:D.value.length}),columns:[{label:"文件名",render:a=>t(Number(a))},{label:"操作",align:"right",render:a=>{let e=Number(a);return v("div",null,[v("span",{class:"cursor-pointer bt-link",onClick:()=>{I(a)}},[b("查看")]),v(C,{direction:"vertical"},null),v("span",{class:"cursor-pointer bt-link",onClick:async()=>{if(await E(e)){const a=await l;null==a||a.unmount()}}},[b("恢复")])])}}]});l=e({title:"配置文件历史版本",area:42,showFooter:!1,component:()=>v("div",{class:"p-[20px]"},[v(s,{"max-height":400},null)])})},I=async a=>{await U(a);const l=e({title:"查看文件历史版本",area:64,showFooter:!1,component:()=>v("div",{class:"p-[20px]"},[v(h,{type:"primary",onClick:async()=>{if(await E(a)){const a=await l;null==a||a.unmount()}}},{default:()=>[b("恢复文件")]}),v(O,{class:"!h-[50rem] !w-full my-[12px]",modelValue:q.value,"onUpdate:modelValue":a=>q.value=a,editorOption:g({readonly:!0})},null)])})};return o(k),R({init:k}),(a,e)=>{const t=l,n=s,o=i("bt-loading");return r(),u("div",T,[p(W)?(r(),u("div",A,[p(w)?(r(),d(t,{key:0,type:"card",modelValue:p(j),"onUpdate:modelValue":e[0]||(e[0]=a=>c(j)?j.value=a:null),options:p(V),onChange:p(F)},null,8,["modelValue","options","onChange"])):m("",!0),x("div",G,[e[7]||(e[7]=x("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),x("div",L,[f(v(p(O),{class:"!h-[54rem] border border-[#DCDFE6] rounded-[4px]",modelValue:p(B),"onUpdate:modelValue":e[1]||(e[1]=a=>c(B)?B.value=a:null),onSave:e[2]||(e[2]=a=>p(S)()),id:"configContent",editorOption:{mode:"ace/mode/nginx"}},null,8,["modelValue"]),[[o,p(_)]])]),x("div",null,[v(p(h),{type:"primary",onClick:e[3]||(e[3]=a=>p(S)())},{default:y(()=>[...e[5]||(e[5]=[b("保存",-1)])]),_:1}),v(p(h),{onClick:z,type:"default"},{default:y(()=>[...e[6]||(e[6]=[b("历史文件",-1)])]),_:1})]),v(n,{options:[{content:"此处为站点主配置文件，若您不了解配置规则，请勿随意修改."}],"list-style":"disc",class:"ml-[20px] mt-[20px]"})])])):(r(),u("div",M,[x("div",P,[e[8]||(e[8]=b(" 请开启 ",-1)),x("span",{class:"mx-[.4rem] bt-link",onClick:e[4]||(e[4]=a=>p($)("mapping"))},"外网映射"),e[9]||(e[9]=b(" 后查看配置信息 ",-1))])]))])}}});export{R as _};
