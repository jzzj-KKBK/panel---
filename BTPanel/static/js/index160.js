import{c as a,k as e,r as t,p as s,q as l,v as o,y as r,B as n,z as i,x as m,e as d,A as u,F as p,a_ as c,M as v,S as _,a9 as f,a7 as b,D as y}from"./base-lib.js?v=1756369731";import{am as x,bb as g,b as h,e as w}from"./utils-lib.js?v=1756369731";import{v as j}from"./validator.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";import"./column.js?v=1756369731";const D={class:"nps_survey_box"},V={"data-v-30672cd2":"",class:"text-[1.9rem] font-bold text-center text-[#000] mt-[2rem]"},q={class:"p-[2rem] flex flex-col items-center"},k={class:"w-[100%]"},z=w(a({__name:"index",emits:["close"],setup(a,{emit:w}){const z=e({mustData:"",data:[]}),S=t(),U=t([]),A=t([]),E={mustData:[{required:!0,message:"请输入内容",trigger:"blur"}]},{load:F}=h(),I=w,B=async()=>{if(await S.value.validate()){const e=F("正在提交问卷，请稍后..."),t={};for(let a=0;a<U.value.length;a++)t[U.value[a].id]=0===a?z.mustData:z.data[a];try{await g({questions:JSON.stringify(t),product_type:19,software_name:"Enterprise-Edition-Survey",rate:0}),e.close(),localStorage.setItem("ltd_nps","1"),j(),I("close")}catch(a){}finally{e.close()}}};return s(async()=>{const{data:a}=await x({product_type:19,version:-1});U.value=a.msg;for(let e=0;e<a.msg.length;e++)z.data.push("");A.value=a.msg.slice(1)}),(a,e)=>{var t;const s=_,x=f,g=b,h=y;return l(),o("div",D,[e[2]||(e[2]=r("div",{class:"nps_survey_banner"},[r("span",null,[r("i"),n(),r("span",{style:{"vertical-align":"4px"}},"企业版用户专属调研")])],-1)),r("div",V,i(null==(t=m(U)[0])?void 0:t.hint),1),r("div",q,[r("div",k,[d(g,{ref_key:"formLabelAlignFrom",ref:S,"label-position":"top","label-width":"80px",model:m(z),rules:E},{default:u(()=>{var a;return[d(x,{label:null==(a=m(U)[0])?void 0:a.question,prop:"mustData"},{default:u(()=>[d(s,{modelValue:m(z).mustData,"onUpdate:modelValue":e[0]||(e[0]=a=>m(z).mustData=a),type:"textarea",rows:3,maxlength:500,resize:"none",placeholder:"请留下您的建议"},null,8,["modelValue"])]),_:1},8,["label"]),(l(!0),o(p,null,c(m(A),(a,e)=>(l(),v(x,{key:e,label:a.question},{default:u(()=>[d(s,{modelValue:m(z).data[e+1],"onUpdate:modelValue":a=>m(z).data[e+1]=a,type:"textarea",rows:3,maxlength:500,resize:"none",placeholder:"请留下您的建议"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]}),_:1},8,["model"])]),d(h,{class:"w-[12.5rem] !mt-[2rem]",type:"primary",size:"large",onClick:B},{default:u(()=>[...e[1]||(e[1]=[n("提交",-1)])]),_:1})])])}}}),[["__scopeId","data-v-b554e765"]]);export{z as default};
