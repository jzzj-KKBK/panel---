!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function t(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach(function(r){n(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e}function n(r,t,n){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function l(t,n,o,a){var l=n&&n.prototype instanceof c?n:c,s=Object.create(l.prototype);return u(s,"_invoke",function(t,n,o){var u,a,l,c=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(r,t){return u=r,a=0,l=e,d.n=t,i}};function m(t,n){for(a=t,l=n,r=0;!f&&c&&!o&&r<s.length;r++){var o,u=s[r],m=d.p,p=u[2];t>3?(o=p===n)&&(l=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=e):u[0]<=m&&((o=t<2&&m<u[1])?(a=0,d.v=n,d.n=u[1]):m<p&&(o=t<3||u[0]>n||n>p)&&(u[4]=t,u[5]=n,d.n=p,a=0))}if(o||t>1)return i;throw f=!0,n}return function(o,s,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),a=s,l=p;(r=a<2?e:l)||!f;){u||(a?a<3?(a>1&&(d.n=-1),m(a,l)):d.n=l:d.v=l);try{if(c=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,l)))throw TypeError("iterator result is not an object");if(!r.done)return r;l=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=e}else if((r=(f=d.n<0)?l:t.call(n,d))!==i)break}catch(r){u=e,a=1,l=r}finally{c=1}}return{value:r,done:f}}}(t,o,a),!0),s}var i={};function c(){}function s(){}function f(){}r=Object.getPrototypeOf;var d=[][n]?r(r([][n]())):(u(r={},n,function(){return this}),r),m=f.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,u(m,"constructor",f),u(f,"constructor",s),s.displayName="GeneratorFunction",u(f,a,"GeneratorFunction"),u(m),u(m,a,"Generator"),u(m,n,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),(o=function(){return{w:l,m:p}})()}function u(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}u=function(e,r,t,n){function a(r,t){u(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(a("next",0),a("throw",1),a("return",2))},u(e,r,t,n)}function a(e,r,t,n,o,u,a){try{var l=e[u](a),i=l.value}catch(e){return void t(e)}l.done?r(i):Promise.resolve(i).then(n,o)}function l(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var u=e.apply(r,t);function l(e){a(u,n,o,l,i,"next",e)}function i(e){a(u,n,o,l,i,"throw",e)}l(void 0)})}}function i(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return c(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./index-legacy101.js?v=1756369731","./files-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731"],function(e,r){"use strict";var n,u,a,c,s,f,d,m,p,y,b,v,h,w,g,_,V,j,k,O,S,x,U,P,C,F,N,E,R,D,q,A,T,I,G,L,$;return{setters:[function(e){n=e.bU,u=e.j,a=e.W,c=e.h,s=e.e,f=e.l,d=e.K,m=e.L},function(e){p=e.c,y=e.s,b=e.q,v=e.v,h=e.e,w=e.A,g=e.x,_=e.M,V=e.C,j=e.a9,k=e.a7,O=e.y,S=e.B,x=e.z,U=e.P,P=e.ai,C=e.aj,F=e.b9,N=e.b8,E=e.T,R=e.D,D=e.j,q=e.r,A=e.ay,T=e.k},function(e){I=e._},function(e){G=e.ak,L=e.al,$=e.am},null],execute:function(){var z={class:"p-20px"},B=p({__name:"receive",setup:function(e){var r=X(),t=y(r),o=t.formDisabled,l=t.rules,i=t.isSuccess,c=t.receiveForm,s=t.receiveFormRef;return function(e,r){var t=u,f=j,d=I,m=k,p=a;return b(),v("div",z,[h(m,{ref_key:"receiveFormRef",ref:s,disabled:g(o),rules:g(l),model:g(c)},{default:w(function(){return[h(f,{label:"用户名",prop:"mName"},{default:w(function(){return[h(t,{class:"!w-[24rem]",modelValue:g(c).mName,"onUpdate:modelValue":r[0]||(r[0]=function(e){return g(c).mName=e}),disabled:g(i),placeholder:"请填写用户名，不能有中文或特殊符号"},null,8,["modelValue","disabled"])]}),_:1}),h(f,{label:"密码",prop:"password"},{default:w(function(){return[g(i)?(b(),_(t,{key:1,class:"!w-[24rem]",modelValue:g(c).password,"onUpdate:modelValue":r[3]||(r[3]=function(e){return g(c).password=e}),disabled:""},null,8,["modelValue"])):(b(),_(d,{key:0,class:"!w-[24rem]",icon:"el-refresh",modelValue:g(c).password,"onUpdate:modelValue":r[1]||(r[1]=function(e){return g(c).password=e}),isActive:!0,onIconClick:r[2]||(r[2]=function(){return g(c).password=g(n)(16)})},null,8,["modelValue"]))]}),_:1}),g(i)?V("",!0):(b(),_(f,{key:0,label:"同步到",prop:"path"},{default:w(function(){return[h(t,{class:"!w-[24rem]",modelValue:g(c).path,"onUpdate:modelValue":r[4]||(r[4]=function(e){return g(c).path=e}),disabled:""},null,8,["modelValue"])]}),_:1}))]}),_:1},8,["disabled","rules","model"]),g(i)?(b(),_(p,{key:0,class:"pl-2rem",options:[{content:"使用上面的用户信息，前往发送数据的服务器创建发送端"}]})):V("",!0)])}}}),J={class:"p-20px"},K={class:"flex items-center time-unit"},M={key:1,class:"mt-20px"},W={class:"pt-2rem flex flex-col"},H={class:"text-danger p-2rem text-[1.4rem] leading-10 ml-36px"},Y={class:"flex items-center mt-12px ml-4px px-2rem"},Z={class:"bg-[#f6f8f8] footer-btn flex items-center justify-end mt-2rem p-12px w-full"},Q=s(p({__name:"send",setup:function(e){var r=X(),t=y(r),n=t.formDisabled,o=t.sendFormRef,l=t.rulesSend,s=t.sendForm,f=t.alertRsync,d=t.checkOffRsync,m=r.helpList,p=r.handleChangeDelete,D=r.handleConfirm;return function(e,r){var t=u,y=j,q=P,A=C,T=F,I=N,G=k,L=a,$=E,z=R,B=c;return b(),v("div",J,[h(G,{ref_key:"sendFormRef",ref:o,disabled:g(n),rules:g(l),model:g(s)},{default:w(function(){return[h(y,{label:"服务器IP",prop:"ip"},{default:w(function(){return[h(t,{modelValue:g(s).ip,"onUpdate:modelValue":r[0]||(r[0]=function(e){return g(s).ip=e}),placeholder:"请输入接收服务器IP",width:"34.8rem"},null,8,["modelValue"])]}),_:1}),h(y,{label:"同步目录",prop:"path"},{default:w(function(){return[h(t,{modelValue:g(s).path,"onUpdate:modelValue":r[1]||(r[1]=function(e){return g(s).path=e}),disabled:"",width:"34.8rem"},null,8,["modelValue"])]}),_:1}),h(y,{label:"同步方式",class:"form-row"},{default:w(function(){return[h(T,null,{default:w(function(){return[h(A,{modelValue:g(s).delete,"onUpdate:modelValue":r[2]||(r[2]=function(e){return g(s).delete=e}),class:"!w-[12rem]",onChange:g(p)},{default:w(function(){return[h(q,{label:"增量",value:!1}),h(q,{label:"完全",value:!0})]}),_:1},8,["modelValue","onChange"]),h(y,{label:"同步周期"},{default:w(function(){return[h(A,{modelValue:g(s).realtime,"onUpdate:modelValue":r[3]||(r[3]=function(e){return g(s).realtime=e}),class:"!w-[12rem]"},{default:w(function(){return[h(q,{label:"实时同步",value:!0}),h(q,{label:"定时同步",value:!1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1}),g(s).realtime?V("",!0):(b(),_(y,{key:0,label:"定时周期",prop:"cron"},{default:w(function(){return[h(T,null,{default:w(function(){return[h(A,{modelValue:g(s).cron.type,"onUpdate:modelValue":r[4]||(r[4]=function(e){return g(s).cron.type=e}),class:"!w-[10rem] mr-8px"},{default:w(function(){return[h(q,{label:"每天",value:"day"}),h(q,{label:"N分钟",value:"minute-n"})]}),_:1},8,["modelValue"]),O("div",K,["minute-n"!==g(s).cron.type?(b(),_(t,{key:0,modelValue:g(s).cron.hour,"onUpdate:modelValue":r[5]||(r[5]=function(e){return g(s).cron.hour=e}),type:"number",class:"!w-[11.6rem] mr-8px"},{append:w(function(){return i(r[21]||(r[21]=[S(" 小时 ",-1)]))}),_:1},8,["modelValue"])):V("",!0),h(t,{modelValue:g(s).cron.minute,"onUpdate:modelValue":r[6]||(r[6]=function(e){return g(s).cron.minute=e}),type:"number",class:"w-[12rem]"},{append:w(function(){return i(r[22]||(r[22]=[S(" 分钟 ",-1)]))}),_:1},8,["modelValue"])])]}),_:1})]}),_:1})),h(y,{label:"限速",class:"form-row"},{default:w(function(){return[h(T,null,{default:w(function(){return[h(I,{span:8},{default:w(function(){return[h(t,{modelValue:g(s).bwlimit,"onUpdate:modelValue":r[7]||(r[7]=function(e){return g(s).bwlimit=e}),type:"number",class:"!w-[12rem]"},{append:w(function(){return i(r[23]||(r[23]=[S("KB",-1)]))}),_:1},8,["modelValue"])]}),_:1}),h(I,{span:14},{default:w(function(){return[h(y,{label:"延迟"},{default:w(function(){return[h(t,{modelValue:g(s).delay,"onUpdate:modelValue":r[8]||(r[8]=function(e){return g(s).delay=e}),type:"number",class:"!w-[12rem]"},{append:w(function(){return i(r[24]||(r[24]=[S("秒",-1)]))}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})]}),_:1}),h(y,{label:"链接方式",class:"form-row"},{default:w(function(){return[h(T,null,{default:w(function(){return[h(A,{modelValue:g(s).rsync,"onUpdate:modelValue":r[9]||(r[9]=function(e){return g(s).rsync=e}),class:"!w-[12rem]"},{default:w(function(){return[h(q,{label:"密钥",value:"key"}),h(q,{label:"账号",value:"user"})]}),_:1},8,["modelValue"]),h(y,{label:"压缩传输"},{default:w(function(){return[h(A,{modelValue:g(s).compress,"onUpdate:modelValue":r[10]||(r[10]=function(e){return g(s).compress=e}),class:"!w-[12rem]"},{default:w(function(){return[h(q,{label:"开启",value:!0}),h(q,{label:"关闭",value:!1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1}),"user"===g(s).rsync?(b(),v("div",M,[h(y,{label:"用户名",prop:"sname"},{default:w(function(){return[h(t,{modelValue:g(s).sname,"onUpdate:modelValue":r[11]||(r[11]=function(e){return g(s).sname=e}),width:"34.8rem",placeholder:"请输入用户名"},null,8,["modelValue"])]}),_:1}),h(y,{label:"密码",prop:"password"},{default:w(function(){return[h(t,{modelValue:g(s).password,"onUpdate:modelValue":r[12]||(r[12]=function(e){return g(s).password=e}),width:"34.8rem",placeholder:"请输入密码"},null,8,["modelValue"])]}),_:1}),h(y,{label:"端口",prop:"port"},{default:w(function(){return[h(t,{modelValue:g(s).port,"onUpdate:modelValue":r[13]||(r[13]=function(e){return g(s).port=e}),width:"34.8rem",type:"number"},null,8,["modelValue"])]}),_:1})])):V("",!0),"key"===g(s).rsync?(b(),_(y,{key:2,label:"密钥",prop:"secret_key"},{default:w(function(){return[h(t,{modelValue:g(s).secret_key,"onUpdate:modelValue":r[14]||(r[14]=function(e){return g(s).secret_key=e}),width:"34.8rem",type:"textarea",placeholder:"请输入密钥"},null,8,["modelValue"])]}),_:1})):V("",!0)]}),_:1},8,["disabled","rules","model"]),h(L,{class:"pl-2rem",options:g(m),"list-style":"disc"},null,8,["options"]),h(B,{title:"数据安全风险警告",area:[40,"auto"],modelValue:g(f),"onUpdate:modelValue":r[18]||(r[18]=function(e){return U(f)?f.value=e:null}),onClose:r[19]||(r[19]=function(e){return g(D)(!1)}),onCancel:r[20]||(r[20]=function(e){return g(D)(!1)})},{default:w(function(){return[O("div",W,[r[28]||(r[28]=O("div",{class:"flex items-center px-2rem"},[O("i",{class:"el-icon-warning text-[#e6a23c] text-[3rem] pr-4"}),O("span",{class:"text-[1.4rem] leading-10 text-danger"},"警告：您选择了完全同步，将会使本机同步与目标机器指定目录的文件保持一致， 请确认目录设置是否有误，一但设置错误，可能导致目标机器的目录文件被删除!")],-1)),O("span",H,"注意： 同步程序将本机目录：【"+x(g(s).path)+"】的所有数据同步到目标服务器，若目标服务器的同步目录存在其它文件将被删除!",1),O("div",Y,[h($,{modelValue:g(d),"onUpdate:modelValue":r[15]||(r[15]=function(e){return U(d)?d.value=e:null}),class:"!mr-4px"},null,8,["modelValue"]),r[25]||(r[25]=S(" 我已了解风险，确认关闭 ",-1))]),O("div",Z,[h(z,{type:"warning",onClick:r[16]||(r[16]=function(e){return g(D)(!1)})},{default:w(function(){return i(r[26]||(r[26]=[S("取消",-1)]))}),_:1}),h(z,{type:"danger",onClick:r[17]||(r[17]=function(e){return g(D)(!0)}),disabled:!g(d)},{default:w(function(){return i(r[27]||(r[27]=[S("确认选择",-1)]))}),_:1},8,["disabled"])])])]}),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-dfabae5a"]]),X=e("default",D("FILES-RSYNC-STORE",function(){var e=q(),n=function(r,t,n){i.path=e.value.row.path,b.path=e.value.row.path,t&&(a.value=!1,s.value=!1,Object.assign(i,{mName:"",password:"",path:e.value.row.path,comment:""}),h.value=!1,w.value=!1,Object.assign(b,{ip:"",rsync:"user",sname:"",password:"",path:e.value.row.path,port:873,secret_key:"",delete:!1,realtime:!0,bwlimit:1024,delay:3,compress:!0,cron:{type:"day",where1:"",hour:0,minute:1,id:"",port:""}})),f("receive"===r?{title:"创建接收端",area:42,btn:["确认","取消"],showFooter:!s.value,component:B,onConfirm:y}:{title:"创建发送端",area:58,btn:["确认","取消"],component:Q,onConfirm:V}),n&&n()},u=function(){var t=l(o().m(function t(){var n,u,a,l;return o().w(function(t){for(;;)switch(t.n){case 0:if("site"!==(null===(n=e.value.row)||void 0===n?void 0:n.type)){t.n=1;break}e.value.row.refreshEvent(),t.n=3;break;case 1:return t.n=2,m(function(){return r.import("./store-legacy.js?v=1756369731").then(function(e){return e.aW})},void 0,r.meta.url);case 2:u=t.v,a=u.default,l=a(),(0,l.refreshFilesList)();case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();A("popupSetFooter",function(e){});var a=q(!1),i=T({mName:"",password:"",path:"",comment:""}),c=q(),s=q(!1),p=T({mName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"},{validator:function(e,r,t){/^[a-zA-Z0-9_]{3,20}$/.test(r)?t():t(new Error("用户名不能有中文或特殊符号"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}),y=function(){var r=l(o().m(function r(f){return o().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,c.value.validate();case 1:return r.n=2,d({loading:a,request:G(t(t({},i),{},{comment:i.mName})),message:!0,success:function(){var r=l(o().m(function r(t){return o().w(function(r){for(;;)switch(r.n){case 0:if(s.value=t.status,!t.status){r.n=2;break}return r.n=1,L({path:e.value.row.path,s_type:"recv"});case 1:f.unmount(),u(),n("receive");case 2:return r.a(2)}},r)}));return function(e){return r.apply(this,arguments)}}()});case 2:return r.a(2)}},r)}));return function(e){return r.apply(this,arguments)}}(),b=T({ip:"",rsync:"user",sname:"",password:"",path:"",port:873,secret_key:"",delete:!1,realtime:!0,bwlimit:1024,delay:3,compress:!0,cron:{type:"day",where1:"",hour:0,minute:1,id:"",port:""}}),v=q(),h=q(!1),w=q(!1),g=T({ip:[{required:!0,message:"请输入ip",trigger:"blur"},{validator:function(e,r,t){/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(r)?t():t(new Error("请输入正确的ip"))}}],sname:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],secret_key:[{required:!0,message:"请输入密钥",trigger:"blur"}]}),_=function(){var e=l(o().m(function e(r){return o().w(function(e){for(;;)switch(e.n){case 0:r?(h.value=!0,b.delete=!r):h.value=!1;case 1:return e.a(2)}},e)}));return function(r){return e.apply(this,arguments)}}(),V=function(){var r=l(o().m(function r(n){var i,c;return o().w(function(r){for(;;)switch(r.n){case 0:return i=t(t({},b),{},{cron:JSON.stringify(t(t({},b.cron),{},{port:String(b.port),hour:String(b.cron.hour),minute:String(b.cron.minute)}))}),"minute-n"===b.cron.type&&(i.cron=JSON.stringify(t(t({},b.cron),{},{hour:String(b.cron.hour),where1:String(b.cron.minute),minute:"",port:String(b.port)}))),"key"===b.rsync?(i.sname="",i.password=""):i.secret_key="",delete i.rsync,r.n=1,v.value.validate();case 1:return r.n=2,d({loading:a,request:$(i),message:!0,success:function(){var r=l(o().m(function r(t){return o().w(function(r){for(;;)switch(r.n){case 0:if(!t.status){r.n=2;break}return r.n=1,d({request:L({path:e.value.row.path,s_type:"send"})});case 1:u();case 2:return r.a(2)}},r)}));return function(e){return r.apply(this,arguments)}}()});case 2:return c=r.v,r.a(2,c.status)}},r)}));return function(e){return r.apply(this,arguments)}}();return{compData:e,handleClick:n,formDisabled:a,rules:p,isSuccess:s,receiveForm:i,receiveFormRef:c,sendFormRef:v,rulesSend:g,sendForm:b,alertRsync:h,checkOffRsync:w,helpList:[{content:"【同步目录】：若不以/结尾，则表示将数据同步到二级目录，一般情况下目录路径请以/结尾"},{content:"【同步方式】增量： 数据更改/增加时同步，且只追加和替换文件"},{content:"【同步方式】完全： 保持两端的数据与目录结构的一致性，会同步删除、追加和替换文件和目录"},{content:"【限速】：限制数据同步任务的速度，防止因同步数据导致带宽跑高"},{content:"【延迟】：在延迟时间周期内仅记录不同步，到达周期后一次性同步数据，以节省开销"},{content:"【压缩传输】：开启后可减少带宽开销，但会增加CPU开销，如带宽充足，建议关闭此选项"}],handleChangeDelete:_,handleConfirm:function(e){b.delete=e,h.value=!1,w.value=!1}}}))}}})}();
