import{_ as a}from"./index103.js?v=1756369731";import{ay as e,M as s,K as t,j6 as n,o as i,j7 as o,c1 as l,ag as r,ak as c,k as d}from"./utils-lib.js?v=1756369731";import{c as m,r as u,k as p,U as _,p as f,G as b,q as y,M as g,A as h,e as C,x as j,B as k,H as w,D as I}from"./base-lib.js?v=1756369731";import{u as v}from"./column.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";const N=m({__name:"container-net",setup(m){const{refs:{currentConDetail:N},getCurrentCon:A}=e(),V=u(),W=p({container_id:""}),q=p({list:[],loading:!1}),x=_([]),M=async()=>{const a={id:W.container_id,container_id:N.value.Id};a.id?t({request:n({data:JSON.stringify(a)}),message:!0,success:async a=>{a.status&&(await A(N.value.Id),P(),W.container_id="")}}):s.error("请选择网络")},P=async()=>{q.loading=!0;const a=Object.entries(N.value.NetworkSettings.Networks),e=[];a.forEach(a=>{e.push({name:a[0],...a[1]})}),q.list=e,q.loading=!1};let D=u([{label:"网络名",prop:"name",minWidth:100},{label:"IPV4地址",prop:"IPAddress",minWidth:100,isCustom:!0},{label:"IPV6地址",prop:"IPAddress6",minWidth:100,isCustom:!1},{label:"网关",prop:"Gateway",minWidth:100,isCustom:!0},{label:"MAC地址",prop:"MacAddress",minWidth:100,isCustom:!0},v([{onClick:async a=>{await i({title:"退出网络【".concat(a.name,"】"),content:"您真的要退出网络【".concat(a.name,"】吗？")});const e={id:a.NetworkID,container_id:N.value.Id};t({request:o({data:JSON.stringify(e)}),message:!0,success:async a=>{a.status&&(await A(N.value.Id),P())}})},width:60,title:"退出网络"}])]);return f(async()=>{P(),t({request:l(),data:Array,success:a=>{x.value=a.map(a=>({label:a.name,value:a.id}))}})}),(e,s)=>{const t=r,n=I,i=c,o=d,l=a,m=b("bt-loading");return y(),g(l,null,{"header-left":h(()=>[C(t,{modelValue:j(W).container_id,"onUpdate:modelValue":s[0]||(s[0]=a=>j(W).container_id=a),options:j(x),class:"!w-[20rem]"},null,8,["modelValue","options"]),C(n,{title:"加入网络",class:"!ml-[1rem]",type:"primary",onClick:M},{default:h(()=>[...s[1]||(s[1]=[k("加入网络",-1)])]),_:1})]),"header-right":h(()=>[C(i,{name:"containerNetColumn",column:j(D),tableRef:j(V)},null,8,["column","tableRef"])]),content:h(()=>[w(C(o,{ref_key:"dockerNetTable",ref:V,column:j(D),data:j(q).list,description:"容器网络列表为空"},null,8,["column","data"]),[[m,j(q).loading],[m,"正在加载容器网络列表，请稍后...","title"]])]),_:1})}}});export{N as default};
