import{c as e,r as a,p as s,q as l,v as t,H as r,M as i,A as n,e as o,F as c,a_ as u,z as d,B as m,y as p,K as v,C as f,bN as _,bM as y,bq as h}from"./base-lib.js?v=1756369731";import{W as b}from"./utils-lib.js?v=1756369731";import{getCertDetail as w}from"./site.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const D={class:"p-[2rem]"},x={class:"max-w-[25rem] whitespace-pre-wrap"},C={class:"max-w-[25rem] whitespace-pre-wrap"},T=e({__name:"mulit-cert-detail",props:{compData:{default:()=>({})}},setup(e,{expose:T}){const V=e,M=a(!1),j=a({domain:"",purchaseYears:0,purchaseTime:"",currentCycle:0,remainingDays:0,nextRenewalTime:"",verificationMethod:"",hostname:"",recordValue:""}),g=a("red"),H=async()=>{var e,a,s;if(V.compData.oid||V.compData.pid){M.value=!0;try{const{data:l}=await w({oid:V.compData.oid,pid:V.compData.pid});if(l.success&&l.res){const t=l.res;j.value={domain:t.domainName||[],purchaseYears:t.years||0,purchaseTime:t.purchase_date||"--",currentCycle:t.cycle_text||"--",remainingDays:t.remaining_text||"--",nextRenewalTime:t.renewal_text||"--",verificationMethod:(null==(e=t.verifyInfo)?void 0:e.DCVdnsType)||"--",hostname:(null==(a=t.verifyInfo)?void 0:a.DCVdnsHost)||"--",recordValue:(null==(s=t.verifyInfo)?void 0:s.DCVdnsValue)||"--"}}}catch(l){}finally{M.value=!1}}};return s(()=>{H()}),T({refresh:H}),(e,a)=>{const s=_,w=y,T=b,V=h;return l(),t("div",D,[r((l(),i(w,{column:1,border:"",class:"table-descriptions"},{default:n(()=>[o(s,{label:"域名"},{default:n(()=>[(l(!0),t(c,null,u(j.value.domain,e=>(l(),t("div",{key:e},d(e),1))),128))]),_:1}),o(s,{label:"购买年限"},{default:n(()=>[m(d(j.value.purchaseYears),1)]),_:1}),o(s,{label:"购买时间"},{default:n(()=>[m(d(j.value.purchaseTime),1)]),_:1}),o(s,{label:"当前签发周期"},{default:n(()=>[m(d(j.value.currentCycle),1)]),_:1}),o(s,{label:"当前周期剩余时间"},{default:n(()=>[m(d(j.value.remainingDays),1)]),_:1}),o(s,{label:"下一次自动续签时间"},{default:n(()=>[p("span",{style:v({color:g.value})},d(j.value.nextRenewalTime),5)]),_:1}),o(s,{label:"验证方式"},{default:n(()=>[m(d(j.value.verificationMethod),1)]),_:1}),j.value.verificationMethod.includes("cname")?(l(),t(c,{key:0},[o(s,{label:"主机名"},{default:n(()=>[p("div",x,d(j.value.hostname),1)]),_:1}),o(s,{label:"记录值"},{default:n(()=>[p("div",C,d(j.value.recordValue),1)]),_:1})],64)):f("",!0)]),_:1})),[[V,M.value]]),o(T,{class:"mt-[1rem]",options:[{content:"请确保验证记录正确否则将无法自动续签成功"}]})])}}});export{T as default};
