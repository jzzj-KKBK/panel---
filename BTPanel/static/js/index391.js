import{c as a,k as s,r as o,p as l,aM as e,q as i,v as t,e as d,A as n,x as m,y as r,B as p,F as u,a_ as c,Q as _,ai as f,aj as v,a9 as D,a7 as w,M as b,z as h}from"./base-lib.js?v=1756369731";import{c as j,b as y}from"./utils-lib.js?v=1756369731";import{y as x,N as g}from"./ssl.js?v=1756369731";import{g as L}from"./useStore10.js?v=1756369731";import{d as S}from"./useMethod12.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";import"./useMethod10.js?v=1756369731";const N={class:"p-2rem"},k={class:"el-select-dropdown__empty"},z={style:{float:"left"}},C={class:"ml-[1rem]",style:{float:"right",color:"#8492a6","font-size":"13px"}},M=a({__name:"index",props:{compData:{type:Object,default:()=>{}}},emits:["close"],setup(a,{expose:M,emit:V}){const q=y(),{refs:{isRefreshDomainList:O,isRefreshDomainConfigList:R}}=L(),A=a,B=V,E=s({dns_id:"",ids:[]}),F=o([]),H=()=>{E.dns_id="",E.ids=[]},J=()=>{B("close"),S()};return l(()=>{var a,s,o,l;(async()=>{const{data:a}=await x(),{data:s}=a;F.value=s})(),A.compData.row.id&&((null==(a=A.compData.row)?void 0:a.dns)&&(E.dns_id=A.compData.row.dns.id),E.ids.push(A.compData.row.id)),A.compData.row.domain_id&&E.ids.push(A.compData.row.domain_id),(null==(s=A.compData)?void 0:s.rowList)&&(null==(l=null==(o=A.compData)?void 0:o.rowList)?void 0:l.length)&&(E.ids=[],A.compData.rowList.forEach(a=>{E.ids.push(a.id),a.domain_id&&E.ids.push(a.domain_id)}))}),M({onConfirm:async()=>{var a,s,o,l;if(E.dns_id)try{const e=await g({dns_id:E.dns_id,ids:JSON.stringify(E.ids)});q.request(e),e.status&&(H(),(A.compData.row.domain_id||(null==(s=null==(a=A.compData)?void 0:a.rowList)?void 0:s.some(a=>a.domain_id)))&&(R.value=!0),(A.compData.row.id||(null==(l=null==(o=A.compData)?void 0:o.rowList)?void 0:l.some(a=>a.id)))&&(O.value=!0),B("close"))}catch(e){}else q.error("请选择验证类型")}}),(a,s)=>{const o=j,l=f,y=v,x=D,g=w,L=e("global-dns-form-popup");return i(),t("div",N,[d(g,{model:m(E),class:"relative w-full","label-position":"right",size:"small",onSubmit:s[1]||(s[1]=_(()=>{},["prevent"]))},{default:n(()=>[d(x,{label:"验证类型",prop:"dns_name",class:"!m-0"},{default:n(()=>[d(y,{modelValue:m(E).dns_id,"onUpdate:modelValue":s[0]||(s[0]=a=>m(E).dns_id=a),class:"!w-[33rem]",filterable:"","default-first-option":"",size:"default",placeholder:"请选择验证类型"},{empty:n(()=>[r("p",k,[s[3]||(s[3]=r("span",null,"暂无数据，请先添加DNS接口",-1)),d(o,{class:"!text-[14px]",onClick:J},{default:n(()=>[...s[2]||(s[2]=[p(">>添加",-1)])]),_:1})])]),default:n(()=>[(i(!0),t(u,null,c(m(F),a=>(i(),b(l,{key:a.id,label:a.dns_name,value:a.id},{default:n(()=>[r("span",z,h(a.dns_name),1),r("span",C,h(a.ps),1)]),_:2},1032,["label","value"]))),128)),d(l,{label:"更多类型",value:"none",disabled:""},{default:n(()=>[r("p",null,[s[5]||(s[5]=r("span",null,"更多类型，请添加DNS接口",-1)),d(o,{class:"!text-[14px]",onClick:J},{default:n(()=>[...s[4]||(s[4]=[p(">>添加",-1)])]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),d(L,{title:"添加NDS接口"})])}}});export{M as default};
