import{e as s,u as e,l as a,L as o,cH as t,cI as n,cJ as i,cK as l,ai as c,cL as r}from"./utils-lib.js?v=1756369731";import{j as u,r as m,c as p,s as g,p as d,q as f,v,y as _,B as I,z as y,x as w,M as h,A as b,C as k,aQ as O,bG as P,aB as S}from"./base-lib.js?v=1756369731";const T=u("HOME-LOGIN-PROMPT-STORE",()=>{const s=m({ip_info:{ip:"",info:""},last_login:{ip_info:{ip:"",info:""},login_time_str:""}});return{loginInfo:s,initData:()=>{const e=JSON.parse(sessionStorage.getItem("loginInfo"));s.value=e||s.value}}}),L={class:"login-message"},D={class:"login-message-row"},j={class:"login-message-content"},x={class:"login-message-row"},N={class:"login-message-content"},U={class:"login-message"},B={class:"login-message-row"},R={class:"login-message-content"},C={class:"login-message-row"},E={class:"login-message-content"},M={class:"login-message-row"},V={class:"login-message-content"},H=s(p({__name:"index",setup(s){const e=T(),{loginInfo:a}=g(e);return d(()=>e.initData()),(s,e)=>{const o=O;return f(),v("div",null,[_("div",null,[e[2]||(e[2]=I(" 当前登录信息： ",-1)),_("div",L,[_("div",D,[e[0]||(e[0]=_("span",{class:"login-message-title"},"IP",-1)),_("span",j,y(w(a).ip_info.ip),1)]),_("div",x,[e[1]||(e[1]=_("span",{class:"login-message-title"},"归属地",-1)),_("span",N,y(w(a).ip_info.info),1)])])]),_("div",null,[e[7]||(e[7]=I(" 上次登录信息： ",-1)),_("div",U,[_("div",B,[e[4]||(e[4]=_("span",{class:"login-message-title"},"IP",-1)),_("span",R,[I(y(w(a).last_login.ip_info.ip)+" ",1),w(a).last_login.ip_info.ip!==w(a).ip_info.ip?(f(),h(o,{key:0,content:"登录异常",effect:"dark",placement:"top"},{default:b(()=>[...e[3]||(e[3]=[_("i",{class:"svgtofont-el-warning text-orange cursor-pointer ml-[8px]"},null,-1)])]),_:1})):k("",!0)])]),_("div",C,[e[5]||(e[5]=_("span",{class:"login-message-title"},"归属地",-1)),_("span",E,y(w(a).last_login.ip_info.info),1)]),_("div",M,[e[6]||(e[6]=_("span",{class:"login-message-title"},"时间",-1)),_("span",V,y(w(a).last_login.login_time_str),1)])])])])}}}),[["__scopeId","data-v-a62a8a43"]]),A=u("HOME-STORE",()=>{const{getGlobalInfo:s}=e(),u=m(0),p=m(!1),g=m({name:"",simpleName:""}),d=m(0),f=m({runningDays:0,isBeta:!1,isUpgrade:!1,cloudBeta:!1,betaInfo:null,officialInfo:null,grayscale:1,isSetup:!0,isRestart:!1,upgrade:0,currentInfo:null,accountVersionInfo:null}),v=m({one:0,max:0,five:0,fifteen:0}),_=m({occupy:"",framework:"",coresOccupy:[0,0,0],cpuNumber:0,logicCores:0,cores:0,process:[0,0]}),I=m({}),y=m({memRealUsed:0,memRealUsedList:[],memTotalList:[],memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0}),w=m({cpuBaseInfo:{active_processes:0,cpu_name:"Common KVM processor * 2",load_avg:{},logical_cpu:0,num_phys_cores:0,physical_cpu:0,total_processes:0},cpuProcess:[],memProcess:[]}),h=m([]),b=m([]),k=m([]),O=m([]),T=m([]),L=m([]),D=m([]),j=m(!1),x=s=>{const e=window.vite_public_version,a=e.split(".").pop(),o=parseInt(a).toString()===a&&2===a.length,{is_beta:t,version:i,beta:l,downUrl:c,updateMsg:r,uptime:u,grayscale_test:m}=s;Object.assign(f.value,{isBeta:o,isUpgrade:!n(e,o?l.version:i),cloudBeta:t,betaInfo:l,officialInfo:{downUrl:c,updateMsg:r,version:i,uptime:u},grayscale:m})},N=s=>{const{local:e,cloud:a,upgrade:o}=s,t=2===o?null==a?void 0:a.OfficialVersionLatest:1===o?null==a?void 0:a.OfficialVersion:e,n=null==a?void 0:a.AccountVersion;Object.assign(f.value,{upgrade:o,currentInfo:t,accountVersionInfo:n})},U=s=>{const{disk:e,mem:a,network:o,iostat:t,cpu:n,installed:i,cpu_times:l,down:c,up:r,downPackets:u,upPackets:m,downTotal:w,upTotal:h,system:b,simple_system:k,time:P,docker_run:S}=s,L={ALL:{down:c,up:r,downPackets:u,upPackets:m,downTotal:w,upTotal:h},...o};B(e);const D=Date.now();p.value=i,y.value=a,O.value=L,T.value=t,j.value=!!S,_.value={occupy:n[0],cores:n[1],coresOccupy:n[2],framework:n[3],logicCores:n[4],cpuNumber:n[5],process:[l["活动进程数"],l["总进程数"]]},I.value=l,v.value=s.load,d.value=D,g.value.name=k,g.value.simpleName=b,f.value.runningDays=P},B=s=>{var e;const a=[],o=[];s.forEach(s=>{const{path:e,size:t}=s,n=c(t),i=n?0:parseInt(t[3].substring(0,t[3].lastIndexOf("%"))),l={total:t[0].split(" "),used:t[1].split(" ")};a.push({show:!1,data:s,info:{type:"disk",title:n?"未挂载":e,range:i,desc:{total:l.total[0],used:l.used[0],total_unit:l.total[1],used_unit:l.used[1]}}}),o.push({diskName:e,diskQuota:Number.parseFloat(t[0].split("G")[0])})}),L.value=(null==(e=s[0])?void 0:e.size)||[],h.value=a,b.value=o,localStorage.setItem("checkWarnInfo",JSON.stringify(a[0]))};return{panelInfo:f,memory:y,systemInfo:g,refreshTime:d,load:v,cpu:_,cpuTimes:I,disk:h,diskQuota:b,isDockerPanel:j,recommendSoft:k,network:O,diskIo:T,diskUsage:L,overviewShowList:D,isRefreshData:u,recommendInstall:p,specificResource:w,recommendInstallDialog:async()=>a({component:()=>o(()=>import("./index318.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),title:'<div class="flex items-center justify-between text-[1.2rem]"><span>初始化推荐配置</span><span class="close-ad">不再显示推荐</span></div>',area:105,closeBtn:2}),getUpdateInfo:async(s={})=>{try{const{data:e}=await t(s),{status:a,msg:o}=e;return!(!a||!o)&&(x(o),o)}catch(e){}},getUpdateInfoNew:async()=>{try{const{data:s}=await i({check:!0});return s&&N(s),s}catch(s){}},getHomeConfig:async()=>{const e=await s();"object"==typeof e&&e&&(f.value.isSetup=e.isSetup),e.migration&&a({area:45,component:()=>o(()=>import("./index313.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},getSystemInfo:async()=>{try{const s=await l();u.value=(new Date).getTime(),U(s.data)}catch(s){}},monitorLoginInfo:async()=>{var s;const e=sessionStorage.getItem("loginInfo");if(null!=e){let a=JSON.parse(e);null!=a&&""!=a&&(null==(s=null==a?void 0:a.last_login)?void 0:s.login_time_str)&&a.login_origin&&P({title:"登录成功",message:S(H),type:"success",position:"bottom-right",dangerouslyUseHTMLString:!0,customClass:"login-success",onClose:()=>sessionStorage.removeItem("loginInfo")})}},getHomeProcessInfo:async()=>{try{const{data:{info:s,CPU_high_occupancy_software_list:e,memory_high_occupancy_software_list:a}}=await r();Object.assign(w.value,{cpuBaseInfo:s,cpuProcess:e,memProcess:a,refresh:Date.now()})}catch(s){}},$reset:()=>{h.value=[],b.value=[],k.value=[],O.value=[],T.value=[],D.value=[],Object.assign(w.value,{cpuProcess:[],memProcess:[]})}}},{persist:!0,storage:localStorage,omit:["systemInfo"]});export{A as H};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
