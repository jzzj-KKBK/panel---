!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,l=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw l}}}}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.toStringTag||"@@toStringTag";function u(n,r,a,l){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return o(s,"_invoke",function(n,r,a){var o,l,u,i=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return o=t,l=0,u=e,m.n=n,c}};function d(n,r){for(l=n,u=r,t=0;!f&&i&&!a&&t<s.length;t++){var a,o=s[t],d=m.p,p=o[2];n>3?(a=p===r)&&(u=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=d&&((a=n<2&&d<o[1])?(l=0,m.v=r,m.n=o[1]):d<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,m.n=p,l=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(i>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,p),l=s,u=p;(t=l<2?e:u)||!f;){o||(l?l<3?(l>1&&(m.n=-1),d(l,u)):m.n=u:m.v=u);try{if(i=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=m.n<0)?u:n.call(r,m))!==c)break}catch(t){o=e,l=1,u=t}finally{i=1}}return{value:t,done:f}}}(n,a,l),!0),s}var c={};function i(){}function s(){}function f(){}t=Object.getPrototypeOf;var m=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),d=f.prototype=i.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,l,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,o(d,"constructor",f),o(f,"constructor",s),s.displayName="GeneratorFunction",o(f,l,"GeneratorFunction"),o(d),o(d,l,"Generator"),o(d,r,function(){return this}),o(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:u,m:p}})()}function o(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,n,r){function l(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(l("next",0),l("throw",1),l("return",2))},o(e,t,n,r)}function l(e,t,n,r,a,o,l){try{var u=e[o](l),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e){l(o,r,a,u,c,"next",e)}function c(e){l(o,r,a,u,c,"throw",e)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./index-legacy130.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./validator-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./index.vue_vue_type_style_index_0_scoped_b3c4124c_lang-legacy.js?v=1756369731"],function(n,r){"use strict";var o,l,c,i,s,f,m,d,p,v,y,b,h,k,E,g,w,x,_,S,j,T,I,V,A,P,C,D,R,N,F,G;return{setters:[function(e){o=e.l,l=e.L,c=e.K,i=e.ja,s=e.jb,f=e.jc,m=e.ag,d=e.c,p=e.b},function(e){v=e.c,y=e.r,b=e.k,h=e.p,k=e.q,E=e.v,g=e.x,w=e.M,x=e.A,_=e.y,S=e.C,j=e.z,T=e.J,I=e.e,V=e.F,A=e.a_,P=e.P,C=e.B,D=e.S,R=e.ag,N=e.af,F=e.D},function(e){G=e._},null,null,null,null,null],execute:function(){var O={class:"flex items-center"},K={class:"ml-[1rem]"},U={class:"flex items-center mt-6"},Y={class:"w-[20rem] flex ml-[1rem]"},B={class:"flex items-center mt-6"},M={class:"w-[20rem] flex ml-[1rem]"},z={class:"my-6 flex items-center leading-[3rem]"},q={class:"flex ml-[1rem]"},L=["onClick"],Q={key:1,class:"flex mt-[1.2rem]"},H={class:"flex-1 mr-[2rem]"},J={class:"flex-1"},$={class:"list-disc text-[#777] px-[2rem] pt-[1.2rem]"},W={class:"flex items-center"};n("default",v({__name:"index",props:{compData:{default:function(){return{}}}},emits:["close"],setup:function(n,v){var X=v.emit,Z=p(),ee=n,te=ee.compData.addNoPortLogin,ne=y(!1),re=y(!1),ae=y(!1),oe=y([]),le=b({domain:"",port:"",key:"",cert:""}),ue=X,ce=y("auto"),ie=[{title:"不部署证书",value:"no"},{title:"自定义证书",value:"auto"},{title:"选择已有证书",value:"select"}],se=function(e){le.key=e.key,le.cert=e.cert},fe=function(){var e=u(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:c({loading:"正在关闭反向代理，请稍候...",request:i({container_id:ee.compData.row.id}),message:!0,success:function(e){e.status&&(ce.value="no",le.key="",le.cert="",le.port="",le.domain="",re.value=!1)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),me=function(){var e=u(a().m(function e(n,r){var o,l,u,c,i,s,f,m,d;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!r){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,navigator.clipboard.readText();case 2:o=e.v,l=[/-----BEGIN PRIVATE KEY-----[\s\S]*?-----END PRIVATE KEY-----/,/-----BEGIN RSA PRIVATE KEY-----[\s\S]*?-----END RSA PRIVATE KEY-----/,/-----BEGIN EC PRIVATE KEY-----[\s\S]*?-----END EC PRIVATE KEY-----/],u=[/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/,/-----BEGIN CERTIFICATE REQUEST-----[\s\S]*?-----END CERTIFICATE REQUEST-----/],c=t("key"===n?l:u),e.p=3,c.s();case 4:if((i=c.n()).done){e.n=8;break}if(s=i.value,!(f=o.match(s))||!f[0]){e.n=7;break}Z.success("已从粘贴板检测到".concat("key"===n?"密钥":"证书")),m=n,e.n="key"===m?5:"cert"===m?6:7;break;case 5:return le.key=f[0],e.a(3,7);case 6:return le.cert=f[0],e.a(3,7);case 7:e.n=4;break;case 8:e.n=10;break;case 9:e.p=9,d=e.v,c.e(d);case 10:return e.p=10,c.f(),e.f(10);case 11:e.n=13;break;case 12:e.p=12,e.v;case 13:return e.a(2)}},e,null,[[3,9,10,11],[1,12]])}));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=u(a().m(function e(t){var n,r,o,l,u,c,i;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=Z.load("正在获取配置中，请稍候..."),e.p=1,e.n=2,s({container_id:t});case 2:r=e.v,o=r.data,(l=o.proxy_port).length>0&&(oe.value=l.map(function(e){return{label:e,value:e}}),le.port=l[0]),ae.value=l.length>0,u=o.cert,c=o.key,i=o.name,le.domain=i,ce.value=o.ssl?"auto":"no",re.value=!!o.status,le.key=c||"",le.cert=u||"",e.n=4;break;case 3:e.p=3,e.v,n.close();case 4:return e.p=4,n.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=u(a().m(function e(){var t,n,r;return a().w(function(e){for(;;)switch(e.n){case 0:if(le.domain){e.n=1;break}return Z.error("域名不能为空"),e.a(2);case 1:if("no"===ce.value){e.n=2;break}if(le.key&&le.cert){e.n=2;break}return Z.error("请填写证书内容"),e.a(2);case 2:if(!ne.value){e.n=4;break}return t=ee.compData.row,n=t.id,r=t.name,e.n=3,c({request:f({container_id:n,container_name:r,container_port:le.port,domain:le.domain,privateKey:le.key,certPem:le.cert}),message:!0});case 3:de(ee.compData.row.id),e.n=5;break;case 4:te(le);case 5:ue("close");case 6:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return h(function(){ee.compData.row&&(ne.value=!0,de(ee.compData.row.id))}),function(t,n){var a=G,u=D,c=m,i=R,s=N,f=F,p=d;return k(),E("div",{class:T(g(ne)?"":"p-[2.4rem]")},[!g(ae)&&g(ne)?(k(),w(a,{key:0,width:"36rem"},{content:x(function(){return e(n[8]||(n[8]=[_("i",{class:"svgtofont-el-warning-filled text-warning mr-4px text-2rem"},null,-1),_("span",null,"当前容器暂无端口映射，无法做容器反向代理",-1)]))}),_:1})):S("",!0),_("div",O,[n[9]||(n[9]=_("span",null,"反向代理状态：",-1)),_("span",K,j(g(re)?"已开启":"未开启"),1),_("span",{class:T(g(re)?"svgtofont-icon-start text-[#20a53a]":"svgtofont-icon-stop text-[#ff0000]")},null,2)]),_("div",U,[n[10]||(n[10]=_("span",null,"绑定域名",-1)),_("div",Y,[I(u,{modelValue:g(le).domain,"onUpdate:modelValue":n[0]||(n[0]=function(e){return g(le).domain=e}),disabled:g(re),placeholder:"请输入绑定域名"},null,8,["modelValue","disabled"])])]),_("div",B,[n[11]||(n[11]=_("span",null,"需要代理的本地端口",-1)),_("div",M,[g(ne)&&g(oe).length>0?(k(),w(c,{key:0,modelValue:g(le).port,"onUpdate:modelValue":n[1]||(n[1]=function(e){return g(le).port=e}),placeholder:"请选择端口号",disabled:g(re),options:g(oe),class:"w-[20rem]"},null,8,["modelValue","disabled","options"])):(k(),w(u,{key:1,modelValue:g(le).port,"onUpdate:modelValue":n[2]||(n[2]=function(e){return g(le).port=e}),type:"number",placeholder:"端口号"},null,8,["modelValue"]))])]),_("div",z,[n[12]||(n[12]=_("span",null,"SSL证书",-1)),_("div",q,[I(s,{modelValue:g(ce),"onUpdate:modelValue":n[3]||(n[3]=function(e){return P(ce)?ce.value=e:null}),size:"small"},{default:x(function(){return[(k(),E(V,null,A(ie,function(e,t){return I(i,{key:t,value:e.value},{default:x(function(){return[_("span",{onClick:function(t){return n=e.value,ce.value=n,void("select"===n&&o({component:function(){return l(function(){return r.import("./selected-cert-dialog-legacy.js?v=1756369731")},void 0,r.meta.url)},title:"免端口登录",area:70,showFooter:!1,compData:{selectdCert:se}}));var n}},j(e.title),9,L)]}),_:2},1032,["value"])}),64))]}),_:1},8,["modelValue"])])]),"no"!==g(ce)?(k(),E("div",Q,[_("div",H,[n[13]||(n[13]=_("div",{class:"text-[1.2rem] mb-[.8rem]"},j("密钥(KEY)"),-1)),I(u,{class:"text-[1.2rem]",type:"textarea",modelValue:g(le).key,"onUpdate:modelValue":n[4]||(n[4]=function(e){return g(le).key=e}),rows:13,size:"small",placeholder:"粘贴您的*.key文件内容",onFocus:n[5]||(n[5]=function(e){return me("key",g(le).key)})},null,8,["modelValue"])]),_("div",J,[n[14]||(n[14]=_("div",{class:"text-[1.2rem] mb-[.8rem]"},j("证书(PEM格式)"),-1)),I(u,{type:"textarea",modelValue:g(le).cert,"onUpdate:modelValue":n[6]||(n[6]=function(e){return g(le).cert=e}),rows:13,size:"small",placeholder:"粘贴您的*.pem文件内容",onFocus:n[7]||(n[7]=function(e){return me("cert",g(le).cert)})},null,8,["modelValue"])])])):S("",!0),I(f,{onClick:pe,type:"primary",class:"!mt-1rem"},{default:x(function(){return e(n[15]||(n[15]=[C("保存",-1)]))}),_:1}),g(re)?(k(),w(f,{key:2,onClick:fe,class:"!mt-1rem"},{default:x(function(){return e(n[16]||(n[16]=[C("关闭反向代理",-1)]))}),_:1})):S("",!0),_("ul",$,[n[19]||(n[19]=_("li",null,"配置此域名的证书到面板，浏览器即可信任访问",-1)),_("li",null,[_("div",W,[n[18]||(n[18]=C(" 粘贴您的*.key以及*.pem内容，然后保存即可 ",-1)),I(p,{href:"https://www.bt.cn/bbs/thread-105443-1-1.html"},{default:x(function(){return e(n[17]||(n[17]=[C("帮助",-1)]))}),_:1})])]),n[20]||(n[20]=_("li",null,"如果浏览器提示证书链不完整,请检查是否正确拼接PEM证书",-1)),n[21]||(n[21]=_("li",null,"PEM格式证书 = 域名证书.crt + 根证书(root_bundle).crt",-1)),n[22]||(n[22]=_("li",null,[C("如需更多设置，请前往"),_("a",{class:"bt-link",href:"/docker/dockersite"},"Docker--网站")],-1))])],2)}}}))}}})}();
