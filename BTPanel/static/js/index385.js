import{c as e,s as a,k as s,r as t,p as r,q as l,v as i,e as o,A as d,x as n,F as m,a_ as c,M as p,y as u,z as h,Q as f,ai as _,aj as b,a9 as v,a7 as y}from"./base-lib.js?v=1756369731";import{A as w,E as x,F as N,G as I}from"./ssl.js?v=1756369731";import{b as j}from"./utils-lib.js?v=1756369731";import{u as O}from"./useStore11.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const k={class:"p-[16px]"},D={style:{float:"left"}},R=e({__name:"index",props:{compData:{type:Object,default:()=>{}}},setup(e,{expose:R}){const{activeTabs:z,sslIsRefresh:V,testIsRefresh:q,encryptIsRefresh:A,otherIsRefresh:F}=a(O()),S=j(),g=e,C=s({siteName:"",ssl_hash:"",oid:"",partnerOrderId:"",index:""}),E=t([]),G=async e=>{let a;try{switch(e){case"1":a=await I({siteName:C.siteName,oid:C.oid});break;case"2":a=await N({siteName:C.siteName,partnerOrderId:C.partnerOrderId});break;case"3":let e={siteName:C.siteName,ssl_hash:C.ssl_hash,index:C.index};g.compData.row.order_status?delete e.ssl_hash:delete e.index,a=await x(e)}}catch(s){}return a},H=()=>{C.siteName="",C.ssl_hash="",C.oid="",C.partnerOrderId="",C.index=""};return r(()=>{(async()=>{const{data:e}=await w();E.value=e})(),(e=>{switch(e.type){case"1":C.oid=e.oid;break;case"2":C.partnerOrderId=e.partnerOrderId;break;case"3":C.ssl_hash=e.hash,C.index=e.index}})(g.compData.row)}),R({onConfirm:async e=>{var a;if(!C.siteName)return void S.error("请选择部署网站");let s;try{s=S.load("正在部署证书,请稍后...");const t=await G(g.compData.row.type);if(S.request(t),t.status){H();const s={ssl:()=>V.value=!0,test:()=>q.value=!0,encrypt:()=>A.value=!0,other:()=>F.value=!0};null==(a=s[z.value])||a.call(s),e&&e()}}catch(t){}finally{s&&s.close()}}}),(e,a)=>{const s=_,t=b,r=v,w=y;return l(),i("div",k,[o(w,{model:n(C),class:"relative w-full","label-position":"right",size:"small",onSubmit:a[1]||(a[1]=f(()=>{},["prevent"]))},{default:d(()=>[o(r,{label:"部署网站",prop:"dns_name"},{default:d(()=>[o(t,{modelValue:n(C).siteName,"onUpdate:modelValue":a[0]||(a[0]=e=>n(C).siteName=e),class:"!w-[33rem]",filterable:"","default-first-option":"",size:"default",placeholder:"请选择部署网站"},{default:d(()=>[(l(!0),i(m,null,c(n(E),e=>(l(),p(s,{key:e.id,label:e.name,value:e.name},{default:d(()=>[u("span",D,h(e.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}});export{R as default};
