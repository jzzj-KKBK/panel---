import{bj as e,aA as t,r as l,bk as a,b as n,bl as s,A as o,_ as i,p as r,aV as u,v as p,bm as d}from"./utils-lib.js?v=1756369731";import{c,r as m,aG as b,w as h,g as v,e as f,B as k,m as x,T as g,an as w,ao as y,ap as C,aB as V,i as H}from"./base-lib.js?v=1756369731";import{_ as B}from"./index104.js?v=1756369731";const j=n(),_=(a,n="path")=>{e(),t("Path",a[n]),l.push({path:"/files"})},q=c({props:{onClickPwd:{type:Function,required:!0},modelValue:{type:String,default:""}},setup(e){const t=s("copy",16),l=m(!1),a=m(!0);b(()=>{a.value=!!e.modelValue}),h(()=>e.modelValue,()=>{l.value=!1});const n=v(()=>l.value?"svgtofont-icon-eye-close":"svgtofont-icon-browse"),i=()=>e.onClickPwd();return()=>f("div",null,[a.value?f("div",{class:"flex items-center"},[l.value?f("span",{class:"block truncate max-w-[140px]"},[e.modelValue]):f("span",null,[k("**********")]),f("i",{class:"mx-4 cursor-pointer text-[#333] text-[15px] ".concat(n.value),title:"显示密码",onClick:()=>l.value=!l.value},null),f("i",{id:t,"data-clipboard-text":e.modelValue,class:"svgtofont-el-document-copy cursor-pointer text-[#333] text-[15px] copy svgtofont-icon-copy",title:"复制密码",onClick:()=>{return t=e.modelValue,void o({value:t});var t}},null)]):f("div",null,[f("span",{class:"text-[#999]"},[k("无法获取密码，请点击"),f("span",{class:"text-danger cursor-pointer",onClick:i},[k("改密")]),k("重置密码!")])])])}}),S=c({name:"BtTableStatus",props:{data:{type:Array,default:()=>["未启动","运行中"]},isIcon:{type:Boolean,default:!0},modelValue:{type:[Boolean,Number],default:!0}},setup:(e,{attrs:t})=>()=>f("span",x({class:"bt-".concat(e.modelValue?"link":"danger")},t),[f("span",{class:"flex items-center"},[f("span",null,[e.data[Number(e.modelValue)]]),e.isIcon&&f("i",{class:"ml-[2px] text-[1.2rem] svgtofont-icon-".concat(e.modelValue?"start":"stop")},null)])])});const z=(e={type:"page",key:"id",isHide:!1,disableds:()=>{}})=>({type:"CheckBox",width:"all"===e.type?42:36,isHide:e.isHide,renderHeader:(t,l)=>{const a=[{label:"全选当前页",command:"page-select"},{label:"全选所有项",command:"all-select"},{label:"清空选中项",command:"clear-select"}],{checkAllCheckbox:n,checkAllIndeterminate:s,handleAllChange:o,handleCommandChange:r}=l;return f("div",{class:"flex items-center justify-center"},[f(g,{modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,indeterminate:s.value,onChange:t=>o(t,!1,e.key),class:"!mr-[4px]"},null),"all"===(null==e?void 0:e.type)?f(w,{onCommand:r},{default:()=>f(i,{icon:"el-arrow-down"},null),dropdown:()=>{let e;return f(y,null,"function"==typeof(t=e=a.map(e=>f(C,e,{default:()=>[e.label]})))||"[object Object]"===Object.prototype.toString.call(t)&&!H(t)?e:{default:()=>[e]});var t}}):null])},render:(t,l,{handleScopeChange:a})=>{var n;const s=(null==(n=e.disabled)?void 0:n.call(e,t))||!1;return s&&(t.disable_check=!0),f(g,{modelValue:t.keys_scopes_status,"onUpdate:modelValue":e=>t.keys_scopes_status=e,disabled:s,onChange:n=>a(n,t,l,e.key||"")},null)}}),A=(e={prop:"path"})=>({label:e.label||"根目录",prop:e.prop,minWidth:e.width||200,isCustom:!0,render:t=>f("span",{class:"flex !justify-start inline-block bt-link leading-[16px]",onClick:()=>_(t,e.prop),title:"点击打开目录"},[t[e.prop]])}),O=(e,t)=>({width:22,type:"toping",label:e.label||"",subtitle:"置顶",className:"cols-toping",render:l=>{t||(t="sort");const a=e.param||t||"",n=Boolean(l[a])&&"0"!==l[a];return f("div",{onClick:()=>e.event(l,n?"untop":"top")},[f("i",{style:"color:".concat(n?"#EFB958":"#C7BDA9"),class:"svgtofont-icon-top cursor-pointer text-[1.6rem] ".concat(n?"":"table-no-top opacity-80")},null)])}}),P=e=>({label:"备注",prop:"ps",isCustom:!0,showOverflowTooltip:!1,width:e.width||120,minWidth:e.minWidth||120,render:t=>{var l;const n={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"',"#x27":"'",apos:"'"},s=e.prop?e.prop:"ps";let o=(null==(l=t[s])?void 0:l.replace(/&(lt|gt|nbsp|amp|quot|#x27);/gi,function(e,t){return n[t]}))||"";return f("input",{type:"text",value:o,class:"bt-table-input w-full",placeholder:"点击编辑备注",onBlur:l=>{const n=l.target;o!==(null==n?void 0:n.value)&&(o=n.value,e.request?e.request(t,o):(async({id:e,ps:t},l)=>{const n=j.load("正在修改备注信息，请稍后...");try{const n=await a({id:e,table:l,ps:t});j.request(n)}catch(s){}finally{n.close()}})({id:t.id,ps:o},e.table))},onKeyup:e=>{if("Enter"===e.key){const t=e.target;null==t||t.blur()}}},null)}}),W=e=>(r(e.prop)&&(e.prop="status"),r(e.data)&&(e.data=["未启动","运行中"]),{label:"状态",prop:e.prop,width:e.width||80,minWidth:e.sortable?80:70,isCustom:!0,sortable:e.sortable||!1,render:t=>{let l=!!Number(t[e.prop]);return e.function?e.function(t):(["running","start"].includes(t[e.prop])&&(l=!0),["exited","stop","created"].indexOf(t[e.prop])>-1&&(l=!1),f(S,{modelValue:l,data:e.data,onClick:()=>e.event(t)},null))}}),N=(e={prop:"password"})=>({label:"密码",prop:e.prop||"password",minWidth:130,width:e.width,isCustom:!0,render:t=>f(q,{modelValue:t[e.prop||"password"],onClickPwd:()=>e.event&&e.event(t)},null)}),T=e=>({label:"容量",isLtd:!0,minWidth:80,width:e.width||"auto",isCustom:!(null==e?void 0:e.hasOwnProperty("isCustom"))||e.isCustom,render:t=>{var l;if("PHPMOD"===(null==(l=null==t?void 0:t.project_config)?void 0:l.type))return"--";let a=!1;const{quota:n}=t,s=!(null==n?void 0:n.size);if(s)return f("span",{class:"bt-link",onClick:()=>{e.event(t,s)}},["未配置"]);const o=1024*n.size*1024,i=Number((n.used/o*100).toFixed(2))||0,r=n.used/1024/1024>0?(n.used/1024/1024).toFixed(2):"0.00";return n.size>0&&n.used>=o&&(a=!0),a?f("span",{class:"bt-link !text-danger",onClick:()=>{e.event(t,s)}},["容量已满"]):f("span",{class:i>80?"el-link--danger bt-link":"el-link--primary bt-link",onClick:()=>{e.event(t,s)}},[r,k(" / "),n.size,k(" MB")])}}),F=e=>({label:"备份",prop:e.prop,minWidth:180,isCustom:!0,render:t=>f("div",{class:"flex items-center"},[f("span",{class:t.backup_count>0?"text-primary cursor-pointer":"text-[#f0ad4e] cursor-pointer",onClick:()=>e.event?e.event(t,"back"):null},[t.backup_count>0?"有备份(".concat(t.backup_count,")"):"点击备份"]),f("span",{class:"mx-[4px]"},[k("|")]),f("span",{class:"bt-link",onClick:()=>e.event?e.event(t,"import"):null},[k("导入")])])}),M=e=>({isCustom:!0,...e,render:t=>f("span",{class:"bt-link",onClick:()=>e.event?e.event(t):null,title:e.title},[e.text])}),E=(e,t)=>{let l=0;return u(e)||(l=e.reduce((e,t)=>e+(t.width||40),0)+20),{label:(null==t?void 0:t.label)||"操作",align:"right",fixed:t&&"boolean"==typeof t.fixed?t.fixed:"right",width:(null==t?void 0:t.width)||l,render:(t,l)=>{const a=[];let n=e;return u(e)&&(n=e(t)),n.forEach((e,s)=>{if(e.render)return a.push(e.render(t,l));if(e.isHide&&e.isHide(t))return!1;if(e.isMore){const l=e.menu.filter(e=>"function"==typeof e.isHide?!e.isHide(t):!e.isHide);return a.push(f(w,{class:"h-[1.6rem]",onCommand:l=>e.onClick(l,t)},{default:()=>f("span",{class:"text-primary flex items-center"},[k("更多"),f("span",{class:"svgtofont-el-arrow-down"},null)]),dropdown:()=>f(y,null,{default:()=>l.map(e=>f(C,{command:e.key},{default:()=>[e.title]}))})})),!1}const o="function"==typeof e.isHide&&e.isHide(t);a.push(f("span",{onClick:a=>e.onClick(t,l,a),title:e.title,class:o?"hidden":"bt-link"},[e.title])),n.length-1!==s&&a.push(f(B,null,null))}),V("div",a)}}},I=e=>({label:"大小",prop:e.prop,width:e.width||80,render:t=>p(Number(t[e.prop||"size"]),!0)}),U=()=>({label:"操作结果",prop:"batchStatus",width:124,showOverflowTooltip:!0,render:e=>{const t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x27;":"'"},l=(()=>{switch(e.batchStatus){case 0:return"等待执行";case 1:return"执行成功";case 2:return(null==e?void 0:e.message)||(null==e?void 0:e.msg)||"执行失败"}return"-"})().replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&#x27;/g,e=>t[e]);return f("div",{innerHTML:l,class:"inline-clock truncate !w-[10rem] ".concat(e.batchStatus?1===e.batchStatus?"text-primary":"text-danger":"text-warning")},null)}}),D=e=>({label:e.label||"状态",prop:e.prop||"status",width:80,render:t=>{const l=e.prop||"status";return f(d,{modelValue:t[l],"onUpdate:modelValue":e=>t[l]=e,onChange:l=>e.event(l,t),size:e.size||"small"},null)}});export{S as B,z as a,W as b,U as c,A as d,O as e,F as f,P as g,I as h,N as i,M as j,T as k,D as l,_ as o,E as u};
