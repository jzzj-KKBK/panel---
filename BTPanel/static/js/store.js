import{at as e,b as t,K as a,j as l,u as i,L as n,M as s,l as o,bU as r,o as c,R as u,cm as p,bT as d,v as f,N as h,cn as m,co as v,cp as g,S as y,A as b,cq as w,w as _,aq as E,p as L,cr as S,H as T,e as C,cs as x,a5 as k,ai as D,m as R,a as I,ck as N,ct as F,q as O,aA as A,aj as P,cl as j,I as M}from"./utils-lib.js?v=1756369731";import{r as z,n as q,c as B,w as V,aG as H,G,H as W,I as U,q as J,v as $,e as K,O as Y,Q as X,y as Q,j as Z,d as ee,t as te,k as ae,U as le,b4 as ie,az as ne,s as se,aB as oe,B as re,aj as ce,ai as ue,i as pe,g as de,Z as fe,ar as he,p as me,M as ve,A as ge,J as ye,K as be,x as we,z as _e,C as Ee,N as Le,aN as Se,a0 as Te,a3 as Ce,E as xe,o as ke}from"./base-lib.js?v=1756369731";import{e as De,f as Re,s as Ie,h as Ne,a as Fe,i as Oe,j as Ae,k as Pe,l as je,m as Me,n as ze,o as qe,p as Be,q as Ve,r as He,z as Ge,t as We,u as Ue,v as Je,w as $e,x as Ke,y as Ye,A as Xe,B as Qe,D as Ze,E as et,F as tt,G as at,H as lt,I as it,J as nt,K as st,L as ot,M as rt,N as ct,O as ut,P as pt,Q as dt,R as ft,S as ht,T as mt,U as vt,V as gt,W as yt,X as bt,Y as wt,Z as _t,_ as Et,b as Lt,$ as St,a0 as Tt,a1 as Ct,a2 as xt,a3 as kt,a4 as Dt,a5 as Rt,a6 as It,a7 as Nt,a8 as Ft,a9 as Ot,aa as At,d as Pt,ab as jt,ac as Mt,ad as zt,ae as qt,af as Bt,ag as Vt,ah as Ht,ai as Gt,aj as Wt}from"./files.js?v=1756369731";import{l as Ut,f as Jt,q as $t,k as Kt,p as Yt}from"./validator.js?v=1756369731";import{g as Xt}from"./__commonjsHelpers__.js?v=1756369731";import{a as Qt,u as Zt,c as ea}from"./column.js?v=1756369731";import ta from"./store2.js?v=1756369731";var aa,la,ia,na={exports:{}};function sa(e){return e&&"object"==typeof e&&!Array.isArray(e)&&null!==e}aa=na,ia=-1,(la=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}).Diff=function(e,t){return[e,t]},la.prototype.diff_main=function(e,t,a,l){void 0===l&&(l=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=l;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new la.Diff(0,e)]:[];void 0===a&&(a=!0);var n=a,s=this.diff_commonPrefix(e,t),o=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var r=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var c=this.diff_compute_(e,t,n,i);return o&&c.unshift(new la.Diff(0,o)),r&&c.push(new la.Diff(0,r)),this.diff_cleanupMerge(c),c},la.prototype.diff_compute_=function(e,t,a,l){var i;if(!e)return[new la.Diff(1,t)];if(!t)return[new la.Diff(ia,e)];var n=e.length>t.length?e:t,s=e.length>t.length?t:e,o=n.indexOf(s);if(-1!=o)return i=[new la.Diff(1,n.substring(0,o)),new la.Diff(0,s),new la.Diff(1,n.substring(o+s.length))],e.length>t.length&&(i[0][0]=i[2][0]=ia),i;if(1==s.length)return[new la.Diff(ia,e),new la.Diff(1,t)];var r=this.diff_halfMatch_(e,t);if(r){var c=r[0],u=r[1],p=r[2],d=r[3],f=r[4],h=this.diff_main(c,p,a,l),m=this.diff_main(u,d,a,l);return h.concat([new la.Diff(0,f)],m)}return a&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,l):this.diff_bisect_(e,t,l)},la.prototype.diff_lineMode_=function(e,t,a){var l=this.diff_linesToChars_(e,t);e=l.chars1,t=l.chars2;var i=l.lineArray,n=this.diff_main(e,t,!1,a);this.diff_charsToLines_(n,i),this.diff_cleanupSemantic(n),n.push(new la.Diff(0,""));for(var s=0,o=0,r=0,c="",u="";s<n.length;){switch(n[s][0]){case 1:r++,u+=n[s][1];break;case ia:o++,c+=n[s][1];break;case 0:if(o>=1&&r>=1){n.splice(s-o-r,o+r),s=s-o-r;for(var p=this.diff_main(c,u,!1,a),d=p.length-1;d>=0;d--)n.splice(s,0,p[d]);s+=p.length}r=0,o=0,c="",u=""}s++}return n.pop(),n},la.prototype.diff_bisect_=function(e,t,a){for(var l=e.length,i=t.length,n=Math.ceil((l+i)/2),s=n,o=2*n,r=new Array(o),c=new Array(o),u=0;u<o;u++)r[u]=-1,c[u]=-1;r[s+1]=0,c[s+1]=0;for(var p=l-i,d=p%2!=0,f=0,h=0,m=0,v=0,g=0;g<n&&!((new Date).getTime()>a);g++){for(var y=-g+f;y<=g-h;y+=2){for(var b=s+y,w=(T=y==-g||y!=g&&r[b-1]<r[b+1]?r[b+1]:r[b-1]+1)-y;T<l&&w<i&&e.charAt(T)==t.charAt(w);)T++,w++;if(r[b]=T,T>l)h+=2;else if(w>i)f+=2;else if(d&&(L=s+p-y)>=0&&L<o&&-1!=c[L]&&T>=(E=l-c[L]))return this.diff_bisectSplit_(e,t,T,w,a)}for(var _=-g+m;_<=g-v;_+=2){for(var E,L=s+_,S=(E=_==-g||_!=g&&c[L-1]<c[L+1]?c[L+1]:c[L-1]+1)-_;E<l&&S<i&&e.charAt(l-E-1)==t.charAt(i-S-1);)E++,S++;if(c[L]=E,E>l)v+=2;else if(S>i)m+=2;else if(!d){var T;if((b=s+p-_)>=0&&b<o&&-1!=r[b])if(w=s+(T=r[b])-b,T>=(E=l-E))return this.diff_bisectSplit_(e,t,T,w,a)}}}return[new la.Diff(ia,e),new la.Diff(1,t)]},la.prototype.diff_bisectSplit_=function(e,t,a,l,i){var n=e.substring(0,a),s=t.substring(0,l),o=e.substring(a),r=t.substring(l),c=this.diff_main(n,s,!1,i),u=this.diff_main(o,r,!1,i);return c.concat(u)},la.prototype.diff_linesToChars_=function(e,t){var a=[],l={};function i(e){for(var t="",i=0,s=-1,o=a.length;s<e.length-1;){-1==(s=e.indexOf("\n",i))&&(s=e.length-1);var r=e.substring(i,s+1);(l.hasOwnProperty?l.hasOwnProperty(r):void 0!==l[r])?t+=String.fromCharCode(l[r]):(o==n&&(r=e.substring(i),s=e.length),t+=String.fromCharCode(o),l[r]=o,a[o++]=r),i=s+1}return t}a[0]="";var n=4e4,s=i(e);return n=65535,{chars1:s,chars2:i(t),lineArray:a}},la.prototype.diff_charsToLines_=function(e,t){for(var a=0;a<e.length;a++){for(var l=e[a][1],i=[],n=0;n<l.length;n++)i[n]=t[l.charCodeAt(n)];e[a][1]=i.join("")}},la.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var a=0,l=Math.min(e.length,t.length),i=l,n=0;a<i;)e.substring(n,i)==t.substring(n,i)?n=a=i:l=i,i=Math.floor((l-a)/2+a);return i},la.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var a=0,l=Math.min(e.length,t.length),i=l,n=0;a<i;)e.substring(e.length-i,e.length-n)==t.substring(t.length-i,t.length-n)?n=a=i:l=i,i=Math.floor((l-a)/2+a);return i},la.prototype.diff_commonOverlap_=function(e,t){var a=e.length,l=t.length;if(0==a||0==l)return 0;a>l?e=e.substring(a-l):a<l&&(t=t.substring(0,a));var i=Math.min(a,l);if(e==t)return i;for(var n=0,s=1;;){var o=e.substring(i-s),r=t.indexOf(o);if(-1==r)return n;s+=r,0!=r&&e.substring(i-s)!=t.substring(0,s)||(n=s,s++)}},la.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var a=e.length>t.length?e:t,l=e.length>t.length?t:e;if(a.length<4||2*l.length<a.length)return null;var i=this;function n(e,t,a){for(var l,n,s,o,r=e.substring(a,a+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(r,c+1));){var p=i.diff_commonPrefix(e.substring(a),t.substring(c)),d=i.diff_commonSuffix(e.substring(0,a),t.substring(0,c));u.length<d+p&&(u=t.substring(c-d,c)+t.substring(c,c+p),l=e.substring(0,a-d),n=e.substring(a+p),s=t.substring(0,c-d),o=t.substring(c+p))}return 2*u.length>=e.length?[l,n,s,o,u]:null}var s,o,r,c,u,p=n(a,l,Math.ceil(a.length/4)),d=n(a,l,Math.ceil(a.length/2));return p||d?(s=d?p&&p[4].length>d[4].length?p:d:p,e.length>t.length?(o=s[0],r=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],o=s[2],r=s[3]),[o,r,c,u,s[4]]):null},la.prototype.diff_cleanupSemantic=function(e){for(var t=!1,a=[],l=0,i=null,n=0,s=0,o=0,r=0,c=0;n<e.length;)0==e[n][0]?(a[l++]=n,s=r,o=c,r=0,c=0,i=e[n][1]):(1==e[n][0]?r+=e[n][1].length:c+=e[n][1].length,i&&i.length<=Math.max(s,o)&&i.length<=Math.max(r,c)&&(e.splice(a[l-1],0,new la.Diff(ia,i)),e[a[l-1]+1][0]=1,l--,n=--l>0?a[l-1]:-1,s=0,o=0,r=0,c=0,i=null,t=!0)),n++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),n=1;n<e.length;){if(e[n-1][0]==ia&&1==e[n][0]){var u=e[n-1][1],p=e[n][1],d=this.diff_commonOverlap_(u,p),f=this.diff_commonOverlap_(p,u);d>=f?(d>=u.length/2||d>=p.length/2)&&(e.splice(n,0,new la.Diff(0,p.substring(0,d))),e[n-1][1]=u.substring(0,u.length-d),e[n+1][1]=p.substring(d),n++):(f>=u.length/2||f>=p.length/2)&&(e.splice(n,0,new la.Diff(0,u.substring(0,f))),e[n-1][0]=1,e[n-1][1]=p.substring(0,p.length-f),e[n+1][0]=ia,e[n+1][1]=u.substring(f),n++),n++}n++}},la.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var a=e.charAt(e.length-1),l=t.charAt(0),i=a.match(la.nonAlphaNumericRegex_),n=l.match(la.nonAlphaNumericRegex_),s=i&&a.match(la.whitespaceRegex_),o=n&&l.match(la.whitespaceRegex_),r=s&&a.match(la.linebreakRegex_),c=o&&l.match(la.linebreakRegex_),u=r&&e.match(la.blanklineEndRegex_),p=c&&t.match(la.blanklineStartRegex_);return u||p?5:r||c?4:i&&!s&&o?3:s||o?2:i||n?1:0}for(var a=1;a<e.length-1;){if(0==e[a-1][0]&&0==e[a+1][0]){var l=e[a-1][1],i=e[a][1],n=e[a+1][1],s=this.diff_commonSuffix(l,i);if(s){var o=i.substring(i.length-s);l=l.substring(0,l.length-s),i=o+i.substring(0,i.length-s),n=o+n}for(var r=l,c=i,u=n,p=t(l,i)+t(i,n);i.charAt(0)===n.charAt(0);){l+=i.charAt(0),i=i.substring(1)+n.charAt(0),n=n.substring(1);var d=t(l,i)+t(i,n);d>=p&&(p=d,r=l,c=i,u=n)}e[a-1][1]!=r&&(r?e[a-1][1]=r:(e.splice(a-1,1),a--),e[a][1]=c,u?e[a+1][1]=u:(e.splice(a+1,1),a--))}a++}},la.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,la.whitespaceRegex_=/\s/,la.linebreakRegex_=/[\r\n]/,la.blanklineEndRegex_=/\n\r?\n$/,la.blanklineStartRegex_=/^\r?\n\r?\n/,la.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,a=[],l=0,i=null,n=0,s=!1,o=!1,r=!1,c=!1;n<e.length;)0==e[n][0]?(e[n][1].length<this.Diff_EditCost&&(r||c)?(a[l++]=n,s=r,o=c,i=e[n][1]):(l=0,i=null),r=c=!1):(e[n][0]==ia?c=!0:r=!0,i&&(s&&o&&r&&c||i.length<this.Diff_EditCost/2&&s+o+r+c==3)&&(e.splice(a[l-1],0,new la.Diff(ia,i)),e[a[l-1]+1][0]=1,l--,i=null,s&&o?(r=c=!0,l=0):(n=--l>0?a[l-1]:-1,r=c=!1),t=!0)),n++;t&&this.diff_cleanupMerge(e)},la.prototype.diff_cleanupMerge=function(e){e.push(new la.Diff(0,""));for(var t,a=0,l=0,i=0,n="",s="";a<e.length;)switch(e[a][0]){case 1:i++,s+=e[a][1],a++;break;case ia:l++,n+=e[a][1],a++;break;case 0:l+i>1?(0!==l&&0!==i&&(0!==(t=this.diff_commonPrefix(s,n))&&(a-l-i>0&&0==e[a-l-i-1][0]?e[a-l-i-1][1]+=s.substring(0,t):(e.splice(0,0,new la.Diff(0,s.substring(0,t))),a++),s=s.substring(t),n=n.substring(t)),0!==(t=this.diff_commonSuffix(s,n))&&(e[a][1]=s.substring(s.length-t)+e[a][1],s=s.substring(0,s.length-t),n=n.substring(0,n.length-t))),a-=l+i,e.splice(a,l+i),n.length&&(e.splice(a,0,new la.Diff(ia,n)),a++),s.length&&(e.splice(a,0,new la.Diff(1,s)),a++),a++):0!==a&&0==e[a-1][0]?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,i=0,l=0,n="",s=""}""===e[e.length-1][1]&&e.pop();var o=!1;for(a=1;a<e.length-1;)0==e[a-1][0]&&0==e[a+1][0]&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),o=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),o=!0)),a++;o&&this.diff_cleanupMerge(e)},la.prototype.diff_xIndex=function(e,t){var a,l=0,i=0,n=0,s=0;for(a=0;a<e.length&&(1!==e[a][0]&&(l+=e[a][1].length),e[a][0]!==ia&&(i+=e[a][1].length),!(l>t));a++)n=l,s=i;return e.length!=a&&e[a][0]===ia?s:s+(t-n)},la.prototype.diff_prettyHtml=function(e){for(var t=[],a=/&/g,l=/</g,i=/>/g,n=/\n/g,s=0;s<e.length;s++){var o=e[s][0],r=e[s][1].replace(a,"&amp;").replace(l,"&lt;").replace(i,"&gt;").replace(n,"&para;<br>");switch(o){case 1:t[s]='<ins style="background:#e6ffe6;">'+r+"</ins>";break;case ia:t[s]='<del style="background:#ffe6e6;">'+r+"</del>";break;case 0:t[s]="<span>"+r+"</span>"}}return t.join("")},la.prototype.diff_text1=function(e){for(var t=[],a=0;a<e.length;a++)1!==e[a][0]&&(t[a]=e[a][1]);return t.join("")},la.prototype.diff_text2=function(e){for(var t=[],a=0;a<e.length;a++)e[a][0]!==ia&&(t[a]=e[a][1]);return t.join("")},la.prototype.diff_levenshtein=function(e){for(var t=0,a=0,l=0,i=0;i<e.length;i++){var n=e[i][0],s=e[i][1];switch(n){case 1:a+=s.length;break;case ia:l+=s.length;break;case 0:t+=Math.max(a,l),a=0,l=0}}return t+=Math.max(a,l)},la.prototype.diff_toDelta=function(e){for(var t=[],a=0;a<e.length;a++)switch(e[a][0]){case 1:t[a]="+"+encodeURI(e[a][1]);break;case ia:t[a]="-"+e[a][1].length;break;case 0:t[a]="="+e[a][1].length}return t.join("\t").replace(/%20/g," ")},la.prototype.diff_fromDelta=function(e,t){for(var a=[],l=0,i=0,n=t.split(/\t/g),s=0;s<n.length;s++){var o=n[s].substring(1);switch(n[s].charAt(0)){case"+":try{a[l++]=new la.Diff(1,decodeURI(o))}catch(u){throw new Error("Illegal escape in diff_fromDelta: "+o)}break;case"-":case"=":var r=parseInt(o,10);if(isNaN(r)||r<0)throw new Error("Invalid number in diff_fromDelta: "+o);var c=e.substring(i,i+=r);"="==n[s].charAt(0)?a[l++]=new la.Diff(0,c):a[l++]=new la.Diff(ia,c);break;default:if(n[s])throw new Error("Invalid diff operation in diff_fromDelta: "+n[s])}}if(i!=e.length)throw new Error("Delta length ("+i+") does not equal source text length ("+e.length+").");return a},la.prototype.match_main=function(e,t,a){if(null==e||null==t||null==a)throw new Error("Null input. (match_main)");return a=Math.max(0,Math.min(a,e.length)),e==t?0:e.length?e.substring(a,a+t.length)==t?a:this.match_bitap_(e,t,a):-1},la.prototype.match_bitap_=function(e,t,a){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(t),i=this;function n(e,l){var n=e/t.length,s=Math.abs(a-l);return i.Match_Distance?n+s/i.Match_Distance:s?1:n}var s=this.Match_Threshold,o=e.indexOf(t,a);-1!=o&&(s=Math.min(n(0,o),s),-1!=(o=e.lastIndexOf(t,a+t.length))&&(s=Math.min(n(0,o),s)));var r,c,u=1<<t.length-1;o=-1;for(var p,d=t.length+e.length,f=0;f<t.length;f++){for(r=0,c=d;r<c;)n(f,a+c)<=s?r=c:d=c,c=Math.floor((d-r)/2+r);d=c;var h=Math.max(1,a-c+1),m=Math.min(a+c,e.length)+t.length,v=Array(m+2);v[m+1]=(1<<f)-1;for(var g=m;g>=h;g--){var y=l[e.charAt(g-1)];if(v[g]=0===f?(v[g+1]<<1|1)&y:(v[g+1]<<1|1)&y|(p[g+1]|p[g])<<1|1|p[g+1],v[g]&u){var b=n(f,g-1);if(b<=s){if(s=b,!((o=g-1)>a))break;h=Math.max(1,2*a-o)}}}if(n(f+1,a)>s)break;p=v}return o},la.prototype.match_alphabet_=function(e){for(var t={},a=0;a<e.length;a++)t[e.charAt(a)]=0;for(a=0;a<e.length;a++)t[e.charAt(a)]|=1<<e.length-a-1;return t},la.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var a=t.substring(e.start2,e.start2+e.length1),l=0;t.indexOf(a)!=t.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,a=t.substring(e.start2-l,e.start2+e.length1+l);l+=this.Patch_Margin;var i=t.substring(e.start2-l,e.start2);i&&e.diffs.unshift(new la.Diff(0,i));var n=t.substring(e.start2+e.length1,e.start2+e.length1+l);n&&e.diffs.push(new la.Diff(0,n)),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+n.length,e.length2+=i.length+n.length}},la.prototype.patch_make=function(e,t,a){var l,i;if("string"==typeof e&&"string"==typeof t&&void 0===a)l=e,(i=this.diff_main(l,t,!0)).length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&"object"==typeof e&&void 0===t&&void 0===a)i=e,l=this.diff_text1(i);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===a)l=e,i=t;else{if("string"!=typeof e||"string"!=typeof t||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");l=e,i=a}if(0===i.length)return[];for(var n=[],s=new la.patch_obj,o=0,r=0,c=0,u=l,p=l,d=0;d<i.length;d++){var f=i[d][0],h=i[d][1];switch(o||0===f||(s.start1=r,s.start2=c),f){case 1:s.diffs[o++]=i[d],s.length2+=h.length,p=p.substring(0,c)+h+p.substring(c);break;case ia:s.length1+=h.length,s.diffs[o++]=i[d],p=p.substring(0,c)+p.substring(c+h.length);break;case 0:h.length<=2*this.Patch_Margin&&o&&i.length!=d+1?(s.diffs[o++]=i[d],s.length1+=h.length,s.length2+=h.length):h.length>=2*this.Patch_Margin&&o&&(this.patch_addContext_(s,u),n.push(s),s=new la.patch_obj,o=0,u=p,r=c)}1!==f&&(r+=h.length),f!==ia&&(c+=h.length)}return o&&(this.patch_addContext_(s,u),n.push(s)),n},la.prototype.patch_deepCopy=function(e){for(var t=[],a=0;a<e.length;a++){var l=e[a],i=new la.patch_obj;i.diffs=[];for(var n=0;n<l.diffs.length;n++)i.diffs[n]=new la.Diff(l.diffs[n][0],l.diffs[n][1]);i.start1=l.start1,i.start2=l.start2,i.length1=l.length1,i.length2=l.length2,t[a]=i}return t},la.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var a=this.patch_addPadding(e);t=a+t+a,this.patch_splitMax(e);for(var l=0,i=[],n=0;n<e.length;n++){var s,o,r=e[n].start2+l,c=this.diff_text1(e[n].diffs),u=-1;if(c.length>this.Match_MaxBits?-1!=(s=this.match_main(t,c.substring(0,this.Match_MaxBits),r))&&(-1==(u=this.match_main(t,c.substring(c.length-this.Match_MaxBits),r+c.length-this.Match_MaxBits))||s>=u)&&(s=-1):s=this.match_main(t,c,r),-1==s)i[n]=!1,l-=e[n].length2-e[n].length1;else if(i[n]=!0,l=s-r,c==(o=-1==u?t.substring(s,s+c.length):t.substring(s,u+this.Match_MaxBits)))t=t.substring(0,s)+this.diff_text2(e[n].diffs)+t.substring(s+c.length);else{var p=this.diff_main(c,o,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(p)/c.length>this.Patch_DeleteThreshold)i[n]=!1;else{this.diff_cleanupSemanticLossless(p);for(var d,f=0,h=0;h<e[n].diffs.length;h++){var m=e[n].diffs[h];0!==m[0]&&(d=this.diff_xIndex(p,f)),1===m[0]?t=t.substring(0,s+d)+m[1]+t.substring(s+d):m[0]===ia&&(t=t.substring(0,s+d)+t.substring(s+this.diff_xIndex(p,f+m[1].length))),m[0]!==ia&&(f+=m[1].length)}}}}return[t=t.substring(a.length,t.length-a.length),i]},la.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,a="",l=1;l<=t;l++)a+=String.fromCharCode(l);for(l=0;l<e.length;l++)e[l].start1+=t,e[l].start2+=t;var i=e[0],n=i.diffs;if(0==n.length||0!=n[0][0])n.unshift(new la.Diff(0,a)),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t;else if(t>n[0][1].length){var s=t-n[0][1].length;n[0][1]=a.substring(n[0][1].length)+n[0][1],i.start1-=s,i.start2-=s,i.length1+=s,i.length2+=s}return 0==(n=(i=e[e.length-1]).diffs).length||0!=n[n.length-1][0]?(n.push(new la.Diff(0,a)),i.length1+=t,i.length2+=t):t>n[n.length-1][1].length&&(s=t-n[n.length-1][1].length,n[n.length-1][1]+=a.substring(0,s),i.length1+=s,i.length2+=s),a},la.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=t)){var l=e[a];e.splice(a--,1);for(var i=l.start1,n=l.start2,s="";0!==l.diffs.length;){var o=new la.patch_obj,r=!0;for(o.start1=i-s.length,o.start2=n-s.length,""!==s&&(o.length1=o.length2=s.length,o.diffs.push(new la.Diff(0,s)));0!==l.diffs.length&&o.length1<t-this.Patch_Margin;){var c=l.diffs[0][0],u=l.diffs[0][1];1===c?(o.length2+=u.length,n+=u.length,o.diffs.push(l.diffs.shift()),r=!1):c===ia&&1==o.diffs.length&&0==o.diffs[0][0]&&u.length>2*t?(o.length1+=u.length,i+=u.length,r=!1,o.diffs.push(new la.Diff(c,u)),l.diffs.shift()):(u=u.substring(0,t-o.length1-this.Patch_Margin),o.length1+=u.length,i+=u.length,0===c?(o.length2+=u.length,n+=u.length):r=!1,o.diffs.push(new la.Diff(c,u)),u==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(u.length))}s=(s=this.diff_text2(o.diffs)).substring(s.length-this.Patch_Margin);var p=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);""!==p&&(o.length1+=p.length,o.length2+=p.length,0!==o.diffs.length&&0===o.diffs[o.diffs.length-1][0]?o.diffs[o.diffs.length-1][1]+=p:o.diffs.push(new la.Diff(0,p))),r||e.splice(++a,0,o)}}},la.prototype.patch_toText=function(e){for(var t=[],a=0;a<e.length;a++)t[a]=e[a];return t.join("")},la.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var a=e.split("\n"),l=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<a.length;){var n=a[l].match(i);if(!n)throw new Error("Invalid patch string: "+a[l]);var s=new la.patch_obj;for(t.push(s),s.start1=parseInt(n[1],10),""===n[2]?(s.start1--,s.length1=1):"0"==n[2]?s.length1=0:(s.start1--,s.length1=parseInt(n[2],10)),s.start2=parseInt(n[3],10),""===n[4]?(s.start2--,s.length2=1):"0"==n[4]?s.length2=0:(s.start2--,s.length2=parseInt(n[4],10)),l++;l<a.length;){var o=a[l].charAt(0);try{var r=decodeURI(a[l].substring(1))}catch(c){throw new Error("Illegal escape in patch_fromText: "+r)}if("-"==o)s.diffs.push(new la.Diff(ia,r));else if("+"==o)s.diffs.push(new la.Diff(1,r));else if(" "==o)s.diffs.push(new la.Diff(0,r));else{if("@"==o)break;if(""!==o)throw new Error('Invalid patch mode "'+o+'" in: '+r)}l++}}return t},(la.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case 1:e="+";break;case ia:e="-";break;case 0:e=" "}t[a+1]=e+encodeURI(this.diffs[a][1])+"\n"}return t.join("").replace(/%20/g," ")},aa.exports=la,aa.exports.diff_match_patch=la,aa.exports.DIFF_DELETE=ia,aa.exports.DIFF_INSERT=1,aa.exports.DIFF_EQUAL=0;var oa={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1,EDITOR_RIGHT:"right",EDITOR_LEFT:"left",RTL:"rtl",LTR:"ltr",SVG_NS:"http://www.w3.org/2000/svg",DIFF_GRANULARITY_SPECIFIC:"specific",DIFF_GRANULARITY_BROAD:"broad"};const ra=oa;const ca=oa;const ua=na.exports,pa=function e(t,a){return sa(t)&&sa(a)&&Object.keys(a).forEach(l=>{sa(a[l])?(t[l]&&sa(t[l])||(t[l]=a[l]),e(t[l],a[l])):Object.assign(t,{[l]:a[l]})}),t},da=function(e,t,a=!1){let l=null,i=!0;return(...n)=>{const s=()=>{e.apply(this,n),l=null};a&&i&&(i=!1,s()),l||(l=setTimeout(s,t))}},fa=function(e,t){let a;return(...l)=>{const i=this;clearTimeout(a),a=setTimeout(()=>e.apply(i,l),t)}},ha=function(e=""){return e.replace(/\r\n/g,"\n")},ma=function(e,t,a,l){const i=e+(a-e)/2;return"M ".concat(e," ").concat(t," C ").concat(i,",").concat(t," ").concat(i,",").concat(l," ").concat(a,",").concat(l)},va=function(e,t){let{mode:a}=e.options;return t===ra.EDITOR_LEFT&&null!==e.options.left.mode&&(a=e.options.left.mode),t===ra.EDITOR_RIGHT&&null!==e.options.right.mode&&(a=e.options.right.mode),a},ga=function(e,t){let{theme:a}=e.options;return t===ca.EDITOR_LEFT&&null!==e.options.left.theme&&(a=e.options.left.theme),t===ca.EDITOR_RIGHT&&null!==e.options.right.theme&&(a=e.options.right.theme),a},ya=function(e,t){return e.ace.getSession().doc.getLine(t)},ba=function(e){return document.getElementById(e.options.left.id).offsetHeight},wa=function(e){const t=document.createElement("div"),a={class:e.className,style:"top:".concat(e.topOffset,"px"),title:e.tooltip,"data-diff-index":e.diffIndex};for(const l in a)t.setAttribute(l,a[l]);return t.innerHTML=e.arrowContent,t},_a=function(e,t){const a=Math.random().toString(36).substr(2,5),l="js-".concat(t,"-").concat(a),i=e.querySelector(".".concat(t));if(i)return i.id=i.id||l,i.id;const n=document.createElement("div");return e.appendChild(n),n.className=t,n.id=l,n.id},Ea={on:function(e,t,a,l){const i="document"===e?document:document.querySelector(e);i.addEventListener(t,e=>{const t=i.querySelectorAll(a),{target:n}=e;for(let a=0,s=t.length;a<s;a+=1){let s=n;const o=t[a];for(;s&&s!==i;)s===o&&l.call(o,e),s=s.parentNode}})}},La=oa;let Sa;function Ta(e={}){if(!(this instanceof Ta))return new Ta(e);const t=this;t.options=pa({ace:window?window.ace:void 0,mode:null,theme:null,element:null,diffGranularity:La.DIFF_GRANULARITY_BROAD,lockScrolling:!1,showDiffs:!0,showConnectors:!0,maxDiffs:5e3,left:{id:null,content:null,mode:null,theme:null,editable:!0,copyLinkEnabled:!0},right:{id:null,content:null,mode:null,theme:null,editable:!0,copyLinkEnabled:!0},classes:{gutterID:"acediff__gutter",diff:"acediff__diffLine",connector:"acediff__connector",newCodeConnectorLink:"acediff__newCodeConnector",newCodeConnectorLinkContent:"&#8594;",deletedCodeConnectorLink:"acediff__deletedCodeConnector",deletedCodeConnectorLinkContent:"&#8592;",copyRightContainer:"acediff__copy--right",copyLeftContainer:"acediff__copy--left"},connectorYOffset:0},e);const{ace:a}=t.options;if(!a){return new Error("No ace editor found nor supplied - `options.ace` or `window.ace` is missing")}if(Sa=function(e){if(e.Range)return e.Range;const t=e.acequire||e.require;return!!t&&t("ace/range")}(a),!Sa){return new Error("Could not require Range module for Ace. Depends on your bundling strategy, but it usually comes with Ace itself. See https://ace.c9.io/api/range.html, open an issue on GitHub ace-diff/ace-diff")}if(null===t.options.element){return new Error("You need to specify an element for Ace-diff - `options.element` is missing")}if(t.options.element instanceof HTMLElement?t.el=t.options.element:t.el=document.body.querySelector(t.options.element),!t.el){const e="Can't find the specified element ".concat(t.options.element);return new Error(e)}t.options.left.id=_a(t.el,"acediff__left"),t.options.classes.gutterID=_a(t.el,"acediff__gutter"),t.options.right.id=_a(t.el,"acediff__right"),t.el.innerHTML='<div class="acediff__wrap">'.concat(t.el.innerHTML,"</div>"),t.editors={left:{ace:a.edit(t.options.left.id),markers:[],lineLengths:[]},right:{ace:a.edit(t.options.right.id),markers:[],lineLengths:[]},editorHeight:null},t.editors.left.ace.getSession().setMode(va(t,La.EDITOR_LEFT)),t.editors.right.ace.getSession().setMode(va(t,La.EDITOR_RIGHT)),t.editors.left.ace.setReadOnly(!t.options.left.editable),t.editors.right.ace.setReadOnly(!t.options.right.editable),t.editors.left.ace.setTheme(ga(t,La.EDITOR_LEFT)),t.editors.right.ace.setTheme(ga(t,La.EDITOR_RIGHT)),t.editors.left.ace.setValue(ha(t.options.left.content),-1),t.editors.right.ace.setValue(ha(t.options.right.content),-1),t.editors.editorHeight=ba(t),setTimeout(()=>{t.lineHeight=t.editors.left.ace.renderer.lineHeight,function(e){e.editors.left.ace.getSession().on("changeScrollTop",da(()=>{Ra(e)},16)),e.editors.right.ace.getSession().on("changeScrollTop",da(()=>{Ra(e)},16));const t=e.diff.bind(e);e.editors.left.ace.on("change",t),e.editors.right.ace.on("change",t),e.options.left.copyLinkEnabled&&Ea.on("#".concat(e.options.classes.gutterID),"click",".".concat(e.options.classes.newCodeConnectorLink),t=>{xa(e,t,La.LTR)});e.options.right.copyLinkEnabled&&Ea.on("#".concat(e.options.classes.gutterID),"click",".".concat(e.options.classes.deletedCodeConnectorLink),t=>{xa(e,t,La.RTL)});const a=fa(()=>{e.editors.availableHeight=document.getElementById(e.options.left.id).offsetHeight,e.diff()},250);window.addEventListener("resize",a),Ca=()=>{window.removeEventListener("resize",a)}}(t),function(e){e.copyRightContainer=document.createElement("div"),e.copyRightContainer.setAttribute("class",e.options.classes.copyRightContainer),e.copyLeftContainer=document.createElement("div"),e.copyLeftContainer.setAttribute("class",e.options.classes.copyLeftContainer),document.getElementById(e.options.classes.gutterID).appendChild(e.copyRightContainer),document.getElementById(e.options.classes.gutterID).appendChild(e.copyLeftContainer)}(t),ja(t),t.diff()},1)}Ta.prototype={setOptions(e){pa(this.options,e),this.diff()},getNumDiffs(){return this.diffs.length},getEditors(){return{left:this.editors.left.ace,right:this.editors.right.ace}},diff(){const e=new ua,t=this.editors.left.ace.getSession().getValue(),a=this.editors.right.ace.getSession().getValue(),l=e.diff_main(a,t);e.diff_cleanupSemantic(l),this.editors.left.lineLengths=ka(this.editors.left),this.editors.right.lineLengths=ka(this.editors.right);const i=[],n={left:0,right:0};l.forEach((e,t,a)=>{const s=e[0];let o=e[1];a[t+1]&&o.endsWith("\n")&&a[t+1][1].startsWith("\n")&&(o+="\n",l[t][1]=o,l[t+1][1]=l[t+1][1].replace(/^\n/,"")),0!==o.length&&(s===La.DIFF_EQUAL?(n.left+=o.length,n.right+=o.length):s===La.DIFF_DELETE?(i.push(Na(this,La.DIFF_DELETE,n.left,n.right,o)),n.right+=o.length):s===La.DIFF_INSERT&&(i.push(Na(this,La.DIFF_INSERT,n.left,n.right,o)),n.left+=o.length))},this),this.diffs=function(e,t){const a=[];function l(t){return e.options.diffGranularity===La.DIFF_GRANULARITY_SPECIFIC?t<1:t<=1}t.forEach((e,t)=>{if(0===t)return void a.push(e);let i=!1;for(let n=0;n<a.length;n+=1)if(l(Math.abs(e.leftStartLine-a[n].leftEndLine))&&l(Math.abs(e.rightStartLine-a[n].rightEndLine))){a[n].leftStartLine=Math.min(e.leftStartLine,a[n].leftStartLine),a[n].rightStartLine=Math.min(e.rightStartLine,a[n].rightStartLine),a[n].leftEndLine=Math.max(e.leftEndLine,a[n].leftEndLine),a[n].rightEndLine=Math.max(e.rightEndLine,a[n].rightEndLine),i=!0;break}i||a.push(e)});const i=[];return a.forEach(e=>{e.leftStartLine===e.leftEndLine&&e.rightStartLine===e.rightEndLine||i.push(e)}),i}(this,i),this.diffs.length>this.options.maxDiffs||(Ia(this),za(this))},destroy(){const e=this.editors.left.ace.getValue();this.editors.left.ace.destroy();let t=this.editors.left.ace.container,a=t.cloneNode(!1);a.textContent=e,t.parentNode.replaceChild(a,t);const l=this.editors.right.ace.getValue();this.editors.right.ace.destroy(),t=this.editors.right.ace.container,a=t.cloneNode(!1),a.textContent=l,t.parentNode.replaceChild(a,t),document.getElementById(this.options.classes.gutterID).innerHTML="",Ca()}};let Ca=()=>{};function xa(e,t,a){const l=parseInt(t.target.getAttribute("data-diff-index"),10),i=e.diffs[l];let n,s,o,r,c,u;a===La.LTR?(n=e.editors.left,s=e.editors.right,o=i.leftStartLine,r=i.leftEndLine,c=i.rightStartLine,u=i.rightEndLine):(n=e.editors.right,s=e.editors.left,o=i.rightStartLine,r=i.rightEndLine,c=i.leftStartLine,u=i.leftEndLine);let p="";for(let f=o;f<r;f+=1)p+="".concat(ya(n,f),"\n");const d=s.ace.getSession().getScrollTop();s.ace.getSession().replace(new Sa(c,0,u,0),p),s.ace.getSession().setScrollTop(parseInt(d,10)),e.diff()}function ka(e){const t=e.ace.getSession().doc.getAllLines(),a=[];return t.forEach(e=>{a.push(e.length+1)}),a}function Da(e,t,a,l,i){const n=e.editors[t];l<a&&(l=a);const s="".concat(i," ").concat(l>a?"lines":"targetOnly");n.markers.push(n.ace.session.addMarker(new Sa(a,0,l-1,1),s,"fullLine"))}function Ra(e){Ia(e),za(e),function(e){const t=e.editors.left.ace.getSession().getScrollTop(),a=e.editors.right.ace.getSession().getScrollTop();e.copyRightContainer.style.cssText="top: ".concat(-t,"px"),e.copyLeftContainer.style.cssText="top: ".concat(-a,"px")}(e)}function Ia(e){e.editors.left.markers.forEach(t=>{e.editors.left.ace.getSession().removeMarker(t)},e),e.editors.right.markers.forEach(t=>{e.editors.right.ace.getSession().removeMarker(t)},e)}function Na(e,t,a,l,i){let n={},s=/^\n/.test(i);if(t===La.DIFF_INSERT){var o=Fa(e.editors.left,a,i),r=Aa(e.editors.right,l),c=Oa(e.editors.right,r);const t=Oa(e.editors.left,o.startLine);let d=r;0===Oa(e.editors.left,o.startLine)&&s&&(s=!1),0===o.startChar&&Pa(e.editors.right,l,s)&&(d=r+1);var u=o.startLine===o.endLine,p=0;(o.startChar>0||u&&i.length<t)&&c>0&&o.startChar<t&&p++,n={leftStartLine:o.startLine,leftEndLine:o.endLine+1,rightStartLine:d,rightEndLine:d+p}}else{o=Fa(e.editors.right,l,i),r=Aa(e.editors.left,a),c=Oa(e.editors.left,r);const t=Oa(e.editors.right,o.startLine);let d=r;0===Oa(e.editors.right,o.startLine)&&s&&(s=!1),0===o.startChar&&Pa(e.editors.left,a,s)&&(d=r+1);u=o.startLine===o.endLine,p=0;(o.startChar>0||u&&i.length<t)&&c>0&&o.startChar<t&&p++,n={leftStartLine:d,leftEndLine:d+p,rightStartLine:o.startLine,rightEndLine:o.endLine+1}}return n}function Fa(e,t,a){const l={startLine:0,startChar:0,endLine:0,endChar:0},i=t+a.length;let n=0,s=!1,o=!1;e.lineLengths.forEach((e,a)=>{n+=e,!s&&t<n&&(l.startLine=a,l.startChar=t-n+e,s=!0),!o&&i<=n&&(l.endLine=a,l.endChar=i-n+e,o=!0)}),l.startChar>0&&Oa(e,l.startLine)===l.startChar&&(l.startLine++,l.startChar=0),0===l.endChar&&l.endLine--;const r=/\n$/.test(a);return l.startChar>0&&r&&l.endLine++,l}function Oa(e,t){return ya(e,t).length}function Aa(e,t){const a=e.ace.getSession().doc.getAllLines();let l=0,i=0;for(let n=0;n<a.length;n+=1)if(i+=a[n].length+1,t<=i){l=n;break}return l}function Pa(e,t,a){const l=e.ace.getSession().doc.getAllLines();let i=0;for(let n=0;n<l.length;n+=1){i+=l[n].length+1;let e=i;if(a&&(e-=1),t===e)break}return Pa}function ja(e){e.gutterHeight=document.getElementById(e.options.classes.gutterID).clientHeight,e.gutterWidth=document.getElementById(e.options.classes.gutterID).clientWidth;const t=Ma(e,La.EDITOR_LEFT),a=Ma(e,La.EDITOR_RIGHT),l=Math.max(t,a,e.gutterHeight);e.gutterSVG=document.createElementNS(La.SVG_NS,"svg"),e.gutterSVG.setAttribute("width",e.gutterWidth),e.gutterSVG.setAttribute("height",l),document.getElementById(e.options.classes.gutterID).appendChild(e.gutterSVG)}function Ma(e,t){return(t===La.EDITOR_LEFT?e.editors.left:e.editors.right).ace.getSession().getLength()*e.lineHeight}function za(e){!function(e){document.getElementById(e.options.classes.gutterID).removeChild(e.gutterSVG),ja(e)}(e),function(e){e.copyLeftContainer.innerHTML="",e.copyRightContainer.innerHTML=""}(e),e.diffs.forEach((t,a)=>{e.options.showDiffs&&(Da(e,La.EDITOR_LEFT,t.leftStartLine,t.leftEndLine,e.options.classes.diff),Da(e,La.EDITOR_RIGHT,t.rightStartLine,t.rightEndLine,e.options.classes.diff),e.options.showConnectors&&function(e,t,a,l,i){const n=e.editors.left.ace.getSession().getScrollTop(),s=e.editors.right.ace.getSession().getScrollTop();e.connectorYOffset=1;const o=t*e.lineHeight-n+.5,r=e.gutterWidth+1,c=l*e.lineHeight-s+.5,u=a*e.lineHeight-n+e.connectorYOffset+.5,p=e.gutterWidth+1,d=i*e.lineHeight-s+e.connectorYOffset+.5,f=ma(-1,o,r,c),h=ma(p,d,-1,u),m="L".concat(r,",").concat(c," ").concat(p,",").concat(d),v="L".concat(-1,",").concat(u," ").concat(-1,",").concat(o),g="".concat(f," ").concat(m," ").concat(h," ").concat(v),y=document.createElementNS(La.SVG_NS,"path");y.setAttribute("d",g),y.setAttribute("class",e.options.classes.connector),e.gutterSVG.appendChild(y)}(e,t.leftStartLine,t.leftEndLine,t.rightStartLine,t.rightEndLine),function(e,t,a){if(t.leftEndLine>t.leftStartLine&&e.options.left.copyLinkEnabled){const l=wa({className:e.options.classes.newCodeConnectorLink,topOffset:t.leftStartLine*e.lineHeight,tooltip:"Copy to right",diffIndex:a,arrowContent:e.options.classes.newCodeConnectorLinkContent});e.copyRightContainer.appendChild(l)}if(t.rightEndLine>t.rightStartLine&&e.options.right.copyLinkEnabled){const l=wa({className:e.options.classes.deletedCodeConnectorLink,topOffset:t.rightStartLine*e.lineHeight,tooltip:"Copy to left",diffIndex:a,arrowContent:e.options.classes.deletedCodeConnectorLinkContent});e.copyLeftContainer.appendChild(l)}}(e,t,a))},e)}const qa=Xt(Ta),Ba=t(),Va=z("");let Ha=z([]);const Ga=z(null),Wa=z(null),Ua=z([]),Ja=z(!1),$a=z(!0),Ka=z(null),Ya=z(null),Xa=z(null),Qa=()=>{Ga.value=null,Wa.value=null,Ja.value=!1},Za=async(e,t,a)=>{let l={p:1,showRow:500,sort:"name",reverse:"False",path:e,search:t||""};a&&(l.all=a);try{const{data:e}=await De(l),t=[],a=[];return e.dir.forEach(a=>{t.push(Ns("dir",a,void 0,e.path))}),e.files.forEach(t=>{a.push(Ns("file",t,void 0,e.path))}),[...t,...a]}catch(i){return[]}},el=async(e,t,a)=>{if(e.data.isNew)return t([]);const l=Ul(yl.id||"");if(Ua.value=Ua.value.filter(e=>".Recycle_bin"!==e),".Recycle_bin"===e.data.fileName)return Ba.error("此为回收站目录，请在右上角按【回收站】按钮打开"),void t([]);if(0===e.level){const e=((null==l?void 0:l.path)||a.path).split("/");e.pop();const i=await Za(e.join("/")||"/www");return Ha.value=i,t(i)}if(e.level>0){return t(await Za(e.data.path))}return e.upper?t(e.upper):void 0},tl=async()=>{Ua.value.length=0;const e=Va.value;if("/"===e)return void Ba.error("已经是根目录了");const t=e.split("/");t.pop();let a=t.join("/");a||(a="/"),Va.value=a;const l=await Za(a);Ha.value=l,Qa()},al=async(e,t,a)=>{var l,i;Wa.value||(Ga.value=t),e.isFile&&((null==(l=null==e?void 0:e.path)?void 0:l.includes("/dev/pts"))?Ba.error("系统目录文件不支持编辑"):"text"===ns(null==(i=e.fileName)?void 0:i.split(".").pop())?cs(e):Ba.error("暂不支持该类型文件编辑"))},ll=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),Wa.value=t||null,a.value.show(e),Ja.value=!1},il=async e=>{const t=await Za(Va.value,null!=e?e:"");Ha.value=t,Qa()},nl=(e,t,a)=>{const l=a.value.getNode(t);if(l)if(l.childNodes&&l.childNodes.length>0){const t=l.childNodes[0];a.value.insertBefore(e,t.data)}else a.value.append(e,l.data);else a.value.data.unshift(e),a.value.updateKeyChildren(null,a.value.data);q(()=>{setTimeout(()=>{var e,t,a,l;null==(t=null==(e=Xa.value)?void 0:e.$el)||t.focus(),a=Xa,l=Ya,q(()=>{var e;const t=null==(e=a.value)?void 0:e.$el,i=l.value;if(t&&i){const e=t.getBoundingClientRect(),a=i.getBoundingClientRect();(e.top<a.top||e.bottom>a.bottom)&&(i.scrollTop+=e.top-a.top-(i.clientHeight/2-e.height/2))}})},100)}),Qa()},sl=async()=>{try{Ua.value.length=0,Qa(),await il(),Ba.success("刷新成功")}catch(t){e(t)}},ol=({data:{path:e,isFile:t}})=>t?e.replace(/\/[^\/]*$/,""):e,rl=e=>{const t=Ga.value,a=Wa.value?Wa.value.path:t?ol(t):Va.value,l=t?(e=>e.data.isFile?ol(e):e.data.path)(t):null,i={icon:"icon-".concat(e),ext:"",fileName:"",time:"",ps:"",size:0,type:e,user:"root",rootLevel:"0",isLink:"",isShare:!1,isTop:!1,isFav:!1,isOsPs:!1,isSearch:!1,isReName:!0,isNew:!0,isSync:"",isLock:!1,path:"".concat(a,"/"),tamperProofId:0,isFile:"dir"!==e};return Ja.value=!0,{newFile:i,dataPathFileName:l}},cl=()=>{Ua.value.length=0},ul=B({__name:"index",props:{rowData:{type:Object,default:()=>({})},refreshData:{type:Function,default:()=>{}},value:{type:Object,default:()=>({})}},emits:["update:value"],setup(e,{expose:i,emit:n}){const s=t(),o=e,r=n,c=z(o.rowData);let u="";const p=(e,t)=>{const a=e.match(/^(.*\/)/),l=a?a[1]:"";return"".concat(l).concat(t)},d=e=>{e.stopPropagation(),e.preventDefault(),c.value.fileName=e.target.value,m({row:c.value})},f=()=>{m({row:c.value})},h=()=>{var e;if(c.value.isReName=!1,c.value.isNew){const t=Ka.value.getNode(null==(e=c.value)?void 0:e.path);Ka.value.remove(t.data)}Ja.value=!1},m=async({row:e})=>{if(""!==e.fileName)if(Bn(e.fileName))s.error('文件名不能包含以下字符：\\ / : * ? " < > |');else if(e.isNew){const t="".concat(e.path,"/").concat(e.fileName);await a({loading:"正在新建文件，请稍候...",request:Re({path:t.replace(/\/\//g,"/"),type:e.type}),message:!0,success:t=>{t.status&&(e.isReName=!1,Ja.value=!1,o.refreshData())}})}else{if(e.fileName===u)return void s.error("文件名没有变化");await a({loading:"正在重命名，请稍候...",request:Ie({sfile:p(e.path,u),dfile:p(e.path,e.fileName),rename:!0}),message:!0,success:t=>{t.status&&(e.isReName=!1,Ja.value=!1,o.refreshData())}})}else s.error("文件名不能为空")};return V(()=>o.rowData,()=>{o.rowData&&(c.value=o.rowData,r("update:value",c.value))},{immediate:!0}),H(()=>{c.value.isReName&&q(()=>{u=c.value.fileName}),Ja.value=c.value.isReName}),i({reNameInputRef:Xa}),(e,t)=>{const a=l,i=G("focus");return W((J(),$("div",{class:"flex items-center !w-[100%] pr-[.5rem]",onClick:t[2]||(t[2]=X(()=>{},["stop"]))},[W(K(a,{ref_key:"reNameInputRef",ref:Xa,class:"rename-input h-[20px] ml-2px",width:"auto",modelValue:c.value.fileName,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value.fileName=e),onKeydown:t[1]||(t[1]=Y(X(()=>{},["stop"]),["native"])),onKeyup:Y(d,["enter","native"])},null,8,["modelValue"]),[[i]]),Q("span",{class:"svgtofont-el-select ml-[.5rem] !text-[2rem] font-800",style:{color:"#20a53a"},onClick:X(f,["stop"])}),Q("span",{class:"svgtofont-el-close-bold ml-[.5rem] !text-[2rem] font-800",style:{color:"#f34a4a"},onClick:X(h,["stop"])})],512)),[[U,c.value.isReName]])}}}),pl=Z("FILES-ACE-STORE",()=>{const{routerActive:e,mainHeight:t}=i(),l=zs(),{bindKeydown:r}=l,c=z(),u=z(),p=z(!0),d=z(!0),f=async()=>{cl(),Il();const e=await u.value;null==e||e.unmount()},h=z([{title:"保存",icon:"svgtofont-el-select",click:()=>{m()&&pi(yl)}},{title:"全部保存",icon:"svgtofont-icon-minmax-black",click:()=>{m()&&hi()}},{title:"刷新",icon:"svgtofont-el-refresh-right",click:async()=>{m()&&ai(yl,!0)}},{title:"搜索",icon:"svgtofont-el-search",click:()=>{m()&&vl.value.execCommand("find")}},{title:"替换",icon:"svgtofont-icon-log",click:()=>{m()&&vl.value.execCommand("replace")}},{title:"跳转行",icon:"svgtofont-icon-login-address",click:()=>{m()&&O("jump")}},{title:"字体大小",icon:"svgtofont-left-xterm",click:()=>{m()&&O("font")}},{title:"主题",icon:"svgtofont-icon-drag",click:()=>{m()&&O("theme")}},{title:"设置",icon:"svgtofont-left-config",click:()=>{m()&&O("set")}},{title:"快捷键",icon:"svgtofont-el-question-filled",click:()=>{const e=_l.value.find(e=>"快捷键"===e.title);if(e)return ni(e.id),void O("shortcutKey");ti({type:"custom",title:"快捷键",component:ee(()=>n(()=>import("./index235.js?v=1756369731"),__vite__mapDeps([]),import.meta.url))})}}]),m=()=>!(!$l()||"custom"===yl.type)||(s.error("当前页面不支持该操作"),!1),v=z(0),g=z(!1),y=z(null),b=z(""),w=z("btn"),_=z(!1),E=z(""),L=z([]),S=z(""),T=z(null),C=z(null);let x=z();const k=e=>{const t=Ka.value.getNode(e);t&&e.isNew&&Ka.value.remove(t),t&&e.isReName&&(e.isReName=!1),Ja.value=!1},D=(e,t)=>{k(x.value),ll(e,t,C)},R=e=>_l.value.some(t=>t.path===e.path)?"text-[#cca700]":"",I=z(),N=z(),F=z(!1),O=e=>{bl.value=e,F.value=""!==e,e&&window.addEventListener("click",A)},A=()=>{bl.value="",window.removeEventListener("click",A)},P=z(null),j=z(null),M=z({}),B=(e,t)=>{if(ni(e),t){const e=t.currentTarget||t.currentTarget,a=P.value,l=a.offsetWidth,i=e.offsetLeft-l/2+e.offsetWidth/2;a.scroll({left:i,behavior:"smooth"})}},V=e=>{e.preventDefault();const{deltaY:t}=e;P.value.scrollLeft+=t},{fontSize:H,tabSize:G,editorTheme:W,useSoftTabs:U}=te(hl.aceEditor),J=z(yl.encoding),$=z(0),Y=ae({line:123,column:321,historys:[],tabsData:{type:"nbsp",number:4},encoding:"utf-8",only_read:!1,mode:"text"}),X=e=>{e&&(Y.tabsData.number=e.tabSize,Y.tabsData.type=e.useSoftTabs?"tab":"nbsp")},Q=z(),Z=e=>{_l.value=_l.value.filter(t=>t.id===e),ml.value=ml.value.filter(t=>t.id===e),ei(e);const t=Vl(e);vl.value.setSession(t),Ql(vl.value),Yl(Q.value.item.isReadOnly),Xl()},le=()=>{_l.value.forEach(e=>{const t=Vl(e.id);t&&t.destroy()}),_l.value=[],ml.value=[],vl.value.setSession(null)};return{instance:u,fileItem:c,routerActive:e,btnShow:p,catalogueShow:d,onLeave:()=>{p.value=!1,setTimeout(()=>{p.value=!0},500)},close:f,onCancel:async()=>{var e;return await mi()?(document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black")&&(null==(e=document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black"))||e.click()),Mn(f),!1):(localStorage.removeItem("aceEditor"),ri(),f(),!1)},column:h,openPopup:e=>{$l?e.click():s.error("当前页面不支持该操作")},mainHeight:t,operSize:v,changeOpertion:e=>{v.value="search"===e?76:0},isShow:g,inputRef:y,inputFocus:()=>{g.value=!0,q(()=>{var e;null==(e=y.value)||e.focus()})},originalPath:b,changeCurrentPath:async()=>{try{if(g.value=!1,Va.value!==b.value){b.value=Va.value;const{data:e}=await a({request:De({p:1,showRow:500,sort:"name",reverse:"False",path:Va.value})}),t=e.dir.map(t=>Ns("dir",t,void 0,e.path)),l=e.files.map(t=>Ns("file",t,void 0,e.path));Ha.value=[...t,...l],Va.value=e.path}}catch(e){}},type:w,isCheck:_,searchValue:E,changeValue:e=>{Ua.value.length=0,E.value="","search"===e?(L.value=Ha.value,S.value=Va.value,Ha.value=[],$a.value=!0):(Ha.value=L.value,""===Va.value&&(b.value=S.value),Va.value=S.value)},searchFile:async()=>{const e=await Za(Va.value,E.value,_.value?"True":void 0);$a.value=!1,e&&(Ha.value=e,Qa())},handleCommand:e=>{var t,a;const{newFile:l,dataPathFileName:i}=rl(e),n=i||((null==(t=Wa.value)?void 0:t.isFile)||null==(a=Wa.value)?void 0:a.path);if(n){const e=Ka.value.getNode(n);e&&(e.expanded=!0)}nl(l,n,Ka)},closeSearch:()=>{w.value="btn",Qa()},contextRef:C,treeProps:{label:"fileName",key:"path",isLeaf:"isFile"},initSidebarList:()=>{q(()=>{const e=(c.value.path||"/www").split("/");e.pop(),""===Va.value&&(b.value=e.join("/")),Va.value=e.join("/")})},loadNode:async(e,t,...a)=>{el(e,t,c.value)},renderTree:(e,{node:t,data:a,store:l})=>{const{mode:i}=Wl(a.fileName);return K("span",{class:"flex flex-1 items-center w-full ".concat(a.isReName?"newFiles":"defaultFiles"),onContextmenu:e=>{e.preventDefault(),D(e,a)}},[K("span",{class:"icon-editor-left ".concat(a.isFile?"ace-".concat(i,"-icon ace-text-icon"):"ace-folder-icon")},null),a.isReName?K(ul,{class:"el-tree-node__label",title:a.fileName,rowData:a,refreshData:il,modelValue:x,"onUpdate:modelValue":e=>x=e,ref:T},null):K("span",{class:"el-tree-node__label ".concat(R(a)),title:a.fileName},[a.fileName])])},handleExpandChange:e=>{(null==e?void 0:e.path)&&!Ua.value.includes(e.path)&&Ua.value.push(e.path)},handleCollapseChange:e=>{const t=Ua.value.indexOf(null==e?void 0:e.path);-1!==t&&Ua.value.splice(t,1),k(x.value)},editorRef:I,editorDiffRef:N,showToolbar:F,watchEditorCustomToolbar:O,closeToolbar:A,initContent:async()=>{await(async e=>{await Fl(),vl.value=await Pl(e),X(hl.aceEditor)})(I.value),c.value&&await ti({title:c.value.fileName,type:c.value.type||"editor",path:c.value.path,size:c.value.size}),(async e=>{jl(e)})(N.value),await Ne({name:c.value.fileName,path:c.value.path}),await Rl()},resizeEditor:()=>{vl.value&&q(()=>{vl.value.resize()})},tabsElement:P,contextmenu:j,headerRightRow:M,changeTab:B,getDataChangeTab:()=>{q(()=>{var e;const t=_l.value[_l.value.length-1],a=null==(e=P.value)?void 0:e.children[_l.value.length-1];B(t.id,{currentTarget:a})})},closeTab:async e=>{li(e)},openContextMenu:e=>{j.value.show(e),M.value=yl},initContentHeader:()=>{q(()=>{P.value.addEventListener("wheel",V)})},$resetContentHeader:()=>{P.value&&P.value.removeEventListener("wheel",V)},fontSize:H,tabSize:G,editorTheme:W,useSoftTabs:U,encodingData:J,line:$,tool:[{title:"跳转到指定行",type:"jump"},{title:"设置编辑器字体大小",type:"font"},{title:"设置编辑器主题",type:"theme"},{title:"编辑器设置",type:"set"},{title:"设置文件保存编码格式",type:"encode"},{title:"设置文件保存空格设置",type:"encode"},{title:"设置文件保存行结束符",type:"lineBreak"}],set:[{title:"自动换行",type:"wrap"},{title:"代码自动完成",type:"enableLiveAutocompletion"},{title:"启用代码段",type:"enableSnippets"},{title:"显示隐藏字符",type:"showInvisibles"},{title:"显示行号",type:"showLineNumbers"}],tabData:[{title:"使用空格缩进",type:"nbsp"},{title:"使用制表符缩进",type:"tab"}],unTitleArr:["shortcutKey","","tab"],saveFont:()=>{hl.aceEditor.fontSize>45||hl.aceEditor.fontSize<12?s.error("字体设置范围超过12-45"):(vl.value.setFontSize(hl.aceEditor.fontSize),Ol())},jumpLine:()=>{$.value%1==0?vl.value.gotoLine($.value):s.error("请输入整数")},setCode:async e=>{yl.state=1,yl.encoding=e,await Ol(),await pi(yl),J.value=e},setTabType:e=>{"string"==typeof e?(U.value="tab"===e,hl.aceEditor.useSoftTabs="tab"===e):(G.value=e,hl.aceEditor.tabSize=e),Ol()},setTheme:e=>{W.value=e,vl.value.setTheme("ace/theme/"+e),hl.aceEditor.editorTheme=e,Ol()},seting:e=>{hl.aceEditor[e]=!hl.aceEditor[e],vl.value.setOption(e,hl.aceEditor[e]),Ol(),X(hl.aceEditor)},fileInfo:Y,openHistory:()=>{o({title:"文件历史版本",area:55,component:()=>n(()=>import("./index236.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{editorTabsActive:yl,callback:()=>{ai(yl,!0)}}})},watchAceEditor:X,diffReHistory:async()=>{await xl(Sl.value),await ai(Sl.value,!0),Sl.value={}},onConfirmCheckFile:async e=>{await hi(),localStorage.removeItem("aceEditor"),ri(),e&&e()},onCancelCheckFile:e=>{localStorage.removeItem("aceEditor"),ri(),e&&e.onUnmount&&e.onUnmount()},compDataClose:Q,onConfirmClose:async()=>{try{switch(Q.value.type){case"close":await pi(Q.value.item),li(Q.value.item);break;case"other":const e=Q.value.item.id,t=_l.value.filter(t=>t.id!==e&&1===t.state);t.length>0&&await Promise.all(t.map(e=>pi(e))),Z(e);break;case"all":await hi(),le()}}catch(e){}return!0},onCancelClose:e=>{switch(Q.value.type){case"close":Q.value.item.state=0,li(Q.value.item);break;case"other":Z(Q.value.item.id);break;case"all":le()}e&&e.onUnmount&&e.onUnmount()},init:()=>{window.addEventListener("keydown",Cl)},$reset:()=>{window.removeEventListener("keydown",Cl),r()}}}),dl=t(),fl="/www/server/panel/BTPanel/static/editor/ace.editor.config.json",hl=ae({supportedModes:{},nameOverrides:{},encodingList:[],themeList:[],aceEditor:{fontFamily:"Monaco, Menlo, 'Courier New', monospace",editorTheme:"monokai",fontSize:14,softLabel:!0,useSoftTabs:!0,tabSize:4,wrap:!0,enableSnippets:!0,enableLiveAutocompletion:!0,highlightActiveLine:!0,highlightSelectedWord:!0,animatedScroll:!0,showInvisibles:!1,showFoldWidgets:!0,showLineNumbers:!0,showGutter:!0,displayIndentGuides:!0}}),ml=le([]),vl=le(null),gl=le(null),yl=ie({id:"",type:"editor",title:"",path:"",mode:"",modeText:"",isReadOnly:!1,stTime:0,state:0,encoding:"UTF-8",historys:[],lineBreak:"LF"}),bl=le(""),wl=ie({row:1,column:0,count:1}),_l=z([]),El=()=>window.ace,Ll=()=>qa,Sl=z(),Tl=z(null),Cl=e=>{if("F5"===e.key||"r"===e.key&&(e.metaKey||e.ctrlKey))return e.preventDefault(),void dl.msg({customClass:"no-icon",message:"编辑器模式下无法刷新网页，请关闭后重试",type:"info",duration:3e3})},xl=async e=>{try{await c({title:"恢复历史文件",width:"35rem",content:"是否恢复历史文件 ".concat(u(Number(e.st_mtime)),"?恢复历史文件后，当前文件内容将会被替换！")});const t=await p({filename:e.path,history:e.st_mtime});if(t.status){dl.success("恢复成功");const t=Jl(yl.id);_l.value.splice(t,1),ai(e)}else dl.request(t)}catch(t){}},kl=async e=>{var t;if(document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black"))return null==(t=document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black"))||t.click(),void(e&&ti(e))},Dl=async()=>{Tl.value=await dl.load("正在获取文件内容，请稍候...")},Rl=async()=>{Tl.value&&Tl.value.close()},Il=()=>{_l.value.some(e=>1===e.state)||(window.onbeforeunload=null)},Nl=async(e,t)=>{let a=dl.load("正在加载，请稍候...");try{const{data:a}=await ci(e,"reverse",t);return a}catch(l){}finally{a&&a.close()}},Fl=async()=>{const e=sessionStorage.getItem("aceConfig");let t={};e&&(t=JSON.parse(e));const{data:a}=await ci(fl);a.data&&(t=JSON.parse(a.data),sessionStorage.setItem("aceConfig",JSON.stringify(t))),hl.supportedModes=t.supportedModes,hl.nameOverrides=t.nameOverrides,hl.encodingList=t.encodingList,hl.themeList=t.themeList,hl.aceEditor=t.aceEditor,hl.aceEditor.fontFamily="12px/normal 'Consolas', 'Menlo', 'Monaco', 'Ubuntu Mono', 'source-code-pro', 'Courier New', monospace"},Ol=async()=>{const e=JSON.stringify(hl);return await ui({data:e,path:fl,force:1})},Al=()=>hl.aceEditor,Pl=async e=>{const t=El(),{editorTheme:a,fontSize:l,fontFamily:i,showInvisibles:n,useSoftTabs:s,tabSize:o,keyboardHandler:r,enableLiveAutocompletion:c,enableSnippets:u,enableBasicAutocompletion:p}=Al();t.config.set("basePath","/static/editor"),t.require("/ace/ext/language_tools");const d=t.edit(e,{theme:"ace/theme/".concat(a),fontSize:l,fontFamily:i,showInvisibles:n,useSoftTabs:s,tabSize:o,showPrintMargin:!1,keyboardHandler:r,enableLiveAutocompletion:c,enableSnippets:u,enableBasicAutocompletion:p});return oi(d),d},jl=e=>{gl.value=e},Ml=async e=>{const{editorTheme:t}=Al(),{theme:a="ace/theme/".concat(t),mode:l="",left:i={},right:n={}}=e,s={element:gl.value,theme:a,mode:l,left:{content:"",editable:!1,copyLinkEnabled:!1,...i},right:{content:"",editable:!1,copyLinkEnabled:!1,...n}};return zl(s),s},zl=e=>new(Ll())(e),ql=(e,t)=>{const a=El(),{wrap:l}=Al(),i=a.createEditSession(t,"ace/mode/".concat(e));return i.setOptions({wrap:l,readOnly:!1}),si(i),i},Bl=e=>{vl.value.setSession(e)},Vl=e=>{var t;return e?null==(t=ml.value.find(t=>t.id===e))?void 0:t.session:vl.value.getSession()},Hl=e=>e?ml.value.find(t=>t.id===e):vl.value.getSession(),Gl=e=>e?ml.value.findIndex(t=>t.id===e):-1,Wl=e=>{let t=e.match(/\.([0-9A-z]*)$/);t=Array.isArray(t)?t[1]:"text";for(let n in hl.supportedModes)for(var a=hl.supportedModes[n][0].split("|"),l=n.toLowerCase(),i=0;i<a.length;i++)if(t.toLowerCase()==a[i].toLowerCase())return{name:n,mode:l};return{name:"Text",mode:"text"}},Ul=e=>_l.value.find(t=>t.id===e),Jl=e=>_l.value.findIndex(t=>t.id===e),$l=()=>_l.value.length>0,Kl=(e,t)=>{const{getDataChangeTab:a}=pl();delete e.session;const l={id:"",type:"editor",title:"",path:"",mode:"",modeText:"",isReadOnly:!1,stTime:0,state:0,...e};return _l.value.push(l),a(),"editor"===e.type&&t&&ml.value.push({id:l.id,session:t}),l},Yl=(e=!1)=>{vl.value.setReadOnly(e)},Xl=()=>{vl.value.focus()},Ql=e=>{wl.count=e.session.getLength()},Zl=e=>_l.value.filter(t=>t.path===e),ei=async e=>{const t=Ul(e);t&&(yl.id=e,yl.type=t.type,yl.title=t.title,"editor"===t.type?(yl.path=t.path,yl.mode=t.mode,yl.modeText=t.modeText,yl.isReadOnly=t.isReadOnly,yl.stTime=t.stTime,yl.state=t.state,yl.encoding=t.encoding,yl.historys=t.historys,yl.next=t.next,yl.pagination=t.pagination,yl.lineBreak=t.lineBreak):yl.component=t.component)},ti=async e=>{var t;try{let a={};if("editor"===e.type){const l=Zl(e.path);if(l.length)return ni(l[0].id);const i=await ci(e.path),{data:n,status:s,msg:o}=i;let c=n;if(s){o&&"success"!==o&&dl.warn(o),e.size>3145728&&dl.warn("抱歉！文件大小超过3M，暂不支持在线编辑！");const l=e.filename||(null==(t=e.path)?void 0:t.split("/").pop());let i="";const{mode:n,name:s}=Wl(l);i=n,e.mode&&(i=e.mode);const u=yi(c.data),p=ql(i,c.data);a=Kl({id:r(10),path:e.path,type:"editor",title:l,mode:i,modeText:s,state:0,encoding:c.encoding,stTime:Number(c.st_mtime),isReadOnly:c.only_read,historys:c.historys||[],next:(null==c?void 0:c.next)||!1,pagination:1,lineBreak:u},p),Bl(p),Yl(c.only_read)}else dl.error(o)}else a=Kl({...e,id:r(10),state:0});ei(a.id)}catch(a){}},ai=async(e,t=!1)=>{if("editor"!==e.type)return;const a=dl.load("获取文件内容中，请稍候...");try{const a=Ul(e.id||""),{data:l}=await ci(e.path);t&&vl.value.session.setValue(l.data),a.stTime=Number(l.st_mtime),a.encoding=l.encoding,a.state=0,yl.state=0,a.isReadOnly=l.only_read,a.historys=l.historys||[],dl.msg({message:"文件内容已更新！",type:"success"}),ei(a.id)}catch(l){}finally{a&&a.close()}},li=e=>{const{id:t}=e,a=Jl(t),l=_l.value[a]||null,i=Vl(t),n=Gl(t);if(e.state)return ii(e);l&&"editor"===l.type&&(null==i||i.destroy());if(_l.value.length>1){const e=_l.value[a+1]?a+1:a-1,t=_l.value[e].id;ni(t,!0)}_l.value.splice(a,1),"editor"===l.type&&i&&(ml.value[n].session.destroy(),ml.value.splice(n,1))},ii=async e=>{try{zn("close",e)}catch(t){}},ni=(e,t=!1)=>{var a;const l=Jl(yl.id||""),i=Jl(e),n=_l.value[i],s=Hl(e);"editor"===n.type&&(yl.id===e&&t&&(null==(a=ml.value[l])?void 0:a.session)&&(ml.value[l].session=Vl()),s&&(Bl(s.session),Ql(s)),Yl(n.isReadOnly),Xl()),ei(e)},si=e=>{wl.count=e.getLength(),e.on("change",()=>{const e=Ul(yl.id||"");0===e.state&&(e.state=1,yl.state=1,window.onbeforeunload=function(){return"您有未保存的更改，确定要离开吗？"})}),e.selection.on("changeCursor",()=>{const t=vl.value.getCursorPosition();wl.count=e.getLength(),wl.row=t.row+1,wl.column=t.column}),e.on("changeScrollTop",ne(async function(t){var a;const l=e.selection.session,i=l.getScrollTop(),n=l.getScreenLength()*vl.value.renderer.lineHeight;if(i+vl.value.renderer.$size.scrollerHeight>=n-100){const e=Ul(yl.id);if(e.next){const t=await Nl(e.path,e.pagination);if(e.next=t.next,null==t?void 0:t.next){e.pagination&&e.pagination++;const l=null==(a=Vl(e.id))?void 0:a.getValue();vl.value.session.setValue(l+t.data)}}}}),500)},oi=e=>{const{watchEditorCustomToolbar:t}=pl();e.commands.addCommand({name:"saveFile",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:()=>{const e=Ul(yl.id||"");pi(e)}}),e.commands.addCommand({name:"saveAllFile",bindKey:{win:"Ctrl-Shift-S",mac:"Command-Shift-S"},exec:()=>{hi()}}),e.commands.addCommand({name:"closeFile",bindKey:{win:"Ctrl-W",mac:"Command-W"},exec:()=>{li(yl.id)}}),e.commands.addCommand({name:"closeAllFile",bindKey:{win:"Ctrl-Shift-W",mac:"Command-Shift-W"},exec:()=>{_l.value.forEach(e=>{li(e.id)})}}),e.commands.addCommand({name:"goToLine",bindKey:{win:"Ctrl-I",mac:"Command-I"},exec:()=>{$l()&&"custom"!==yl.type?t("jump"):dl.error("当前页面不支持该操作")},readonly:!1}),e.commands.addCommand({name:"undo",bindKey:{win:"Ctrl-Z",mac:"Command-Z"},exec:()=>{e.undo()}})},ri=()=>{vl.value=null,yl.id="",yl.title="",yl.path="",yl.mode="",yl.modeText="",yl.isReadOnly=!1,yl.stTime=0,yl.state=0,yl.encoding="UTF-8",yl.historys=[],_l.value=[],ml.value=[]},ci=async(e,t,a)=>{let l={path:e,mode:t,p:a};return t||delete l.mode,a||delete l.p,await Fe(l)},ui=async e=>{let t={path:e.path,data:e.data,encoding:e.encoding||"UTF-8",st_mtime:e.st_mtime,force:e.force||0,skip_conf_check:e.skip_conf_check||!1};return e.skip_conf_check||delete t.skip_conf_check,await d(t)},pi=async(e,t=0,a=!1)=>{if(0===e.state)return dl.msg({customClass:"no-icon",message:"文件未修改,无需保存！",type:"info"});const l=dl.load("保存中，请稍候...");try{const l=Vl(e.id).getValue(),{path:i,encoding:n,stTime:s}=e,o={path:i,data:l,st_mtime:s,encoding:n,force:t};a&&(o.skip_conf_check=!0),e.state=3;const r=await ui(o);if(!r.status)return(null==r?void 0:r.conf_check)?fi(e,r.msg):di(e,r.msg);dl.request(r),Il(),await ai(e,!1)}catch(i){}finally{l&&l.close()}},di=async(e,t)=>{const a=t.substr(0,t.length-1)+"，或选择强制保存。";e.state=1,await c({title:"提示",width:"35rem",icon:"warning",content:a}),await c({title:"是否强制保存",width:"35rem",icon:"warning",isHtml:!0,content:'<span style="color:#333">检测到文件已被修改，强制保存将会<span style="color:red">覆盖文件内容</span>，请谨慎操作!</span>'}),await pi(e,1)},fi=async(e,t)=>{const a=t.substr(0,t.length-1)+"，或选择强制保存。";e.state=1,await c({title:"提示",width:60,isHtml:!0,content:'<div class="custom-message-error-html">\n\t\t\t\t\t'.concat(a,'\n\t\t\t\t\t<div class="leading-[1.6rem] mt-1rem">请确认您要保存的配置文件内容无误与提示信息无关，注本次保存不会重载nginx/apache配置</div>\n\t\t\t\t</div>'),confirmText:"继续保存"}),await pi(e,0,!0)},hi=async()=>{const e=dl.load("保存中，请稍候...");try{const e=[];for(let t=0;t<_l.value.length;t++){const a=_l.value[t];1===a.state&&e.push(pi(a,0))}await Promise.all(e),Il()}catch(t){}finally{e&&e.close()}},mi=async()=>{let e=!1;return _l.value.length>0&&(e=_l.value.some(e=>1===e.state)),e},vi=async e=>{const t=e.id;if(_l.value.filter(e=>e.id!==t&&1===e.state).length>0)zn("other",e);else{_l.value=_l.value.filter(e=>e.id===t),ml.value=ml.value.filter(e=>e.id===t),ei(t);const a=Vl(t);vl.value.setSession(a),Ql(vl.value),Yl(e.isReadOnly),Xl()}},gi=async()=>{if(await mi())try{zn("all")}catch(e){}else _l.value.forEach(e=>{const t=Vl(e.id);t&&t.destroy()}),_l.value=[],ml.value=[],vl.value.setSession(null)},yi=e=>{if(!e)return"LF";return-1!==(e.length>2e4?e.substring(0,2e4):e).indexOf("\r\n")?"CRLF":"LF"},bi=(e,t)=>{const a=Ul(e);if(!a)return;if(a.lineBreak===t)return;const l="CRLF"===t?"CRLF":"LF",i="CRLF"===a.lineBreak?"CRLF":"LF";c({title:"更改行结束符",isHtml:!0,content:'<div class="custom-message-error-html">\n\t\t\t\t\t确定要将文件 "'.concat(a.title,'" 的行结束符从 ').concat(i,' 更改为<span style="color:red">').concat(l,'</span> 吗？\n\t\t\t\t\t<div class="leading-[1.6rem]">\n\t\t\t\t\t\t此操作将修改文件中所有的行结束符，并在<span style="color:red">保存</span>后生效。\n\t\t\t\t\t</div>\n\t\t\t\t</div>'),confirmText:"保存",cancelText:"取消",onConfirm:async()=>{try{const e=Vl(a.id);if(!e)return!0;let i=e.getValue();return"CRLF"===t&&"LF"===a.lineBreak?i=i.replace(/\n/g,"\r\n"):"LF"===t&&"CRLF"===a.lineBreak&&(i=i.replace(/\r\n/g,"\n")),e.setValue(i),a.lineBreak=t,0===a.state&&(a.state=1),await pi(a),dl.success("已将行结束符更改为 ".concat(l)),!0}catch(e){return dl.error("更改行结束符失败"),!1}}}).catch(()=>{})},wi=()=>{ml.value.forEach(e=>e.destroy()),ml.value=[]},_i=Object.freeze(Object.defineProperty({__proto__:null,editorCustomToolbar:bl,editorDiffExample:gl,editorExample:vl,editorOption:hl,editorRowColumnCount:wl,editorSeesion:ml,editorTabs:_l,editorTabsActive:yl,enableRefresh:Il,handleKeyDown:Cl,handleScroll:Nl,minimizeEvent:kl,reHistoryRow:Sl,recoverEvent:xl,useAce:El,useCheckFileChange:mi,useCheckFileCompatibility:e=>{const{mode:t}=Wl(e);return hl.supportedModes[t]},useCheckTabsEmpty:$l,useCloseAllTabs:gi,useCloseOtherTabs:vi,useCreateAceEditorExample:Pl,useCreateAceEditorSession:ql,useCreateDiffEditorExample:jl,useCreateDiffEditorView:zl,useCreateEditorTabs:ti,useCreateTabsItem:Kl,useCutEditorTabs:ni,useDestroyAllEditorSession:wi,useDestroyEditorData:ri,useDetectLineBreakType:yi,useDiffAce:Ll,useEditorLoading:Dl,useEditorPathFilter:Zl,useEditorUnLoading:Rl,useEventMount:oi,useFindIndexTabs:Jl,useFindTabsData:Ul,useGetAceEditorSession:Vl,useGetAceEditorSessionData:Hl,useGetAceEditorSessionIndex:Gl,useGetAceOptions:Al,useGetEditorOptions:Fl,useGetEditorTabsLineCount:Ql,useGetFileBody:ci,useGetFileMode:Wl,useInsertAceEditorSession:Bl,useMonitorMount:si,useRandomId:()=>r(10),useRefreshFileContent:ai,useRemoveEditorCheckTabs:ii,useRemoveEditorTabs:li,useSaveAllFiles:hi,useSaveEditorOptions:Ol,useSaveFileBody:ui,useSaveFiles:pi,useSetDiffEditorOptions:Ml,useSetEditorTabsActive:ei,useSetEditorTabsFocus:Xl,useSetEditorTabsReadOnly:Yl,useSetLineBreak:bi,useforcedSaveConfig:fi},Symbol.toStringTag,{value:"Module"})),Ei=Z("FILES-BATCH-SET-AUTH-STORE",()=>{const e=zs(),{fileTabActiveData:t}=se(e),{refreshFilesList:l}=e,i=z([]),n=ae({owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),o=e=>{256&(e=parseInt(e.toString(),8))?n.owner.push("r"):n.owner=n.owner.filter(e=>"r"!==e),128&e?n.owner.push("w"):n.owner=n.owner.filter(e=>"w"!==e),64&e?n.owner.push("x"):n.owner=n.owner.filter(e=>"x"!==e),32&e?n.group.push("r"):n.group=n.group.filter(e=>"r"!==e),16&e?n.group.push("w"):n.group=n.group.filter(e=>"w"!==e),8&e?n.group.push("x"):n.group=n.group.filter(e=>"x"!==e),4&e?n.public.push("r"):n.public=n.public.filter(e=>"r"!==e),2&e?n.public.push("w"):n.public=n.public.filter(e=>"w"!==e),1&e?n.public.push("x"):n.public=n.public.filter(e=>"x"!==e),n.owner=Array.from(new Set(n.owner)),n.group=Array.from(new Set(n.group)),n.public=Array.from(new Set(n.public))};return{checkList:n,fileList:i,ownerOptions:[{label:"root",value:"root"},{label:"www",value:"www"},{label:"mysql",value:"mysql"}],reversePermission:()=>{let e=0;const t=(t,a,l,i)=>{t.includes("r")&&(e|=a),t.includes("w")&&(e|=l),t.includes("x")&&(e|=i)};for(t(n.owner,256,128,64),t(n.group,32,16,8),t(n.public,4,2,1),n.auth=e.toString(8);n.auth.length<3;)n.auth="0"+n.auth},checkNumber:e=>{n.checkNumber=e;const t=String(e).replace(/[^\d]/g,"").slice(0,3);n.auth=t,o(Number(n.auth))},changeUser:e=>{n.user=e},setFileAuths:async e=>{let o=n.auth.toString();if(o.length>3)s.error("请输入正确权限");else if(n.checkNumber.match(/\D/g))s.error("请输入正确权限");else if(o.match(/\D/g))s.error("请输入正确权限");else{for(;o.length<3;)o="0"+o;await a({loading:"正在设置文件权限，请稍后...",request:Ae({user:n.user,access:o,all:n.isDir?"True":"False",type:"3",path:t.value.param.path,data:JSON.stringify(i.value)}),message:!0,success:t=>{t.status&&(l(),e&&e())}})}},getFileAuths:async()=>{await a({request:Oe({filename:"".concat(t.value.param.path)}),success:e=>{if(e.status){const t=e.data;n.auth=t.chmod,n.user=t.chown,o(Number(t.chmod))}else s.error(e.msg)}})},$reset:()=>{Object.assign(n,{owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),i.value=[]}}}),Li=Z("FILES-CLOUD-STORAGE-STORE",()=>{const e=zs(),{fileTabActiveData:t}=se(e),{refreshFilesList:l,getRealTask:i}=e,n=z(),o=z(),r=z(),c=z(!1),p=z([]),d=z(!0),h=z(""),m=z([]),v=z(""),g=z([]),y=z([]),b=z([Qt({key:"name"}),{label:"文件名",prop:"name",width:"300",render:e=>K("span",{class:[null===e.type?"bt-open-dir folder-open-icon":"bt-open-dir file-text-icon"]},[K("i",{class:"icon"},null),K("span",{onClick:t=>{null===e.type&&w((""===v.value?"":v.value+"/")+e.name)}},[e.name])])},{label:"大小",prop:"size",render:e=>{let t=null!==e.size?f(Number(e.size)):"-";return null===e.type&&(t="-"),oe("span",t)}},{label:"更新时间",prop:"time",render:e=>""===e.type?"<span>"+u(e.time)+"</span>":"-"}]),w=e=>{v.value!==e&&(v.value=e,_())},_=async()=>{var e,t;try{c.value=!0;const a=await Pe({path:v.value,pname:n.value.pname});if(c.value=!1,!a.status)return S(),s.msg({message:"请先配置云存储",type:"warning"}),void Ut({name:n.value.pname});p.value=(null==(t=null==(e=a.data)?void 0:e.list)?void 0:t.sort((e,t)=>null===e.type?-1:null===t.type?1:0))||[],L(p.value),a.data.hasOwnProperty("path")&&E(a.data.path)}catch(a){}},E=e=>{let t="";v.value=e,g.value=[{title:"根目录",path:"",type:"dir"}],""!==e?(e&&"/"===e[e.length-1]&&(e=e.slice(0,-1)),e.split("/").forEach((e,a)=>{t+="/".concat(e).replace(/\/\//g,"/"),g.value.push({title:""===e&&0==a?"根目录":e,path:t,type:"dir"})}),m.value=g.value):m.value=g.value};z(!1);const L=e=>{q(()=>{const t=document.querySelectorAll(".oss-table .el-table__body-wrapper .el-checkbox");"down"===n.value.type?t.forEach((t,a)=>{null===e[a].type?t.style.display="none":t.style.display="block"}):t.forEach((e,t)=>{e.style.display="none"})})},S=async()=>{const e=await o.value;null==e||e.unmount()};return{compData:n,instance:o,ossTable:r,isTagMode:d,temporaryPath:h,showPathList:m,tableColumns:b,tableData:p,loading:c,handleSelectionChange:e=>{e.length>1?(r.value.getTable().clearSelection(),r.value.getTable().toggleRowSelection(e.pop())):y.value=e},temporaryBlur:()=>{d.value=!0,h.value=""},temporaryFocus:()=>{d.value=!1,h.value=v.value},temporaryEnter:e=>{var t;let a=null==(t=e.target)?void 0:t.value;a=a.replace(/\/+/g,"/"),"/"!==a&&(a=a.replace(/\/+$/g,"")),a!==h.value&&(v.value=a,_()),e.target.blur()},goBack:()=>{var e;1!==g.value.length&&(v.value=(null==(e=g.value[g.value.length-2])?void 0:e.path)||"/",_())},watchTableData:L,getDirList:_,filePathJump:w,onConfirm:async()=>{const{pname:e,type:o}=n.value;let r={};if("down"==o){if(0===y.value.length)return void s.error("请选择勾选需要下载的文件");r={name:e,url:y.value[0].download,path:t.value.param.path,filename:y.value[0].name}}else r={name:e,filename:n.value.rowData.path,object_name:v.value};return(await a({loading:"正在执行中，请稍后...",request:je(r,o),message:!0,success:e=>{e.status&&(i(),l())}})).status},$reset:()=>{d.value=!0,h.value="",v.value="",p.value=[],m.value=[],g.value=[],y.value=[]}}}),Si=Z("FILES-COMPRESS-PREVIEW-STORE",()=>{const e=zs(),{fileTabActiveData:t}=se(e),{refreshFilesList:l}=e,i=z(""),n=z(),o=z();let r;const u=ae({file:{data:{},path:"当前压缩包"},isDblclick:!1,addList:[]}),p=z(!1),d=z(!0),h=ae({visible:!1,form:{filename:"",path:"/"}}),m=z(!1),v=z(!1),g=ae({tableBatchData:[{label:"批量解压",value:"decompress",isRefBatch:!0,event:()=>{}},{label:"批量删除",value:"delete",isRefBatch:!0,event:()=>{}}],batchConfig:{isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:"name"},tableDisplayConfig:{label:"状态",prop:"status",render:e=>oe("span",{})}},decompressTableColumn:[{label:"文件名",prop:"filename"},{label:"大小",prop:"file_size",width:70,render:e=>oe("span",{},e.file_size?f(e.file_size):"--")}],selectList:[]}),y=z(),b=e=>{u.isDblclick=!0,e.date_time||(u.file.path="".concat(u.file.path,"/").concat(e.filename),setTimeout(()=>{u.isDblclick=!1},200))},w=e=>(e.shift(),e.join("/")),_=e=>{if(0===g.selectList.length){const t=e.findIndex(e=>e.filename===h.form.filename);return[e[t].uploadName]}return g.selectList.map(e=>e.uploadName)},E=e=>{let t=[];return Object.entries(e).forEach(([e,a])=>{if("object"==typeof a)if(a.is_dir)t.push("".concat(a.filename,"/"));else if(a.hasOwnProperty("fullpath"))t.push("".concat(a.fullpath));else{const e=E(a);t=t.concat(e)}}),t},L=async(e,t)=>{const l=u.file.path.split("/").filter(e=>""!==e);l.join("/").replace("当前压缩包/","").replace("当前压缩包","");const i=l.length>1?l.join("/").replace("当前压缩包/","")+"/":"";0===g.selectList.length&&await c({title:"删除文件【".concat(e.filename,"】"),content:"您真的要删除文件【".concat(e.filename,"】吗？")});let s=[],o=[];0!==e.is_dir&&0===g.selectList.length&&(s=E(e)),o=g.selectList.length>0?(()=>{let e=[];return g.selectList.forEach(t=>{if(t.uploadName.includes("/dddir")){const a=E(t);e=e.concat(a)}else t.is_dir?e.push("".concat(t.filename,"/")):e.push("".concat(t.fullpath))}),e})():[...s,"".concat(i).concat(e.filename).concat(0!==e.is_dir?"/":"")];const p={data:JSON.stringify({sfile:n.value.path,filenames:o})},d="zip"===n.value.ext?Ge:We;m.value=!0;const f=await a({loading:"正在删除文件，请稍后...",request:d(p),message:!0,success:e=>{g.selectList=[],e.status&&(T(),v.value=!1)}});return r&&r(),m.value=!1,f.status},S=z([Qt({key:"filename"}),{label:"名称",prop:"filename",render:e=>K("div",{class:"flex items-center cursor-pointer",onClick:t=>{e.date_time||(t.stopPropagation(),b(e))}},[K("img",{class:"mr-[.5rem] w-[2.5rem] h-[2.5rem]",src:"/static/images/file_icon/".concat(e.date_time?"file":"folder_win10",".png")},null),K("span",{class:"hover:text-[#20a53a]"},[e.filename])])},{label:"大小",prop:"file_size",width:100,render:e=>oe("span",{class:"cursor-pointer"},e.file_size?f(e.file_size):"--")},{label:"修改时间",prop:"date_time",width:270,render:e=>oe("span",{class:"cursor-pointer"},e.date_time?e.date_time:"--")},Zt([{onClick:async(e,t,l)=>{var i;if(l.stopPropagation(),l.preventDefault(),"text"!==ns(null==(i=e.fileName)?void 0:i.split(".").pop()))return void s.error("暂不支持该类型文件编辑");const o=u.file.path.split("/").filter(e=>""!==e),r={data:JSON.stringify({sfile:n.value.path,filename:(o.length>1?o.join("/").replace("当前压缩包/","")+"/":"")+e.filename})},c="zip"===n.value.ext?Ve:He,p=await a({loading:"正在获取文件，请稍后...",request:c(r)});p.status?In(p.data,n.value,e.filename,o.length>1?o.join("/").replace("当前压缩包",""):""):s.request(p)},isHide:e=>{const t=e.filename.split(".").pop()||"file";return"text"!==ns(t)||0!==e.is_dir},title:"编辑"},{onClick:async(e,a,l)=>{l.stopPropagation(),l.preventDefault(),Object.assign(h,{visible:!0,form:{filename:e.filename,path:t.value.param.path||"/"}})},title:"解压"},{onClick:L,title:"删除"}])]),T=async()=>{const e="zip"===n.value.ext?Ue:Je;await a({loading:p,request:e({data:JSON.stringify({sfile:n.value.path})}),success:async e=>{if(!e.status){s.request(e);const t=await o.value;null==t||t.unmount()}u.file.data=e.data,d.value&&(q(()=>{y.value.getTable().toggleAllSelection()}),d.value=!1)}})},C=[{label:"解压",value:"decompress",event:async(e,t,a,l,i)=>{g.selectList=a.value,Object.assign(h,{visible:!0,form:{filename:"",path:"/"}}),r=i}},{label:"删除",value:"delete",event:async(e,t,a,l,i)=>{g.selectList=a.value,v.value=!0,r=i}}];return{instance:o,compressData:u,deCompressPopupData:h,fileItem:n,tableColumn:S,loading:p,fileTableRef:y,batch:g,batchOptions:C,batchDeletePopup:v,delEvent:L,confirmDeCompress:async(e,t)=>{const i=JSON.parse(JSON.stringify(t)),o={data:JSON.stringify({zip_path:w(i),sfile:n.value.path,extract_path:h.form.path+"/",filenames:_(e)})},c="zip"===n.value.ext?qe:Be,u=await a({loading:"正在解压文件，请稍后...",request:c(o)});if(u.status){if(u.type)return An(u.data,o,"zip"===n.value.ext?qe:Be),void(h.visible=!1);s.success("解压成功"),l()}else s.request(u);r&&r(),h.visible=!1},openPathDialog:()=>{Jt({type:"dir",path:h.form.path,change:e=>{h.form.path=e}})},cellDblclick:b,goPath:e=>{const t=u.file.path.split("/").filter(e=>""!==e);let a="";for(let l=0;l<=e;l++)a+="/".concat(t[l]);u.file.path=a,"/当前压缩包"===a&&y.value.getTable().toggleAllSelection()},addFile:async()=>{Jt({type:"file",path:h.form.path,change:async e=>{const t=u.file.path.split("/").slice(1).join("/").replace("当前压缩包","");p.value=!0,u.addList=[e];const l="zip"===n.value.ext?Me:ze;await a({loading:"正在添加文件，请稍后...",request:l({data:JSON.stringify({sfile:n.value.path,r_path:t?"/".concat(t):"",f_list:u.addList})}),message:!0,success:T}),p.value=!1}})},init:()=>{i.value=n.value.path||"",T(),h.form.path=t.value.param.path||"/"},$reset:()=>{d.value=!0,m.value=!1,v.value=!1,Object.assign(u,{file:{data:{},path:"当前压缩包"},isDblclick:!1,addList:[]})}}}),Ti=Z("FILES-CREATE-SYMBOLIC-LINK-STORE",()=>{const e=zs(),{refreshFilesList:t}=e,l=ae({path:"",filename:"",disable:!1}),i=z(),n=ae({path:[{validator:(e,t,a)=>{""===t?a(new Error("请选择正确的文件地址!")):a()},trigger:["blur","change"]}],filename:[{validator:(e,t,a)=>{""===t?a(new Error("请输入新文件名!")):Bn(t)?a(new Error('文件名不能包含 /\\:*?"<>|符号!')):a()},trigger:["blur"]}]});return{quickFormRef:i,quickForm:l,quickRules:n,openFile:()=>{Jt({type:"all",change:e=>{l.path=e}})},onConfirm:async e=>{try{const n={sfile:l.path,dfile:Vn(l.filename)};await i.value.validate(),l.disable=!0,await a({loading:"正在创建软链接...",request:$e(n),message:!0,success:a=>{a.status&&(t(),e())}})}catch(n){}finally{l.disable=!1}},$reset:()=>{Object.assign(l,{path:"",filename:"",disable:!1})}}}),Ci=Z("FILES-FAVORITES-MANAGE-STORE",()=>{const e=zs(),{favoriteList:t}=se(e),{refreshFilesList:l}=e,i=z(),n=z(t.value),s=ae({loading:!1,data:[]}),o=z([{label:"路径",prop:"path"},Zt([{onClick:async e=>{if("dir"===e.type)Gn(e.path);else{const t={...e,fileName:e.name,ext:e.ext||e.name.split(".").pop()};ds(t)}const t=await i.value;null==t||t.unmount()},title:"打开"},{onClick:async e=>{await c({title:"删除收藏",content:"即将删除收藏路径【".concat(e.name,"】")}),a({loading:"正在删除收藏路径，请稍后...",request:Ke({path:e.path}),message:!0,success:e=>{e.status&&ks()}})},title:"删除"}])]);return{instance:i,tableColumn:o,favoriteList:t,favTableData:s,onCancel:()=>{n.value.length!==t.value.length&&l()},$reset:()=>{Object.assign(s,{loading:!1,data:[]})}}});function xi(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!pe(e)}const ki=Z("FILES-FORMAT-CONVERSION-STORE",()=>{const e=zs(),{fileTabActiveData:t}=se(e),{refreshFilesList:l}=e,i=z(),n=z(),o=z("conver"),r=z("执行转换"),c=z(!1),p=ae({fileList:[],selectList:[],path:"",del:!1,allKey:""}),d=z(!1),f=ae({all:[],audio:[],image:[],video:[]}),m=z([Qt({key:"fileName"}),{label:"文件名",prop:"fileName"},{label:"格式类型",prop:"ext",width:80},{label:"转换为",prop:"status",width:190,renderHeader:()=>{var e;let t;return K("div",{class:"items-center inline-flex !w-[190px]"},[K("span",null,[re("转换为")]),K(ce,{class:"!w-[8rem] ml-4px",modelValue:p.allKey||(null==(e=f.all[0])?void 0:e.value),onChange:e=>{p.allKey=e,p.fileList=p.fileList.map(t=>({...t,format:e}))}},xi(t=f.all.map(e=>K(ue,{key:e.value,label:e.label,value:e.value},null)))?t:{default:()=>[t]})])},render:(e,t)=>{let a=null;return["audio","image","video"].forEach(t=>{var l,i;if(f[t].map(e=>e.value).includes(e.ext)){let n;e.format=e.format||(null==(l=f[t].at(0))?void 0:l.value),a=K("div",null,[K(ce,{class:"!w-[12rem]",style:{display:e.isCustom?"none":"block"},modelValue:e.format||(null==(i=f[t].at(0))?void 0:i.value),onChange:t=>{e.format=t}},xi(n=f[t].map(e=>K(ue,{key:e.value,label:e.label,value:e.value},null)))?n:{default:()=>[n]})])}}),a||(a=oe("span",{class:"text-[red]"},"不支持转换")),a}},{label:"执行状态",prop:"status",width:90,render:(e,t)=>{const a=["待转换","转换中","转换成功","转换失败"];let l=null;return f.all.map(e=>e.value).includes(e.ext)&&(l=oe("span",{},a[e.status])),l||(l=oe("span",{class:"text-[red]"},"无法转换")),l}},Zt([{onClick:e=>{p.fileList=p.fileList.filter(t=>t.path!==e.path)},title:"取消"}])]),v=async()=>{await a({loading:d,request:Ze(),data:{all:[Array,e=>e.map(e=>({key:e,label:e}))],audio:[Array,e=>e.map(e=>({key:e,label:e}))],image:[Array,e=>e.map(e=>({key:e,label:e}))],video:[Array,e=>e.map(e=>({key:e,label:e}))]},success:e=>{Object.keys(e).forEach(t=>{e[t]=e[t].map(e=>({value:e.key,label:e.label}))}),f.all=e.all,f.audio=e.audio,f.image=e.image,f.video=e.video}})},g=ae({fileList:[],p:1,limit:10}),y=z([{label:"操作时间",prop:"time",width:160,render:e=>oe("span",{},u(e.time))},{label:"操作类型",prop:"type",width:80},{label:"操作日志",prop:"operation"},{label:"操作结果",prop:"status",width:160}]),b=async()=>{await a({request:Qe({p:g.p,limit:g.limit}),success:e=>{if(e.status){const t=e.data.msg.data;g.fileList="string"==typeof t?[]:t}else s.error(e.msg)}})},w=async()=>{const e=await n.value;null==e||e.unmount()};return{instance:n,fileItem:i,activeName:o,tableColumn:m,loading:d,formatData:p,subLoad:c,btnText:r,addFile:()=>{Jt({type:"file",change:async e=>{const t=await Ye({filename:e});t.status?p.fileList.push({status:0,ext:t.data.st_type,...t.data,path:e,fileName:t.data.name}):s.error(t.msg)}})},openFile:e=>{Jt({type:"dir",change:e=>{p.path=e}})},goConversion:async()=>{const e=[];if(p.selectList.forEach(t=>{if(0===t.status){const a=t.name.split(".");a.pop(),e.push({input_file:t.path,output_file:"".concat(p.path,"/").concat(a,".").concat(t.format)})}}),!e.length)return s.error("没有需要转换的文件");r.value="转换中",c.value=!0,await a({loading:"正在转换中，请稍后...",request:Xe({is_save:p.del?1:0,pdata:JSON.stringify(e)}),success:e=>{h(e.data)?(e.data.forEach(e=>{e.msg=e.msg||(e.status?"转换成功":"转换失败")}),l(),w(),As({title:"转换结果",resultData:e.data})):(r.value="执行转换",c.value=!1,s.error(e.msg))}})},handleSelectionChange:e=>{p.selectList=e},logTableColumn:y,tableData:g,getData:b,handleTabEvent:e=>{"conver"===e?v():b()},init:()=>{var e,a;v(),p.fileList=Array.isArray(i.value)?null==(e=i.value)?void 0:e.map(e=>({status:0,...e,name:e.fileName})):[{status:0,...i.value,name:null==(a=i.value)?void 0:a.fileName}],p.path=t.value.param.path},$reset:()=>{c.value=!1,d.value=!1,Object.assign(p,{fileList:[],selectList:[],path:"",del:!1,allKey:""}),Object.assign(g,{fileList:[],p:1,limit:10}),Object.assign(f,{all:[],audio:[],image:[],video:[]}),r.value="执行转换"}}}),Di=Z("FILES-OVERLAY-TIPS-STORE",()=>{const{getGlobalInfo:e}=i(),t=zs(),{fileTabActiveData:l,copyFilesData:n}=se(t),{refreshFilesList:o,getRealTask:r}=t,p=z(),d=z(""),h=z(),m=z([{type:"selection",width:40},{prop:"filename",label:"文件名"},{prop:"size",label:"大小",render:e=>K("span",null,[e.is_dir?"--":f(e.size)])},{prop:"mtime",width:136,label:"最后修改时间",render:e=>u(Number(e.mtime))}]),v=ae({addend1:0,addend2:0,sum:0}),g=z(!1),y=z(),b=z([]),w=z([]),_=e=>{if(e.endsWith(".tar.gz")){const t=e.substring(0,e.length-7);return"".concat(t,"-副本.tar.gz")}{const t=e.lastIndexOf(".");if(-1===t)return"".concat(e,"-副本");{const a=e.substring(0,t),l=e.substring(t);return"".concat(a,"-副本").concat(l)}}},E=ae({type:"",size:0,filename:"",mtime:0,is_dir:!1}),L=ae({name:[{validator:(e,t,a)=>{"rename"===E.type&&t===p.value.fileData[0].filename&&a(new Error("名称重复，请输入新文件名!")),""===t?a(new Error("请输入新文件名!")):a()},trigger:["blur"]}]});return{compData:p,fileTabActiveData:l,sitesPath:d,overlayFormRef:y,overlayForm:E,tableLoading:g,quickRules:L,calcData:v,tableColumns:m,tableData:w,handleSelectionChange:e=>{b.value=e},watchType:e=>{"single"===p.value.type&&(E.filename="over"===e?p.value.fileData[0].filename:_(p.value.fileData[0].filename))},fileFormat:_,onConfirm:async e=>{if("single"===p.value.type){const t={path:l.value.param.path,name:E.filename},{data:i}=await et(t);i.length>0&&await c({title:"覆盖文件",content:"检测到同名文件，您确定要覆盖当前【".concat(E.filename,"】文件？")});const u={sfile:n.value.files[0].path,dfile:l.value.param.path+"/"+E.filename};"rename"===E.type&&(u.rename=!0);const p="copy"===n.value.type?tt:at;return void(await a({loading:"正在处理文件，请稍后...",request:p(u),success:t=>{t.status&&(t.msg="文件覆盖成功!",o(),ts()),s.request(t),r(),e()}}))}if(v.sum===v.addend1+v.addend2){let t=[b.value.map(e=>e.filename)];await a({loading:"正在处理文件，请稍后...",request:lt({type:"copy"===n.value.type?1:2,path:l.value.param.path,skip:t}),message:!0,success:t=>{t.status&&(o(),ts()),r(),e()}})}else s.error("请输入正确的计算结果")},init:async()=>{w.value="batch"==p.value.type?p.value.fileData:[],await(async()=>{const t=await e();d.value=(null==t?void 0:t.sites_path)||""})(),v.sum=void 0,v.addend1=Math.round(9*Math.random()+1),v.addend2=Math.round(9*Math.random()+1),"batch"==p.value.type?(w.value=p.value.fileData,h.value.getTable().toggleAllSelection()):(E.type="rename",E.size=p.value.fileData[0].size,E.filename=_(p.value.fileData[0].filename),E.mtime=p.value.fileData[0].mtime,E.is_dir=p.value.fileData[0].is_dir)},$reset:()=>{w.value=[],b.value=[]}}}),Ri=Z("FILES-TAMPER-STORE",()=>{const{refreshFilesList:e}=zs(),t=z(),l=z("关闭"),i=z("文件"),n=z(""),o=ae({fileName:!0,ext:!1});return{isStart:l,isFile:i,compData:t,checkList:o,onConfirm:async()=>{var l,i;if(!o.ext&&!o.fileName)return void s.error("请至少选择一项");const r={pid:t.value.data.tamperProofId,settings:[]},c=t.value.data.path;if("create"===n.value&&0==t.value.data.tamperProofId)return void(async l=>{let i=t.value.data.path,n=[];if(t.value.data.isFile){const e=i.lastIndexOf("/");if(-1!==e&&(i=i.substring(0,e)),o.fileName){let e=t.value.data.path.split("/"),a=e.length>=2?e[e.length-2]:"";n.push("".concat(a,"/").concat(t.value.data.fileName))}o.ext&&n.push("."+t.value.data.fileName.split(".").pop())}await a({loading:"正在创建目录保护，请稍后...",request:nt({path:i,exts:JSON.stringify(n)}),message:!0,success:t=>{t.status&&(e(),l&&l())}})})(close);if(t.value.data.isFile)(null==(l=t.value.data)?void 0:l.isLock)?(o.fileName&&(r.settings.push({key:"remove_bf",values:[c]}),r.settings.push({key:"add_wf",values:[c]})),o.ext&&r.settings.push({key:"remove_bf",values:["."+t.value.data.fileName.split(".").pop()]})):(o.fileName&&(r.settings.push({key:"add_bf",values:[c]}),r.settings.push({key:"remove_wf",values:[c]})),o.ext&&r.settings.push({key:"add_bf",values:["."+t.value.data.fileName.split(".").pop()]}));else if(null==(i=t.value.data)?void 0:i.isLock){var u=n.value;-1!=t.value.data.path.indexOf("/www/server/panel/class")&&(u="add_wd"),r.settings.push({key:u,values:[t.value.data.path]})}else r.settings.push({key:n.value,values:[c]});r.settings=JSON.stringify(r.settings);return(await a({loading:"正在执行中，请稍后...",request:it(r),message:!0,success:t=>{t.status&&e()}})).status},init:()=>{var e;l.value=(null==(e=t.value.data)?void 0:e.isLock)?"关闭":"开启",i.value="file"===t.value.data.type?"文件":"目录",(async()=>{await a({request:st({path:t.value.data.path}),success:e=>{n.value=e.data.data.action[0]}})})()},$reset:()=>{n.value="",Object.assign(o,{fileName:!0,ext:!1})}}}),Ii=Z("FILES-TASK-STORE",()=>{const{refreshFilesList:t}=zs(),l=z();let i=null;const n=z([]),s=async()=>{try{const e=await m({status:-3});if(0===e.data.length)return clearInterval(i),t(),void o();n.value=e.data,i=setTimeout(s,2e3)}catch(a){e(a)}},o=async()=>{const e=await l.value;null==e||e.unmount()};return{instance:l,taskData:n,getLog:s,cancel:async e=>{await c({title:"删除任务",content:"您真的要删除当前任务【".concat(e.name,":").concat(e.shell,"】吗？")}),a({loading:"正在删除，请稍后...",request:v({id:e.id}),message:!0,success:s})},$reset:()=>{n.value=[],clearInterval(i)}}}),Ni=Z("FILES-IMAGE-PREVIEW-STORE",()=>{const{fileTabActiveData:e,imageList:t}=se(zs()),a=z(),l=window.location.protocol+"//"+window.location.host+"/download?filename=",i=z(""),n=z([]);return{fileItem:a,image:i,imagesArr:n,init:()=>{i.value="".concat(l).concat(a.value.path),(async()=>{n.value=t.value.map(t=>"".concat(l).concat(e.value.param.path,"/").concat(t[0]))})()},$reset:()=>{n.value=[]}}}),Fi=Z("FILES-IMPORT-DATABASE-STORE",()=>{const e=z(),t=ae({name:""}),l=z(!1),i=z(),n=ae({name:[{validator:(e,t,a)=>{""===t?a(new Error("请选择压缩路径")):a()},trigger:["blur"]}]}),s=z([]);return{fileItem:e,quickFormRef:i,quickForm:t,quickRules:n,disable:l,databaseOptions:s,onConfirm:async()=>{await c({title:"导入数据库",content:"是否将【".concat(e.value.fileName,"】文件，导入【").concat(s.value.find(e=>e.value==t.name).label,"】数据库中，是否继续？")});const l={name:s.value.find(e=>e.value==t.name).label,file:e.value.path};await i.value.validate();return(await a({loading:"正在导入数据库，请稍后...",request:ot(l),message:!0})).status},toggleName:e=>{t.name=e},getOptions:async()=>{await a({request:g({table:"databases"}),success:e=>{e.status&&(s.value=e.data.data.map(e=>({label:e.name,value:e.id})),s.value.length>0&&(t.name=s.value[0].value))}})},$reset:()=>{Object.assign(t,{name:""}),l.value=!1,s.value=[]}}}),Oi=Z("FILES-VIDEO-STORE",()=>{const{fileTabActiveData:e}=se(zs()),t=z(""),l=z([]),i=e.value.param.path;return{currentPath:i,videoList:l,videoUrl:t,playVideo:e=>{t.value=i+"/"+e},getList:async()=>{await a({request:rt({path:i}),data:[Array,l]})},$reset:()=>{t.value="",l.value=[]}}}),Ai=Z("FILES-SHARE-LIST-STORE",()=>{const e=z({}),{refreshFilesList:t}=zs(),l=z(!1),i=z([]),n=ae({total:0,p:1,limit:12,file_name:""}),s=async()=>{a({loading:l,request:ct({p:n.p,filename:n.file_name||""}),data:{data:[Array,i],page:y(n)}})},o=z([{label:"分享名称",prop:"ps"},{label:"文件地址",prop:"filename"},{label:"过期时间",prop:"expire"},Zt([{onClick:e=>{mn(e,!0)},title:"详情"},{onClick:async e=>{await c({title:"取消分享",content:"是否取消分享该文件【".concat(e.ps,"】，是否继续？")}),a({loading:"正在取消文件分享，请稍后...",request:ut({id:e.id}),message:!0,success:e=>{e.status&&(s(),t())}})},title:"关闭"}])]);return{compData:e,isLoading:l,tableData:i,shareTableData:n,tableColumn:o,getShareData:s,searchSubmit:e=>{n.file_name=e,s()},$reset:()=>{l.value=!1,i.value=[],Object.assign(n,{total:0,p:1,limit:12,file_name:""})}}}),Pi=Z("FILES-SHARE-STORE",()=>{const{refreshFilesList:e}=zs(),t=z(),l=ae({ps:"",expire:24,password:""}),i=z(!1),n=z(),o=ae({ps:[{validator:(e,t,a)=>{""===t?a(new Error("请输入分享名称")):a()},trigger:["blur"]}]}),r=z(),u=ae({name:"",link:"",code:"",time:""}),p=z({}),d=z(!1),f=z(!1),h=z(),m=ae({});return{fileItem:t,quickFormRef:n,quickForm:l,quickRules:o,disable:i,help:[{isHtml:!0,content:'<span class="text-[#ef0808]">注意：生成的外链分享链接具有一定的风险，请仅与可信任的人分享链接，避免敏感信息泄露</span>'}],compData:r,detail:p,detailFormRef:h,detailForm:u,detailRules:m,isDisabled:f,helpList:[{content:'<span class="text-[#ef0808]">注意：生成的外链分享链接具有一定的风险，请仅与可信任的人分享链接，避免敏感信息泄露</span>',isHtml:!0}],showQrcode:d,copyAll:e=>{b({value:"链接：".concat(u.link," 提取码：").concat(u.code)})},copyLink:e=>{b({value:u.link})},onConfirm:async o=>{const r={filename:Vn(t.value.fileName),ps:l.ps,password:l.password,expire:l.expire};await n.value.validate(),await a({loading:i,request:pt(r),success:t=>(t.status?(s.success("分享成功"),o.unmount()):s.error(t.message),e(),mn(t.data))})},onConfirmDetail:async()=>{try{await h.value.validate(),await c({title:"取消分享【".concat(p.value.ps,"】"),content:"您真的要取消分享【".concat(p.value.ps,"】吗？")});const t={id:p.value.id};return(await a({loading:"正在取消文件分享，请稍后...",request:ut(t),message:!0,success:t=>{if(t.status){const{getShareData:t}=Ai();t(),e()}}})).status}catch(t){}},initDetail:()=>{d.value=!1,Object.assign(u,{name:"",link:location.origin+"/down/"+r.value.token,code:"",time:r.value.expire}),(async()=>{if(r.value.isShareList)return p.value=r.value,u.name=r.value.ps,u.link=location.origin+"/down/"+r.value.token,u.code=r.value.password||"",u.time=r.value.expire,void(u.qrcode=location.origin+"/down/"+r.value.token+"?fname="+r.value.ps+"&down=true");await a({loading:"正在获取分享详情，请稍后...",request:dt({id:Number(r.value.isShare|r.value.id)}),success:e=>{p.value=e.data,u.name=e.data.ps,u.link=location.origin+"/down/"+e.data.token,u.code=e.data.password||"",u.time=e.data.expire,u.qrcode=location.origin+"/down/"+e.data.token+"?fname="+e.data.ps+"&down=true"}})})()},init:()=>{i.value=!1,Object.assign(l,{ps:t.value.fileName,expire:24,password:""})}}}),ji=Z("FILES-SEND-EMAIL-STORE",()=>{const e=z(),t=ae({email:"",msg:""}),l=z(!1),i=z(),r=ae({email:[{validator:(e,t,a)=>{if(""===t)a(new Error("请输入接受者邮箱"));else{const e=t.trim().split(",").filter(e=>""!==e);let l=!1;e.forEach(e=>{w(e)||(l=!0)}),l?a(new Error("请输入正确的邮箱")):a()}},trigger:["blur"]}],fileName:[{validator:(t,a,l)=>{e.value.size>52428800?l(new Error("请选择小于50M的附件")):l()}}]}),c=e=>0===Object.keys(e).length;return{fileItem:e,quickFormRef:i,quickForm:t,quickRules:r,disable:l,getDetail:async()=>{const{data:e}=await ft();c(e)&&$t({title:"发送者配置",type:"mail",callback:()=>{}})},onConfirm:async()=>{const r={to_email:t.email,msg:t.msg,flist:[Vn(e.value.fileName)]};await i.value.validate();return(await a({loading:l,request:ht({data:JSON.stringify(r)}),success:e=>{const{data:t}=e;if(t.msg&&""!=t.msg)return s.error(t.msg),null;let a=[];Object.keys(t.list).forEach(e=>{const l=c(t.list[e].error);let i=[];l||Object.keys(t.list[e].error).forEach(a=>{i.push(a+"："+t.list[e].error[a])}),a.push({name:e,msg:l?"发送成功":i.join("<br>"),status:!!l})}),o({title:"发送至邮箱-结果",area:50,component:()=>n(()=>import("./index118.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{resultData:a,resultTitle:"发送至邮箱",resultColumn:[{label:"邮箱",prop:"name"},{label:"结果",width:80,render:e=>oe("span",{class:e.status?"text-primary":"text-danger"},e.status?"操作成功":"操作失败")},{label:"信息",render:e=>oe("span",{class:e.status?"":"text-danger"},e.msg)}]}})}})).data.status},$reset:()=>{l.value=!1,Object.assign(t,{email:"",msg:""})}}}),Mi=Z("FILES-SPLIT-STORE",()=>{var e;const t=zs(),{fileTabActiveData:l}=se(t),{refreshFilesList:i}=t,n=z(),o=ae({type:"size",size:1024,num:5,path:(null==(e=l.value)?void 0:e.param.path)||""}),r=z(!1),c=z(),u=ae({size:[{validator:(e,t,a)=>{"size"===o.type?""===t?a(new Error("请输入拆分大小")):1024*Number(t)*1024>=n.value.size/2?a(new Error("拆分大小不能大于文件大小一半")):a():a()},trigger:["blur"]}],num:[{validator:(e,t,a)=>{"num"===o.type&&(""===t||Number(t)<2)?a(new Error("拆分数量不能小于2个")):a()},trigger:["blur"]}],path:[{validator:(e,t,a)=>{""===t?a(new Error("请选择存放目录")):a()},trigger:["blur"]}]});return{fileItem:n,quickFormRef:c,quickForm:o,quickRules:u,disable:r,help:[{content:"拆分后会在存放目录(默认当前目录)下创建一个xxx_split文件夹,存放配置文件以及拆分文件"}],openFile:()=>{Jt({type:"dir",change:e=>{o.path=e}})},onConfirm:async e=>{const t={file_path:Vn(n.value.fileName),save_path:o.path};"size"===o.type?t.split_size=Number(o.size):t.split_num=Number(o.num),await c.value.validate();return(await a({loading:"正在拆分文件，请稍后...",request:mt(t),message:!0,success:e=>{s.request({status:e.status,msg:e.status?"拆分成功":"拆分失败"}),i()}})).status},init:()=>{var e;r.value=!1,Object.assign(o,{type:"size",size:1024,num:5,path:(null==(e=l.value)?void 0:e.param.path)||""})}}}),zi=Z("FILES-TERMINAL-STORE",()=>{const{fileTabActiveData:e}=se(zs()),t=z(),a=z(),l=()=>a.value,i=async()=>{const e=l(),t=null==e?void 0:e.socketInfo();try{await c({title:"确定要关闭SSH会话吗？",content:"关闭SSH会话后，当前命令行会话正在执行的命令可能被中止，确定关闭吗？"}),n(),t.close()}catch(a){}},n=async()=>{const e=await t.value;null==e||e.unmount()};return{instance:t,filesTerminalRef:a,init:()=>{q(()=>{const t=l(),a=null==t?void 0:t.socketInfo(),i=null==t?void 0:t.terminal;a.send("\r\nclear\r"),a.send("cd ".concat(e.value.param.path,"\r")),null==i||i.focus()})},onCancel:()=>(i(),!1)}}),qi=Z("FILES-MERGE-STORE",()=>{var e;const t=zs(),{fileTabActiveData:l}=se(t),{refreshFilesList:i}=t,n=z(),s=ae({path:(null==(e=l.value)?void 0:e.param.path)||"",disable:!1,file:{}}),o=z(!1),r=z(),c=ae({path:[{validator:(e,t,a)=>{""===t?a(new Error("请选择存放目录")):a()},trigger:["blur"]}]});return{fileItem:n,loading:o,quickFormRef:r,quickForm:s,quickRules:c,openFile:()=>{Jt({type:"dir",change:e=>{s.path=e}})},getFile:async()=>{await a({loading:o,request:vt({file_path:n.value.path}),success:e=>{var t;Object.assign(s,{path:(null==(t=l.value)?void 0:t.param.path)||"",disable:!1,file:e.data})}})},onConfirm:async e=>{const t={file_path:Vn(n.value.fileName),save_path:s.path};await r.value.validate(),await a({loading:o,request:gt(t),message:!0,success:t=>{i(),t.status&&e&&e()}})}}}),Bi=Z("FILES-EDIT-STORE",()=>{const e=z(),t=z(!1),l=ae({data:""});return{compData:e,config:{mode:"ace/mode/nginx"},load:t,cmdForm:l,onConfirm:async t=>{const i={sfile:e.value.fileItem.path,filename:(""!=e.value.path?e.value.path+"/":"")+e.value.name,data:l.data},n="zip"===e.value.fileItem.ext?yt:bt;await a({loading:"正在保存，请稍后...",request:n({data:JSON.stringify(i)}),message:!0,success:e=>{e.status&&t&&t()}})},init:()=>{l.data=e.value.data.data}}}),Vi=Z("FILES-DECOMPRESSION-STORE",()=>{const e=zs(),{fileTabActiveData:t}=se(e),{refreshFilesList:l,getRealTask:i}=e,n=Si(),{instance:s}=se(n),o=z(),r=ae({fileName:"",path:t.value.param.path||"",coding:"UTF-8",password:"",auth:"755"}),c=z(!1),u=z(),p=ae({path:[{validator:(e,t,a)=>{""===t?a(new Error("请选择解压路径")):a()},trigger:["blur"]}],auth:[{validator:(e,t,a)=>{""===t||isNaN(Number(t))||t.length>3?a(new Error("请输入正确的权限")):a()},trigger:["blur"]}]});return{fileItem:o,quickFormRef:u,quickForm:r,quickRules:p,codeOptions:[{label:"UTF-8",value:"UTF-8"},{label:"GBK",value:"GBK"}],disable:c,openFile:()=>{Jt({type:"dir",change:e=>{r.path=e}})},toggleCode:e=>{r.coding=e},init:()=>{Object.assign(r,{fileName:o.value.fileName,path:t.value.param.path||"",coding:"UTF-8",password:"",auth:"755"})},onConfirm:async()=>{const e={sfile:o.value.path,dfile:r.path,type:"tar.gz"===o.value.ext?"tar":"zip",coding:r.coding,password:r.password,power:r.auth};await u.value.validate(),c.value=!0;const t=await a({loading:"正在解压文件，请稍后...",request:wt(e),message:!0,success:async e=>{l(),i();const t=await s.value;null==t||t.unmount()}});return c.value=!1,t.status}}}),Hi=Z("FILES-COMPRESS-STORE",()=>{const t=zs(),{fileTabActiveData:l}=se(t),{refreshFilesList:i,getRealTask:n}=t,o=z(),r=ae({type:"tar.gz",path:"",download:!1}),c=z(!1),u=z(),p=ae({path:[{validator:(e,t,a)=>{""===t?a(new Error("请选择压缩路径")):a()},trigger:["blur"]}]}),d=z(),h=z(),m=z([]),v=z(null),g=async e=>{try{const t=h.value.params;(await wt({...t,...e})).status&&v.value.tableSelectList.forEach(e=>{m.value.forEach((t,a)=>{if(e.zip_file_path===t.zip_file_path){const e={...t,status:"执行成功"};m.value.splice(a,1,e)}})}),m.value.find(e=>void 0===e.status)||(w(),s.success("解压成功"),i())}catch(t){}},y=async t=>{try{const e=h.value.params;(await h.value.callback({...e,...t})).status&&v.value.tableSelectList.forEach(e=>{m.value.forEach((t,a)=>{if(e.zip_file_path===t.zip_file_path){const e={...t,status:"执行成功"};m.value.splice(a,1,e)}})}),m.value.find(e=>void 0===e.status)||(w(),s.success("解压成功"),i())}catch(a){e(a)}},b=le([Qt({key:"file_path"}),{label:"文件名",prop:"name",minWidth:150},{label:"大小",prop:"size",width:150,render:e=>e.file_size===e.zip_file_size?K("span",{class:"text-primary"},[re("无变化")]):K("div",null,[K("div",{class:"text-blue-500"},[re("解压文件： "),K("span",{class:"text-danger"},[f(e.zip_file_size)])]),K("div",{class:"text-blue-500"},[re("目标文件： "),K("span",{class:"text-danger"},[f(e.file_size)])])])},{label:"修改时间",prop:"time",width:200,render:e=>e.file_mtime===e.zip_file_mtime?K("span",{class:"text-primary"},[re("无变化")]):K("div",null,[K("div",{class:"text-blue-500"},[re("解压文件： "),K("span",{class:"text-danger"},[e.zip_file_mtime])]),K("div",{class:"text-blue-500"},[re("目标文件： "),K("span",{class:"text-danger"},[e.file_mtime])])])},{label:"执行结果",prop:"action",fixed:"right",render:e=>e.status?K("span",{class:"text-primary"},[e.status]):K("span",{class:"text-blue-500"},[re("-")])}]),w=async()=>{const e=await d.value;null==e||e.unmount()};return{fileItem:o,quickFormRef:u,quickForm:r,quickRules:p,disable:c,compressOptions:[{label:"tar.gz (推荐)",value:"tar.gz"},{label:"zip (通用格式)",value:"zip"},{label:"rar (WinRAR对中文兼容较好)",value:"rar"},{label:"7z (压缩率极高的压缩格式)",value:"7z"}],openFile:()=>{Jt({type:"dir",change:e=>{r.path=e+"/"+o.value.fileName+"_"+_(5)+"."+r.type}})},toggleType:e=>{r.type=e,r.path=l.value.param.path+"/"+(Array.isArray(o.value)?l.value.label:o.value.fileName)+"_"+_(5)+"."+r.type},onConfirm:async()=>{const e={sfile:Array.isArray(o.value)?o.value.map(e=>e.fileName):o.value.fileName,dfile:r.path,z_type:r.type,path:l.value.param.path+"/"};await u.value.validate();const t=r.download?_t:Et;await a({loading:"正在压缩文件，请稍后...",request:t(e),success:e=>{e.status?(r.download?window.open(e.data.msg):s.success("压缩成功"),n(),setTimeout(()=>{i()},1e3)):s.error(e.msg)}})},init:()=>{Object.assign(r,{type:"tar.gz",path:("/"==l.value.param.path?"":l.value.param.path)+"/"+(Array.isArray(o.value)?l.value.label:o.value.fileName)+"_"+_(5)+".tar.gz"||"",download:!1})},instance:d,compData:h,tableColumn:b,tableList:m,jump:()=>{if(0===v.value.tableSelectList.length)return void s.error("请选择文件");const e=v.value.tableSelectList.map(e=>({zip_file_path:e.zip_file_path,file_path:e.file_path}));if(h.value.callback){const t=h.value.params,a=JSON.parse(t.data).extract_path.split("/");return a.pop(),void y({data:JSON.stringify({...JSON.parse(t.data),extract_path:a.join("/"),filenames:e,type:0})})}g({filenames:JSON.stringify(e),type1:0})},cover:()=>{if(0===v.value.tableSelectList.length)return void s.error("请选择文件");const e=v.value.tableSelectList.map(e=>({zip_file_path:e.zip_file_path,file_path:e.file_path}));if(h.value.callback){const t=h.value.params,a=JSON.parse(t.data).extract_path.split("/");return a.pop(),void y({data:JSON.stringify({...JSON.parse(t.data),extract_path:a.join("/"),filenames:e,type:1})})}g({filenames:JSON.stringify(e),type1:1})},rename:()=>{if(0===v.value.tableSelectList.length)return void s.error("请选择文件");const e=v.value.tableSelectList.map(e=>({zip_file_path:e.zip_file_path,file_path:e.file_path}));if(h.value.callback){const t=h.value.params,a=JSON.parse(t.data).extract_path.split("/");return a.pop(),void y({data:JSON.stringify({...JSON.parse(t.data),extract_path:a.join("/"),filenames:e,type:2})})}g({filenames:JSON.stringify(e),type1:2})},initCover:()=>{m.value=h.value.data.data},$reset:()=>{m.value=[]},TableRef:v}}),Gi=Z("FILES-DETAIL-STORE",()=>{const e=zs(),{fileTabActiveData:t}=se(e),{refreshFilesList:l}=e,i=z(),n=z("routine"),o=z(!1),r=z([]),p=()=>{r.value=[{title:"文件名",value:i.value.name},{title:"类型",value:i.value.st_type||"未知文件"},{title:"文件路径",value:"".concat(i.value.path,"/").concat(i.value.name)},{title:"文件大小",value:"".concat(i.value.st_size)},{title:"访问时间",value:u(i.value.st_atime)},{title:"修改时间",value:u(i.value.st_mtime)},{title:"元数据修改时间",value:u(i.value.st_ctime)},{title:"文件MD5",value:i.value.md5},{title:"文件sha1",value:i.value.sha1},{title:"所属用户",value:i.value.user},{title:"所属组",value:i.value.group},{title:"文件权限",value:i.value.mode},{title:"特殊权限",value:i.value.lsattr||"无"},{title:"用户id",value:i.value.st_uid},{title:"用户组id",value:i.value.st_gid},{title:"inode的链接数",value:i.value.st_nlink},{title:"inode的节点号",value:i.value.st_ino},{title:"inode保护模式",value:i.value.st_mode},{title:"inode驻留设备",value:i.value.st_dev}]},d=ae({owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),f=async()=>{const e=await Oe({filename:"".concat(i.value.path+"/"+i.value.fileName)});if(e.status){const t=e.data;d.auth=t.chmod,d.user=t.chown,h(Number(t.chmod))}else s.error(e.msg)},h=e=>{256&(e=parseInt(e.toString(),8))?d.owner.push("r"):d.owner=d.owner.filter(e=>"r"!==e),128&e?d.owner.push("w"):d.owner=d.owner.filter(e=>"w"!==e),64&e?d.owner.push("x"):d.owner=d.owner.filter(e=>"x"!==e),32&e?d.group.push("r"):d.group=d.group.filter(e=>"r"!==e),16&e?d.group.push("w"):d.group=d.group.filter(e=>"w"!==e),8&e?d.group.push("x"):d.group=d.group.filter(e=>"x"!==e),4&e?d.public.push("r"):d.public=d.public.filter(e=>"r"!==e),2&e?d.public.push("w"):d.public=d.public.filter(e=>"w"!==e),1&e?d.public.push("x"):d.public=d.public.filter(e=>"x"!==e),d.owner=Array.from(new Set(d.owner)),d.group=Array.from(new Set(d.group)),d.public=Array.from(new Set(d.public))};return{activeName:n,fileItem:i,load:o,getFileItem:async()=>{o.value=!0;const e=await Ye({filename:i.value.path});e.status?(i.value={...i.value,...e.data},o.value=!1):s.error(e.msg);const a=await Lt({path:t.value.param.path+"/"+i.value.fileName});i.value.st_size=a.data,p()},$reset:()=>{r.value=[],Object.assign(d,{owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""})},attrList:r,watchFileItem:p,showHistory:e=>{},recoverHistory:async e=>{await c({title:"恢复历史文件",content:"是否恢复历史文件 ".concat(u(i.value.st_mtime),"?恢复历史文件后，当前文件内容将会被替换！")}),a({loading:"正在恢复历史文件，请稍后...",request:St({filename:"".concat(i.value.path,"/").concat(i.value.name),history:e.st_mtime}),success:e=>{e.data.status?(s.success("恢复成功"),l()):s.error("恢复失败")}})},checkList:d,ownerOptions:[{label:"root",value:"root"},{label:"www",value:"www"},{label:"mysql",value:"mysql"}],checkNumber:e=>{d.checkNumber=e;const t=String(e).replace(/[^\d]/g,"").slice(0,3);d.auth=t,h(Number(d.auth))},changeUser:e=>{d.user=e},setFileAuths:async()=>{let e=d.auth.toString();if(e.length>3)return void s.error("请输入正确权限");if(d.checkNumber.match(/\D/g))return void s.error("请输入正确权限");if(e.match(/\D/g))return void s.error("请输入正确权限");for(;e.length<3;)e="0"+e;(await a({loading:"正在设置文件权限，请稍后...",request:Tt({filename:"".concat(i.value.path,"/").concat(i.value.name),user:d.user,access:e,all:d.isDir?"True":"False"}),message:!0,success:l})).status||setTimeout(()=>{f()},500)},reversePermission:()=>{let e=0;const t=(t,a,l,i)=>{t.includes("r")&&(e|=a),t.includes("w")&&(e|=l),t.includes("x")&&(e|=i)};for(t(d.owner,256,128,64),t(d.group,32,16,8),t(d.public,4,2,1),d.auth=e.toString(8);d.auth.length<3;)d.auth="0"+d.auth},getFileAuths:f}}),Wi=Z("FILES-RECYCLE-BIN-STORE",()=>{const e=zs(),{recyclingBinStatus:t}=se(e),{getRealTask:l}=e,i=z("all"),r=z(!1),p=z(null),d=z(null),h=ae({data:{},status:!1,statusDB:!1,type:"all",p:1,limit:10,search:"",time:[]}),m=z(),v=z(!1),g=async(e,t)=>{i.value=e,R.p=1,_.value=[],L.value="",h.type=i.value,h.time=[],h.search="","db"===e?(M.value="all",await I({type:"db"})):(M.value=e,await I({type:e}))},y=()=>{var e,t,a,l,n;const s="db"===i.value;m.value={list:(null==(e=h.data)?void 0:e.list)||[],type:s||"db"!==h.type?h.type||"db":M.value,num:void 0===(null==(t=h.data)?void 0:t.search_num)?null==(a=h.data)?void 0:a[s?i.value:M.value]:null==(l=h.data)?void 0:l.search_num,size:(null==(n=h.data)?void 0:n.all_size)||0},w.value=s?h.statusDB:h.status},b=async(e,a=!0)=>{e&&e.time_search&&(h.time=e.time_search),e&&e.search?h.search=e.search:e&&""===e.search&&(h.search=""),e&&e.type&&(h.type=e.type);const l={type:h.type,p:h.p,limit:h.limit,search:h.search,time_search:h.time,...e};a&&(r.value=!0);const i=await It(l);r.value=!1,h.data=i.data,h.status=i.data.status,t.value=i.data.status,h.statusDB=i.data.status_db,y()},w=z(!1),_=z([]),E=z(""),L=z(""),S=z(!1),T=ae({resultData:[],resultColumn:[{label:"数据库",prop:"file"}],resultTitle:""}),C=z(),x=ae({disabledDate:e=>{const t=new Date;t.setHours(23,59,59,999);const a=t.getTime();return e.getTime()>a}}),k=async()=>{const e=await xt({type:"db",force:1});s.request(e),l(),b(),S.value=!1},D=z(),R=ae({loading:!1,p:1,limit:10}),I=async(e,t=!0)=>{let a="";"db"===i.value?(M.value="all",a="db"):a=M.value,await b({p:R.p,limit:R.limit,type:a,...e},t)},N=async e=>{"db"===m.value.type?(await c({title:"恢复数据库".concat(e.name),content:"您确定要恢复数据库【".concat(e.name,"】，是否继续？")}),await a({loading:"正在恢复数据库，请稍后...",request:kt({path:e.rname}),message:!0,success:e=>{e.status&&I()}})):(q.value=e,o({title:"恢复文件".concat(e.name),area:41,btn:"确定",component:()=>n(()=>import("./index237.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:W}))},F=async e=>{const t="db"===m.value.type?"数据库":"文件";await c({title:"删除".concat(t).concat(e.name),type:"input",input:{content:"删除".concat(t)},content:"风险操作，删除后，".concat(t,"将彻底消失，无法恢复，是否继续操作？")}),await a({loading:"正在删除，请稍后...",request:Dt({path:e.rname}),success:t=>{1===t.tag?(T.resultData=[{file:e.rname}],T.resultTitle=t.msg,v.value=!1,S.value=!0):(s.request(t),I())}})},O=async e=>{const{data:t}=await Rt({name:e.name,rname:e.rname});t.status?window.open("/download?filename=".concat(t.msg.path)):s.error(t.msg)},A=async e=>{const{data:t}=await Rt({name:e.name,rname:e.rname});if("string"==typeof t.msg&&t.msg.includes("找不到文件"))return void s.error("当前文件不可预览");const a=t.msg.file.nm.split(".").pop();if("images"===ns(a)){const e={path:t.msg.path};Rn(e)}else ps(t.msg)},P=z([Qt({key:"rname"}),{label:"文件名",prop:"fileName",minWidth:150,render:e=>K("span",{class:"flex items-center"},[K("span",{class:["icon-bg",e.is_dir?"folder-icon":Object.keys(on).includes(is(e.name,"file"))?on[is(e.name,"file")]+"-icon":"file-icon"]},null),K("span",{class:"truncate w-[26rem]"},[e.name])])},{label:"原位置",prop:"dname",showOverflowTooltip:!0,render:e=>K("span",{class:"truncate"},[e.dname])},{label:"大小",width:90,render:e=>f(e.size)},{label:"删除时间",width:145,render:e=>u(e.time)},Zt([{title:"下载",isHide:e=>e.is_dir,onClick:O},{title:"查看",isHide:e=>e.is_dir,onClick:A},{title:"恢复",onClick:N},{title:"删除",onClick:F}])]),j=[{label:"恢复",value:"recover",event:async(e,t,a,l,i)=>{const n=async e=>await kt({path:e.rname});await e({title:"批量恢复",content:"批量恢复选中后，被删除将会恢复，是否继续操作？",column:[{prop:"rname",label:"名称"},ea()],onConfirm:async()=>(await t(n),I(),!1)})}},{label:"删除",value:"delete",event:async(e,t,l,i,n)=>{(async(e,t)=>{const l="db"===m.value.type?"数据库":"文件";await c({title:"删除".concat(l),type:"input",input:{content:"删除".concat(l)},isHtml:!0,content:"风险操作，删除后，".concat(l,"将彻底消失，无法恢复，是否继续操作？")}),await a({loading:"正在批量删除，请稍后...",request:Nt({path_list:e.map(e=>e.rname)}),success:e=>{let a=[];e.success.forEach(e=>{a.push({name:e,msg:"删除成功",status:!0})}),Object.keys(e.error).forEach(t=>{a.push({name:t,msg:e.error[t],status:!1})}),As({resultData:a,resultTitle:"删除"}),t(),I()}})})(l.value,n)}}],M=z("all"),q=z(),B=ae({type:"before",path:""}),V=z(!1),H=z(),G=ae({path:[{validator:(e,t,a)=>{""===t&&"path"===B.type?a(new Error("请选择恢复目录")):a()},trigger:["blur"]}]}),W=async()=>{await H.value.validate();return(await a({loading:V,request:kt({path:q.value.rname,rpath:"path"===B.type?"".concat(B.path,"/").concat(q.value.name):q.value.dname}),message:!0,success:e=>{e.status&&I()}})).status};return{activeName:i,loading:r,binData:h,compData:m,watchBinData:y,handleTabChange:g,statusSwitch:w,time:_,popupData:T,showPopup:S,searchName:L,pickerOptions:x,formatDate:E,onCancel:()=>{S.value=!1},showPlayer:()=>{C.value.focus()},cleanBin:async()=>{let e=null;try{await c({title:"清空回收站",type:"input",input:{content:"清空回收站"},isHtml:!0,content:'<span class="text-[red]">清空回收站后，回收站'.concat("db"===i.value?"【所有数据库】":"【所有暂存文件】","将彻底消失，无法恢复，是否继续操作？</span>")}),e=s.load("正在清空回收站，请稍候...");const t=await xt({type:"db"===i.value?"db":"files"}),{fail_list:a}=t;if(a&&(null==a?void 0:a.length)>0&&"db"===i.value){const e=a.map(e=>({file:e}));T.resultData=e,T.resultTitle=t.msg,v.value=!0,S.value=!0}else s.request(t);l(),I()}catch(t){}finally{e&&e.close()}},clearTime:()=>{_.value=[]},setStatus:async e=>{let t={};e&&(t.db=1);const a=await Ct(t);s.request(a.data),b()},goSearch:()=>{b({search:L.value})},changeClearCheck:k,watchTime:()=>{var e;const t={time_search:[]};2===(null==(e=_.value)?void 0:e.length)?(_.value[0]=new Date(_.value[0]).setHours(0,0,0,0),_.value[1]=new Date(_.value[1]).setHours(23,59,59,0),t.time_search=JSON.stringify([_.value[0]/1e3,_.value[1]/1e3])):(E.value="",t.time_search=JSON.stringify([])),b(t,!1)},dbTableRef:p,tableRef:D,fileTableRef:d,tableData:R,tableColumn:P,tableBatchOptions:j,deleteClearCheck:async()=>{if(v.value)return void k();const e=await Dt({path:T.resultData[0].file,force:1});s.request(e),S.value=!1,I()},refresh:I,tabActive:M,config:[{type:"all",label:"全部",icon:"svgtofont-left-soft"},{type:"dir",label:"文件夹",icon:"svgtofont-left-files"},{type:"file",label:"文件",icon:"svgtofont-file-text"},{type:"image",label:"图片",icon:"svgtofont-icon-term"},{type:"ont_text",label:"文档",icon:"svgtofont-el-document"}],toggleType:e=>{R.p=1,M.value=e,I({type:e},!1)},rowData:q,isCmdLoading:V,cmdForm:B,cmdFormRef:H,cmdRules:G,openFile:()=>{Jt({type:"dir",change:e=>{B.path=e}})},clearSpace:e=>{B.path=B.path.replace(/\s+/g,"")},init:()=>{h.type=i.value,g(i.value)},$reset:()=>{i.value="all",r.value=!1,Object.assign(h,{data:{},status:!1,statusDB:!1,type:"all",p:1,limit:10,search:"",time:[]}),w.value=!1,_.value=[],E.value="",L.value="",S.value=!1,Object.assign(T,{resultData:[],resultColumn:[{label:"数据库",prop:"file"}],resultTitle:""}),Object.assign(R,{loading:!1,p:1,limit:10}),M.value="all"},$resetCmdForm:()=>{V.value=!1,Object.assign(B,{type:"before",path:""})}}}),Ui=Z("FILES-LIST-VIEW-STORE",()=>{const e=zs(),{mainHeight:t,authType:a,fileTabActiveData:l,navBtnHeight:i,imageList:n,imgPathItem:o,isNoCreteItem:r,createListType:u,globalTamperStatus:p,dataList:d,fileBatchNum:f,diskAnalysis:h}=se(e),{refreshFilesList:m,watchCreateListType:v,watchDeleteFileData:g}=e,y=window.location.protocol+"//"+window.location.host+"/download?filename=",b=z([{label:"文件名称",id:"fileName",width:"42",sort:"",sortable:!0,class:"cursor-pointer"},{label:"企业级防篡改",width:"12"},{label:"权限/所有者",width:"15"},{label:"大小",width:"10",id:"size",sort:"",sortable:!0,class:"cursor-pointer"},{width:"16",label:"修改时间",id:"time",sort:"",sortable:!0,class:"cursor-pointer"},{label:"备注",width:"20"},{label:"操作",type:"operation",width:"30.4",class:"custom-operate custom-operate-head",style:{"justify-content":"flex-end","padding-right":" 2.8rem",display:"flex",position:"sticky",right:0,background:"#F6F6F6",flex:1}}]),w=z(null),_=z(!1),T=z(null);le([]);const C=z([]),x=z(!1),k=z([]),D=z(0),R=z(!0),I=z(null),N=z(0),F=z(0),O=e=>{(async e=>{if(Bn(e.fileName))return s.error('文件名不能包含以下字符：\\ / : * ? " < > |'),e.isReName=!0,void(r.value=!0);if(r.value=!1,e.isNew){if(u.value="",v(""),""===e.fileName)return void g(e);const t=await Re({path:Vn(e.fileName),type:e.type});t.status&&(await m(),e.isReName=!1,"file"===e.type&&setTimeout(()=>{const t=d.value.find(t=>t.fileName===e.fileName);t&&ds(t)},100)),g(e),s.request(t)}else{if(e.fileName===e.oldName)return void(e.isReName=!1);let t=s.load("正在重命名，请稍候...");const a=await Ie({sfile:Vn(e.oldName),dfile:Vn(e.fileName),rename:!0});t.close(),a.status?(e.isReName=!1,s.success(a.msg)):s.error(a.msg),m()}})(e)};let A=null;const P=e=>{const t=Array.from(e.target.classList);return!(t.includes("checkbox--icon")||t.includes("size-link")||t.includes("svgtofont-el-loading")||t.includes("el-input__inner"))};let j=null,M={top:0,left:0},B={top:0,left:0},V=0;const H=e=>{if(2===e.button||e.target.closest(".el-input__inner"))return;const t=document.getElementById("drugBox");if(t&&t.remove(),j){const t=j.getBoundingClientRect().top,a=j.getBoundingClientRect().left;M={top:e.clientY-t,left:e.clientX-a}}document.addEventListener("mousemove",G),document.addEventListener("mouseup",W)},G=e=>{const t=document.getElementById("drugBox");if(t&&t.remove(),j){const t=j.getBoundingClientRect().top,a=j.getBoundingClientRect().left;B={top:e.clientY-t>0&&e.clientY-t<j.offsetHeight?e.clientY-t:e.clientY-(t+j.offsetHeight)>1?j.offsetHeight:0,left:e.clientX-a>0&&e.clientX-a<j.offsetWidth?e.clientX-a:e.clientX-(a+j.offsetWidth)>1?j.offsetWidth:0};const l=(null==j?void 0:j.scrollTop)||0,i={top:B.top>M.top?M.top+l:B.top+l,left:B.left>M.left?M.left:B.left};let n=Math.min(Math.abs(B.left-M.left),a+j.offsetWidth-i.left),s=Math.min(Math.abs(B.top-M.top),t+j.offsetHeight-i.top+l);if(e.clientY-t<0){const a=Math.abs(e.clientY-t);j.scrollTop-=a,0!=j.scrollTop&&(V+=a),s+=V}if(e.clientY-(t+j.offsetHeight)>1){const a=e.clientY-(t+j.offsetHeight);j.scrollTop+=a,j.scrollHeight-j.scrollTop!=j.clientHeight&&(V+=a),s+=V,i.top-=V}if(M.top==B.top||M.left==B.left)return!0;const o=document.createElement("div");o.classList.add("absolute","border","top-0","border-[#072246]","bg-[#cce8ff]","opacity-[0.15]","overflow-hidden"),o.id="drugBox",j.appendChild(o),o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.width=n+"px",o.style.height=s+"px";const r=document.getElementById("drugBox");if(j&&r){const e=r.offsetTop,t=r.offsetTop+r.offsetHeight;let a=[];J.value.forEach((l,i)=>{const n=l.offsetTop,s=l.offsetTop+l.offsetHeight,o=d.value[i];s>=e&&n<=t&&a.push(o.path)});const l=new Set(a),i=new Set(C.value);l.size===i.size&&[...l].every(e=>i.has(e))||(C.value=[...l],ae()),C.value.length>0&&C.value.length===d.value.length?Y.value=!0:Y.value=!1}}},W=e=>{e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",W);const t=document.getElementById("drugBox");t&&t.remove()},U=e=>{C.value=e.map(e=>e.path),ae()},J=z([]),$=()=>{J.value=[];for(let e=0;e<d.value.length;e++)J.value.push({offsetTop:36*e,offsetHeight:36});J.value.length&&(F.value=J.value[J.value.length-1].offsetTop,F.value<=t.value-(i.value||64)-266?R.value=!1:R.value=!0)},K=()=>{q(()=>{for(let e=0;e<n.value.length;e++){const t=n.value[e];d.value.forEach(e=>{e.fileName===t[0]&&t[1]&&(e.isSmallImage=t[1])})}k.value=d.value.filter(e=>void 0!==e.isSmallImage).map(e=>"".concat(y).concat(e.path))})},Y=z(!1),X=e=>{var t;2===e.button&&"INPUT"===e.target.tagName&&e.preventDefault(),e.target.closest(".scrollTable")||e.target.closest(".v-contextmenu")||null==(t=w.value)||t.hide()},Q=z(0),Z=z(null),ee=z(null),te=async()=>{try{const e=await E({sName:"disk_analysis"});(e.data.status||"ltd"===a.value)&&Kt({name:e.data.name,type:"i",pluginInfo:e.data,softData:e.data})}catch(e){}},ae=()=>{let e=d.value.filter(e=>C.value.includes(e.path));f.value=e},ie=()=>{q(()=>{j=document.querySelector(".scrollTable"),null==j||j.addEventListener("mousedown",H)})};return{mainHeight:t,authType:a,diskAnalysis:h,headData:b,dataList:d,selectList:C,fileBatchNum:f,checkedAll:Y,imgPathItem:o,imgIndex:D,showViewer:x,imgList:k,scrollHeight:N,scrollHeightBottom:F,isShowShadow:R,context:w,contextRow:T,isBatch:_,scrollRef:I,imageList:n,navBtnHeight:i,fileTabActiveData:l,bindMouseDown:ie,buyPlugin:()=>{h.value.isBuy||"ltd"===a.value?te():Yt({sourceId:140,disablePro:!0})},clickName:e=>{if("dir"===e.type)Gn(e.path);else{const t={"查看图片":["jpg","png","gif","jpeg"],"播放视频":["mp4","avi","mov","rmvb","rm","flv","3gp","wmv","mkv","mpeg","mpg","ts","webm","vob","swf"],"解压文件":["zip","rar","gz","war","tgz","7z","tar.gz","tar"],"播放音频":["mp3","wav","wma","ogg","ape","flac","aac","m4a"]},a=e.ext;let l="查看文档";for(const e in t)if(t[e].includes(a)){l=e;break}A&&A.close(),A=s.msg({customClass:"no-icon !z-10",message:"双击".concat(l),type:"info"})}},handleBlurCheck:()=>{const e=d.value.find(e=>e.isReName);O(e)},handleEvent:(e,t)=>{var a;if(null==(a=w.value)||a.hide(),S()&&e instanceof MouseEvent)return;const l=(new Date).getTime(),i=l-Q.value;var n,s;i<300&&i>0&&ee.value===t?(null!==Z.value&&clearTimeout(Z.value),n=e,s=t,A&&A.close(),P(n)&&(s.isPs||s.isReName||ds(s))):(ee.value=t,Z.value=window.setTimeout(()=>{((e,t)=>{const a=Array.from(e.target.classList);P(e)&&(a.includes("fileName")||(C.value=[t.path],ae()))})(e,t)},300)),Q.value=l},handleRightClick:(e,t)=>{var a,l;e.preventDefault(),e.stopPropagation();const i=t?t.path:null;var n;if((t&&(n=i,!C.value.find(e=>e===n))||0===e.button)&&(C.value=[],C.value.push(i),ae()),C.value.length>1&&t&&2===e.button){_.value=!0;let t=[];return d.value.forEach(e=>{C.value.includes(e.path)&&t.push(e)}),T.value=t,void(null==(a=w.value)||a.show(e))}_.value=!1,T.value=t||null,t||(C.value=[],ae()),null==(l=w.value)||l.show(e)},handleCheckFile:e=>{new Set(C.value).has(e.path)?C.value=C.value.filter(t=>t!==e.path):C.value.push(e.path),Y.value=C.value.length===d.value.length,ae()},handleCheckAll:e=>{U(e?d.value:[]),Y.value=e},handleFileLock:async e=>{if("ltd"===a.value)if(p.value.status)Nn(e);else{const{data:e}=await E({sName:"tamper_core"});e.setup?L(p.value.tip)?s.error("企业级防篡改未安装或版本较低，请检查插件状态。"):s.error("“".concat(p.value.tip,"”请前往【企业级防篡改】启动服务。")):await Kt({name:e.name,type:"i",pluginInfo:e})}else Yt({sourceId:71})},handleEnPsView:e=>{e.isOsPs||(e.oldPs=e.ps,e.isPsEdit=!0)},handleLvPsView:async(e,t)=>{t.isOsPs||e.target.children[1].contains(document.activeElement)||(t.isPsEdit=!1)},handleSetPs:async e=>{if(e.ps!==e.oldPs){let t=s.load("正在设置备注，请稍候...");const a=await Ft({filename:e.path,ps_type:0,ps_body:e.ps});a.status?(e.isPsEdit=!1,s.success(a.msg)):s.error(a.msg),t.close()}else e.isPsEdit=!1},handleReName:e=>{e.oldName=e.fileName,e.isReName=!0},openImgView:e=>{D.value=k.value.findIndex(t=>t==="".concat(y).concat(e.path)),x.value=!0},opearationIconClick:async(e,t)=>{const a={top:"置顶",favorite:"收藏",share:"分享"};try{switch("share"!=t&&await c({title:"提示",isHtml:!0,content:"取消【".concat(e.fileName,"】的").concat(a[t],"，是否继续？")}),t){case"top":Zn(e,e.isTop?"unset":"set");break;case"favorite":Qn(e,()=>e.isFav=!1);break;case"share":mn(e)}}catch(l){}},onReNameKeyup:O,sortTable:e=>{e.sortable&&(b.value.forEach(t=>{t.id!==e.id&&(t.sort="")}),"asc"===e.sort?e.sort="desc":"desc"===e.sort?e.sort="":e.sort="asc",l.value.param.sort=""!=e.sort?e.id:"",l.value.param.reverse="asc"==e.sort?"False":"True",m())},calcFileListHeightFn:$,setSmallImage:K,closeImgPreView:()=>{x.value=!1},findCurrentImgIndex:e=>{D.value=k.value.findIndex(t=>t===e),x.value=!0},watchDataList:e=>{C.value=[],Y.value=!1,e.length&&($(),K()),ae(),q(()=>{var e;null==(e=I.value)||e.scrollToPosition(0)})},init:()=>{$(),ie(),I.value.$el.addEventListener("scroll",()=>{N.value=I.value.$el.scrollTop+(t.value-(i.value||64)-266),0===I.value.$el.scrollTop&&(N.value=0)}),(()=>{const e=b.value.find(e=>e.id===l.value.param.sort);e&&(e.sort="False"==l.value.param.reverse?"asc":"desc")})(),document.addEventListener("mousedown",X)},$reset:()=>{null==j||j.removeEventListener("mousemove",G),document.removeEventListener("mousedown",X)},calcFileListHeight:J,watchSelectListLength:ae}}),Ji=Z("FILES-ACE-MOBILE-STORE",()=>{const{mainHeight:e}=i(),t=z(),a=z();let l;const n=z(null),o=(e,t)=>{if(ni(e),t){const e=t.currentTarget||t.currentTarget,a=n.value,l=a.offsetWidth,i=e.offsetLeft-l/2+e.offsetWidth/2;a.scroll({left:i,behavior:"smooth"})}},r=e=>{e.preventDefault();const{deltaY:t}=e;n.value.scrollLeft+=t},c=z(),u=async e=>{await Fl(),vl.value=await Pl(e)},p=z(!1),d=z(null),f=z(!1),h=z(null),m=z([{title:"保存",icon:"svgtofont-el-select",click:()=>{y()&&pi(yl)}},{title:"全部保存",icon:"svgtofont-icon-minmax-black",click:()=>{y()&&hi()}},{title:"刷新",icon:"svgtofont-el-refresh-right",click:async()=>{y()&&ai(yl,!0)}},{title:"搜索",icon:"svgtofont-el-search",click:()=>{y()&&vl.value.execCommand("find")}},{title:"替换",icon:"svgtofont-icon-log",click:()=>{y()&&vl.value.execCommand("replace")}},{title:"文件足迹",icon:"svgtofont-left-crontab",click:()=>{kn()}},{title:"退出",icon:"svgtofont-el-close",click:()=>{g()}}]),v=async()=>{cl(),Il(),D()},g=async()=>(await mi()?Mn(v):(localStorage.removeItem("aceEditor"),ri(),v()),!1),y=()=>!(!$l()||"custom"===yl.type)||(s.error("当前页面不支持该操作"),!1),b=z(null),w=z({}),_=e=>{const t=Ka.value.getNode(e);t&&e.isNew&&Ka.value.remove(t),t&&e.isReName&&(e.isReName=!1),Ja.value=!1},E=(e,t)=>{_(w.value),ll(e,t,b)},L=e=>_l.value.some(t=>t.path===e.path)?"text-[#cca700]":"",S=z("btn"),T=z(!1),C=z(""),x=z([]),k=z(""),D=async()=>{const e=await a.value;null==e||e.unmount()};return{fileItem:t,instance:a,tabsElement:n,changeTab:o,getDataChangeTab:()=>{q(()=>{const e=_l.value[_l.value.length-1],t=n.value.children[_l.value.length-1];o(e.id,{currentTarget:t})})},closeTab:async e=>{li(e)},initHeader:()=>{q(()=>{n.value.addEventListener("wheel",r)})},$resetHeader:()=>{n.value&&n.value.removeEventListener("wheel",r)},editorRef:c,mainHeight:e,createEditorView:u,initContent:async()=>{await u(c.value),t&&await ti({title:t.value.fileName,type:"editor",path:t.value.path,size:t.value.size}),await Ne({name:t.value.fileName,path:t.value.path}),await Rl()},isShow:p,dropdownMenu:d,handleClickOutside:e=>{d.value&&!d.value.contains(e.target)&&(p.value=!1)},isShowTool:f,dropdownMenuRef:h,column:m,checkOperationAvailable:y,handleClickOutsideEvent:e=>{h.value&&!h.value.contains(e.target)&&(f.value=!1)},openPopup:e=>{$l?(f.value=!1,e.click()):s.error("当前页面不支持该操作")},treeProps:{label:"fileName",key:"path",isLeaf:"isFile"},loadNode:async(e,a,...l)=>{el(e,a,t.value)},renderTree:(e,{node:t,data:a,store:l})=>{const{mode:i}=Wl(a.fileName),n=[e("span",{class:(a.isFile?"ace-".concat(i,"-icon ace-text-icon"):"ace-folder-icon")+" icon-editor-left",style:{"font-size":"4rem"}}),a.isReName?e():e("span",{class:"el-tree-node__label "+L(a),attrs:{title:a.fileName}},a.fileName)];return e("span",{class:"flex items-center ".concat(a.isReName?"newFiles":"defaultFiles"),on:{contextmenu:e=>{e.preventDefault(),E(e,a)}}},n)},handleExpandChange:e=>{(null==e?void 0:e.path)&&!Ua.value.includes(e.path)&&Ua.value.push(e.path)},handleCollapseChange:e=>{const t=Ua.value.indexOf(null==e?void 0:e.path);-1!==t&&Ua.value.splice(t,1),_(w.value)},initList:async()=>{q(()=>{const e=(t.value.path||"/www").split("/");e.pop(),Va.value=e.join("/")})},type:S,isCheck:T,searchValue:C,changeValue:e=>{Ua.value.length=0,C.value="","search"===e?(x.value=Ha.value,k.value=Va.value,Ha.value=[],$a.value=!0):(Ha.value=x.value,Va.value=k.value)},searchFile:async()=>{const e=await Za(Va.value,C.value,T.value?"True":void 0);$a.value=!1,e&&(Ha.value=e,Qa())},closeSearch:()=>{S.value="btn",Qa()},close:D,init:()=>{q(()=>{l=setInterval(()=>{const e=document.querySelector(".el-overlay-dialog"),t=null==e?void 0:e.querySelector(".el-dialog__body");t&&(e&&(e.style.alignItems="flex-start",e.style.paddingTop="1vh",e.style.paddingBottom="1vh"),t.style.maxHeight="90vh",t.style.height="auto",t.style.overflowY="auto",t.style.WebkitOverflowScrolling="touch")},1e3)})},$reset:()=>{clearInterval(l)}}}),$i={class:"dialog-btn-group"},Ki=["title","data-state"],Yi={class:"bt-dialog-content"},Xi={key:1,class:"bt-dialog-footer"},Qi=C(B({__name:"index",props:{title:{type:[String,Boolean],default:!1},area:{default:()=>["40%","40%"]},modal:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},component:{default:""},compData:{default:()=>({})},fullscreen:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},footer:{type:Boolean,default:!1},zIndex:{default:999},customClass:{default:""},closeBtn:{default:"one"},onClose:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}},onConfirm:{type:Function,default:()=>{}},cancelText:{default:"取消"},confirmText:{default:"确定"}},setup(e){const t=e,a=z(),l=z(!1),i=z(!1),n=z(t.fullscreen),s=z({x:0,y:0}),o=z({x:!1,y:!1}),r=z([0,0]),c=z({x:0,y:0}),u=z(!1),p=z(!1),d=z([0,0]),f=de(()=>{const[e,a]=t.area;return u.value?["100%","100%"]:p.value?["300px","44px"]:[e,a].map(e=>"number"==typeof e?"".concat(e,"rem"):e)}),h=de(()=>u.value?{x:0,y:0}:p.value?l.value?o.value:{x:"190px",y:"90%"}:o.value),m=de(()=>n.value||i.value?"two":t.closeBtn),v=(e=!1)=>{const{clientWidth:t,clientHeight:l}=a.value,i=(window.innerWidth-t)/2,n=(window.innerHeight-l)/2;o.value={x:"".concat(i,"px"),y:"".concat(n,"px")},e&&(r.value=[t,l],d.value=[r.value[0],r.value[1]])},g=e=>{if(u.value)return;const t=e.clientX,i=e.clientY,n=a.value.getBoundingClientRect();if(!l.value&&p.value){const e=n.left,t=n.top;c.value={x:e,y:t},o.value={x:"".concat(e,"px"),y:"".concat(t,"px")}}l.value||(l.value=!0);const r=t-n.left,d=i-n.top,f=e=>{let t=e.clientX-r,a=e.clientY-d;const l=window.innerWidth-n.width,i=window.innerHeight-n.height;t<0&&(t=0),a<0&&(a=0),t>l&&(t=l),a>i&&(a=i);const u=t-s.value.x,p=a-s.value.y;c.value={x:u,y:p},o.value={x:"".concat(u,"px"),y:"".concat(p,"px")}},h=()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",h)},y=e=>{p.value=!0,l.value=!1},b=e=>{u.value=!0},w=e=>{u.value=!1,p.value=!1,q(()=>{v()})};return fe("fullData",he(u)),me(()=>{v(!0),(()=>{const e=ne(e=>{if(u.value)return;const{height:t,width:a}=e[0].contentRect;if(i.value=t<=r.value[1],l.value){const e=a-(c.value.x+r.value[0]/2),l=t-(c.value.y+r.value[1]/2);e<0&&(c.value.x+=Number(e.toFixed(0)),o.value.x="".concat(c.value.x,"px")),l<0&&(c.value.y+=Number(l.toFixed(0)),o.value.y="".concat(c.value.y,"px"))}else v()},100);Te(document.body,e)})()}),(e,l)=>{const i=T;return J(),ve(Se,{name:"dialog-fade"},{default:ge(()=>[Q("div",{ref_key:"dialog",ref:a,class:ye("bt-dialog-v2 ".concat(e.customClass)),style:be({zIndex:e.zIndex,width:we(f)[0],height:we(f)[1],left:we(h).x,top:we(h).y})},[e.title?(J(),$("header",{key:0,class:"bt-dialog-header",onMousedown:g},[Q("span",null,_e(e.title),1),Q("div",$i,[we(p)||we(u)?Ee("",!0):(J(),$("span",{key:0,class:"icon",title:"最小化",onClick:X(y,["stop","prevent"])},[...l[2]||(l[2]=[Q("i",{class:"svgtofont-el-semi-select"},null,-1)])])),we(u)||we(p)?Ee("",!0):(J(),$("span",{key:1,class:"icon",title:"全屏",onClick:X(b,["stop","prevent"])},[...l[3]||(l[3]=[Q("i",{class:"svgtofont-icon-max-black"},null,-1)])])),we(u)||we(p)?(J(),$("span",{key:2,class:"icon",title:we(u)?"退出全屏":"恢复视图大小","data-state":we(u)?"fullscreen":"minimize",onClick:X(w,["stop","prevent"])},[...l[4]||(l[4]=[Q("i",{class:"svgtofont-icon-minmax-black"},null,-1)])],8,Ki)):Ee("",!0),"one"===we(m)?(J(),$("span",{key:3,class:"ico-close-one",title:"关闭视图",onClick:l[0]||(l[0]=X((...t)=>e.onClose&&e.onClose(...t),["stop","prevent"]))},[...l[5]||(l[5]=[Q("i",{class:"absolute w-3rem h-3rem top-0 left-0 origin-center close-popup-btn"},null,-1)])])):Ee("",!0),"two"===we(m)?(J(),$("span",{key:4,class:"icon",title:"关闭视图",onClick:l[1]||(l[1]=X((...t)=>e.onClose&&e.onClose(...t),["stop","prevent"]))},[...l[6]||(l[6]=[Q("i",{class:"!text-[2.4rem] svgtofont-el-close icon-group"},null,-1)])])):Ee("",!0)])],32)):Ee("",!0),W(Q("article",Yi,[(J(),ve(Le(t.component)))],512),[[U,!we(p)]]),e.footer?W((J(),$("footer",Xi,[K(i,{onClick:e.onCancel},{default:ge(()=>[re(_e(e.cancelText),1)]),_:1},8,["onClick"]),K(i,{type:"primary",onClick:e.onConfirm},{default:ge(()=>[re(_e(e.confirmText),1)]),_:1},8,["onClick"])],512)),[[U,!we(p)]]):Ee("",!0)],6)]),_:1})}}}),[["__scopeId","data-v-68933552"]]),Zi=(e,t)=>{e.unmount(),t&&document.body.removeChild(t)},en=async e=>{const t=document.createElement("div"),a=(e=>h(e)?e.map(e=>(k(e)&&(e="".concat(e,"rem")),D(e)&&e.match(/[A-z\%]+/)?e:"".concat(e,"rem"))):k(e)?["".concat(e,"rem")]:D(e)&&(e.includes("rem")||e.includes("px")||e.includes("vw"))?[e]:["".concat(e,"rem")])(e.area),{footer:l,cancelText:i,confirmText:n}=(e=>{let{confirmText:t,cancelText:a}=e;return((null==e?void 0:e.footer)||(null==e?void 0:e.confirm))&&(t=t||"确认",a=a||"取消"),{footer:(null==e?void 0:e.footer)||!1,confirmText:t,cancelText:a}})(e);if("function"==typeof e.component){const t=null==e?void 0:e.component();x(t)?e.component=(await e.component()).default:t.default?e.component=t.default:e.component=t}const s=Ce(Qi,{...e,area:a,footer:l,cancelText:i,confirmText:n,modelValue:!0,onConfirm:async()=>{if(null==e?void 0:e.onConfirm){const a=await(null==e?void 0:e.onConfirm(s));return a&&Zi(s,t),a}return Zi(s,t),!0},onCancel:()=>{e.onCancel&&e.onCancel(s),e.onClose&&e.onClose(s),e.onCancel||e.onClose||Zi(s,t)},onClose:()=>{e.onCancel&&e.onCancel(s),e.onClose&&e.onClose(s),e.onCancel||e.onClose||Zi(s,t)}});return(e=>{const{modal:t}=e;if(t){const e=document.createElement("div");e.classList.add("dialog-mask"),e.style.zIndex="999",document.body.appendChild(e)}})(e),((e,t)=>{R(e),I(e),document.body.appendChild(t),e.mount(t),e.directive("loading",xe.directive)})(s,t),s},tn=t(),an=new Map([["/etc","PS: 系统主要配置文件目录"],["/home","PS: 用户主目录"],["/tmp","PS: 公共的临时文件存储点"],["/root","PS: 系统管理员的主目录"],["/home","PS: 用户主目录"],["/usr","PS: 系统应用程序目录"],["/boot","PS: 系统启动核心目录"],["/lib","PS: 系统资源文件类库目录"],["/mnt","PS: 存放临时的映射文件系统"],["/www","PS: 宝塔面板程序目录"],["/bin","PS: 存放二进制可执行文件目录"],["/dev","PS: 存放设备文件目录"],["/www/wwwlogs","PS: 默认网站日志目录"],["/www/server","PS: 宝塔软件安装目录"],["/www/wwwlogs","PS: 网站日志目录"],["/www/Recycle_bin","PS: 回收站目录,勿动"],["/www/server/panel","PS: 宝塔主程序目录，勿动"],["/www/server/panel/plugin","PS: 宝塔插件安装目录"],["/www/server/panel/BTPanel","PS: 宝塔面板前端文件"],["/www/server/panel/BTPanel/static","PS: 宝塔面板前端静态文件"],["/www/server/panel/BTPanel/templates","PS: 宝塔面板前端模板文件"],[N("backup_path"),"PS: 默认备份目录"],[N("sites_path"),"PS: 默认建站目录"]]),ln=z([{name:"收藏夹",ename:"favorite",callback:()=>nn("favorite")},{name:"文件分享",ename:"fileShare",callback:()=>nn("fileShare")},{name:"文件同步",ename:"fileSync",callback:()=>nn("fileSync")},{name:"企业级防篡改",ename:"tamperProof",callback:()=>nn("tamperProof")},{name:"文件内容搜索",ename:"fileSearch",callback:()=>nn("fileSearch")}]),nn=e=>{const{openPlugin:t}=zs();switch(e){case"favorite":dn();break;case"fileShare":fn();break;case"fileSync":t("rsync",70);break;case"tamperProof":t("tamper_core",75);break;case"fileSearch":un()}},sn=["folder","folder-unempty","sql","c","cpp","cs","flv","css","js","htm","html","java","log","mht","php","url","xml","ai","bmp","cdr","gif","ico","jpeg","jpg","JPG","png","psd","webp","ape","avi","mkv","mov","mp3","mp4","mpeg","mpg","rm","rmvb","swf","wav","webm","wma","wmv","rtf","docx","fdf","potm","pptx","txt","xlsb","xlsx","7z","cab","iso","rar","zip","gz","war","bt","tgz","file","apk","bookfolder","folder-empty","fromchromefolder","documentfolder","fromphonefolder","mix","musicfolder","picturefolder","videofolder","sefolder","access","mdb","accdb","fla","doc","docm","dotx","dotm","dot","pdf","ppt","pptm","pot","xls","csv","xlsm","py","sh","json","lua","bt_split","bt_split_json"],on={sql:"sql",css:"css",js:"js",html:"html",java:"java",php:"php",xml:"xml",bmp:"bmp",cdr:"cdr",gif:"gif",ico:"ico",jpeg:"jpeg",jpg:"jpg",JPG:"jpg",png:"png",webp:"webp",avi:"avi",mkv:"mkv",mov:"mov",mp3:"mp4",mp4:"mp4",mpeg:"mpeg",mpg:"mpg",rm:"rm",rmvb:"rmvb",swf:"swf",webm:"webm",wma:"wma",wmv:"wmv","7z":"compress",rar:"compress",zip:"compress",gz:"compress",war:"compress",tgz:"compress","tar.gz":"compress",iso:"iso",apk:"apk",access:"access",doc:"doc",pdf:"pdf",ppt:"ppt",xls:"xls",bt_split:"split",bt_split_json:"join",javascript:"js",json:"json",log:"log",lua:"lua",py:"py",python:"py",recycle:"recycle",flac:"flac",sh:"sh"},rn={images:["jpg","jpeg","png","bmp","gif","tiff","ico","JPG","webp"],compress:["zip","rar","gz","war","tgz","7z","tar.gz","tar"],video:["mp4","mp3","mpeg","mpg","mov","avi","webm","mkv","mkv","mp3","rmvb","wma","wmv","flac","mov"],ont_text:["iso","xlsx","xls","doc","docx","tiff","exe","so","bz","dmg","apk","pptx","ppt","xlsb","pdf"]},cn=()=>{const{instance:e}=se(Ii());return e.value=o({title:"实时任务队列",area:51,component:()=>n(()=>import("./index238.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),modal:!1}),e.value},un=()=>o({title:"文件内容搜索",area:105,component:()=>n(()=>import("./index239.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),pn=()=>{const e=Ti(),{onConfirm:t}=e;return o({title:"创建软链接",area:50,btn:["确认","关闭"],component:()=>n(()=>import("./index240.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:t})},dn=()=>{const e=Ci(),{instance:t}=se(e);return t.value=o({title:"管理收藏夹",area:85,component:()=>n(()=>import("./index241.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),t.value},fn=()=>o({title:"分享列表",area:85,component:()=>n(()=>import("./index242.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),hn=e=>{const t=Pi(),{fileItem:a}=se(t),{onConfirm:l}=t;return a.value=e,o({title:"设置分享文件[ ".concat(e.fileName," ]"),area:45,btn:"生成外链",component:()=>n(()=>import("./index243.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:l})},mn=(e,t)=>{const a=Pi(),{compData:l}=se(a),{onConfirmDetail:i}=a;return l.value={...e,isShareList:t},o({title:"外链分享-[".concat(e.path?e.path:e.filename,"]"),btn:"关闭分享外链",confirmBtnType:"danger",area:55,component:()=>n(()=>import("./detail.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:i})},vn=e=>{const t=ta(),{compData:a}=se(t);return a.value={row:e},o({title:"【".concat(e.path,"】设置数据同步"),area:56,component:()=>n(()=>import("./index244.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{row:e}})},gn=()=>o({title:"文件操作记录",area:80,component:()=>n(()=>import("./index245.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{}}),yn=(e,t)=>{const{activeName:a,fileItem:l}=se(Gi());return a.value=t,l.value=e,o({title:"[ ".concat(e.fileName," ] - 文件属性"),area:58,component:()=>n(()=>import("./index246.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},bn=e=>{const t=Hi(),{fileItem:a}=se(t),{onConfirm:l}=t;return a.value=e,o({title:"压缩文件",area:48,btn:"压缩",component:()=>n(()=>import("./index247.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:l})},wn=e=>{const t=Vi(),{fileItem:a}=se(t),{onConfirm:l}=t;return a.value=e,o({title:"解压文件[ ".concat(e.fileName," ]"),area:48,btn:"解压",component:()=>n(()=>import("./index248.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:l})},_n=e=>{const t=Mi(),{fileItem:a}=se(t),{onConfirm:l}=t;return a.value=e,o({title:"【".concat(e.fileName,"】文件拆分"),area:55,btn:"确定",component:()=>n(()=>import("./index249.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:l})},En=e=>{const t=qi(),{fileItem:a}=se(t),{onConfirm:l}=t;return a.value=e,o({title:"合并【".concat(e.fileName,"】文件"),area:44,btn:"确定",component:()=>n(()=>import("./index250.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:l})},Ln=e=>{const t=ji(),{fileItem:a}=se(t),{onConfirm:l}=t;return a.value=e,o({title:"发送至邮箱",area:50,btn:"发送",component:()=>n(()=>import("./index251.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:l})},Sn=e=>{const t=ki(),{instance:a}=se(t);return a.value=o({title:"文件格式转换",area:78,component:()=>n(()=>import("./index252.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),a.value},Tn=e=>{const t=Si(),{fileItem:a,instance:l}=se(t);a.value=e,l.value=o({title:"压缩预览 --【".concat(e.fileName,"】"),area:74,component:()=>n(()=>import("./index253.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},Cn=()=>{const e=document.getElementById("layout-footer"),t=null==e?void 0:e.getBoundingClientRect(),a=(null==t?void 0:t.width)||0,l=document.getElementById("layout-main"),i=null==l?void 0:l.getBoundingClientRect(),n=(null==i?void 0:i.width)||0;return(a||n)-32},xn=async(e,t)=>{const{fileItem:a,instance:l}=se(pl()),{onCancel:i}=pl(),{fileItem:s,instance:o}=se(Ji()),r=Cn();a.value=e,s.value=e;const c=document.querySelectorAll(".el-overlay"),u=c[c.length-1],p=u?window.getComputedStyle(u).zIndex:null,d=en({title:"在线文本编辑器",area:r<1280?"100vw":143,customClass:"dialog-editor",zIndex:p?parseInt(p)+1:2012,component:()=>n(()=>import("./index254.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),fullscreen:!0,compData:{data:e,callback:t},onCancel:i});l.value=d,o.value=d},kn=()=>o({title:"文件历史版本",area:75,component:()=>n(()=>import("./index255.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),Dn=e=>{const t=Fi(),{fileItem:a}=se(t),{onConfirm:l}=t;return a.value=e,o({title:"导入数据库",area:40,btn:"确定",component:()=>n(()=>import("./index256.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:l})},Rn=e=>{const{fileItem:t}=se(Ni());return t.value=e,o({area:75,component:()=>n(()=>import("./index257.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},In=(e,t,a,l)=>{const i=Bi(),{compData:s}=se(i),{onConfirm:r}=i;return s.value={data:e,fileItem:t,name:a,path:l},o({title:"在线编辑",area:65,btn:"保存",component:()=>n(()=>import("./index258.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:r})},Nn=(e,t)=>{const a=Ri(),{compData:l}=se(a),{onConfirm:i}=a;return l.value={data:e,temp_data:t},o({title:"【".concat(e.path,"】配置"),area:40,btn:!0,component:()=>n(()=>import("./index259.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:i})},Fn=e=>{const{videoUrl:t}=se(Oi());return t.value=e.path,o({title:"视频播放",area:89,component:()=>n(()=>import("./index260.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},On=()=>{const{instance:e}=se(zi());return e.value=o({title:"宝塔终端",area:[80,50],component:()=>n(()=>import("./index261.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),e.value},An=(e,t,a)=>{const l=Hi(),{compData:i,instance:s}=se(l);return i.value={data:e,params:t,callback:a},s.value=o({title:!1,area:70,component:()=>n(()=>import("./index262.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),s.value},Pn=e=>{const t=Li(),{compData:a,instance:l}=se(t),{onConfirm:i}=t;return a.value=e,l.value=o({title:"".concat("upload"===e.type?"上传到"+e.zName:"从"+e.zName+"下载【勾选需要下载的文件】"),area:70,btn:["upload"===e.type?"上传":"下载","取消"],component:()=>n(()=>import("./index263.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:i}),l.value},jn=e=>{const t=Ei(),{fileList:a}=se(t),{setFileAuths:l}=t;return a.value=e.map(e=>e.fileName),o({title:"设置权限【批量】",area:45,component:()=>n(()=>import("./index264.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),btn:!0,onConfirm:l})},Mn=e=>{const{onConfirmCheckFile:t,onCancelCheckFile:a}=pl();return o({title:"温馨提示",area:[35,9],btn:["保存","不保存"],component:()=>n(()=>import("./index265.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),separationCancelClose:!0,onConfirm:a=>{t(),e()},onCancel:t=>{a(t),e()}})},zn=(e,t)=>{const a=pl(),{compDataClose:l}=se(a),{onConfirmClose:i,onCancelClose:s}=a;return l.value={type:e,item:t},o({title:"温馨提示",area:[35,9],btn:["保存","不保存"],component:()=>n(()=>import("./index266.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),separationCancelClose:!0,onConfirm:i,onCancel:s})},qn=({path:e,name:t},a)=>{const l=zs(),{fileTabList:i,fileTabActive:n,disabledCutTab:s,fileTabActiveData:o}=se(l);if(!e)return;if(s.value)return;let r=e,c=e;"/"===r?r="根目录":("/"===c[c.length-1]&&(c=c.slice(0,c.length-1)),r=e.split("/").pop()),t&&(r=t);const u={id:_(),label:r,type:o.value.type,loading:!1,total:0,list:[],param:{p:1,showRow:500,path:c}};s.value=!0,i.value.push(u),n.value=i.value.length-1,q(()=>{l.updateTabActiveData(),l.refreshFilesList(),a&&a(u)})},Bn=e=>RegExp(/[\*\|\:\\\"\/\<\>\?]+/).test(e),Vn=e=>{const{fileTabActiveData:t}=se(zs());return Hn(t.value.param.path+"/"+e)},Hn=e=>e.replace("//","/"),Gn=async e=>{const t=e.replace(/\/+$/,"")||"/",a=Wn(t);if("/.Recycle_bin"===e||"/www/.Recycle_bin"===e)return tn.error("此为回收站目录，请在右上角按【回收站】按钮打开"),!1;const l=zs(),{fileTabActiveData:i,searchVal:n}=se(l);return i.value.param.p=1,l.updateTabActiveData({param:{path:a,search:""}}),l.refreshFilesList(),a},Wn=e=>"/"===(e=(e=e.replace(/\\/g,"/")).replace("//","/"))?e:e=e.replace(/\/+$/g,""),Un=e=>"dir"===e?"文件夹":"文件",Jn=(e,t)=>{e.isReName=!0,t&&t(e)},$n=async(e,t)=>{const l=zs(),{recyclingBinStatus:i}=se(l),{watchDeleteFileData:n}=l;if(null===i.value){const{data:e}=await It({type:"all",search:"",time_search:JSON.stringify([])});i.value=e.status}const s=i.value?"删除【".concat(e.fileName,"】").concat("file"===e.type?"文件":"文件夹","后，该文件将迁移至文件回收站，如需彻底删除请前往文件回收站，是否继续操作？"):"风险操作，当前未开启文件回收站，删除的【".concat(e.fileName,"】").concat("file"===e.type?"文件":"文件夹","将彻底删除，无法恢复，是否继续操作？");await c({title:"删除".concat(Un(e.type),"【").concat(e.fileName,"】"),isHtml:!0,type:i.value?"default":"calc",content:'<div class="break-all">'+s+"<div>"+(e.isShare?'<span class="text-danger">当前文件已开启【外链分享】，请谨慎操作！</span>':"")}),await a({loading:"正在删除，请稍后...",request:Pt({path:Vn(e.fileName),type:e.type}),message:!0,success:a=>{a.status&&n(e),t&&t()}})},Kn=async(e,t)=>{const a=await jt({path:Vn(e.fileName)});a.status?(tn.success(a.msg),t&&t()):tn.error(a.msg),ks()},Yn=z(null),Xn=()=>{const{fileTabActiveData:e}=se(zs());"/"!==e.value.param.path?Yn.value=o({title:"上传文件到【".concat(e.value.param.path,"】 --支持断点续传"),area:"72",component:()=>n(()=>import("./index115.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{path:e.value.param.path},onCancel:()=>{Yn.value=null}}):tn.error("不能直接上传文件到系统根目录!")},Qn=async(e,t)=>{const a=await Ke({path:Vn(e.fileName)});a.status?(tn.success(a.msg),t&&t()):tn.error(a.msg),ks()},Zn=async(e,t)=>{const a=zs(),l=await Mt({path:Vn(e.fileName),type:t});l.status?tn.success(l.msg):tn.error(l.msg),a.refreshFilesList()},es=async e=>{const t=zs(),a=await zt({path:Vn(e.fileName)});a.status?tn.success(a.msg):tn.error(a.msg),t.refreshFilesList()},ts=()=>{const{copyFilesData:e}=se(zs());e.value={files:[],type:""}},as=(e,t)=>{const a=Di(),{compData:l}=se(a);l.value={fileData:e,type:t},o({title:"重复文件提示",area:40,btn:["确认","取消"],component:()=>n(()=>import("./index267.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},ls=e=>{const{activeName:t,compData:a}=se(Wi());return t.value="database"===e?"db":"all",a.value={type:e},o({title:"回收站",area:110,component:()=>n(()=>import("./index268.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},is=(e,t)=>{if("dir"===t)return"folder";const a=e.split("."),l=a[a.length-1];for(let i=0;i<sn.length;i++)if(sn[i]==l)return sn[i];return"file"},ns=e=>{let t="text";return e&&(e=e.toLowerCase()),Object.entries(rn).forEach(([a,l])=>{l.forEach(l=>{l==e&&(t=a)})}),t},ss=async()=>{const e=zs(),{fileTabActiveData:t,copyFilesData:a}=se(e);let l=null;const i=a.value.files[0],n=Vn(i.fileName);if("dir"===i.type&&t.value.param.path.indexOf(n+"/")>-1)return tn.error("错误的复制逻辑，从".concat(n,"粘贴到").concat(t.value.param.path,"有包含关系，存在无限循环复制风险!")),!1;const s={path:t.value.param.path};1===a.value.files.length&&(s.name=i.fileName);const{data:o}=await et(s);if(o.length>0)return as(o,a.value.files.length>1?"batch":"single"),!1;rs();try{if(l=tn.load("正在粘贴，请稍候..."),a.value.files.length>1){const e=await lt({type:"copy"===a.value.type?1:2,path:t.value.param.path});tn.request(e),a.value.files=[],ts()}else{const e={sfile:i.path,dfile:n},t="copy"===a.value.type?await tt(e):await at(e);t.status?("copy"===a.value.type?tn.success(t.msg):tn.success("剪切成功"),a.value.files=[],ts()):tn.error(t.msg)}}finally{l&&l.close(),clearTimeout(os),e.refreshFilesList()}};let os=null;const rs=()=>{const{getRealTask:e}=zs();os=setTimeout(()=>{e()},1500)},cs=async e=>{await Dl(),await ps(e),await Ne({name:e.fileName,path:e.path}),await Rl()},us=(e,t)=>{const{copyFilesData:a}=se(zs());e.path=Vn(e.fileName),a.value.files=[e],a.value.type=t,tn.success("".concat("copy"===t?"复制":"剪切","成功，请在目标目录点击右上角【粘贴】按钮!"))},ps=async(e,t)=>{var a,l,i;const{unbindKeydown:n}=zs();n();const s={path:e.path,title:e.path.split("/").pop(),size:e.size,type:"editor"};if(null==(a=null==e?void 0:e.path)?void 0:a.includes("/dev/pts"))return void tn.error("系统目录文件不支持编辑");if("text"!==ns(null==(l=s.fileName)?void 0:l.split(".").pop()))return void tn.error("暂不支持该类型文件编辑");const o=document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black");"minimize"!==(null==(i=null==o?void 0:o.closest(".icon"))?void 0:i.dataset.state)?vl.value?ti(s):(await Dl(),xn(s,t)):kl(s)},ds=e=>{const{createItem:t}=se(zs()),{findCurrentImgIndex:a}=Ui();if(t.value=[],e.isNew||e.isReName)return!1;if("dir"===e.type)Gn(e.path);else switch(ns(e.ext)){case"images":a(window.location.protocol+"//"+window.location.host+"/download?filename="+e.path);break;case"video":Fn(e);break;case"compress":ws(e);break;default:ps(e)}},fs=(e,t)=>{window.open("/download?filename="+encodeURIComponent(e.path),"_self","noopener,noreferrer"),t&&t()},hs=e=>{_n(e)},ms=e=>{En(e)},vs=e=>{hn(e)},gs=e=>{mn(e)},ys=async e=>{const{authType:t}=se(zs());"ltd"!==t.value?Yt({disablePro:!0,sourceId:70,plugin:!1}):vn(e)},bs=e=>{bn(e)},ws=e=>{wn(e)},_s=e=>{const t=ki(),{fileItem:a}=se(t);a.value=e,Sn()},Es=e=>{Ln(e)},Ls=(e,t)=>{t||(t="routine"),yn(e,t)},Ss=()=>{Xn()},Ts=async(e,t)=>{const{fileTabActiveData:a,copyFilesData:l}=se(zs()),i={data:JSON.stringify(e.map(e=>e.fileName)),type:0,path:a.value.param.path};switch(t){case"copy":i.type=1;break;case"cut":i.type=2}const n=await Ae(i);n.status?(tn.success("".concat("copy"===t?"复制":"剪切","成功，请在目标目录点击右上角【粘贴】按钮!")),l.value.files=e,l.value.type=t):tn.error(n.msg)},Cs=async e=>{const t=zs(),{fileTabActiveData:l,recyclingBinStatus:i}=se(zs()),n=i.value?"删除后，文件将迁移至文件回收站，如需彻底删除请前往文件回收站，是否继续操作？":"风险操作，当前未开启文件回收站，删除后将彻底删除，无法恢复，是否继续操作？";await c({title:"批量删除文件",type:i.value?"default":"calc",content:n}),await a({loading:"正在删除，请稍后...",request:Ae({data:JSON.stringify(e.map(e=>e.fileName)),type:4,path:l.value.param.path}),message:!0,success:e=>{e.status&&t.refreshFilesList()}})},xs=({path:e,name:t},a)=>{const l=zs(),{fileTabList:i,disabledCutTab:n,fileTabActive:s}=se(l);if(!e)return;if(n.value)return;let o=e,r=e;"/"===o?o="根目录":("/"===r[r.length-1]&&(r=r.slice(0,r.length-1)),o=e.split("/").pop()),t&&(o=t);const c={id:_(),label:o,type:"list",loading:!1,total:0,list:[],param:{p:1,showRow:500,path:r}};n.value=!0,i.value.push(c),s.value=i.value.length-1,q(()=>{l.updateTabActiveData(),l.refreshFilesList(),a&&a(c)})},ks=async()=>{const{favoriteList:e}=se(zs());await a({request:Ot(),data:[Array,e]})},Ds=async()=>{const{diskList:e}=se(zs()),{data:t}=await At();e.value=t},Rs=e=>{const t=zs(),{fileTabList:a,fileTabActive:l}=se(t);let i=e;"/"===i[i.length-1]&&"/"!==i&&(i=i.slice(0,i.length-1));const n=a.value.findIndex(e=>e.param.path===i);-1!==n?(l.value=n,t.updateTabActiveData(),t.refreshFilesList()):xs({path:e})},Is=e=>({icon:"icon-".concat(e),ext:"dir"==e?" folder":"",fileName:"新建".concat("dir"==e?"文件夹":"文本"),time:"",ps:"",size:0,type:e,user:"root",rootLevel:"0",isLink:"",isShare:!1,isTop:!1,isFav:!1,isOsPs:!1,isPsEdit:!1,isSearch:!1,isReName:!0,isNew:!0,isSync:"",isLock:!1,path:"",tamperProofId:0,isFile:"dir"!==e}),Ns=(e,t,a="0;0",l,i=[])=>{const n=((e,t)=>{let a="",l=an.get("".concat("/"===t?"/":"".concat(t,"/")).concat(e));switch(e){case".htaccess":a="PS: Apache用户配置文件(伪静态)";break;case"swap":a="PS: 宝塔默认设置的SWAP交换分区文件"}return e.includes(".upload.tmp")&&(a="PS: 宝塔文件上传临时文件,重新上传从断点续传,可删除"),e.includes(".user.ini")&&(a="PS: PHP用户配置文件(防跨站)!"),l&&(a=l),l||a})(t.nm,l),s="1"===a.split(";")[0],o=a.split(";")[1],r=is(t.nm,e),c=((e,t)=>"".concat(e,"/").concat(t).replace("//","/"))(l,t.nm);return{icon:ns(r),ext:r,fileName:t.nm,time:u(t.mt),ps:n||t.rmk||"",size:t.sz,type:e,user:t.user,rootLevel:t.acc,isLink:t.lnk,isShare:0!=Number(t.durl)?t.durl:0,isTop:!!t.top,isFav:!!Number(t.fav),isOsPs:!L(n)&&""!==n,isPsEdit:!1,isSearch:!0,isReName:!1,isNew:!1,isSync:Fs(i,c),isLock:s,path:c,tamperProofId:Number(o),isFile:"dir"!==e}},Fs=(e,t)=>{if(L(e)||0==e.length)return"";const a=e.find(e=>e.path===t);return a?a.type:""},Os=e=>e.map(e=>({val:e.val,label:e.val})),As=(e,t)=>{o({title:(null==e?void 0:e.title)||"批量操作结果",area:t||42,component:()=>n(()=>import("./index118.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:e})},Ps=(e,t)=>{const a=window.innerWidth,l=window.innerHeight,i=t.offsetWidth,n=t.offsetHeight,s=e.clientX,o=e.clientY;let r=s;s+i>a&&(r=s-i);let c=o-(l-o<n?n:0);c<0&&(c=(l-n)/2),t.style.top=c+"px",t.style.left=r+"px"},js=Object.freeze(Object.defineProperty({__proto__:null,BatchSetAuth:jn,CreateTerminalDialog:On,FileCompressPreview:Tn,FileCompressView:bn,FileDecompressionView:wn,FileFormatConversionView:Sn,FileImageView:Rn,FileInputDatabaseView:Dn,FileMergeView:En,FileOperationRecordView:gn,FileRecyclingBinView:ls,FileSearchView:un,FileSetShareView:hn,FileSplitView:_n,FileStatusDetailView:yn,FilesAceEditor:xn,FilesCompressCoverView:An,FilesHistoryRecordView:kn,ManageFavoritesView:dn,SendEmailView:Ln,ShareDetailView:mn,ShareListView:fn,addFavorites:Kn,addTab:xs,addTabEvent:qn,batchDelFile:Cs,calculateContextMenuPosition:Ps,calculatePopoverPosition:(e,t)=>{const a=window.innerWidth,l=window.innerHeight,i=t.offsetWidth,n=t.offsetHeight,s=e.clientX,o=e.clientY;let r=s;s+i>a&&(r=s-i);let c=o;return o+n>l&&(c=o-n),c<0&&(c=0),{top:c,left:r,el:t}},cloudStorageDialog:Pn,copyFiles:us,createCompress:bs,createCopy:es,createFile:Is,deCompressFile:ws,defaultPS:an,delFavorites:Qn,delFileEvent:$n,determineFileType:ns,downFile:fs,editFilesDialog:In,editorCloseDialog:zn,editorLeaveDialog:Mn,exts:sn,fileBatchSet:Ts,fileMainType:rn,fileReName:Jn,fileRsyncView:vn,fileTaskDialog:cn,fileType:on,fileUploadDialog:Yn,formatFile:_s,getDataType:Un,getDiskList:Ds,getExtIcon:is,getFavoriteList:ks,getViewportWidth:Cn,getWholePath:Vn,isSyncType:Fs,matchUnqualifiedString:Bn,openAceEditor:ps,openDetail:Ls,openEditorView:cs,openFile:ds,openFileAsync:ys,openFileMerge:ms,openFileShare:gs,openFileSplit:hs,openFilesUpload:Xn,openResultDialog:As,pasteFiles:ss,pathJumpEvent:Gn,path_check:Wn,recomList:ln,reconstructionFile:Ns,removeCopyOrCutData:ts,renderHistoryList:Os,repetFileView:as,sendEmail:Es,setColumn:(e,t)=>{},setFileListActive:Rs,setFileShare:vs,setToping:Zn,symbolicLinkView:pn,temperDialog:Nn,toRepeatPath:Hn,uploadFiles:Ss,videoPlayDialog:Fn},Symbol.toStringTag,{value:"Module"})),Ms=Z("FILES-URL-DOWN-LOAD-STORE",()=>{const e=zs(),{fileTabActiveData:t}=se(e),{getRealTask:l}=e,i=ae({url:"",path:t.value.param.path,filename:""}),n=z(!1),s=z(),o=ae({url:[{validator:(e,t,a)=>{""===t?a(new Error("请输入正确的URL地址!")):F(t)?a():a(new Error("请输入正确的URL地址!"))},trigger:["blur"]}],filename:[{validator:(e,t,a)=>{""===t?a(new Error("请输入新文件名!")):Bn(t)?a(new Error('文件名不能包含 /\\:*?"<>|符号!')):a()},trigger:["blur","change"]}]});return{quickForm:i,formDisabled:n,quickFormRef:s,quickRules:o,onConfirm:()=>{const e={...i};s.value.validate(async t=>{t&&await a({loading:n,request:qt(e),message:!0,success:e=>{e.status&&l()}})})},onPathChange:()=>{Jt({type:"dir",path:i.path,change:e=>{i.path=e}})},setName:e=>{const t=e.split("/");i.filename=t[t.length-1]},init:()=>{n.value=!1,Object.assign(i,{url:"",path:t.value.param.path,filename:""})}}}),zs=Z("FILES-STORE",()=>{const t=i(),{mainHeight:l,mainWidth:r,payment:u}=t,{authType:p}=te(u.value),d={id:"label-1",label:"wwwroot",type:"list",loading:!1,total:0,param:{p:1,showRow:500,path:"/www/wwwroot",sort:"",reverse:"True"}},h=z(0),v=z(0),g=z({...d}),y=z([{...d}]),b=z(0),w=z(!0),_=z(),S=ae({index:0,id:""}),T=z(0),C=z(0),x=z(!1),k=z(!1),D=z([]),R=z(0),I=z(g.value.param.path),F=z(),B=z(!0),V=z([]),H=z(0),G=ae({showMore:!1,showUl:!1,list:[]}),W=z(""),U=z(),J=z(!1),$=z([]),K=z([]),Y=z({reqEnd:!1,isSetup:!1,isBuy:!1}),X=z(!1),Q=z(!1),Z=z({isLock:!0,rootLevel:!0,size:!0,time:!0,ps:!0}),ee=z(""),le=z([]),ie=z(!1),ne=z([]),oe=de(()=>ne.value.length||0),re=z([]),ce=de(()=>re.value.length||0),ue=z([]),pe=z([]),fe=z([]),he=z({status:!1,tip:""}),me=z({}),ve=z({files:[],type:""}),ge=z({}),ye=z(""),be=z(!1),_e=(e={})=>{const t=y.value[v.value];e.param&&(e.param={...t.param,...e.param});const a={...t,...e};y.value.splice(v.value,1,a),Object.assign(g.value,a),W.value=g.value.param.search||"",J.value="True"===g.value.param.all,qe.value=!1,I.value!==a.param.path&&(I.value=g.value.param.path,Ce(I.value))},Ee=()=>{const e=r.value-36;D.value=[],R.value=0,q(()=>{document.querySelectorAll(".tab-item").forEach(e=>{const t=e.getBoundingClientRect();D.value.push(t.width),R.value+=t.width});const t=R.value-e;C.value=t>0?t:0,Le(e)})},Le=e=>{const t=D.value.reduce((e,t,a)=>a<=v.value?e+t:e,0);if(t<=e)T.value=-1;else{if(v.value===y.value.length-1)return void(T.value=C.value);let a=t-e+20;k.value=!0,T.value=a}},Se=async()=>{const e=await m({status:-3}),t=document.querySelector(".realTaskDialog");e.data.length>0&&!t&&cn()},Te=ke(()=>{s.error("不能直接上传文件到系统根目录!")},2e3),Ce=e=>{if(!e)return;const t=e.split("/");if("/"===e)return V.value=[{name:"根目录",path:"/",show:!0,list:[]}];V.value=t.map((e,a)=>({name:""===e?"根目录":e,path:""===e?"/":t.slice(0,a+1).join("/"),show:!0,showFold:!1,loading:!1,list:[]})),xe(),q(()=>{G.list=[],G.showMore=!1;const e=document.querySelectorAll(".path-group-item"),t=document.querySelector(".path-list-group"),a=Array.from(e).reduce((e,t)=>e+t.clientWidth+4,0);setTimeout(()=>{if(a>((null==t?void 0:t.clientWidth)||400)){let a=20;for(let l=e.length-1;l>=0;l--)a+=e[l].clientWidth,a>((null==t?void 0:t.clientWidth)||0)&&(V.value[l].show=!1,G.showMore=!0,G.list=V.value.slice(l+1));G.showMore&&(V.value[0].show=!1,G.list=V.value.slice(1))}},100)})},xe=()=>{G.showUl=!1,V.value[H.value]&&(V.value=V.value.map(e=>({...e,showFold:!1}))),window.removeEventListener("click",xe)},De=z([{name:"文件名",key:"name",show:!0,disable:!0},{name:"防篡改",key:"isLock",show:!0,disable:!1,icon:!0},{name:"权限",key:"rootLevel",show:!0,disable:!1},{name:"大小",key:"size",show:!0,disable:!1},{name:"修改时间",key:"time",show:!0,disable:!1},{name:"备注",key:"ps",show:!0,disable:!1},{name:"操作",key:"action",show:!0,disable:!0}]),Ie=[{type:"copy",icon:"copy-file-icon",label:"复制",handler:()=>Ts($.value,"copy")},{type:"cut",icon:"cut-file-icon",label:"剪切",hide:1370,handler:()=>Ts($.value,"cut")},{type:"compress",icon:"compress-file-icon",label:"压缩",hide:1446,handler:()=>bs($.value)},{type:"auth",icon:"authority-file-icon",label:"权限",hide:1610,handler:()=>jn($.value)},{type:"delete",icon:"delete-file-icon",label:"删除",hide:1620,handler:()=>Cs($.value)}],Ne=()=>{const{onConfirm:e}=Ms();o({title:"URL链接下载",area:50,btn:!0,component:()=>n(()=>import("./index269.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),onConfirm:e})},Fe=async(e,t)=>{if("ltd"===p.value)try{const{data:t}=await E({sName:e});if(!t.setup)return void Kt({name:t.name,type:"i",pluginInfo:t});Ut({name:e})}catch(a){}else Yt({sourceId:t})},Oe=()=>{q(()=>{We(),$e()})},Ae=z(null),Pe=z(null),je=z(null),Me=z(!1),ze=z(""),qe=z(!1),Be=z(!1),Ve=z([]),He=e=>{if("el-input__inner"===e.target.className||"TEXTAREA"===e.target.tagName)return;const t="list"===g.value.type,a=document.querySelector(".el-dialog__body")||document.querySelector(".el-dialog__container");if(a&&"none"!==a.style.display)return;let l=[];const{selectList:i}=se(Ui());if(Ve.value.forEach(e=>{i.value.includes(e.path)&&l.push(e)}),e.ctrlKey&&65===e.keyCode&&(e.preventDefault(),je.value.handleCheckAll(!0)),e.ctrlKey&&88===e.keyCode)switch(l.length){case 0:return;case 1:us(l[0],"cut");break;default:Ts(l,"cut")}if(e.ctrlKey&&67===e.keyCode)switch(l.length){case 0:return;case 1:us(l[0],"copy");break;default:Ts(l,"copy")}if(e.ctrlKey&&86===e.keyCode){if(0===ve.value.files.length)return;ss()}if(113===e.keyCode)switch(l.length){case 0:return;case 1:Jn(l[0],t?Ae.value.editRow:Pe.value.editFile)}if(13===e.keyCode)switch(l.length){case 0:return;case 1:if(l[0].isNew||l[0].isReName||l[0].isPs)return;ds(l[0])}if(46===e.keyCode){if(0===l.length)return;if(l[0].isNew||l[0].isReName)return;Cs(l)}},Ge=()=>{document.addEventListener("keydown",He)},We=()=>{document.removeEventListener("keydown",He)},Ue=e=>{""!==e&&1!=ie.value&&(le.value=[Is(e)],Je())},Je=()=>{Ve.value=[...le.value,...ne.value,...re.value].map((e,t)=>(e.vid=t,e)),Ui().watchDataList(Ve.value)},$e=()=>{Be.value=!1,_e({param:{search:""}}),Ge();const e=localStorage.getItem("copyOrCutData");e&&(ve.value=JSON.parse(e))},Ke=async()=>{try{const e=g.value.param.path,{data:t}=await Gt(e);L(t.msg)||-1!=t.msg.indexOf("企业版")||s.error(t.msg);let a=t.list;for(let l in a)a["".concat(e,"/").concat(l)]=a[l];ze.value=f(t.total_asize),setTimeout(function(){ne.value=ne.value.map(e=>(e.diskInfo=a[e.path],e.isDirComputed=!1,e)),Je()},300)}finally{Be.value=!1,qe.value=!0}},Ye=()=>{Xe(),A("Path",g.value.param.path)},Xe=async()=>{ne.value=[],re.value=[],Ve.value=[];try{g.value.loading=!0;const e=(()=>{const e=JSON.parse(JSON.stringify(g.value.param));return"time"==e.sort&&(e.sort="mtime"),"fileName"==e.sort&&(e.sort="name"),void 0!==e.search&&""===e.search&&delete e.search,void 0!==e.all&&"True"!==e.all&&delete e.all,e})(),{status:t,msg:a,data:l}=await Vt(e);if("True"==e.all&&l.is_max&&s.error("当前搜索结果已超出最大值3000条！"),!t&&void 0!==a){s.error(a);const e=g.value.param.path.split("/");e.pop();const t=e.join("/").replace(/\/+$/,"")||"/";if("/"===t)return;return _e({param:{path:t}}),void Xe()}const{path:i,dir:n,files:o,store:r,bt_sync:c,page:u,tamper_data:p,search_history:d,file_recycle:f}=l;let{dirs:h,files:m,msg:v,tip:y,rules:b}=p;const w=[],_="ok"===y;if(he.value.status=_,he.value.tip=_?"":y,fe.value=Os(d),ne.value=[],n.forEach((e,t)=>{ne.value.push(Ns("dir",e,v?"":h[t],i,c))}),re.value=[],o.forEach((e,t)=>{const a=Ns("file",e,v?"":m[t],i);0===t&&_&&(me.value=b.length>0?b.find(e=>e.pid===a.tamperProofId):void 0),"images"===a.icon&&w.push(a.fileName),re.value.push(a)}),w.length>0){const{data:e}=await Wt({return_type:"base64",height:45,width:45,files:w,path:i});ue.value=e?Object.entries(e.data):[],Ui().setSmallImage()}else ue.value=[];pe.value=r,Q.value=f;let E=i;E="/"===E?"根目录":i.split("/").pop(),_e({label:E,total:P(l.page),type:g.value.type||"list",param:{path:l.path}}),X.value=!1,await Je(),Qe()}catch(t){e(t)}finally{g.value.loading=!1}},Qe=()=>{q(()=>{const e=document.querySelector(".custom-tbody");e&&(be.value=36*Ve.value.length>e.clientHeight)})};return{isHaveScoller:be,authType:p,mainHeight:l,mainWidth:r,fileTabActive:v,fileTabActiveData:g,fileTabList:y,isAddTabs:w,closeTabs:S,favoriteList:pe,diskList:K,dataList:Ve,deleteFileData:ge,imgPathItem:ye,recyclingBinStatus:Q,copyFilesData:ve,navBtnHeight:h,imageList:ue,disabledCutTab:X,dirPath:I,pathInputRef:F,pathInputMode:B,pathListGroup:V,more:G,searchVal:W,searchRef:U,isChildren:J,contextRef:_,scrollWidth:T,showLeftArrow:x,showRightArrow:k,searchHistory:fe,updateTabActiveData:_e,getFilesList:Xe,triggerEvent:e=>{e?we(U).showPopover():we(U).hidePopover()},searchEvent:async e=>{W.value=e,_e({param:{search:W.value,all:J.value?"True":"False"}}),await Xe()},getRealTask:Se,handleDragOff:e=>{var t,a;if(e.preventDefault(),"/"!==g.value.param.path){if(null==(t=null==e?void 0:e.dataTransfer)?void 0:t.items){Array.from(null==(a=null==e?void 0:e.dataTransfer)?void 0:a.items).some(e=>"file"===e.kind)&&(Yn.value||Xn())}}else Te()},cutPathInputMode:async e=>{if(B.value=e,e){if(g.value.param.path===I.value)return;const e=I.value;if(e.length>0&&!e.includes("/"))return s.error("路径输入不符合规则"),void(I.value=g.value.param.path);if(0===e.length)return void(I.value=g.value.param.path);if((await Bt({path:I.value})).data.exists){const t=await Gn(e);I.value=t||e}else{try{await c({width:50,title:"路径不存在",content:"【".concat(e,"】路径不存在,是否创建并跳转?")})}catch(t){if("cancel"===t)return void(I.value=g.value.param.path)}await a({loading:"正在新建文件，请稍后...",request:Re({path:e,type:"dir"}),message:!0,success:t=>{t.status&&Gn(e)}})}}else O(F.value)},cutDirPath:(e,t)=>{""===e&&(I.value="/"),F.value.blur(),le.value=[],Je(),_e({param:{search:"",p:1,all:"False"}}),t||Gn(e)},getPathListGroup:Ce,getCurrentFoldDirList:async(e,t)=>{try{xe(),V.value[t].showFold=!0,V.value[t].loading=!0;const{data:{dir:a}}=await Vt({path:e,p:1,showRow:2e3});V.value[t].loading=!1,V.value[t].list=a.map(t=>({name:t.nm,path:"".concat(e,"/").concat(t.nm).replace(/\/+/g,"/")})),H.value=t,window.addEventListener("click",xe)}catch(a){}},goBack:()=>{if(X.value)return;if(X.value=!0,"/"==g.value.param.path){if(""===g.value.param.search)return X.value=!1,s.error("当前目录为根目录");_e({param:{search:"",all:"False"}}),Gn("/")}let e=g.value.param.path.split("/");e.pop(),_e({param:{search:"",all:"False"}});let t=e.join("/");Gn(t)},closeOther:()=>{y.value=y.value.filter((e,t)=>t===S.index),S.index!==v.value&&Ye(),v.value=0,_e(),Ee()},closeRight:()=>{y.value.splice(S.index+1);let e=y.value[S.index].param.path;v.value=S.index,g.value.param.path!==e&&(_e(),Ye()),_e(),Ee()},watchTabsWidth:()=>{q(()=>{b.value=(()=>{const e=document.querySelector(".tabs");if(e)return e.getBoundingClientRect().width;return 0})();const e=document.querySelectorAll(".tab-item");let t=0;e.forEach(e=>{const a=e.getBoundingClientRect();t+=a.width}),w.value=b.value-t>160})},handleRightClick:(e,t,a)=>{Object.assign(S,{id:t.id,index:a}),_.value.show(e)},watchWindowResize:Ee,watchScrollWidth:e=>{let t=e;x.value=0!=t&&-1!=t,-1===t&&(T.value=0,t=0),k.value=C.value>0&&t!=C.value;const a=document.querySelector(".tabs");a&&a.scrollTo({top:0,left:T.value,behavior:"smooth"})},cutTab:e=>{X.value&&v.value!==e||(v.value=e,X.value=!0,le.value=[],_e(),Ye(),Ee())},scrollLeft:()=>{const e=r.value-36;T.value<=e/2?T.value=0:T.value-=e/2},scrollRight:()=>{const e=r.value-36;if(C.value<=e/2)return void(T.value=C.value);let t=T.value+=e/2;t>C.value&&(t=C.value),T.value=t},closeTab:(e,t)=>{const a=y.value.length;if(1===a)return s.error("至少保留一个标签页");const l=y.value.findIndex(e=>e.id===t);y.value.splice(l,1),v.value>l?(v.value=v.value-1,_e()):v.value===l&&(X.value=!0,v.value=a-l===1?l-1:l,_e(),Ye()),Ee()},fileBatchNum:$,createListType:ee,columnShow:Z,cloudList:[{name:"百度云存储",icon:"baidu-cloud",command:"bos"},{name:"阿里云存储",icon:"alioss-cloud",command:"alioss"},{name:"腾讯云存储",icon:"tencent-cloud",command:"txcos"},{name:"华为云存储",icon:"huawei-cloud",command:"obs"}],actionsBtn:Ie,fileBatchEvent:e=>{switch(e){case"copy":Ts($.value,"copy");break;case"cut":Ts($.value,"cut");break;case"compress":bs($.value);break;case"auth":jn($.value);break;case"del":Cs($.value)}},handleChangeMenu:e=>{g.value.type!==e&&(_e({type:e}),g.value.type=e,Oe()),$.value=[];const{selectList:t}=se(Ui());t.value=[],je.value&&(je.value.selectList=[])},handleCommand:async e=>{var t;switch(e){case"upload":Xn();break;case"openUrlLinkDown":Ne();break;case"bos":case"alioss":case"txcos":case"obs":const{data:a}=await Ht(),l=null==(t=null==a?void 0:a.down)?void 0:t.find(t=>t.name===e);l&&(null==l?void 0:l.is_conf)?Pn({type:"down",zName:l.title,pname:e}):Fe(e,73)}},openPlugin:Fe,collectCommand:e=>{if("manger"!==e)if(g.value.label=e.name,"dir"===e.type)Gn(e.path);else{const t={...e,fileName:e.name,ext:e.ext||e.name.split(".").pop()};ds(t)}else dn()},createCommand:e=>{var t;switch(null==(t=document.querySelector(".vue-recycle-scroller"))||t.scroll({top:0}),e){case"file":case"dir":ee.value=e,Ue(e);break;case"link":pn()}},globalTamperStatus:he,createItem:le,fileList:re,fileLength:ce,dirList:ne,dirLength:oe,size:ze,sizeShow:qe,sizeLoad:Be,table:Ae,isNoCreteItem:ie,iconView:Pe,listView:je,btnPopover:Me,diskAnalysis:Y,watchDeleteFileData:e=>{if(0===Object.keys(e).length)return;const{type:t,path:a,isNew:l}=e;l&&(le.value=[]),"dir"===t?ne.value=ne.value.filter(e=>e.path!==a):re.value=re.value.filter(e=>e.path!==a),ge.value={},g.value.total=Ve.value.length,Je()},watchCreateListType:Ue,sizeComputed:async()=>{Ui();let e=g.value.param.path;if("/"!==e)try{if(Be.value=!0,Y.value.reqEnd&&Y.value.isSetup&&"ltd"===p.value)ne.value=ne.value.map(e=>(e.isDirComputed=!0,e)),Je(),Ke();else{const{data:t}=await Lt({path:e});ze.value=t,qe.value=!0,Be.value=!1}}finally{0===ze.value.length&&qe.value&&(Be.value=!1)}},checkRoot:async()=>{"/"===g.value.param.path?Me.value=!0:Me.value=!1},initMain:$e,bindKeydown:Ge,unbindKeydown:We,initNavBtn:async()=>{"true"===localStorage.getItem("MYSQL-RECYCLE")&&(ls("database"),localStorage.removeItem("MYSQL-RECYCLE")),De.value.forEach(e=>{e.show=Z.value[e.key]}),await Ds(),ks()},refreshList:async()=>{X.value||(X.value=!0,await Xe())},refreshFilesList:Ye,init:()=>{t.getGlobalInfo(),Se(),(()=>{try{q(async()=>{const{data:e}=await E({sName:"disk_analysis"});Object.assign(Y.value,{reqEnd:!0,isSetup:e.status&&e.setup&&e.endtime>-1,isBuy:e.endtime>-1})})}catch(e){}})();N("searchFile")&&(un(),j("searchFile")),Ce(I.value)},$reset:()=>{ne.value=[],re.value=[],ue.value=[],pe.value=[],fe.value=[],x.value=!1,k.value=!1,g.value.param.search="",M(["/files?action=GetDirNew","/system?action=GetDiskInfo","/task?action=get_task_lists","/plugin?action=get_soft_find","/files?action=get_files_store"])},keydown:He}},{persist:[{storage:localStorage,paths:["fileTabList"]}]}),qs=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"}));export{ks as $,ys as A,Ls as B,On as C,us as D,$n as E,zs as F,bs as G,_s as H,ws as I,es as J,Es as K,Ts as L,dn as M,jn as N,Cs as O,Ss as P,pn as Q,Fn as R,fn as S,ln as T,Rs as U,Ns as V,Ms as W,Ii as X,ps as Y,Ti as Z,Ci as _,qn as a,Ai as a0,Pi as a1,Gi as a2,Hi as a3,Vi as a4,Mi as a5,qi as a6,ji as a7,ki as a8,Si as a9,bi as aA,Sl as aB,wi as aC,$l as aD,Fi as aE,Ni as aF,Bi as aG,Ri as aH,Oi as aI,zi as aJ,Li as aK,Ei as aL,Il as aM,Di as aN,Wi as aO,Vl as aP,ti as aQ,Ml as aR,ci as aS,cs as aT,_i as aU,js as aV,qs as aW,wn as aa,pl as ab,Va as ac,tl as ad,sl as ae,Ja as af,rl as ag,Ka as ah,nl as ai,Wa as aj,_l as ak,Un as al,Ua as am,yl as an,Za as ao,Ha as ap,al as aq,$a as ar,il as as,Ya as at,li as au,vi as av,gi as aw,bl as ax,wl as ay,hl as az,un as b,Ps as c,gn as d,kn as e,ss as f,Ds as g,ls as h,Vn as i,Ui as j,Kn as k,Qn as l,gs as m,Zn as n,Xn as o,Gn as p,Tn as q,ds as r,vs as s,Pn as t,ns as u,an as v,Dn as w,fs as x,hs as y,ms as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
