!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=a(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,u=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw u}}}}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){if(e){if("string"==typeof e)return r(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function o(t,a,r,i){var o=a&&a.prototype instanceof c?a:c,s=Object.create(o.prototype);return u(s,"_invoke",function(t,a,r){var i,u,o,c=0,s=r||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(n,t){return i=n,u=0,o=e,f.n=t,l}};function d(t,a){for(u=t,o=a,n=0;!p&&c&&!r&&n<s.length;n++){var r,i=s[n],d=f.p,m=i[2];t>3?(r=m===a)&&(o=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=d&&((r=t<2&&d<i[1])?(u=0,f.v=a,f.n=i[1]):d<m&&(r=t<3||i[0]>a||a>m)&&(i[4]=t,i[5]=a,f.n=m,u=0))}if(r||t>1)return l;throw p=!0,a}return function(r,s,m){if(c>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,m),u=s,o=m;(n=u<2?e:o)||!p;){i||(u?u<3?(u>1&&(f.n=-1),d(u,o)):f.n=o:f.v=o);try{if(c=2,i){if(u||(r="next"),n=i[r]){if(!(n=n.call(i,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),u=1);i=e}else if((n=(p=f.n<0)?o:t.call(a,f))!==l)break}catch(n){i=e,u=1,o=n}finally{c=1}}return{value:n,done:p}}}(t,r,i),!0),s}var l={};function c(){}function s(){}function p(){}n=Object.getPrototypeOf;var f=[][a]?n(n([][a]())):(u(n={},a,function(){return this}),n),d=p.prototype=c.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=p,u(d,"constructor",p),u(p,"constructor",s),s.displayName="GeneratorFunction",u(p,r,"GeneratorFunction"),u(d),u(d,r,"Generator"),u(d,a,function(){return this}),u(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:m}})()}function u(e,n,t,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}u=function(e,n,t,a){function i(n,t){u(e,n,function(e){return this._invoke(n,t,e)})}n?r?r(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[n]=t:(i("next",0),i("throw",1),i("return",2))},u(e,n,t,a)}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach(function(n){c(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function c(n,t,a){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var a=n[Symbol.toPrimitive];if(void 0!==a){var r=a.call(n,t||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[t]=a,n}function s(e,n,t,a,r,i,u){try{var o=e[i](u),l=o.value}catch(e){return void t(e)}o.done?n(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var n=this,t=arguments;return new Promise(function(a,r){var i=e.apply(n,t);function u(e){s(i,a,r,u,o,"next",e)}function o(e){s(i,a,r,u,o,"throw",e)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./useStore-legacy3.js?v=1756369731","./index-legacy101.js?v=1756369731","./useMethods-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./vue-virtual-scroller.esm-legacy.js?v=1756369731","./vue-virtual-scroller-legacy.js?v=1756369731","./form-item-legacy.js?v=1756369731","./useController-legacy4.js?v=1756369731","./index.vue_vue_type_style_index_0_lang-legacy.js?v=1756369731","./index-legacy140.js?v=1756369731"],function(e,a){"use strict";var r,u,o,c,s,f,d,m,v,y,h,_,g,b,w,k,x,j,C,S,D,O,I,q,T,z,A,P,E,M,R,V,G,F,L,H,N,U,B,K,W,J,Q,$,X,Y,Z,ee,ne,te,ae,re,ie,ue,oe,le,ce,se,pe,fe,de,me,ve,ye,he,_e,ge,be,we,ke,xe,je,Ce,Se,De,Oe,Ie,qe,Te,ze,Ae,Pe,Ee,Me,Re,Ve;return{setters:[function(e){r=e.K,u=e.au,o=e.aj,c=e.b,s=e.u,f=e.av,d=e.aw,m=e.ax,v=e.l,y=e.L,h=e.c,_=e.e,g=e.ay,b=e.az,w=e.aA,k=e.o,x=e.aB,j=e.aC,C=e.w,S=e.ai,D=e.aD,O=e.aE,I=e.aF,q=e.aG,T=e.aH,z=e.aI,A=e.aJ,P=e.ah,E=e.I},function(e){M=e.k,R=e.ar,V=e.s,G=e.j,F=e.r,L=e.U,H=e.c,N=e.w,U=e.p,B=e.a4,K=e.q,W=e.v,J=e.y,Q=e.e,$=e.x,X=e.O,Y=e.B,Z=e.A,ee=e.J,ne=e.F,te=e.a_,ae=e.M,re=e.H,ie=e.I,ue=e.z,oe=e.C,le=e.D,ce=e.ao,se=e.an,pe=e.aQ,fe=e.ap,de=e.n,me=e.T,ve=e.aj,ye=e.ai,he=e.i,_e=e.g,ge=e.ba,be=e.a$,we=e.ax,ke=e.aD,xe=e.K,je=e.av,Ce=e.G},function(e){Se=e.g},function(e){De=e._},function(e){Oe=e.c,Ie=e.N,qe=e.g},function(e){Te=e.j},function(e){ze=e.s},null,function(e){Ae=e.h,Pe=e.b,Ee=e.c},function(e){Me=e.o},function(e){Re=e._},function(e){Ve=e.B}],execute:function(){var Ge=c(),Fe=Se().refs.deployMenuData,Le=M({loading:!1,list:[],total:0}),He=M({p:1,row:200,query:"",force:0}),Ne=function(){var e=p(i().m(function e(){var n,t,a,c,s,p=arguments;return i().w(function(e){for(;;)switch(e.n){case 0:n=p.length>0&&void 0!==p[0]?p[0]:{query:He.query,p:He.p,row:He.row,force:0},t="docker_app_list_timestamp",a=localStorage.getItem(t),c=Date.now(),s=!1,(!a||c-parseInt(a)>864e5)&&(s=!0),r({request:u(l(l({},n),{},{app_type:Fe.value.app_type,force:n.force||(s?1:0)})),loading:R(Le,"loading"),success:function(e){e.status?((1===n.force||s)&&(localStorage.setItem(t,c.toString()),!s&&Ge.success("刷新成功")),Le.list=e.data.data.map(function(e,n){return l(l({},e),{},{index:"".concat(e.appname||Math.random().toString(36).substring(2,15),"_").concat(n)})}),Le.total=o(e.data.page),Fe.value.maximum_cpu=e.data.maximum_cpu,Fe.value.maximum_memory=e.data.maximum_memory+" MB"):Ge.error(e.msg)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ue=G("DOCKER-APP-STORE-LOCAL",function(){return{activeTabs:F("git"),apphubGitConfig:F({}),isSaveGitConfig:F(!1),usingHelpLink:F("https://www.bt.cn/bbs/thread-147864-1-1.html")}}),Be=e("u",function(){return V(Ue())})(),Ke=Be.apphubGitConfig,We=Be.isSaveGitConfig,Je=c(),Qe=Se().refs.deployMenuData,$e=s().mainWidth,Xe=L([]),Ye=L(""),Ze=function(){return Math.floor(($e.value-420)/140)},en=F(),nn=e("r",function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:if(He.p=1,tn(),"installed"!==Qe.value.app_type){e.n=2;break}return e.n=1,rn("all");case 1:return n&&Je.success("刷新成功"),e.a(2);case 2:if(He.force=n?1:0,!n){e.n=3;break}return e.n=3,Oe();case 3:return e.n=4,Ne(He);case 4:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),tn=function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r({request:f(),data:[Array,Xe],success:function(e){en.value=e.slice(Ze(),e.length)}});case 1:return e.a(2,e.v)}},e)}));return function(){return e.apply(this,arguments)}}(),an=function(){var e=p(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:return Ye.value=(null===(t=en.value)||void 0===t||null===(t=t.find(function(e){return e.type===n}))||void 0===t?void 0:t.desc)||"",Qe.value.app_type=n,He.query="",He.p=1,He.force=0,e.n=1,Ne(He);case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),rn=function(){var e=p(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:Le.loading=!0,Ye.value=(null===(t=Xe.value)||void 0===t||null===(t=t.find(function(e){return e.type===n}))||void 0===t?void 0:t.desc)||"",Qe.value.app_type="installed",r({request:d({app_type:n,p:1,row:20,query:He.query||""}),loading:R(Le,"loading"),success:function(e){e.status?(Le.list=e.data.data.map(function(e,n){return l(l({},e),{},{index:n})})||[],e.data.page?Le.total=o(e.data.page):Le.total=0):Je.error(e.msg)}});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),un=function(){"installed"===Qe.value.app_type&&rn("all"),Qe.value.app_type="installed"},on=function(){Xe.value=[],Ye.value="",en.value=[]},ln=function(){var e=p(i().m(function e(n){var t,r,u,o,l,c,s,p,f;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=Je.load("正在获取配置信息..."),e.p=1,e.n=2,m();case 2:r=e.v,u=r.data.git_config||{},o=u.git_url,l=void 0===o?"":o,c=u.git_branch,s=void 0===c?"":c,p=u.user_config,f=void 0===p?{}:p,Ke.value={git_url:l,git_branch:s,name:f.name||"",password:f.password||""},r.status&&(We.value=!0),v({title:"导入应用",area:70,btn:["导入","取消"],component:function(){return y(function(){return a.import("./index-legacy138.js?v=1756369731")},void 0,a.meta.url)}}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,null==t||t.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}(),cn={class:"flex flex-1 relative items-center mb-20px"},sn={class:"text-[1.2rem] text-[#666] leading-[2rem] mx-[2rem] flex items-center"},pn={class:"w-full flex items-center"},fn={class:"flex flex-1 relative flex-wrap"},dn=["onClick"],mn=H({__name:"index",setup:function(e,n){var a=n.expose,r=Se().refs.deployMenuData,i=s().mainWidth;N(function(){return i.value},function(){var e,n;en.value=Xe.value.slice(Ze(),null===(e=Xe.value)||void 0===e?void 0:e.length),Ye.value=(null===(n=en.value)||void 0===n||null===(n=n.find(function(e){return e.type===r.value.app_type}))||void 0===n?void 0:n.desc)||""}),U(tn);var u=F();return B(on),a({testRef:u}),function(e,n){var a,i,o=De,l=h,c=le,s=fe,p=ce,f=se,d=pe;return K(),W("div",{ref_key:"testRef",ref:u},[J("div",cn,[n[13]||(n[13]=J("span",{class:"w-[80px] pr-16px text-[14px] flex justify-end flex-shrink-0"},"应用搜索",-1)),Q(o,{class:"!w-[52rem]",ref:"searchRef",icon:"el-search",modelValue:$(He).query,"onUpdate:modelValue":n[0]||(n[0]=function(e){return $(He).query=e}),clearable:"",onClear:n[1]||(n[1]=function(e){return $(nn)(!1)}),onIconClick:n[2]||(n[2]=function(e){return $(nn)(!1)}),placeholder:"支持应用名称、字段模糊搜索",onKeyup:n[3]||(n[3]=X(function(e){return $(nn)(!1)},["enter","native"]))},null,8,["modelValue"]),J("span",sn,[n[11]||(n[11]=Y(" 如果您希望添加其它Docker应用，请 ",-1)),J("span",{class:"bt-link",onClick:n[4]||(n[4]=function(e){return $(Te)()})},"联系客服"),n[12]||(n[12]=Y(" ,或进行 ",-1)),J("span",{class:"bt-link",onClick:n[5]||(n[5]=function(e){return $(Ie)()})},"需求反馈"),Q(l,{href:"https://www.bt.cn/bbs/thread-137717-1-1.html",class:"ml-4px"},{default:Z(function(){return t(n[10]||(n[10]=[Y(">>使用帮助",-1)]))}),_:1})])]),J("div",pn,[n[20]||(n[20]=J("span",{class:"w-[80px] pr-16px text-[14px] flex justify-end"},"应用分类",-1)),J("div",{class:ee(["class-item",{on:"all"===$(r).app_type}]),onClick:n[6]||(n[6]=function(e){return $(an)("all")})},"全部",2),J("div",{class:ee(["class-item flex-shrink-0",{on:"installed"===$(r).app_type}]),onClick:n[7]||(n[7]=function(){return $(un)&&$(un).apply(void 0,arguments)})},"已安装",2),J("div",fn,[(K(!0),W(ne,null,te(null===(a=$(Xe))||void 0===a?void 0:a.slice(0,$(Ze)()),function(e,n){return K(),W("div",{key:n,onClick:function(n){return $(an)(e.type)},class:ee(["class-item",$(r).app_type===e.type?"on":""])},ue(e.desc),11,dn)}),128)),null!==(i=$(en))&&void 0!==i&&i.length?(K(),ae(f,{key:0,"show-timeout":200,onCommand:$(an)},{dropdown:Z(function(){return[Q(p,null,{default:Z(function(){return[(K(!0),W(ne,null,te($(en),function(e,n){return K(),ae(s,{key:n,command:e.type},{default:Z(function(){return[Y(ue(e.desc),1)]}),_:2},1032,["command"])}),128))]}),_:1})]}),default:Z(function(){return[Q(c,{type:"default",class:ee(["AppClassButton",{on:$(en).some(function(e){return e.type===$(r).app_type})}])},{default:Z(function(){return[n[14]||(n[14]=Y(" 更多 ",-1)),re(J("span",null,"（"+ue($(Ye))+"）",513),[[ie,$(Ye)]]),n[15]||(n[15]=J("i",{class:"svgtofont-el-arrow-down ml-[.5rem]"},null,-1))]}),_:1},8,["class"])]}),_:1},8,["onCommand"])):oe("",!0)]),re(Q(c,{title:"更新列表",class:"refresh !mr-[1.2rem]",onClick:n[8]||(n[8]=function(e){return $(nn)(!0)})},{default:Z(function(){return t(n[16]||(n[16]=[Y(" 更新应用列表 ",-1)]))}),_:1},512),[[ie,"installed"!==$(r).app_type&&"AppHub"!==$(r).app_type]]),"AppHub"===$(r).app_type?(K(),W(ne,{key:0},[Q(d,{content:"支持从Git仓库或本地文件导入应用，自动扫描并识别多个应用，支持选择性导入和批量导入",placement:"top"},{content:Z(function(){return t(n[17]||(n[17]=[J("div",{class:"flex flex-col pb-[4px]"},[J("div",null,"支持从Git仓库或本地文件导入应用"),J("div",null,"自动扫描并识别多个应用"),J("div",null,"支持选择性导入和批量导入")],-1)]))}),default:Z(function(){return t(n[18]||(n[18]=[J("span",{class:"bt-ico-ask"},"?",-1)]))}),_:1}),Q(c,{type:"primary",title:"导入应用",class:"refresh !mr-[1.2rem] ml-[1rem]",onClick:n[9]||(n[9]=function(e){return $(ln)()})},{default:Z(function(){return t(n[19]||(n[19]=[Y(" 导入应用 ",-1)]))}),_:1})],64)):oe("",!0)])],512)}}}),vn=_(mn,[["__scopeId","data-v-c3cb349f"]]),yn=c(),hn=Se().refs.deployMenuData,_n=F(!1),gn=F(!1),bn=null,wn=function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:if(!_n.value){e.n=1;break}return e.a(2);case 1:if(_n.value=!0,gn.value=!0,!(Le.list.length<Le.total)){e.n=4;break}if(He.p++,"installed"!==hn.value.app_type){e.n=3;break}return e.n=2,kn("all");case 2:e.n=4;break;case 3:return e.n=4,Ne(He);case 4:_n.value=!1;case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),kn=function(){var e=p(i().m(function e(n,a){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,1===He.p&&(Le.list=[]),a||(Le.loading=!0),hn.value.app_type="installed",e.n=1,r({request:d({app_type:n||"all",p:He.p,row:20,query:He.query||""}),success:function(e){if(e.status){var n=e.data.data.map(function(e,n){return l(l({},e),{},{index:n})})||[];Le.list=[].concat(t(Le.list),t(n)),e.data.page?Le.total=o(e.data.page):Le.total=0}else yn.error(e.msg)}});case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,Le.loading=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(n,t){return e.apply(this,arguments)}}(),xn=function(){Le.list.some(function(e){return"initializing"===e.status})&&(bn=setTimeout(function(){kn("all",!0),xn()},3e4))},jn=""+new URL("../img/soft_ico/icon_plug.svg",a.meta.url).href;function Cn(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!he(e)}var Sn=c(),Dn=Se().refs.deployMenuData,On=g().refs.isRefreshInstallList,In={mode:"ace/mode/json",theme:"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},qn=function(){var e=p(i().m(function e(n,t){var a,r,u,o,l,c;return i().w(function(e){for(;;)switch(e.n){case 0:return a=n.appname,r=n.appid,u=-1==r?"/static/img/soft_ico/apphub":"/static/img/soft_ico/dkapp",o=-1==r?"ico-apphub_":"ico-dkapp_",l=null==a?void 0:a.replace(/-+[{0-9},\.,]+$/,""),c="".concat(u,"/").concat(o).concat(l,".png"),e.n=1,qe(c);case 1:t.value=e.v;case 2:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),Tn=function(e){return e.canUpdate&&e.installed},zn=function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ut({appData:n,openDependInstall:An});case 1:it(),v({title:"".concat(n.appname,"安装配置"),area:70,component:function(){return y(function(){return a.import("./add-app-soft-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:{appData:n,openDependInstall:An},showFooter:!0});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),An=function(){var e=p(i().m(function e(n){var t,r;return i().w(function(e){for(;;)switch(e.n){case 0:return t=n.name,r=n.type,Dn.value.app_type=r,He.query="",e.n=1,Ne();case 1:de(p(i().m(function e(){var n;return i().w(function(e){for(;;)switch(e.n){case 0:if(!(n=Le.list.find(function(e){return e.appname===t}))){e.n=2;break}return e.n=1,ut({appData:n,openDependInstall:An});case 1:it(),v({title:"".concat(n.appname,"安装配置"),area:70,component:function(){return y(function(){return a.import("./add-app-soft-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:{appData:n,openDependInstall:An},showFooter:!0});case 2:return e.a(2)}},e)})));case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Pn=function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:v({title:"更新配置",area:42,component:function(){return y(function(){return a.import("./app-update-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:n,showFooter:!0});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),En=function(e){v({title:"详情展示",area:64,component:function(){return y(function(){return a.import("./detail-view-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:e,btns:!1})},Mn=function(e,n,t){switch(e){case"ollama":case"ollama_and_openwebui":case"deepseek_r1":v({title:"管理",area:[86,52],component:function(){return y(function(){return a.import("./index-legacy139.js?v=1756369731").then(function(e){return e.i})},void 0,a.meta.url)},compData:l(l({},n),t),btns:!1});break;case"mysql":case"redis":case"postgresql":case"tdengine":Vn(e,n)}},Rn=H({name:"ContainerTerminalDialog",props:{compData:{type:Object,default:function(){return{}}}},setup:function(e,n){var t=n.expose,a=F(),r=F(e.compData.cmd),i=F(null);return U(function(){de(function(){i.value=a.value.socketInfo(),i.value.send("cd /www/wwwroot\r\n"),i.value.send("clear && ".concat(r.value,"\r\n"))})}),t({onCancel:function(){i.value.close()}}),function(){return Q("div",{class:"p-[1rem] bg-[#111] h-full"},[Q(Re,{id:"dockerTerminal",class:"h-full",active:!0,ref:a,url:"/webssh","host-info":{}},null)])}}}),Vn=function(){var e=p(i().m(function e(t,a){var u,o,l,c,s,p,f;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:u=["redis_password","mysql_root_password","postgres_password"],o="",l=n(a.appinfo),e.p=1,l.s();case 2:if((c=l.n()).done){e.n=4;break}if(s=c.value,!u.includes(s.fieldKey)){e.n=3;break}return o=s.fieldValue,e.a(3,4);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,f=e.v,l.e(f);case 6:return e.p=6,l.f(),e.f(6);case 7:return e.n=8,r({request:b({appname:t,id:a.container_id,password:o}),loading:"正在获取数据库终端命令，请稍后..."});case 8:if((p=e.v).status){e.n=9;break}return e.a(2,Sn.error("连接数据库失败"));case 9:v({component:function(){return Rn},title:"宝塔终端",area:[80,50],compData:{cmd:p.msg}});case 10:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(n,t){return e.apply(this,arguments)}}(),Gn=function(e){return"0.0.0.0"===e.host_ip&&"Database"!==e.apptype&&"System"!==e.apptype},Fn=function(e,n,t){"0.0.0.0"===e.host_ip&&"Database"!==e.apptype&&"System"!==e.apptype?window.open("".concat(t,"://").concat(e.server_ip,":").concat(n),"_blank","noopener,noreferrer"):Sn.error("当前应用不支持IP+端口访问")},Ln=function(){var e=p(i().m(function e(n,t){var r,u,o,l,c;return i().w(function(e){for(;;)switch(e.n){case 0:if("path"!==n){e.n=2;break}return e.n=1,y(function(){return a.import("./utils-lib-legacy.js?v=1756369731").then(function(e){return e.jG})},void 0,a.meta.url);case 1:u=e.v,o=u.router,l=null===(r=t.appinfo.filter(function(e){return"app_path"===e.fieldKey})[0])||void 0===r?void 0:r.fieldValue,w("Path",l),c=Sn.load("正在跳转,请稍后..."),o.push({path:"/files"}),c.close();case 2:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),Hn=function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:Me({id:n.site_id,name:n.site_name,addtime:n.site_addtime});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Nn=function(e,n,t){if(!t||"initializing"===e.status){var r=!1;"log"===n&&"initializing"===e.status&&(r=!0);var i={back:{component:function(){return y(function(){return a.import("./backup-view-legacy.js?v=1756369731")},void 0,a.meta.url)},area:82,title:"应用备份",showFooter:!1},log:{component:function(){return y(function(){return a.import("./app-log-legacy.js?v=1756369731")},void 0,a.meta.url)},area:88,title:"应用日志",showFooter:!1},password:{component:function(){return y(function(){return a.import("./update-password-legacy.js?v=1756369731")},void 0,a.meta.url)},area:42,title:"修改mysql密码",showFooter:!0}};v({title:i[n].title,area:i[n].area,compData:l(l({},e),{},{isInit:r}),component:i[n].component,showFooter:i[n].showFooter})}},Un=function(){var e=p(i().m(function e(n,t,a){var u;return i().w(function(e){for(;;)switch(e.n){case 0:return u={rebuild:"重建",start:"启动",restart:"重启",stop:"停止"},e.n=1,k({title:"提示",content:"确定要".concat(u[t],"【").concat(a.service_name,"】吗?"),icon:"warning-filled"});case 1:return e.n=2,r({request:x({service_name:a.service_name,status:t,app_name:a.appname}),loading:"正在操作,请稍后...",message:!0});case 2:n("refresh");case 3:return e.a(2)}},e)}));return function(n,t,a){return e.apply(this,arguments)}}(),Bn=function(){var e=p(i().m(function e(n,t){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k({title:"提示",content:"确定要删除【".concat(t.appname,"】吗?"),icon:"warning-filled",type:"check",check:{content:"同时删除此应用的所有数据",onConfirm:function(){var e=p(i().m(function e(a){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r({request:j({id:t.id,delete_data:Number(a)}),loading:"正在删除,请稍后...",message:!0});case 1:n("refresh");case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()}});case 1:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),Kn=function(e){return window.open("http://"+e,"_blank","noopener,noreferrer")},Wn=L({}),Jn=e("f",M({version:""})),Qn=function(e){var n;null===(n=e.field)||void 0===n||n.forEach(function(e){Jn[e.attr]=e.default,"checkbox"===e.type&&(Jn[e.attr]=Boolean(e.default))}),Jn.service_name="".concat(e.appname,"_").concat(C(4))},$n=(e("a",function(e,n){switch(e.type){case"password":return Ae(e.name,function(){return Q("div",{class:"flex flex-col items-start justify-center w-full"},[Q(De,{placeholder:"请输入".concat(e.name),width:"24rem","is-active":!0,modelValue:n.value[e.attr],"onUpdate:modelValue":function(t){return n.value[e.attr]=t},icon:"el-refresh",onInput:function(t){return et(e,t,n)},onIconClick:function(){return Jn[e.attr]=C(16)}},null)])},e.attr,{rules:{}});case"checkbox":return Ae(e.name,function(){return Q(me,{modelValue:n.value[e.attr],"onUpdate:modelValue":function(t){return n.value[e.attr]=t},label:e.name,class:"!my-0"},{default:function(){return[Q("span",{class:"unit"},[Y(" * "),e.suffix,Y(" ")])]}})},e.attr);case"textarea":return Ee(e.name,e.attr,{attrs:{placeholder:"请输入".concat(e.name),autosize:{minRows:1,maxRows:15},class:"!w-[244px]",onInput:function(t){return et(e,t,n)}},rules:[{required:!1,message:"请输入".concat(e.name),trigger:["change","blur"]}],slots:{unit:function(){return nt(e)}}});default:if("string"==typeof e.type&&e.type.startsWith("ace:")){var t=e.type.split(":")[1]||"",a=l(l({},In),{},{mode:t?"ace/mode/".concat(t):"ace/mode/text"});return Ae(e.name,function(){return Q("div",{class:"flex flex-col items-start justify-center w-full"},[Q(Ve,{key:"editer1",class:"!w-[360px] h-[30rem]",modelValue:n.value[e.attr],"onUpdate:modelValue":function(t){return n.value[e.attr]=t},editorOption:a},null),e.suffix?Q("span",{class:"text-[#666] text-[1.2rem] leading-[1] mt-[1rem]",innerHTML:" * ".concat(e.suffix)},null):Q("span",null,null)])},e.attr)}return Pe(e.name,e.attr,{attrs:{class:"!w-[244px] relative;",placeholder:"请输入".concat(e.name)},slots:{unit:function(){return nt(e)}},rules:[{required:!1,message:"请输入".concat(e.name),trigger:"blur"}]})}}),e("b",function(e,n,t){return Ae(e.appTypeCN,function(){var n,a,r;return Q("div",null,[(null===(n=Xn.value[Yn(e)])||void 0===n?void 0:n.appname)&&Q(ve,{class:"!w-[12rem]",modelValue:Xn.value.form[e.apptype],"onUpdate:modelValue":function(n){return Xn.value.form[e.apptype]=n}},Cn(a=e.appname.map(function(e){return Q(ye,{label:e,value:e},null)}))?a:{default:function(){return[a]}}),Q(ve,{modelValue:Xn.value[Zn(e)].service_name,"onUpdate:modelValue":function(n){return Xn.value[Zn(e)].service_name=n},placeholder:0==Xn.value[Zn(e)].option.length?"未安装":"请选择",disabled:0==Xn.value[Zn(e)].option.length,class:"ml-[0.8rem] !w-[16rem]"},Cn(r=Xn.value[Zn(e)].option.map(function(e){return Q(ye,{label:e.service_name+" "+e.version,value:e.service_name},null)}))?r:{default:function(){return[r]}}),Q("span",{class:"ml-[2rem] text-[1.2rem] leading-[2.2rem] text-[#999]"},[e.appDesc]),0==Xn.value[Zn(e)].option.length&&Q("div",null,[Q("span",{class:"leading-[1] bt-link !text-[1.2rem]",onClick:function(){return tt({name:Zn(e),type:e.apptype},t)}},[Y("点击安装")])])])})}),e("v",L([]))),Xn=e("d",F({})),Yn=function(e){var n=e.appname;return S(n)?n:n[0]},Zn=function(e){return Xn.value.form[e.apptype]},et=function(e,n,t){"domain"===e.attr&&""!==n&&(t.value.allow_access=!1)},nt=function(e){var n="whitespace-nowrap absolute left-[250px] top-0 text-[#666]";return"cpus"===e.attr?Q("span",{class:n},[" * ".concat(e.suffix).concat(Dn.value.maximum_cpu)]):"memory_limit"===e.attr?Q("span",{class:n},[" * ".concat(e.suffix).concat(Dn.value.maximum_memory)]):e.suffix?Q("span",{class:n,innerHTML:" * ".concat(e.suffix)},null):Q("span",null,null)},tt=function(e,n){Wn.value.openDependInstall(e),n()},at=function(e){if(!(e.indexOf(".")>-1))return!1;var n=e.split(".");return 3===n.length?{x:n[0],yz:"".concat(n[1],".").concat(n[2])}:2===n.length&&{x:n[0],yz:n[1]}},rt=function(){try{if(Jn.domain&&!T(Jn.domain))return void Sn.error("域名格式不正确");var e=l(l(l({},Jn),-1==Wn.value.appData.appid?{appid:Number(Wn.value.appData.appid)}:{}),{},{app_name:Wn.value.appData.appname,disable_domain:Number(!Jn.domain),allow_access:Number(Jn.allow_access)});return at(Jn.version)?(e.m_version=at(Jn.version).x,e.s_version=at(Jn.version).yz):(e.m_version=Jn.version,e.s_version=""),Wn.value.appData.depend&&(e.depend_app=[],Object.keys(Xn.value.form).forEach(function(n){var t=Xn.value.form[n];Object.keys(Xn.value).forEach(function(n){if(t===n){if(!Xn.value[n].service_name)throw Sn.error("未选择必须依赖项"),new Error("未选择必须依赖项");e.depend_app.push({appname:Xn.value[n].appname,service_name:Xn.value[n].service_name})}})}),e.depend_app=JSON.stringify(e.depend_app)),e}catch(n){}},it=(e("i",function(){var e=p(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,rt();case 1:if(t=e.v){e.n=2;break}return e.a(2);case 2:r({loading:"正在安装...",request:D(t),message:!0,success:function(e){e.status&&(Dn.value.app_type="installed",n())}});case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),function(){var e,n;$n.value=[],null===(e=Wn.value.appData)||void 0===e||null===(e=e.appversion)||void 0===e||e.forEach(function(e){e.s_version.length?e.s_version.forEach(function(n){$n.value.push({label:e.m_version+"."+n,value:e.m_version+"."+n})}):$n.value.push({label:e.m_version,value:e.m_version})}),Jn.version=null===(n=$n.value[0])||void 0===n?void 0:n.value}),ut=function(){var e=p(i().m(function e(n){var t,a,u;return i().w(function(e){for(;;)switch(e.n){case 0:u=[],Xn.value.form={},Wn.value=n,Qn(n.appData),null===(t=n.appData.depend)||void 0===t||t.forEach(function(e){return Xn.value.form[e.apptype]=""}),null===(a=n.appData.depend)||void 0===a||a.forEach(function(e){e.appname.forEach(function(n,t){!t&&(Xn.value.form[e.apptype]=n),Xn.value[n]={appname:n,apptype:e.apptype,version:"",service_name:"",option:[]},u.push({app_name:n,app_type:e.apptype})})}),r({request:O({depend_app:JSON.stringify(u)}),data:{data:Array},success:function(e){var n;null===(n=e.data)||void 0===n||n.forEach(function(e,n){var t;Xn.value[e.appname].service_name=null===(t=e.installed[0])||void 0===t?void 0:t.service_name,Xn.value[e.appname].option=e.installed||[]})}});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ot=(e("c",function(){Wn.value={},e("f",Jn=M({version:""})),$n.value=[],Xn.value={}}),null),lt=[],ct={},st=e("n",F("run")),pt=e("p",L("")),ft=function(){var e,n;null===(e=ot=P({route:"/sock_shell",onMessage:dt}))||void 0===e||e.send("tail -f "+(null===(n=ct.appinfo.filter(function(e){return"installed_log"===e.fieldKey})[0])||void 0===n?void 0:n.fieldValue))},dt=function(e,n){try{var t,a,r,i=n.data;if(lt.push(i),lt.length>50)pt.value=null===(t=lt)||void 0===t?void 0:t.slice(lt.length-50).join(" ");else pt.value=null===(a=lt)||void 0===a?void 0:a.join(" ");if(i.includes("bt_successful")||i.includes("bt_failed"))null===(r=ot)||void 0===r||r.close()}catch(o){var u;null===(u=ot)||void 0===u||u.close()}},mt=(e("o",function(e){pt.value="",lt=[],"run"===e?mt():vt()}),e("q",function(){"run"===st.value?mt():vt()}),function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:r({request:z({service_name:ct.service_name,app_name:ct.appname}),success:function(e){pt.value=e.data.data}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()),vt=(e("l",function(e){(ct=e).isInit?(st.value="install",vt()):mt()}),function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:if(!ct.isInit){e.n=1;break}return ft(),e.a(2);case 1:r({request:A({service_name:ct.service_name}),success:function(e){pt.value=e.data.data||""}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()),yt=(e("m",function(){var e;null===(e=ot)||void 0===e||e.close(),ot=null,lt=[],ct={},st.value="run",pt.value=""}),e("j",M({version:"",backup:!1,pull:!1,id:""}))),ht=e("k",L([])),_t=(e("g",function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:return yt.id=n.id,e.n=1,r({request:I({id:yt.id}),data:{data:[Array,ht]},success:function(e){yt.version=e.data[0].version}});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),e("h",function(){var e=p(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:return t={id:yt.id,m_version:yt.version.split(".")[0],s_version:"".concat(yt.version.split(".")[1],".").concat(yt.version.split(".")[2]),backup:yt.backup,pull:yt.pull},e.n=1,r({request:q(t),loading:"正在更新,请稍后...",message:!0});case 1:On.value=!0,n();case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),e("e",function(){yt.version="",yt.backup=!1,yt.pull=!1,yt.id="",ht.value=[]}),["src"]),gt={src:jn,alt:"icon_plug",key:"icon_plug",class:"AppImg"},bt={class:"AppContent"},wt={class:"w-full flex items-start justify-between"},kt={class:"flex-col flex flex-grow-0"},xt={class:"AppRow"},jt=["title"],Ct={key:0,class:"flex items-center"},St={key:0,class:"flex items-center"},Dt={key:1},Ot={class:"mx-8px"},It=["innerHTML","title"],qt={key:1,class:"AppDescribe"},Tt={class:"AppRow"},zt={class:"-m-[12px]"},At=["onClick"],Pt=["onClick"],Et=["title","onClick"],Mt={class:"flex items-center flex-1"},Rt={class:"flex items-center"},Vt={class:"truncate max-w-[24rem]"},Gt={key:0,class:"flex"},Ft={key:0,class:"absolute bottom-14px w-[80%]"},Lt={key:1,class:"tag-container absolute bottom-6"},Ht=H({__name:"index",props:{data:{default:function(){return{}}}},emits:["refresh"],setup:function(e,n){var a=n.emit,r=e,u=Se().refs.deployMenuData,o=F("");N(r,p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return o.value="",e.n=1,qn(r.data,o);case 1:return e.a(2)}},e)}))),U(p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,qn(r.data,o);case 1:return e.a(2)}},e)})));var l=a,c=_e(function(){switch(r.data.status){case"running":return["运行中","success"];case"exited":return["已停止","danger"];case"initializing":return["安装中","info"];default:return["异常","warning"]}});return function(e,n){var a=h,r=ge,i=pe,s=we,p=le,f=be;return K(),W("div",{class:ee(["AppItem relative",{"!h-[12.8rem]":!e.data.installed}])},[$(o)?(K(),W("img",{src:$(o),key:e.data.appname,class:"AppImg"},null,8,_t)):(K(),W("img",gt)),J("div",bt,[J("div",wt,[J("div",kt,[J("div",xt,[J("span",{class:ee(["text-[1.6rem] font-600",{"truncate leading-[22px] !font-normal flex-1 max-w-[20rem]":e.data.installed,"flex items-center":!e.data.installed}]),title:e.data.installed?e.data.service_name:e.data.apptitle},[J("span",null,ue(e.data.installed?e.data.service_name:e.data.apptitle),1),e.data.installedCount?(K(),W("span",{key:0,class:"mx-8px bt-link text-[1.2rem] font-normal",onClick:n[0]||(n[0]=function(e){return $(u).app_type="installed"})},"已安装 ("+ue(e.data.installedCount)+")",1)):oe("",!0),e.data.help?(K(),ae(a,{key:1,href:e.data.help,target:"_blank",class:"ml-8px bt-link text-[1.2rem] font-normal"},{default:Z(function(){return t(n[17]||(n[17]=[Y(" >>帮助",-1)]))}),_:1},8,["href"])):oe("",!0)],10,jt),e.data.installed?(K(),W("div",Ct,[Q(r,{type:$(c)[1],class:ee(["mx-[0.8rem]",{"cursor-pointer":"initializing"===e.data.status}]),onClick:n[1]||(n[1]=function(n){return $(Nn)(e.data,"log",!0)})},{default:Z(function(){return["initializing"===e.data.status?(K(),W("span",St,t(n[18]||(n[18]=[Y("正在安装 ",-1),J("i",{class:"svgtofont-el-loading !text-[1.2rem] animation-spin"},null,-1)])))):(K(),W("span",Dt,ue($(c)[0]),1))]}),_:1},8,["type","class"]),Q(i,{class:"item",effect:"dark",content:"进入安装目录",placement:"top"},{default:Z(function(){return[J("i",{class:"svgtofont-folder-open mr-[0.4rem]",onClick:n[2]||(n[2]=function(n){return $(Ln)("path",e.data)})})]}),_:1}),Q(i,{class:"item",effect:"dark",content:"打开日志",placement:"top"},{default:Z(function(){return[J("i",{class:"svgtofont-left-logs",onClick:n[3]||(n[3]=function(n){return $(Nn)(e.data,"log")})})]}),_:1}),J("span",Ot,"已安装:"+ue(e.data.createat),1)])):oe("",!0)]),J("div",null,[e.data.installed?oe("",!0):(K(),W("span",{key:0,innerHTML:e.data.appdesc,title:e.data.appdesc,class:"AppNoSetDes"},null,8,It)),e.data.installed?(K(),W("div",qt,[J("div",Tt,[Q(r,{type:"info",class:"mr-[0.8rem]",effect:"plain"},{default:Z(function(){return[Y("版本:"+ue(e.data.m_version+(e.data.s_version?".":"")+e.data.s_version),1)]}),_:1}),(K(!0),W(ne,null,te(e.data.port,function(n,t){return K(),ae(s,{key:n,trigger:"hover",placement:"bottom",width:"12.5rem","popper-class":"!min-w-[12.5rem]"},{reference:Z(function(){return[re(Q(r,{type:"info",class:ee(["mr-[0.8rem]",$(Gn)(e.data)?"cursor-pointer":""]),effect:"plain",onClick:function(t){return $(Fn)(e.data,n,"http")}},{default:Z(function(){return[Y("端口:"+ue(n),1)]}),_:2},1032,["class","onClick"]),[[ie,t<2]])]}),default:Z(function(){return[J("div",zt,[J("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-[#f5f5f5]",onClick:function(t){return $(Fn)(e.data,n,"http")}}," HTTP协议访问 ",8,At),J("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-[#f5f5f5]",onClick:function(t){return $(Fn)(e.data,n,"https")}}," HTTPS协议访问 ",8,Pt)])]}),_:2},1024)}),128)),Q(i,{placement:"top"},{content:Z(function(){return[J("div",null,[(K(!0),W(ne,null,te(e.data.port,function(n,t){var a;return re((K(),W("span",{key:t,class:ee($(Gn)(e.data)?"cursor-pointer":""),title:$(Gn)(e.data)?"点击访问应用":"",onClick:function(t){return $(Fn)(e.data,n)}},[Y(ue(n)+" ",1),re(J("span",null,",",512),[[ie,t!==(null===(a=e.data.port)||void 0===a?void 0:a.length)-1]])],10,Et)),[[ie,t>1]])}),128))])]}),default:Z(function(){var n;return[(null===(n=e.data.port)||void 0===n?void 0:n.length)>=3?(K(),ae(r,{key:0,type:"info"},{default:Z(function(){var n;return[Y(" +"+ue((null===(n=e.data.port)||void 0===n?void 0:n.length)-2),1)]}),_:1})):oe("",!0)]}),_:1})]),J("div",Mt,[e.data.domain?(K(),ae(r,{key:0,type:"info",class:"mr-[0.8rem] cursor-pointer",effect:"plain",onClick:n[4]||(n[4]=function(n){return $(Kn)(e.data.domain)})},{default:Z(function(){return[J("div",Rt,[n[19]||(n[19]=J("i",{class:"svgtofont-icon-max-black mr-[0.4rem] !text-[1.4rem]"},null,-1)),Q(i,{effect:"dark",content:"点击跳转域名:"+e.data.domain,placement:"top-start"},{default:Z(function(){return[J("span",Vt,"域名:"+ue(e.data.domain),1)]}),_:1},8,["content"])])]}),_:1})):oe("",!0),e.data.domain?(K(),W("span",{key:1,class:"bt-link",onClick:n[5]||(n[5]=function(n){return $(Hn)(e.data)})}," >管理网站")):oe("",!0)])])):oe("",!0)])]),e.data.installed?(K(),W("div",Gt,["ollama"===e.data.appname||"ollama_and_openwebui"===e.data.appname||"deepseek_r1"===e.data.appname?(K(),ae(p,{key:0,size:"small",onClick:n[6]||(n[6]=function(n){return $(Mn)(e.data.appname,e.data)})},{default:Z(function(){return t(n[20]||(n[20]=[Y("模型管理",-1)]))}),_:1})):oe("",!0),"mysql"===e.data.appname||"redis"===e.data.appname||"postgresql"===e.data.appname||"tdengine"===e.data.appname?(K(),ae(p,{key:1,size:"small",onClick:n[7]||(n[7]=function(n){return $(Mn)(e.data.appname,e.data)})},{default:Z(function(){return t(n[21]||(n[21]=[Y("终端",-1)]))}),_:1})):oe("",!0)])):oe("",!0),e.data.installed?oe("",!0):(K(),ae(p,{key:1,type:"primary",onClick:n[8]||(n[8]=function(n){return $(zn)(e.data)})},{default:Z(function(){return t(n[22]||(n[22]=[Y("安装",-1)]))}),_:1}))]),e.data.installed?(K(),W("div",Ft,[Q(f,{class:"!my-[0.8rem] w-full"}),Q(p,{size:"small",onClick:n[9]||(n[9]=function(n){return $(En)(e.data)})},{default:Z(function(){return t(n[23]||(n[23]=[Y("详情 ",-1)]))}),_:1}),Q(p,{size:"small",onClick:n[10]||(n[10]=function(n){return $(Nn)(e.data,"back")})},{default:Z(function(){return t(n[24]||(n[24]=[Y("备份",-1)]))}),_:1}),"exited"===e.data.status?(K(),ae(p,{key:0,size:"small",onClick:n[11]||(n[11]=function(n){return $(Un)(l,"start",{service_name:e.data.service_name,appname:e.data.appname})})},{default:Z(function(){return t(n[25]||(n[25]=[Y("启动 ",-1)]))}),_:1})):oe("",!0),"exited"!==e.data.status?(K(),ae(p,{key:1,size:"small",onClick:n[12]||(n[12]=function(n){return $(Un)(l,"stop",{service_name:e.data.service_name,appname:e.data.appname})})},{default:Z(function(){return t(n[26]||(n[26]=[Y("停止 ",-1)]))}),_:1})):oe("",!0),Q(p,{size:"small",onClick:n[13]||(n[13]=function(n){return $(Un)(l,"restart",{service_name:e.data.service_name,appname:e.data.appname})})},{default:Z(function(){return t(n[27]||(n[27]=[Y("重启 ",-1)]))}),_:1}),Q(p,{type:"default",plain:"",size:"small",class:"danger-button",onClick:n[14]||(n[14]=function(n){return $(Un)(l,"rebuild",{service_name:e.data.service_name,appname:e.data.appname})})},{default:Z(function(){return t(n[28]||(n[28]=[Y("重建 ",-1)]))}),_:1}),Q(p,{type:"default",plain:"",size:"small",class:"danger-button",onClick:n[15]||(n[15]=function(n){return $(Bn)(l,{appname:e.data.appname,id:e.data.id})})},{default:Z(function(){return t(n[29]||(n[29]=[Y("卸载",-1)]))}),_:1}),$(Tn)(e.data)?(K(),ae(p,{key:2,size:"small",onClick:n[16]||(n[16]=function(n){return $(Pn)(e.data)})},{default:Z(function(){return t(n[30]||(n[30]=[Y("更新",-1)]))}),_:1})):oe("",!0)])):oe("",!0),e.data.installed?oe("",!0):(K(),W("div",Lt,[Q(r,{type:"info"},{default:Z(function(){return[Y(ue(e.data.appTypeCN),1)]}),_:1}),-1==e.data.appid?(K(),ae(r,{key:0,type:"success",class:"ml-4"},{default:Z(function(){return t(n[31]||(n[31]=[Y("外部应用",-1)]))}),_:1})):oe("",!0)]))])],2)}}}),Nt=_(Ht,[["__scopeId","data-v-058bfe41"]]),Ut={class:"pr-[1.5rem]"},Bt={class:"w-full !h-[4rem] p-2rem inline-block flex justify-center items-center text-[1.2rem]"},Kt=H({__name:"index",setup:function(e){var n=s(),a=n.mainHeight,r=n.mainWidth,u=Se().refs.deployMenuData,o=g().refs,l=o.isRefreshAppList,c=o.isRefreshInstallList,f=F(null),d=F(null),m=_e(function(){return r.value<1125?1:r.value<1632?2:3}),v=_e(function(){return(r.value-35)/m.value});return N(function(){return u.value.app_type},function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:if(f.value.scrollTop=0,gn.value=!1,"installed"!==n){e.n=2;break}return clearTimeout(bn),e.n=1,kn("all");case 1:xn(),e.n=3;break;case 2:clearTimeout(bn);case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),N(function(){return l.value},function(e){e&&(Ne(He),l.value=!1)}),N(function(){return c.value},function(e){e&&(clearTimeout(bn),kn("all"),c.value=!1)}),N(function(){return Le.list.length},function(e){d.value.scrollToPosition(0),d.value.handleResize()}),U(function(){"installed"===u.value.app_type?c.value=!0:l.value=!0}),ke(function(){clearTimeout(bn)}),function(e,n){var r=h,i=be,o=je;return K(),W("div",{ref_key:"scrollContainerRef",ref:f,style:xe("height:".concat($(a)-260,"px")),class:"overflow-hidden relative scrollBox"},[re(Q($(ze),{ref_key:"virtualScrollRef",ref:d,class:"AppList",style:xe("height:".concat($(a)-280,"px;width: calc(20px + ").concat($(v),"px * ").concat($(m),");")),items:$(Le).list,"item-size":"installed"===$(u).app_type?175:145,itemSecondarySize:$(v),gridItems:$(m),buffer:100,"key-field":"index",itemClass:"app-item",onScrollEnd:$(wn)},{default:Z(function(e){var n=e.item;return[J("div",Ut,[Q(Nt,{data:n,onRefresh:$(kn)},null,8,["data","onRefresh"])])]}),after:Z(function(){return[$(gn)&&$(Le).list.length&&"installed"!==$(u).app_type?(K(),ae(i,{key:0},{default:Z(function(){return[J("span",Bt,[n[2]||(n[2]=Y("没有更多了,如没有想要的应用可",-1)),Q(r,{onClick:$(Ie)},{default:Z(function(){return t(n[1]||(n[1]=[Y("提交需求反馈",-1)]))}),_:1},8,["onClick"])])]}),_:1})):oe("",!0)]}),_:1},8,["style","items","item-size","itemSecondarySize","gridItems","onScrollEnd"]),[[ie,$(Le).list.length]]),$(Le).list.length?oe("",!0):(K(),ae(o,{key:0,class:"w-full"},{description:Z(function(){return[J("span",null,[n[3]||(n[3]=Y("未查询到搜索内容,请尝试",-1)),J("span",{class:"inline-flex bt-link",onClick:n[0]||(n[0]=function(e){return $(nn)(!0)})},"更新应用列表"),n[4]||(n[4]=Y("或加入QQ群：767189639反馈",-1))])]}),_:1}))],4)}}}),Wt=_(Kt,[["__scopeId","data-v-0df4395b"]]),Jt={class:"w-full"},Qt=_(H({__name:"index",setup:function(e){return ke(function(){E(["/mod/docker/com/get_apps","/mod/docker/com/get_tags","/mod/docker/com/get_installed_apps"])}),B(function(){Le.list=[],Le.total=0,He.p=1,He.query=""}),function(e,n){var t=Ce("bt-loading");return K(),W("div",Jt,[Q(vn,{class:"mb-8px"}),re(Q(Wt,null,null,512),[[t,$(Le).loading],[t,"正在加载列表，请稍后...","title"]])])}}}),[["__scopeId","data-v-17181e50"]]),$t=Object.freeze(Object.defineProperty({__proto__:null,default:Qt},Symbol.toStringTag,{value:"Module"}));e("s",$t)}}})}();
