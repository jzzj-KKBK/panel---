!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.toStringTag||"@@toStringTag";function l(i,n,a,o){var l=n&&n.prototype instanceof s?n:s,c=Object.create(l.prototype);return r(c,"_invoke",function(i,n,r){var a,o,l,s=0,c=r||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,i){return a=t,o=0,l=e,f.n=i,u}};function p(i,n){for(o=i,l=n,t=0;!d&&s&&!r&&t<c.length;t++){var r,a=c[t],p=f.p,m=a[2];i>3?(r=m===n)&&(l=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=p&&((r=i<2&&p<a[1])?(o=0,f.v=n,f.n=a[1]):p<m&&(r=i<3||a[0]>n||n>m)&&(a[4]=i,a[5]=n,f.n=m,o=0))}if(r||i>1)return u;throw d=!0,n}return function(r,c,m){if(s>1)throw TypeError("Generator is already running");for(d&&1===c&&p(c,m),o=c,l=m;(t=o<2?e:l)||!d;){a||(o?o<3?(o>1&&(f.n=-1),p(o,l)):f.n=l:f.v=l);try{if(s=2,a){if(o||(r="next"),t=a[r]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),o=1);a=e}else if((t=(d=f.n<0)?l:i.call(n,f))!==u)break}catch(t){a=e,o=1,l=t}finally{s=1}}return{value:t,done:d}}}(i,a,o),!0),c}var u={};function s(){}function c(){}function d(){}t=Object.getPrototypeOf;var f=[][a]?t(t([][a]())):(r(t={},a,function(){return this}),t),p=d.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=d,r(p,"constructor",d),r(d,"constructor",c),c.displayName="GeneratorFunction",r(d,o,"GeneratorFunction"),r(p),r(p,o,"Generator"),r(p,a,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:l,m:m}})()}function r(e,t,i,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,t,i,n){function o(t,i){r(e,t,function(e){return this._invoke(t,i,e)})}t?a?a(e,t,{value:i,enumerable:!n,configurable:!n,writable:!n}):e[t]=i:(o("next",0),o("throw",1),o("return",2))},r(e,t,i,n)}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach(function(t){c(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function l(e,t,i,n,r,a,o){try{var l=e[a](o),u=l.value}catch(e){return void i(e)}l.done?t(u):Promise.resolve(u).then(n,r)}function u(e){return function(){var t=this,i=arguments;return new Promise(function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,u,"next",e)}function u(e){l(a,n,r,o,u,"throw",e)}o(void 0)})}}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function c(e,t,i){return(t=d(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(t){var i=function(t,i){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,i||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==e(i)?i:i+""}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./vue-virtual-scroller.esm-legacy.js?v=1756369731","./store-legacy.js?v=1756369731","./files-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./store-legacy2.js?v=1756369731","./index-legacy101.js?v=1756369731"],function(e,i){"use strict";var r,a,l,d,f,p,m,v,h,g,y,b,S,w,T,z,F,L,x,k,I,j,_,E,O,P,U,N,C,D,G,R,A,M,B,q,H,K,X,J,Q,Y;return{setters:[function(e){r=e.v,a=e.k,l=e.e,d=e.bU,f=e.Y,p=e.a4,m=e.l,v=e.b,h=e.ai,g=e.o,y=e.c},function(e){b=e.c,S=e.r,w=e.q,T=e.v,z=e.y,F=e.e,L=e.x,x=e.J,k=e.n,I=e.k,j=e.g,_=e.p,E=e.aD,O=e.H,P=e.I,U=e.F,N=e.A,C=e.B,D=e.C,G=e.z,R=e.K,A=e.M,M=e.ap,B=e.ao,q=e.an,H=e.D,K=e.aQ},function(e){X=e._},function(e){J=e.s},function(e){Q=e.F},function(e){Y=e.an},null,null,null,null,null],execute:function(){var i={class:""},$=l(b({__name:"file-cover-confirm",props:{compData:{default:function(){}}},setup:function(e,t){var n=t.expose,o=e,l=S([{label:"文件名",prop:"name"},{label:"文件差异(本地->线上)",render:function(e){return"".concat(r(e.locaSize)," -> ").concat(r(e.size))}}]);return n({onConfirm:function(e){return o.compData.confirm(e,!0),!1},onCancel:function(e){return o.compData.cancel(e,!1),!1}}),function(e,t){var n=a;return w(),T("div",{class:x(["confirm-default","text-dark relative p-2rem"])},[t[0]||(t[0]=z("div",{class:"content flex items-center mb-[10px]"},[z("i",{class:"svgtofont-el-warning text-[4rem] text-[#f0ad4e]"}),z("div",{class:"message flex flex-col flex-1 ml-4 py-[.3rem] leading-[2.4rem] text-[1.3rem]"},[z("div",{class:"text text-[1.4rem] text-[#666] leading-[2.5rem]"},"检测到上传目录包含重复文件，是否覆盖？")])],-1)),z("div",i,[F(n,{column:L(l),data:o.compData.data,"max-height":170},null,8,["column","data"])])])}}}),[["__scopeId","data-v-fdfa0e69"]]),V=Q().refreshFilesList,W=v(),Z=function(){return e=function t(i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"target",""),c(this,"uploadPath",""),c(this,"uploadElement",null),c(this,"loading",{close:function(){}}),c(this,"isUpload",!0),c(this,"isGetFiles",!1),c(this,"readFileTimeout",0),c(this,"limit",{size:32212254720,number:1e3}),c(this,"uploadStatus","paused"),c(this,"uploadLimitSize",2097152),c(this,"uploadList",[]),c(this,"uploadTime",{endTime:0,startTime:0}),c(this,"uploadInfo",{estimatedTime:0,uploadedSize:0,speedInterval:null,speedAverage:0,uploadTime:0,fileSize:0,startTime:0,endTime:0,success:0,error:0}),c(this,"fileList",[]),c(this,"fileTotalSize",0),c(this,"fileTotalNumber",0),c(this,"uploadInterval",0),c(this,"uploadCycleSize",[]),c(this,"speedLastTime",0),c(this,"timerSpeed",0),c(this,"uploadError",0),c(this,"isOpenCoverLayer",0),c(this,"uploadedFiles",[]),c(this,"initData",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.uploadStatus="paused",a.uploadList=[],a.isUpload=!0,a.uploadTime={endTime:0,startTime:0},a.isGetFiles=!1,a.uploadInfo={estimatedTime:0,uploadedSize:0,speedInterval:null,speedAverage:0,uploadTime:0,fileSize:0,startTime:0,endTime:0,success:0,error:0},a.fileList=[],a.fileTotalSize=0,a.fileTotalNumber=0,a.uploadInterval=0,a.uploadCycleSize=[],a.speedLastTime=0,a.timerSpeed=0,e&&a.watchFileUploadStatus({status:"paused",timeElapsed:0,averageSpeed:0,uploadSize:"0B",successNumber:0,errorNumber:0})}),c(this,"watchFileList",function(e){return e}),c(this,"watchFileUploadSpeed",function(e){return e}),c(this,"watchFileUploadStatus",function(e){return e}),c(this,"fileUploadLimit",function(e,t){var i=t;if(!a.isGetFiles)return!1;var n=e.name.split("."),o=(t=t||e.webkitRelativePath).split("/");t="/".concat(o.slice(0,o.length-1).join("/")).replace("//","/");var l=!1;return a.fileList.forEach(function(t,n){if(t.path+t.name==i&&t.size==r(e.size))return W.error("该文件已存在"),l=!0}),!(!l&&(a.fileList=a.fileList.filter(function(e,t){return e.path+e.name!==i}),a.fileList.push({vid:d(8),file:e,path:t,name:e.name,size:r(e.size),type:n.length>1?n[n.length-1]:"txt",status:"paused",progress:0}),a.watchFileList(a.fileList),a.fileTotalSize+=e.size,a.fileTotalNumber++,a.fileTotalNumber>=a.limit.number?(W.error("当前文件数量已超过文件上传上限".concat(a.limit.number,"个， 请压缩文件夹后重试！")),1):a.fileTotalSize>=a.limit.size&&(W.error("当前文件大小已超过文件上传".concat(r(a.limit.size),"限制， 请使用SFTP/FTP等工具上传文件！")),1)))}),c(this,"uploadFile",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0!==a.fileList.length&&(0==e&&0==a.uploadList.length&&(a.isOpenCoverLayer=0,a.uploadStatus="uploading",a.uploadedFiles=[],a.uploadCycleSize=[],a.uploadTime.startTime=a.getTimeReal()),a.fileList.length===t?(clearTimeout(a.uploadInterval),a.uploadStatus="success",a.uploadTime.endTime=a.getTimeReal(),a.renderUploadSpeed(),a.initData(),V(),!1):void a.uploadFileItem(e,t))}),c(this,"uploadFileItem",function(){var e=u(n().m(function e(t,i){var r,l,u,s,c,d,m,v,h,g,y;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=a.fileList[i],l=0,null!=r){e.n=1;break}return e.a(2,!1);case 1:return u=a.uploadInfo.uploadedSize,a.uploadInterval=setInterval(function(){4===a.uploadCycleSize.length&&a.uploadCycleSize.splice(0,1),a.uploadCycleSize.push(Math.abs(a.uploadInfo.uploadedSize-u))},1e3),a.uploadInfo.endTime=a.getTimeReal(),s=(a.uploadInfo.endTime-a.uploadInfo.startTime)/1e3,a.timerSpeed=Number((a.uploadInfo.fileSize/s).toFixed(2)),a.uploadInfo.startTime=a.getTimeReal(),c=a.getUpdateSpeed(),d=a.uploadLimitSize,(m=Math.floor(c/a.uploadLimitSize))&&i>1&&(d*=m>4?4:m),0==t&&(a.uploadInfo.startTime=a.getTimeReal(),r=o(o({},r),{progress:0,upload:2,upload_size:"0B"})),l=Math.min(r.file.size,t+d),a.uploadInfo.fileSize=l-t,v=a.uploadPath+r.path,h=new FormData,f(),h.append("f_path",v),h.append("f_name",r.name),h.append("f_size",r.file.size),h.append("f_start",t.toString()),h.append("blob",r.file.slice(t,l)),e.p=2,e.n=3,p({method:"post",url:""+a.target,headers:{"x-http-token":window.vite_public_request_token},data:h});case 3:return g=e.v,y=g.data,e.n=4,a.watchUploadStatus(y,r,i,{fileStart:t,fileEnd:l});case 4:e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},e,null,[[2,5]])}));return function(t,i){return e.apply(this,arguments)}}()),c(this,"fileSelectHandler",function(e,t){var i;if(a.readFileTimeout=0,a.isGetFiles=!0,a.loading=W.load("正在获取上传文件，请稍候..."),null!==(i=e.target)&&void 0!==i&&i.files){var n,r=null===(n=e.target)||void 0===n?void 0:n.files;[].forEach.call(r,function(e){a.traverseFileTree(e,t)})}else if(e.dataTransfer.items){var o=e.dataTransfer.items;[].forEach.call(o,function(e){var i=(e.webkitGetAsEntry||e.getAsEntry).call(e);if(i){if(!a.isUpload)return!1;a.traverseFileTree(i,t)}})}}),c(this,"traverseFileTree",function(e,t){var i=e.fullPath||"";if(e.isFile)e.file(function(e){a.isGetFiles=a.fileUploadLimit(e,i),clearTimeout(a.readFileTimeout),a.readFileTimeout=setTimeout(function(){if(a.loading.close(),!a.isGetFiles)return a.clearUploadFileList(),a.watchFileList(a.fileList),!1;t&&t(a.fileList)},100)});else if(e.isDirectory){var n=e.createReader(),r=function(e){[].forEach.call(e,function(e){if(!a.isUpload)return!1;a.traverseFileTree(e,t)}),e.length>0&&n.readEntries(r)};n.readEntries(r),setTimeout(function(){if(0===a.fileList.length&&a.isGetFiles)return W.error("拖拽上传文件夹内容为空")},500)}}),c(this,"watchUploadStatus",function(e,t,i,n){"number"==typeof e?(a.renderUploadSpeed(i,o(o({},t),{progress:(e/t.file.size*100).toFixed(2),upload:2,upload_size:r(e)})),n.fileEnd!=e?a.uploadInfo.uploadedSize+=e:a.uploadInfo.uploadedSize+=parseInt((n.fileEnd-n.fileStart).toString()),setTimeout(function(){a.uploadFile(e,i)},50)):(e.status?(a.uploadInfo.success++,a.uploadInfo.endTime=a.getTimeReal(),a.uploadInfo.uploadedSize+=parseInt((n.fileEnd-n.fileStart).toString()),a.renderUploadSpeed(i,o(o({},t),{upload:1,upload_size:t.size}))):(a.renderUploadSpeed(i,o(o({},t),{progress:100,upload:-1,errorMsg:e.msg})),a.uploadInfo.error++),a.uploadFile(0,++i))}),c(this,"getUpdateSpeed",function(){for(var e=0,t=0;t<a.uploadCycleSize.length;t++)e+=a.uploadCycleSize[t];var i=e/a.uploadCycleSize.length;return isNaN(i)?0:i}),c(this,"renderUploadSpeed",function(t,i){if(void 0!==t)try{var n=a.fileList[t];if(1===i.upload||-1===i.upload){n.is_upload=!0,a.uploadList.push(n);var o=document.querySelector(".file-upload-list");o&&(1===a.uploadList.length&&(o.scrollTop=0),a.uploadList.length>1&&(o.scrollTop+=45.5))}n.progress=i.progress,n.status=a.isUploadStatus(i.upload),n.message=i.errorMsg||"",a.watchFileList(a.fileList),a.watchFileUploadSpeed({totalProgress:(a.uploadInfo.uploadedSize/a.fileTotalSize*100).toFixed(2),currentSpeed:r(isNaN(a.timerSpeed)?0:a.timerSpeed),timeRemaining:a.time(parseInt(((a.fileTotalSize-a.uploadInfo.uploadedSize)/a.timerSpeed*1e3).toString())),uploadList:a.uploadList.length})}catch(e){}else{var l=a.getTimeReal();a.watchFileUploadStatus({status:"success",timeElapsed:a.diffTime(a.uploadTime.startTime,l),averageSpeed:a.toSize(a.uploadInfo.uploadedSize/((l-a.uploadTime.startTime)/1e3)),uploadSize:r(a.uploadInfo.uploadedSize),successNumber:a.uploadInfo.success,errorNumber:a.uploadInfo.error})}}),c(this,"getFileName",function(e){return"".concat(e.path,"/").concat(e.name).replace(/\/\//,"/")}),c(this,"useFileUploadExistsConfirm",u(n().m(function e(){var t,i,r,o,l;return n().w(function(e){for(;;)switch(e.n){case 0:return t=a.fileList.map(function(e){return a.uploadPath+a.getFileName(e)}),e.n=1,Y({files:t.join("\n")});case 1:if(i=e.v,r=i.data){e.n=2;break}return e.a(2);case 2:if(o=[],a.fileList.forEach(function(e,t){var i=r[t];i.exists&&o.push({name:a.getFileName(e),size:i.size,locaSize:e.file.size})}),!o.length){e.n=4;break}return l=function(e,t){if(!t)for(var i=function(){var e=a.fileList[n];o.findIndex(function(t){return t.name.indexOf(e.name)>-1})>=0&&a.fileList.splice(n,1)},n=a.fileList.length-1;n>=0;n--)i();k(function(){e(),a.fileList.length?a.uploadFile():a.clearUploadFileList()})},e.n=3,m({title:"文件冲突确认",area:40,component:$,compData:{data:o,confirm:l,cancel:l},showFooter:!0,cancelText:"跳过",confirmText:"覆盖"});case 3:e.n=5;break;case 4:a.fileList.length&&a.uploadFile();case 5:return e.a(2)}},e)}))),c(this,"cancelFile",function(e){var t=a.fileList.filter(function(t,i){return t.vid!==e.vid});a.fileList=t,a.watchFileList(a.fileList),0===a.fileList.length&&a.clearUploadFileList()}),c(this,"toSize",function(e){for(var t=[" B"," KB"," MB"," GB"," TB"," PB"],i=0;i<t.length;i+=1){if(e<1024){var n=e.toFixed(2)+t[i];return isNaN(e.toFixed(2))||void 0===n?"0B":n}e/=1024}}),c(this,"time",function(e){var t=Math.floor(e/36e5),i=Math.floor(e/6e4),n=e%6e4/1e3,r="".concat(n,"秒");return i>0&&(r="".concat(i,"分钟").concat(n.toFixed(0),"秒")),t>0&&(r="".concat(t,"小时").concat(Math.floor((e-36e5*t)/6e4),"分钟")),r}),this.target=i.target,this.uploadPath=i.uploadPath,this.watchFileList=i.renewalData,this.watchFileUploadSpeed=i.renewalSpeed,this.watchFileUploadStatus=i.renewalStatus,this.initData()},(t=[{key:"uploadStatusInfo",value:function(e){return{success:"上传成功",error:"上传失败",uploading:"上传中",paused:"等待上传",waiting:"等待上传"}[e]}},{key:"isUploadStatus",value:function(e){return{"-1":"error",0:"paused",1:"success",2:"uploading",3:"waiting"}[e]}},{key:"getTimeReal",value:function(){return(new Date).getTime()}},{key:"clearUploadFileList",value:function(){this.initData(!0),this.watchFileList(this.fileList)}},{key:"diffTime",value:function(e,t){"number"!=typeof e&&(e=e.getTime()),"number"!=typeof t&&(t=t.getTime());var i=t-e,n=Math.floor(i/6e4),r=i%6e4/1e3,a="".concat(r.toFixed(n>0?0:2),"秒");return n>0&&(a="".concat(n,"分").concat(r.toFixed(0),"秒")),a}}])&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}(),ee=function(e){e.preventDefault()},te={id:"upload-mask"},ie={class:"p-[20px]"},ne=["webkitdirectory"],re={class:"mb-[16px] flex justify-between"},ae={key:1,class:"upload-press"},oe={key:2,class:"upload-press"},le={key:3,class:"upload-files-tips"},ue={key:4,class:"uploader-list"},se={class:"th"},ce={class:"td justify-end"},de={class:"uploader-file tr"},fe={class:"td-block"},pe={class:"td !w-[55%] flex"},me=["title"],ve={class:"td"},he={class:"td"},ge={class:"truncate"},ye={key:0},be={class:"td justify-end"},Se={class:"flex justify-end"},we=b({__name:"index",props:{compData:{default:function(){return{path:""}}}},setup:function(e,i){var r=i.expose,a=e,l=v(),s=Q().refreshFilesList,c=null,d=S(),f=S(!1),p=S("paused"),m=S([]),b=S(),k=S(!1),Y=I({totalProgress:0,uploadList:0,sizeUploaded:0,currentSpeed:0,timeRemaining:0,timeElapsed:0,averageSpeed:0,errorNumber:0,successNumber:0,uploadSize:""}),$=new Z({target:"/files?action=upload",uploadPath:a.compData.path||"/www/wwwroot",renewalData:function(e){m.value=t(e)},renewalSpeed:function(e){Y.totalProgress=e.totalProgress,Y.uploadList=e.uploadList,Y.sizeUploaded=e.sizeUploaded,Y.currentSpeed=e.currentSpeed,Y.timeRemaining=e.timeRemaining},renewalStatus:function(e){p.value=e.status,Y.timeElapsed=e.timeElapsed,Y.averageSpeed=e.averageSpeed,Y.uploadSize=e.uploadSize,Y.successNumber=e.successNumber,Y.errorNumber=e.errorNumber}}),V=$.uploadStatusInfo,W=$.initData,we=$.fileUploadLimit,Te=$.cancelFile,ze=j(function(){return!m.value.length}),Fe=j(function(){return!m.value.length}),Le=function(e){return(e.path+"/"+e.name).replace(/\/\//,"/")},xe=function(e){if(e.isFolder)return"folder";var t=e.name.split(".").pop();return["zip","rar","gz","tar","war","tgz","bz2","7z","tar.gz"].includes(t)?"compress":t},ke=function(e){$.isGetFiles=!0,"file"!==e&&h(e)?k.value=!0:k.value=!1,setTimeout(function(){b.value.click()},0)},Ie=function(e){for(var t=e.target.files,i=0;i<t.length;i++){var n="/".concat(""==t[i].webkitRelativePath?t[i].name:t[i].webkitRelativePath);if(!we(t[i],n))return!1}if(!$.isGetFiles)return!1},je=function(e){return"success"===e.status?{transform:"translateX(-0%)"}:{transform:"translateX(-".concat(100-e.progress,"%)")}},_e=function(){if(0===m.value.length)return l.error("请添加需要上传的文件");p.value="uploading",$.useFileUploadExistsConfirm()},Ee=function(){W(),m.value=[],p.value="paused"},Oe=function(){f.value=!0,"success"===p.value&&Ee()},Pe=function(){f.value=!1},Ue=function(e){f.value=!1,$.fileSelectHandler(e,function(e){m.value=e||[]})},Ne=function(){var e=u(n().m(function e(){return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!["uploading","paused"].includes(p.value)||!m.value.length){e.n=2;break}return e.n=1,g({title:"取消上传",width:"35rem",icon:"warning-filled",content:"是否取消上传，取消后将清空上传列表？"});case 1:return s(),e.a(2,!0);case 2:e.n=4;break;case 3:return e.p=3,e.v,e.a(2,!1);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}();return _(function(){var e,t;c=o({},(e={dragenter:Oe,dragleave:Pe,drop:Ue,dragover:function(){}},t=document.querySelector("#upload-mask"),window.addEventListener("dragenter",function(t){ee(t),e.dragenter(t)}),null==t||t.addEventListener("dragenter",function(t){ee(t),e.dragenter(t)}),null==t||t.addEventListener("dragleave",function(t){ee(t),e.dragleave(t)}),null==t||t.addEventListener("dragover",function(t){ee(t),e.dragover(t)}),null==t||t.addEventListener("drop",function(t){ee(t),e.drop(t)}),e))}),E(function(){var e,t;e=c,t=document.querySelector("#upload-mask"),window.removeEventListener("dragenter",e.dragenter),null==t||t.removeEventListener("dragenter",e.dragenter),null==t||t.removeEventListener("dragover",e.dragover),null==t||t.removeEventListener("dragleave",e.dragleave),null==t||t.removeEventListener("drop",e.drop)}),r({onCancel:Ne}),function(e,i){var n=M,r=B,a=q,o=H,l=X,u=K,s=y;return w(),T("div",{class:"upload-file-view",ref_key:"upload",ref:d},[O(z("div",te,"请将需要上传的文件/文件夹拖到此处",512),[[P,L(f)]]),z("div",ie,[L(p).indexOf("paused")>-1?(w(),T(U,{key:0},[z("input",{type:"file",ref_key:"uploadFileInput",ref:b,webkitdirectory:L(k),onChange:Ie,style:{display:"none"},multiple:""},null,40,ne),z("div",re,[F(a,{"split-button":"",type:"default","show-timeout":50,"hide-timeout":50,onClick:ke,onCommand:ke},{dropdown:N(function(){return[F(r,{class:"w-[10rem]"},{default:N(function(){return[F(n,{command:"file"},{default:N(function(){return t(i[0]||(i[0]=[C("上传文件",-1)]))}),_:1}),F(n,{command:"dir"},{default:N(function(){return t(i[1]||(i[1]=[C("上传文件夹",-1)]))}),_:1})]}),_:1})]}),default:N(function(){return[i[2]||(i[2]=C(" 上传文件 ",-1))]}),_:1}),F(o,{onClick:Ee,disabled:L(ze)},{default:N(function(){return t(i[3]||(i[3]=[C("清空列表",-1)]))}),_:1},8,["disabled"])])],64)):D("",!0),L(p).indexOf("uploading")>-1?(w(),T("div",ae,[z("span",null,"总进度："+G(L(Y).totalProgress)+"%",1),F(l),z("span",null,"正在上传：("+G("".concat(L(Y).uploadList,"/").concat(L(m).length))+")",1),F(l),z("span",null,"上传速度："+G(L(Y).currentSpeed)+"/s",1),F(l),z("span",null,"预计耗时："+G(L(Y).timeRemaining),1)])):D("",!0),L(p).indexOf("success")>-1?(w(),T("div",oe,[z("span",null,"上传大小："+G(L(Y).uploadSize),1),F(l),z("span",null,"共耗时："+G(L(Y).timeElapsed),1),F(l),z("span",null,"平均上传速度："+G(L(Y).averageSpeed)+"/s",1),F(l),z("span",null,"上传成功："+G(L(Y).successNumber)+"个",1),O(F(l,null,null,512),[[P,L(Y).errorNumber>0]]),O(z("span",null,"上传失败："+G(L(Y).errorNumber)+"个",513),[[P,L(Y).errorNumber>0]])])):D("",!0),L(Fe)?(w(),T("div",le,t(i[4]||(i[4]=[z("span",null,"请将需要上传的文件/文件夹拖到此处",-1)])))):(w(),T("div",ue,[z("div",se,[i[5]||(i[5]=z("div",{class:"td !w-[55%]"},"文件名",-1)),i[6]||(i[6]=z("div",{class:"td"},"文件大小",-1)),i[7]||(i[7]=z("div",{class:"td"},"上传状态",-1)),O(z("div",ce,"操作",512),[[P,"success"!==L(p)]])]),z("div",null,[F(L(J),{class:x(["!mb-0 overflow-auto file-upload-list files-list","!h-[400px]"]),items:L(m),"item-size":45,buffer:800,"key-field":"vid"},{default:N(function(e){var n=e.item;return[z("div",de,[z("div",{class:x({"td-progress":!0,error:"error"===n.status,success:"success"===n.status}),style:R(je(n))},null,6),z("div",fe,[z("div",pe,[z("i",{class:x(["icon-bg","".concat(xe(n),"-icon")])},null,2),z("span",{class:"flex-1 w-0 ml-[4px] truncate h-[20px] leading-[20px]",title:Le(n)},G(Le(n)),9,me)]),z("div",ve,G(n.size),1),z("div",he,[O(F(u,{effect:"dark",content:"".concat(L(V)(n.status)).concat(n.message?"，".concat(n.message):""),placement:"right","show-after":200},{default:N(function(){return[O(z("span",ge,[C(G(L(V)(n.status))+" ",1),n.message?(w(),T("span",ye," ,"+G(n.message),1)):D("",!0)],512),[[P,"uploading"!==n.status]])]}),_:2},1032,["content"]),[[P,"uploading"!==n.status]]),O(z("span",null,[z("span",null,"上传中("+G(parseInt(n.progress))+"%)",1)],512),[[P,"uploading"===n.status]])]),O(z("div",be,[O(F(s,{onClick:function(e){return L(Te)(n)}},{default:N(function(){return t(i[8]||(i[8]=[C("取消",-1)]))}),_:2},1032,["onClick"]),[[P,L(p).indexOf("paused")>-1]])],512),[[P,"success"!==L(p)]])])])]}),_:1},8,["items"])])])),z("div",Se,[L(p).indexOf("paused")>-1?(w(),A(o,{key:0,type:"primary",onClick:_e},{default:N(function(){return t(i[9]||(i[9]=[C(" 开始上传 ",-1)]))}),_:1})):D("",!0),["success","error"].includes(L(p))?(w(),A(o,{key:1,type:"primary",onClick:Ee},{default:N(function(){return t(i[10]||(i[10]=[C(" 继续上传 ",-1)]))}),_:1})):D("",!0)])])],512)}}});e("default",l(we,[["__scopeId","data-v-f0d14467"]]))}}})}();
