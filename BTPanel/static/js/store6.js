import{u as e,g9 as t,M as o,ga as a,K as i,gb as n,gc as c,gd as s,ge as u,a5 as l,at as r,o as d,cy as p,l as y,L as v,gf as m,gg as f,b as M,R as g,gh as h,gi as I,gj as w,gk as T,gl as b,aW as N,gm as P,gn as C}from"./utils-lib.js?v=1756369731";import{j as L,r as _,t as E,k as D,g as O}from"./base-lib.js?v=1756369731";import{p as A,b as S}from"./validator.js?v=1756369731";const x=L("PRODUCT-PAYMENT-STORE",()=>{const L=_({}),x=_(),B=_(!1),{payment:V,authTypeTitle:R,isUpdatePayment:q,isRefreshSoftList:j,setAuthState:F,authExpirationTime:U,forceLtd:W,aliyunEcsLtd:k}=e(),{authType:H,voucherOpenTime:Y,newUserVoucherOpenTime:G,bindUser:J,isGetCoupon:K}=E(V.value),z=_(!1),Z=_(),$=_(!1),Q=_(!1),X=D({}),ee=_(!0),te=_(!1),oe=D({cycleMode:{activeCycleInfo:{cycle:12},list:[]},numsMode:{list:[],activeNumsInfo:{count:1,price:0,discount:0}},couponMode:{status:!1,activeCouponId:"",activeCouponInfo:{},discountsTitle:"",disabled:!1,count:0,list:[],endTimeNum:0},couponInfo:{[t.pro]:[],[t.ltd]:[],[t.dev]:[]},enterpriseMode:{status:!1,isHidden:!1},devCycleInfo:{isGetOperated:!1,data:{}},voucherMode:{loading:!1,isExist:!1,proTypeList:{},typeActive:0,typeList:{},list:[],active:0,activeInfo:{pid:0,code:""}},payMode:{activePayType:"wechat",activeBuyInfo:{price:0,count:0,cycle:0,originalPrice:0,discount:0},activeBalanceInfo:{},balance:0,activePayCode:{apliy:"",wechat:""},qrcode:{value:"",size:110},payTips:{status:!1,name:"",day:0},isLastBuyRepeat:!1,lastPayTime:0,createOrderTime:[]}}),ae=D({right:!0,left:!1}),ie=_(!1),ne=D({d:"00",h:"00",m:"00",s:"00"});let ce=null,se=null;const ue=D({status:!0,title:"正在获取产品信息，请稍侯..."}),le=D({status:!0,title:"正在生成支付订单，请稍侯..."}),re=_(!1),de=_(!1),pe=_(),ye=_(0),ve=O(()=>"".concat("alipay"===(null==oe?void 0:oe.payMode.activePayType)?"ali":"wechat","-pay.svg")),me=()=>{var e;const t=document.getElementById("list-box"),o=172*oe.cycleMode.list.length;if(null===t)return;const a=t.clientWidth;if(o<a)return;const i=document.getElementById("list"),n=Math.abs(parseInt(null==(e=window.getComputedStyle(i,null))?void 0:e.left,10));n+a-360<a?(i.style.left="0px",ae.right=!0,ae.left=!1):i.style.left="-".concat(n-360,"px")},fe=async e=>{me(),ue.status=!0,oe.enterpriseMode.status=!1;const{ltd:o}=t;switch("string"==typeof e&&(e=X.typeList.find(t=>t.type===e)),X.activeTypeInfo=e,oe.cycleMode.list=[],oe.numsMode.activeNumsInfo.count=1,X.unbindAuthor.status=!1,X.unbindAuthor.count=0,Ze(),e.type){case"coupon":ue.title="正在获取产品抵扣券，请稍侯...",await ze({pid:e.pid}),ue.status=!1,oe.voucherMode.proTypeList[o]&&Je({pid:o,list:oe.voucherMode.proTypeList[o].list});break;case"plugin":case"ltd":case"pro":case"dev":ue.title="正在获取产品信息，请稍侯...",J.value?await Ge(e.pid):(st(e.type),lt(),Be()),ue.status=!1,Me(oe.cycleMode.list[0])}},Me=async(e,t)=>{var o;ut("cycle",e)&&(oe.numsMode.list=e.nums,oe.cycleMode.activeCycleInfo=e,oe.enterpriseMode.isHidden=!("ltd"===(null==X?void 0:X.activeTypeInfo.type)&&12===e.cycle),void 0===t&&!oe.enterpriseMode.isHidden&&oe.enterpriseMode.status&&(oe.enterpriseMode.status=!1),Ze(),(null==(o=e.nums)?void 0:o.length)&&await ge(e.nums[0]))},ge=async e=>{var t,o;if(!ut("nums",e))return;oe.numsMode.activeNumsInfo=e;const a=[],{list:i}=oe.couponMode;if(("pro"===(null==X?void 0:X.activeTypeInfo.type)||"ltd"===(null==X?void 0:X.activeTypeInfo.type))&&i.length>0&&(i.forEach(t=>{Number(t.val1)<=e.price&&a.push(t)}),a.length))return oe.couponMode.status=!0,a.sort((e,t)=>Number(t.val2)-Number(e.val2)),he(null==(t=a[0].id)?void 0:t.toString()),!1;if(!ie.value&&oe.couponMode.count>0){const t=i.filter(t=>Number(t.val1)<=e.price)[0];t||(oe.couponMode.status=!1),ie.value=!0,oe.couponMode.activeCouponId=null==(o=null==t?void 0:t.id)?void 0:o.toString(),oe.couponMode.endTimeNum=Math.floor((null==t?void 0:t.endtime)-Math.floor((new Date).getTime()/1e3))}we()},he=async e=>{if(!e)return oe.couponMode.status=!1,o.error("请选择优惠券");const t=oe.couponMode.list.find(t=>t.id===Number(e))||{};if(t.val1&&Number(t.val1)<=oe.numsMode.activeNumsInfo.price){oe.couponMode.status=!0,oe.couponMode.activeCouponId=e.toString();const t=oe.couponMode.list.find(t=>t.id===Number(e));void 0!==t&&(oe.couponMode.activeCouponInfo=t,oe.couponMode.endTimeNum=Math.floor(t.endtime-Math.floor((new Date).getTime()/1e3)),t.name.indexOf("0.99")>-1?oe.couponMode.discountsTitle=t.name:oe.couponMode.discountsTitle="已使用优惠券，立减".concat(t.val2,"元"))}we()},Ie=_(!1),we=async(e={pid:Number(oe.numsMode.activeNumsInfo.pid),cycle:Number(oe.cycleMode.activeCycleInfo.cycle),source:Number(Z.value),num:Number(oe.numsMode.activeNumsInfo.count),coupon:oe.couponMode.status&&oe.couponMode.activeCouponId||"",get_ali_msg:0,regain:0},s=!0)=>{if(!k.value)try{const u=(new Date).getTime()/1e3;oe.payMode.createOrderTime.push(u),s&&(le.status=!0);const{data:l}=await a(e),{activeTypeInfo:r}=X,{pid:d}=r,{status:p}=oe.enterpriseMode;if(d===t.ltd&&(p&&Number(e.pid)!==t.dev||!p&&Number(e.pid)!==t.ltd)||d!==t.ltd&&Number(e.pid)!==d||Number(oe.numsMode.activeNumsInfo.count)!==e.num||e.cycle!==Number(oe.cycleMode.activeCycleInfo.cycle))return;if("string"==typeof l.data&&"inherit_order"===l.data)return o.msg({message:l.msg,type:"warning"}),await tt(),we();if("string"==typeof l.msg&&-1!==l.msg.indexOf("接口请求失败"))return void o.msg({customClass:"panel-cloud-error",dangerouslyUseHTMLString:!0,message:l.msg,type:"error",duration:0,showClose:!0});const{ali_msg:y,msg:v,extra:m,data:f,is_coupon:M,status_code:g}=l,{cash_fee:h,uid:I}=f;if(oe.payMode.activeBuyInfo=He(h,l),120===g&&m){if(oe.payMode.payTips.name=m.name,"pro"===X.activeTypeInfo.type&&"永久授权"===U.value)return X.unbindAuthor.status=!0,X.unbindAuthor.count=null==m?void 0:m.rest_unbind_count,le.status=!1,at.value={type:null==X?void 0:X.activeTypeInfo.type,typeName:R.value,extra:m},!1;oe.payMode.payTips.status=!0;const e=(new Date(1e3*m.end_time).getTime()-(new Date).getTime())/864e5;oe.payMode.payTips.day=Math.ceil(e)}else oe.payMode.payTips.status=!1;if(M&&M.length>0&&Y.value<(new Date).getTime()/1e3&&100!==Y.value)re.value=!0,xe({isCoupon:M});else if(!de.value&&oe.couponMode.list.length>0&&!$.value&&!re.value){de.value=!0;const{val1:e,val2:t,id:o,pid:a}=oe.couponMode.list[0];he(o)}f.returnTime=u,oe.payMode.activeBalanceInfo=f,oe.payMode.lastPayTime<=0?i({request:n({pid:f.pid}),data:{res:[Number,"buyVerify"]},success:e=>{e&&(oe.payMode.lastPayTime=e.buyVerify,Ne())}}):Ne();const{credits:w}=await i({request:c({uid:I}),data:{res:[Number,"credits"]}});oe.payMode.balance=w/100;const{createOrderTime:T}=oe.payMode;if(T[T.length-1]!==f.returnTime)return!1;le.status=!1,oe.payMode.balance>=oe.payMode.activeBuyInfo.price?oe.payMode.activePayType="balance":oe.payMode.activeBuyInfo.price>=6e3?(Ie.value=!0,oe.payMode.activePayType="wechat"===oe.payMode.activePayType?"alipay":oe.payMode.activePayType):oe.payMode.balance<oe.payMode.activeBuyInfo.price&&(oe.payMode.activeBuyInfo.price<6e3?oe.payMode.activePayType="wechat":oe.payMode.activePayType="alipay"),Ie.value&&oe.payMode.activeBuyInfo.price<6e3&&(oe.payMode.activePayType="wechat",Ie.value=!1),oe.payMode.activePayCode.apliy=y,oe.payMode.activePayCode.wechat=v,oe.payMode.qrcode.value="wechat"===oe.payMode.activePayType?v:y,"ltd"===(null==X?void 0:X.activeTypeInfo.type)&&Ce(oe.numsMode.activeNumsInfo.count),ce&&clearTimeout(ce),"coupon"!==(null==X?void 0:X.activeTypeInfo.type)&&setTimeout(()=>{ee.value=!0,qe((new Date).getTime()/1e3)},5e3),(()=>{const e={cycleMode:oe.cycleMode,numsMode:oe.numsMode,payMode:oe.payMode,typeTab:null==X?void 0:X.activeTypeInfo.type,enterpriseMode:oe.enterpriseMode,couponMode:oe.couponMode};sessionStorage.setItem("PAY-VIEW-INFO",JSON.stringify(e))})()}catch(u){}},Te=_({}),be=_(),Ne=()=>{(new Date).getTime()/1e3-oe.payMode.lastPayTime<1800?oe.payMode.isLastBuyRepeat=!0:oe.payMode.isLastBuyRepeat=!1},Pe=_(0),Ce=async e=>{let t=[];if(oe.devCycleInfo.isGetOperated&&oe.devCycleInfo.data.nums.length)t=oe.devCycleInfo.data.nums;else{const{data:e}=await s({pid:100000068});t=e[12].nums,oe.devCycleInfo.isGetOperated=!0,oe.devCycleInfo.data=e[12]}const o=t.find(t=>t.count===e);o&&(Pe.value=o.price)},Le=_(""),_e=_(!1),Ee=_(Math.floor(Date.now()/1e3)),De=_([]),Oe=_(!1),Ae=_(),Se=_(),xe=async e=>{k.value||(De.value=e.isCoupon,Oe.value=e.isHome||!1,Ae.value=y({area:40,component:()=>v(()=>import("./index311.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),customClass:"voucherFetchView",compData:e,onCancel:()=>{_e.value&&window.location.reload()}}))},Be=async()=>{k.value||V.value.bindUser||(Se.value=y({area:40,component:()=>v(()=>import("./index414.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),customClass:"voucherFetchView"}))},Ve=async(e,t)=>{await Re(),t!==(null==X?void 0:X.activeTypeInfo.type)&&await fe(t),await he(e)},Re=async()=>{k.value||(oe.couponInfo[t.pro]=[],oe.couponInfo[t.ltd]=[],oe.couponInfo[t.dev]=[],J.value&&await i({request:m(),data:{res:[Array,"data"]},success:e=>{const t=(new Date).getTime()/1e3;e.data.forEach(e=>{var o;const a=Math.floor((e.endtime-Math.floor(t))/3600);let i=0;a>24?i=Math.floor(a/24):a>0&&(i=1),e.newName="".concat(e.name,"( ").concat(i,"天后过期)"),null==(o=oe.couponInfo[e.product_id])||o.push(e)}),Ze()}}))},qe=async e=>{try{if(!B.value)return;e&&sessionStorage.setItem("PAY-VIEW-INFO-TIME","".concat(e));const t=sessionStorage.getItem("PAY-VIEW-INFO-TIME");if(t){if(parseInt("".concat((new Date).getTime()/1e3-Number(t)),10)>600&&B.value)return ee.value=!1,sessionStorage.removeItem("PAY-VIEW-INFO-TIME"),d({title:"支付超时",icon:"warning",content:"由于您长时间未操作，支付超时，请刷新网页重新购买！",onConfirm:()=>{$e(),window.location.reload()},onCancel:()=>{$e(),window.location.reload()}});B.value||sessionStorage.removeItem("PAY-VIEW-INFO-TIME")}if(ce&&clearTimeout(ce),"coupon"===(null==X?void 0:X.activeTypeInfo.type)||X.unbindAuthor.status)return;if("balance"===oe.payMode.activePayType)return void(ce=setTimeout(()=>{qe()},4e3));const o=(new Date).getTime()/1e3,{status:a,data:n}=await i({request:f({wxoid:oe.payMode.activeBalanceInfo.wxoid,py_type:"alipay"===oe.payMode.activePayType?"ali":""}),data:{status:[Boolean,"status"],data:[Object,"data"]}});if(n&&["WAIT_BUYER_PAY","TRADE_CLOSED"].includes(n.status)&&(te.value=!0),a)ke();else{const e=(new Date).getTime()/1e3;se=setTimeout(qe,e-o<1?4e3:3e3)}}catch(t){r(t)}},je=()=>{(window.location.pathname.includes("/waf")||W.value)&&window.location.reload()},Fe=async()=>{-1!==window.location.pathname.indexOf("/soft/plugin")&&(q.value=!0,j.value=!0)},Ue=_({}),We=async()=>{const{data:e}=await b({force:1}),{ltd:t,pro:o}=new N(e,{ltd:Number,pro:Number}).exportData();return F([0,o,t]),{ltd:t,pro:o}},ke=async()=>{var e,t,o;try{await Fe(),$e();const a=await We();if("plugin"===(null==(e=null==X?void 0:X.activeTypeInfo)?void 0:e.type))return M().success("".concat(X.activeTypeInfo.title,"支付成功"));const i="dev"===(null==(t=null==X?void 0:X.activeTypeInfo)?void 0:t.type)?"ltd":(null==(o=null==X?void 0:X.activeTypeInfo)?void 0:o.type)||"";Object.assign(Ue.value,{type:X.activeTypeInfo.type,typeTipsList:X.activeTypeInfo.tipsList,cycle:oe.payMode.activeBuyInfo.cycle,count:oe.payMode.activeBuyInfo.count,lastTime:g(a[i]),title:X.activeTypeInfo.title}),y({area:68,component:()=>v(()=>import("./index415.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),je()}catch(a){r(a)}},He=(e,t)=>{const{cycleMode:o,numsMode:a,couponMode:i}=oe,{activeCycleInfo:n}=o,c=n.originalPrice,{activeNumsInfo:s}=a,{activeCouponInfo:u,status:l}=i;let r=e/100,d=n.title||"",p=s.count||0;const y=c*p;return l&&(u.name.includes("0.99")?(r=y-u.val1,d="".concat(u.experimental_interval,"天"),p=1):r=t.price),{price:r,count:p,cycle:d,originalPrice:y,discount:u}},Ye=_(!1),Ge=async e=>{try{Ye.value=!0;const{data:o}=await s({pid:e});Number(o.pid)===t.dev&&(delete o[1],delete o[6],delete o[36],oe.devCycleInfo.isGetOperated=!0,oe.devCycleInfo.data=o[12]);const a=[];for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)){const{price:t,tip:i,sprice:n,nums:c,sort:s}=o[e];if(!isNaN(Number(e))){const o=Number(e)%12==0?"".concat(Number(e)/12,"年"):"".concat(Number(e),"个月");a.push({cycle:Number(e),price:t,recommend:i,originalPrice:n,nums:c,sort:s,title:o,everyDay:(t/Number(e)/30).toFixed(2)})}}a.sort((e,t)=>e.sort-t.sort),oe.cycleMode.list=a}catch(o){r(o)}finally{Ye.value=!1}},Je=e=>{const{list:t,pid:a}=e;return oe.voucherMode.list=t,oe.voucherMode.typeActive=a,t.length?Ke(t[0]):o.warn("暂无可用优惠券")},Ke=e=>{const{id:t,product_id:o,code:a}=e;oe.voucherMode.active=t,oe.voucherMode.activeInfo={pid:o,code:a}},ze=async e=>{oe.voucherMode.typeList={};try{oe.voucherMode.loading=!0;const{data:t}=await h(e);oe.voucherMode.isExist=!(0===t.length),t.forEach(e=>{const{product_id:t,name:o}=e;oe.voucherMode.typeList.hasOwnProperty(t)?oe.voucherMode.typeList[t].list.push(e):oe.voucherMode.typeList[t]={name:o,pid:t,list:[e]}});["100000011","100000032"].reverse().forEach(e=>{if(oe.voucherMode.typeList[e]){const t=oe.voucherMode.typeList[e];oe.voucherMode.proTypeList[e]=t,delete oe.voucherMode.typeList[e]}})}catch(t){r(t)}finally{oe.voucherMode.loading=!1}},Ze=()=>{var e;const{type:o,pid:a}=X.activeTypeInfo;if(["plugin","coupon"].includes(o))oe.couponMode.count=0,oe.couponMode.list=[];else{let i=a;oe.enterpriseMode.status&&"ltd"===o&&(i=t.dev),oe.couponMode.count=(null==(e=oe.couponInfo[i])?void 0:e.length)||0,oe.couponMode.list=oe.couponInfo[i]}oe.couponMode={status:!1,activeCouponId:"",activeCouponInfo:{},discountsTitle:"",count:oe.couponMode.count,list:oe.couponMode.list,disabled:!oe.couponMode.count,endTimeNum:0},oe.couponMode.count<=0&&(oe.couponMode.disabled=!0,oe.couponMode.status=!1)},$e=async()=>{window.onbeforeunload=()=>{},rt(),x.value("close")},Qe=_(),Xe=_(!1),et=_([{type:"wechat",title:"微信扫码支付"},{type:"alipay",title:"支付宝扫码支付"},{type:"balance",title:"余额支付"},{type:"accounts",title:"对公转账"}]),tt=async()=>{var e;try{await We()&&(o.request({msg:"刷新成功",status:!0}),(null==(e=null==X?void 0:X.activeTypeInfo)?void 0:e.type)&&fe(X.activeTypeInfo.type))}catch(t){r(t)}},ot=_(!1),at=_({}),it=_(!1),nt=_(),ct=e=>{at.value=e,nt.value=y({area:[32,29],component:()=>v(()=>import("./index417.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},st=e=>{oe.cycleMode.list="dev"===e?[{cycle:12,price:5999,recommend:!1,originalPrice:12e3,nums:[{count:1,price:-1,discount:0},{count:3,price:-1,discount:0},{count:5,price:-1,discount:0},{count:10,price:-1,discount:0},{count:20,price:-1,discount:0},{count:50,price:-1,discount:0},{count:100,price:-1,discount:0}],sort:1,title:"1年",everyDay:"16.66"}]:[{cycle:12,price:1399,recommend:!1,originalPrice:3588,nums:[{count:1,price:-1,discount:0},{count:3,price:-1,discount:0},{count:5,price:-1,discount:0},{count:10,price:-1,discount:0},{count:20,price:-1,discount:0},{count:50,price:-1,discount:0},{count:100,price:-1,discount:0}],sort:1,title:"1年",everyDay:"3.89"},{cycle:36,price:2999,recommend:!1,originalPrice:10764,nums:[{count:1,price:-1,discount:0},{count:3,price:-1,discount:0},{count:5,price:-1,discount:0},{count:10,price:-1,discount:0},{count:20,price:-1,discount:0},{count:50,price:-1,discount:0},{count:100,price:-1,discount:0}],sort:2,title:"3年",everyDay:"2.78"},{cycle:6,price:999,recommend:!1,originalPrice:1794,nums:[{count:1,price:-1,discount:0},{count:3,price:-1,discount:0},{count:5,price:-1,discount:0},{count:10,price:-1,discount:0},{count:20,price:-1,discount:0},{count:50,price:-1,discount:0},{count:100,price:-1,discount:0}],sort:3,title:"6个月",everyDay:"5.55"},{cycle:1,price:599,recommend:!1,originalPrice:599,nums:[{count:1,price:-1,discount:0},{count:3,price:-1,discount:0},{count:5,price:-1,discount:0},{count:10,price:-1,discount:0},{count:20,price:-1,discount:0},{count:50,price:-1,discount:0},{count:100,price:-1,discount:0}],sort:4,title:"1个月",everyDay:"19.97"}]},ut=(e,t)=>!(!J.value&&("nums"===e&&1!==t.count||"cycle"===e&&12!==t.cycle))||(S(),!1),lt=()=>{let e=Number(sessionStorage.getItem("PAYMENT-NEW-COUPON-TIME"));(!e||e<(new Date).getTime())&&(e=(new Date).getTime()+6e5,sessionStorage.setItem("PAYMENT-NEW-COUPON-TIME",e.toString())),ye.value=e},rt=()=>{Ie.value=!1,B.value=!1,te.value=!1,se&&clearTimeout(se),ce&&clearTimeout(ce),pe.value&&clearInterval(pe.value)};return{voucherFetchInstance:Ae,openNewUserVoucherFetchViewDialog:Be,compData:L,isRemarksLoading:Xe,productPriceLoading:Ye,isPlugin:z,productInfo:X,product:oe,enterprise:Pe,tabLoading:ue,iSwitch:ae,countDown:ne,switchLeft:me,switchRight:()=>{const e=document.getElementById("list-box"),t=172*oe.cycleMode.list.length,o=e.clientWidth;if(t<o)return;const a=document.getElementById("list"),i=Math.abs(parseInt(window.getComputedStyle(a,null).left,10));i+o+360>t?(a.style.left="-".concat(t-o,"px"),ae.right=!1,ae.left=!0):a.style.left="-".concat(i+360,"px")},changeTypeTabEvent:fe,changeCycleTabEvent:Me,changeNumsTabEvent:ge,enterpriseEvent:e=>{oe.enterpriseMode.status=Boolean(e),e?Me({cycle:12,price:oe.devCycleInfo.data.price,recommend:!1,originalPrice:oe.devCycleInfo.data.sprice,nums:oe.devCycleInfo.data.nums,sort:0,title:"1年",everyDay:(oe.devCycleInfo.data.price/12/30).toFixed(2)},"dev"):Me(oe.cycleMode.list[0])},changeCouponBoxEvent:e=>{const{status:t,count:a,activeCouponId:i}=oe.couponMode;if(0===a)return oe.couponMode.status=!1,o.warn("暂无可用优惠券");if(oe.couponMode.status=void 0!==e?Boolean(e):!t,""!==i&&oe.couponMode.status)he(i);else if(""===i&&oe.couponMode.status)return o.request({msg:"请选择优惠券",status:!1}),oe.couponMode.status=!1,!1;we()},changeCouponEvent:he,openPrivilegeContrast:()=>{Qe.value=y({area:[97,75],component:()=>v(()=>import("./index416.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},newUserVoucherFetchInstance:Se,newUserVoucherEndTime:ye,scanned:te,bindUser:J,paymentLoading:le,payList:et,changePayTypeEvent:async e=>{switch(te.value=!1,e.type){case"wechat":if(oe&&(null==oe?void 0:oe.payMode.activeBuyInfo.price)>=6e3)return o.warn("刷新支付金额已超过微信单笔支付额度，请选择其他支付方式"),!1;oe.payMode.qrcode.value=oe.payMode.activePayCode.wechat;break;case"alipay":""===oe.payMode.activePayCode.apliy||e.isRegain?(await we({pid:Number(oe.numsMode.activeNumsInfo.pid),cycle:Number(oe.cycleMode.activeCycleInfo.cycle),source:Number(Z.value),num:Number(oe.numsMode.activeNumsInfo.count),coupon:oe.couponMode.status&&oe.couponMode.activeCouponId||"",get_ali_msg:1,regain:e.isRegain?1:0},!0),oe.payMode.qrcode.value=oe.payMode.activePayCode.apliy,te.value=!1):oe.payMode.qrcode.value=oe.payMode.activePayCode.apliy}oe.payMode.activePayType=e.type},paySuccessData:Ue,openBuySuccessView:ke,changeBalanceBuyEvent:async()=>{var e,t,a,n,c,s,u,l;await i({loading:"正在支付中...",request:I({num:Number(null==(t=null==(e=null==oe?void 0:oe.numsMode)?void 0:e.activeNumsInfo)?void 0:t.count),cycle:Number(null==(n=null==(a=null==oe?void 0:oe.cycleMode)?void 0:a.activeCycleInfo)?void 0:n.cycle),uid:Number(null==(s=null==(c=null==oe?void 0:oe.payMode)?void 0:c.activeBalanceInfo)?void 0:s.uid),pid:Number(null==(l=null==(u=null==oe?void 0:oe.payMode)?void 0:u.activeBalanceInfo)?void 0:l.pid),coupon:oe.couponMode.status&&oe.couponMode.activeCouponId||""}),data:{res:String,success:Boolean},success:e=>{o.request({msg:e.res,status:e.success}),e.success&&ke()}})},changeRefreshAuthor:tt,couponItem:De,closeAfterReload:_e,timeClose:Le,siteList:[{label:"今日内不再提醒",value:"today"},{label:"近7天内不再提醒",value:"week"},{label:"永久不再提醒",value:"forver"}],timeNow:Ee,addZero:e=>e<10?"0".concat(e):"".concat(e),claimCouponEvent:async e=>{try{const{data:t}=await u();if(K.value=!0,l(null==t?void 0:t.status)&&0===(null==t?void 0:t.status))return o.request({msg:t.msg,status:!1}),void(_e.value=!0);const a={100000011:"pro",100000032:"ltd",100000068:"dev"}[t.data[0].pid],{id:i}=t.data[0];o.request({msg:t.msg,status:!0});const n=await Ae.value;if(null==n||n.unmount(),e&&"function"==typeof e&&e(),Oe.value)return await A({disablePro:"pro"!==a,sourceId:176,isHomeBubble:{id:i,pro:a}}),!1;await Ve(i,a)}catch(t){r(t)}},changeCloseTimeEvent:async(e,t=!0)=>{let a=0,i="";switch(Le.value=e,Le.value){case"today":a=new Date((new Date).toLocaleDateString()).getTime()+864e5-1,i="今日内不再通知";break;case"week":a=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1,i="近7天内不再通知";break;case"forver":a=-100,i="永久不再通知"}if(a=Math.floor(a>0?a/1e3:a),t&&await d({title:"提示",content:"".concat(i,",是否确认?")}),Oe.value)Y.value=a,sessionStorage.setItem("voucherOpenTime",Y.value.toString());else try{const e=await p({limit_time:a});t&&o.request(e)}catch(c){r(c)}const n=await Ae.value;null==n||n.unmount(),K.value=!0},couponCompData:Te,changeVoucher:async()=>{he(Te.value.id);const e=await be.value;null==e||e.unmount()},activePayIcon:ve,voucherLoading:ot,getVoucherCycleDescribe:(e,t)=>"month"===t?e%12?"".concat(e,"个月"):"".concat(e/12,"年"):"".concat(e+("year"===t?"年":"天")),useChangeVoucher:async()=>{if(ot.value=!0,""===(null==oe?void 0:oe.voucherMode.activeInfo.code))return o.warn("请选择抵扣券");const{status:e,extra:t,statusCode:a,msg:n}=await i({loading:"正在使用抵扣券，请稍侯...",request:w({pid:Number(null==oe?void 0:oe.voucherMode.activeInfo.pid),code:(null==oe?void 0:oe.voucherMode.activeInfo.code)||""}),data:{extra:[Object,"extra"],status:Boolean,status_code:[Number,"statusCode"],msg:String}});ot.value=!1,e?(await We(),o.request({msg:n,status:e}),Fe(),$e(),je()):120!==a||e?o.request({msg:n,status:e}):(ot.value=!1,ct({type:null==X?void 0:X.activeTypeInfo.type,typeName:R.value,extra:t}))},changeVoucherEvent:Ke,changeVoucherTypeEvent:Je,refreshSoftEvent:Fe,isDisabledAuth:it,authType:H,bindAuthData:at,changeUnbindAuthor:async(e=!1)=>{if(at.value.extra.rest_unbind_count>0)try{await d({title:"提示",content:"解绑当前【".concat(R.value,"授权】，继续操作！")}),it.value=!0;const{data:a}=await T();if(o.request({msg:a.res,status:a.success}),a.success){await We(),e?setTimeout(()=>{fe(X.activeTypeInfo.type)},500):await ze({pid:t.coupon}),Fe();const o=await nt.value;null==o||o.unmount()}}catch(a){}finally{it.value=!1}else window.open("https://www.bt.cn/admin/profe_ee","_blank","noopener,noreferrer")},privilegeList:["多对一技术支持","全年5次安全排查","5分钟极速响应","30+款付费插件","20+企业版专享功能","1000条免费短信（年付）","2张SSL商用证书（年付）","一对一服务（年付）","WAF防火墙","更换授权IP","客服优先响应","15+款付费插件","15天无理由退款"],proPrivilegeList:[0,0,0,0,0,0,0,0,1,1,1,1,1],ltdPrivilegeList:[0,0,1,1,1,1,1,1,1,1,1,1,1],plusPrivilegeList:[1,1,1,1,1,1,1,1,1,1,1,1,1],go2tab:async e=>{fe(e);const t=await Qe.value;null==t||t.unmount()},emits:x,onCancel:async()=>k.value?(We(),$e(),!1):J.value?(await d({title:"温馨提示",content:'支付过程中，请勿关闭该页面，以免出现支付异常！<br><a\n\t\t\t\tclass="bt-link text-[1.2rem]"\n\t\t\t\thref="https://www.bt.cn/new/wechat_customer"\n\t\t\t\ttarget="_blank"\n\t\t\t\trel="noreferrer noopener"\n\t\t\t\t>支付遇到问题？联系客服</a\n\t\t\t>',isHtml:!0,width:"40rem"}),$e(),!1):($e(),!1),init:async e=>{e&&(L.value=e),B.value=!0,(()=>{const{pluginInfo:e,disablePro:o}=L.value;z.value=!!e,Z.value=L.value.sourceId,Q.value=o,$.value=L.value.isHomeBubble,Object.assign(X,{typeList:[{type:"plugin",title:z.value?e.title:"插件",describe:z.value?8===e.type?"【专业版】已包含此插件":"【企业版】已包含此插件":"",pid:z.value?e.pid:0,isHidden:!z.value,tipsTitle:"插件说明",tipsList:[]},{type:"pro",title:"".concat(C,"专业版"),describe:"适用于个人用户、个人项目",pid:t.pro,isHidden:o,tipsTitle:"专业版特权",tipsList:[]},{type:"ltd",title:"".concat(C,"企业版"),describe:"适用于官网，电商、教育、医疗等用户",pid:t.ltd,recommend:!0,tipsTitle:"企业版特权",tipsList:[]},{type:"dev",title:"企业运维托管",describe:"适用于无专业技术、需技术服务的企业",pid:t.dev,tipsTitle:"企业运维托管特权",isHidden:z.value,tipsList:["网站性能优化","网站安全扫描","网站攻击防护","服务器运维托管","企业版所有特权","文件防篡改配置","文件代码同步部署","系统文件垃圾清理","数据库数据同步部署","50x/40x网站报错处理","CPU内存占用过高处理"]},{type:"coupon",title:"抵扣券",describe:"抵扣券授权",pid:t.coupon,tipsTitle:"抵扣券来源",tipsList:["官网后台购买","活动页购买","推广赠送","更换绑定IP"]}],activityList:"",activeTypeInfo:{type:"pro",describe:"",title:"",pid:0,recommend:!1,tipsTitle:"",tipsList:[]},unbindAuthor:{status:!1,count:0}})})(),(async()=>{let e=sessionStorage.getItem("PAY-VIEW-INFO-REMARKS");e||await i({loading:Xe,request:P(),data:{pro_list:[Array,"pro"],list:[Array,"ltd"],vip_pro_list:[Array,"vip_pro_list"],activity_list:[Array,"activityList"]},success:t=>{e=JSON.stringify(t),sessionStorage.setItem("PAY-VIEW-INFO-REMARKS",e)}});const t=JSON.parse(e);Xe.value=!1;const{pro:o,ltd:a,vip_pro_list:n,activityList:c}=t;X.typeList[1].tipsList=o,X.typeList[2].tipsList=a,X.typeList[3].tipsList=n,(new DOMParser).parseFromString(c,"text/xml"),X.activityList=c||"",X.activeTypeInfo=X.typeList.find(e=>e.type===X.activeTypeInfo.type),Re()})(),Xe.value=!0;let o=(()=>{if(k.value)return"dev";let e="free"===H.value?"ltd":H.value;return Q.value||"ltd"===e||(e="pro"),e})();var a;const n=((e,t)=>null==t?void 0:t.some(t=>t.type===e))(o,null==(a=null==X?void 0:X.typeList)?void 0:a.filter(e=>!0!==(null==e?void 0:e.isHidden)));n||(o="ltd"),await fe(o),(async()=>{if($.value&&Object.keys($.value).length>0&&"object"==typeof $.value){const{id:e,pro:t}=$.value;await Ve(e,t)}})(),V.value.bindUser&&(window.onbeforeunload=()=>"是否要离开")},$reset:rt}});export{x as P};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
