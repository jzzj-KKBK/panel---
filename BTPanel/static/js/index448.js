import{c as l,K as s,al as a,b as e,W as n}from"./utils-lib.js?v=1756369731";import{B as o}from"./index140.js?v=1756369731";import{c as t,r,e as i,B as u,F as m,p as d,G as p,q as c,v as g,x as v,P as f,y as x,A as j,H as y,M as L,C as b,D as _}from"./base-lib.js?v=1756369731";import{u as C,S as V}from"./useStore4.js?v=1756369731";import{getSiteAccessLogs as z,getSiteErrorLog as h,getProjectLog as k,getSetupLog as q}from"./site.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./ace.js?v=1756369731";const B={class:"h-full"},E={class:"mt-1rem"},N=t({__name:"index",setup(t){const N=e(),{siteInfo:S}=C(),{jumpTabEvent:w}=V(),H=r(!1),M=r("nginxLogs"),U=r(""),A=r([{label:"Nginx日志",name:"nginxLogs",lazy:!0,render:()=>i("span",null,null)},{label:"Nginx错误日志",name:"nginxErrorLogs",lazy:!0,render:()=>i("span",null,null)},{label:"项目日志",name:"projectLogs",lazy:!0,render:()=>i("span",null,null)},{label:"依赖安装日志",name:"installLogs",lazy:!0,render:()=>i("span",null,null)}]),D=[{content:i(m,null,[i("div",{class:"flex items-center"},[u("若依赖安装出现问题，可以前往 "),i(l,{onClick:()=>w("composer")},{default:()=>[u("Composer")]}),u(" 自定义安装")])])}],F=async(l=!1)=>{const{name:a}=S.value,e=new Map([["nginxLogs",z],["nginxErrorLogs",h],["projectLogs",k],["installLogs",q]]).get(M.value),n={projectLogs:{sitename:a},installLogs:{sitename:a,type:"install"},default:{siteName:a}},o=n[M.value]||n.default;e&&s({loading:H,request:e(o),success:s=>{var a,e;U.value=(null==(a=null==s?void 0:s.data)?void 0:a.data)||(null==(e=null==s?void 0:s.data)?void 0:e.msg)||s.msg,l&&N.success("刷新成功")}})},G=l=>{M.value=l,F()};return d(()=>F()),(l,s)=>{const e=a,t=_,r=o,m=n,d=p("bt-loading");return c(),g("div",null,[i(e,{type:"card",modelValue:v(M),"onUpdate:modelValue":s[0]||(s[0]=l=>f(M)?M.value=l:null),options:v(A),onChange:G},null,8,["modelValue","options"]),x("div",B,[i(t,{type:"primary",onClick:s[1]||(s[1]=l=>F(!0))},{default:j(()=>[...s[3]||(s[3]=[u("刷新日志",-1)])]),_:1}),x("div",E,[y(i(r,{class:"!h-[40rem] !w-full",modelValue:v(U),"onUpdate:modelValue":s[2]||(s[2]=l=>f(U)?U.value=l:null),id:"configContent",request:!1,isScrollBottom:!0,editorOption:{readonly:!0}},null,8,["modelValue"]),[[d,v(H)]])]),"installLogs"===v(M)?(c(),L(m,{key:0,class:"px-2rem",options:D})):b("",!0)])])}}});export{N as default};
