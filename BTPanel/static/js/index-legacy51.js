!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["search"];function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.toStringTag||"@@toStringTag";function i(n,o,a,u){var i=o&&o.prototype instanceof c?o:c,s=Object.create(i.prototype);return r(s,"_invoke",function(n,r,o){var a,u,i,c=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,u=0,i=e,p.n=n,l}};function m(n,r){for(u=n,i=r,t=0;!f&&c&&!o&&t<s.length;t++){var o,a=s[t],m=p.p,y=a[2];n>3?(o=y===r)&&(i=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(u=0,p.v=r,p.n=a[1]):m<y&&(o=n<3||a[0]>r||r>y)&&(a[4]=n,a[5]=r,p.n=y,u=0))}if(o||n>1)return l;throw f=!0,r}return function(o,s,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,y),u=s,i=y;(t=u<2?e:i)||!f;){a||(u?u<3?(u>1&&(p.n=-1),m(u,i)):p.n=i:p.v=i);try{if(c=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(f=p.n<0)?i:n.call(r,p))!==l)break}catch(t){a=e,u=1,i=t}finally{c=1}}return{value:t,done:f}}}(n,a,u),!0),s}var l={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(r(t={},a,function(){return this}),t),m=f.prototype=c.prototype=Object.create(p);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,r(m,"constructor",f),r(f,"constructor",s),s.displayName="GeneratorFunction",r(f,u,"GeneratorFunction"),r(m),r(m,u,"Generator"),r(m,a,function(){return this}),r(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:y}})()}function r(e,t,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,t,n,o){function u(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},r(e,t,n,o)}function o(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function i(e){o(u,r,a,i,l,"next",e)}function l(e){o(u,r,a,i,l,"throw",e)}i(void 0)})}}function u(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./useStore-legacy6.js?v=1756369731","./index-legacy323.js?v=1756369731","./index-legacy103.js?v=1756369731","./useController-legacy8.js?v=1756369731","./index-legacy123.js?v=1756369731","./index-legacy116.js?v=1756369731","./validator-legacy.js?v=1756369731"],function(e,r){"use strict";var o,i,l,s,f,p,m,y,d,v,g,b,h,w,S,x,O,_,j,V,k,C,L,P,A,D,T,E,W,F,M,N,R,U,G,H,I,J,z,B,K,Y,q,$,Q,X,Z;return{setters:[function(e){o=e.u,i=e.a6,l=e.c_,s=e.a7,f=e.$,p=e.J,m=e.K,y=e.l,d=e.L,v=e.o,g=e.ag,b=e.al,h=e.e},function(e){w=e.c,S=e.q,x=e.M,O=e.A,_=e.e,j=e.B,V=e.x,k=e.D,C=e.s,L=e.G,P=e.v,A=e.y,D=e.C,T=e.H,E=e.K,W=e.al,F=e.aQ,M=e.T,N=e.b6,R=e.r,U=e.p,G=e.P},function(e){H=e.L,I=e.p},function(e){J=e.u,z=e.A},function(e){B=e._},function(e){K=e.L,Y=e.u,q=e.d,$=e.a},function(e){Q=e._},function(e){X=e._},function(e){Z=e.p}],execute:function(){var ee=w({__name:"index",setup:function(e,n){var r=n.expose;o();var a=K(),f=a.getOperateLog,p=a.outLogs,m=Y().isRefreshList,y=i({request:function(e){var n=e.search,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,t);return f(c(c({keywords:n},r),{},{stype:"网站管理"}))},columns:[{label:"用户",prop:"username",width:180},{label:"操作类型",prop:"type",width:100},{label:"详情",render:function(e){var t=(new DOMParser).parseFromString(e.log,"text/html");return _("span",{innerHTML:l(t.body.innerHTML)},null)}},{label:"操作时间",width:150,prop:"addtime",align:"right"}],extension:[s(m)]}),d=y.BtTable,v=y.BtPage,g=y.BtSearch,b=y.BtRefresh;return r({init:y.refresh}),function(e,t){var n=k,r=B;return S(),x(r,null,{"header-left":O(function(){return[_(n,{onClick:V(p)},{default:O(function(){return u(t[0]||(t[0]=[j("导出日志",-1)]))}),_:1},8,["onClick"])]}),"header-right":O(function(){return[_(V(g),{class:"mr-1rem !w-[24rem]",placeholder:"请输入搜索关键字"}),_(V(b))]}),content:O(function(){return[_(V(d))]}),"footer-right":O(function(){return[_(V(v))]}),_:1})}}}),te={class:"flex flex-col"},ne={class:"flex items-center justify-end mb-[12px]"},re={class:"flex justify-between w-full flex-wrap"},oe={class:"flex items-center"},ae={class:"pl-[1rem] mr-[8px]"},ue={class:"flex items-center mt-4px"},ie={class:"ml-1rem"},le=w({__name:"index",setup:function(e,t){var n=t.expose,r=o().mainHeight,a=K(),i=C(a),l=i.logParams,c=i.logMsg,s=i.preLoading,m=[{label:"运行日志",value:"access"},{label:"异常日志",value:"error"}];return n({init:function(){return He("WebLogs")}}),function(e,t){var n=k,o=W,a=F,i=M,y=f,d=N,v=p,g=Q,b=L("bt-loading");return S(),P("div",te,[A("div",ne,[A("div",re,[A("div",oe,[_(n,{type:"default",onClick:V(Fe)},{default:O(function(){return u(t[6]||(t[6]=[j(" 清理日志 ",-1)]))}),_:1},8,["onClick"]),_(n,{type:"default",class:"!mr-[8px]",onClick:V(Me)},{default:O(function(){return u(t[7]||(t[7]=[j(" 导出日志 ",-1)]))}),_:1},8,["onClick"]),_(o,{modelValue:V(l).keywordSwitch,"onUpdate:modelValue":t[0]||(t[0]=function(e){return V(l).keywordSwitch=e}),width:36,onChange:V(Ue)},null,8,["modelValue","onChange"]),A("span",ae,[_(a,{content:"点击开启日志关键词告警",placement:"top"},{default:O(function(){return u(t[8]||(t[8]=[A("span",null,[A("span",{class:"lt-xl:hidden"},"关键词"),j("告警 ")],-1)]))}),_:1}),A("span",{class:"cursor-pointer text-primary",onClick:t[1]||(t[1]=function(){return V(Re)&&V(Re).apply(void 0,arguments)})}," [配置] ")]),"access"===V(l).typeValue?(S(),x(i,{key:0,modelValue:V(l).ipArea,"onUpdate:modelValue":t[2]||(t[2]=function(e){return V(l).ipArea=e}),class:"pr-[2rem]",onChange:V(Ge)},{default:O(function(){return u(t[9]||(t[9]=[A("div",{class:"flex items-center"},[A("span",{class:"text-[1.2rem]"},"显示IP归属地"),A("i",{class:"svgtofont-icon-ltd text-[#9F834F] !text-[2rem]"})],-1)]))}),_:1},8,["modelValue","onChange"])):D("",!0)]),A("div",ue,[_(y,{type:"button",size:"default",class:"mr-1rem",modelValue:V(l).typeValue,"onUpdate:modelValue":t[3]||(t[3]=function(e){return V(l).typeValue=e}),onChange:V(Ne),options:m},null,8,["modelValue","onChange"]),_(d,{modelValue:V(l).timeValue,"onUpdate:modelValue":t[4]||(t[4]=function(e){return V(l).timeValue=e}),format:"YYYY/MM/DD","value-format":"x",onChange:V(Ne),type:"daterange","range-separator":"-","disabled-date":V(We),"start-placeholder":"开始",class:"!lt-xl:w-[12rem] !at-lg:w-[12rem] !at-xl:w-[12rem] !w-[20rem]","end-placeholder":"结束"},null,8,["modelValue","onChange","disabled-date"]),A("div",ie,[_(v,{class:"!lt-xl:w-[16rem] !w-[24rem]",modelValue:V(l).searchValue,"onUpdate:modelValue":t[5]||(t[5]=function(e){return V(l).searchValue=e}),placeholder:"请输入搜索关键字",onSearch:V(Ne)},null,8,["modelValue","onSearch"])]),_(g,{class:"ml-1rem",onRefresh:V(Ne)},null,8,["onRefresh"])])])]),T(_(X,{content:V(c),isHtml:!0,autoScroll:!0,fullScreen:{title:"全屏查看-日志",onRefresh:function(){return V(He)("WebLogs")}},style:E("height:"+(V(r)-292)+"px;min-height:400px;")},null,8,["content","fullScreen","style"]),[[b,V(s)]])])}}}),ce=C(H()),se=ce.selectedWebSite,fe=(ce.webTabActive,ce.outDataForm),pe=ce.configData,me=K(),ye=me.clearWebLogEvent,de=(me.outWebLogEvent,me.setKeyWordConfigEvent),ve=me.onConfirmKeyConfig,ge=me.getKeywordAlarmData,be=me.delLogSourceEvent,he=me.sendSourceConfirm,we=me.getLogSystemSite,Se=me.getSiteLogsData,xe=me.logSystemConfirm,Oe=Y(),_e=Oe.logParams,je=Oe.isRefreshLogSystem,Ve=Oe.isRefreshList,ke=Oe.logSystemList,Ce=o().payment,Le=J(),Pe=Le.isRefreshList,Ae=Le.routeData,De=[{label:"网站日志",name:"WebLogs",lazy:!0,render:function(){return _(le,null,null)}},{label:"操作日志",name:"OperateLog",lazy:!0,render:function(){return _(ee,null,null)}},{label:"web日志分析",name:"WebLogAnalysis",lazy:!0,render:function(){return _(z,null,null)}}],Te=e("a",R([])),Ee=function(){var e=a(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m({loading:"正在获取网站列表，请稍后...",request:I(),data:{msg:Array}});case 1:if(t=e.v,r=t.msg,!Array.isArray(r)){e.n=2;break}return se.value=Array.isArray(r)&&r[0]||"",Te.value=r.map(function(e){return{label:e,value:e}}),e.a(2,r);case 2:return Te.value=[],e.a(2,[])}},e)}));return function(){return e.apply(this,arguments)}}(),We=function(e){return e.getTime()>Date.now()},Fe=function(){var e;y({title:"清理【"+se.value+"】网站日志",area:44,component:function(){return d(function(){return r.import("./index-legacy321.js?v=1756369731")},void 0,r.meta.url)},compData:{tips:"清理相关日志可能会导致故障排查困难，请谨慎操作",type:"website",clearEvent:(e=a(n().m(function e(t,r){var o,a;return n().w(function(e){for(;;)switch(e.n){case 0:return o=q(t),e.n=1,ye(o,r);case 1:return a=e.v,Ne(),e.a(2,a.status)}},e)})),function(t,n){return e.apply(this,arguments)})},showFooter:!0})},Me=function(){fe.value.type=H().getType("website"),pe.value={type:"website"},y({title:"导出日志",area:44,component:function(){return d(function(){return r.import("./index-legacy278.js?v=1756369731")},void 0,r.meta.url)},showFooter:!0,compData:{type:"website"}})},Ne=function(){var e=function(){var e={ip_area:_e.value.ipArea?1:0,siteName:se.value,search:_e.value.searchValue};return _e.value.timeValue&&(_e.value.timeValue[0]=new Date(_e.value.timeValue[0]).setHours(0,0,0,0),_e.value.timeValue[1]=new Date(_e.value.timeValue[1]).setHours(23,59,59,0),e.time_search=JSON.stringify([_e.value.timeValue[0]/1e3,_e.value.timeValue[1]/1e3])),_e.value.searchValue||delete e.search,e}();Se(e),"error"!==_e.value.typeValue&&ge()},Re=function(){y({title:"关键字告警配置",area:62,component:function(){return d(function(){return r.import("./keyword-config-legacy.js?v=1756369731")},void 0,r.meta.url)},showFooter:!0})},Ue=function(){var e=a(n().m(function e(t){var r,o,a;return n().w(function(e){for(;;)switch(e.n){case 0:if((r=_e.value.keywordConfig).keys.length&&r.channel&&r.cycle||!t){e.n=1;break}return _e.value.keywordSwitch=!t,Re(),e.a(2);case 1:return o={sitename:se.value},t&&(o.cycle=_e.value.keywordConfig.cycle,o.keys=JSON.stringify(_e.value.keywordConfig.keys),o.channel=_e.value.keywordConfig.channel),e.n=2,de(o);case 2:a=e.v,a.status&&(_e.value.keywordSwitch=t);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ge=function(e){if("ltd"!==Ce.value.authType)return _e.value.ipArea=!e,Z({sourceId:107});Ne()},He=(e("c",function(){var e=a(n().m(function e(t,r,o){var a,u;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r();case 1:return a={cycle:t.value.cycle,channel:t.value.give.join(","),keys:JSON.stringify(t.value.keyword.split(","))},e.n=2,ve(a);case 2:return u=e.v,ge(),e.a(2,u.status);case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t,n,r){return e.apply(this,arguments)}}()),e("d",function(){var e=a(n().m(function e(t){var r;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,v({title:"删除【"+t.site_name+"】日志源",icon:"warning-filled",content:"是否删除【"+t.site_name+"】?"});case 1:return r={server_id:t.server.id,source_type:t.source_type,source_list:JSON.stringify([t.site_name])},e.n=2,be(r);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),e("s",function(){var e=a(n().m(function e(t){var r,o,a,u;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=ke.value.length>0,o={server_data:JSON.stringify({ip:t.ip,port:t.port})},r?o.server_id=null===(a=ke.value[0])||void 0===a?void 0:a.id:o.server_type="bt_log_server",e.n=1,xe(o);case 1:return(u=e.v).status&&we(),e.a(2,u.status);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),e("b",function(){var e=a(n().m(function e(t){var r,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r={server_id:t.server_id,source_type:"site",source_list:JSON.stringify(t.site)},e.n=1,he(r);case 1:return o=e.v,je.value=!0,e.a(2,o.status);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),function(e){"WebLogs"===e?Ne():"WebLogAnalysis"===e?(Pe.value=!0,Ae.value.name=se.value):Ve.value=!0}),Ie={class:"flex items-center mb-[20px]"},Je={key:0},ze=w({__name:"index",setup:function(e){var t=C(H()),o=t.selectedWebSite,i=t.webTabActive,l=function(){y({title:"日志服务系统",area:60,component:function(){return d(function(){return r.import("./index-legacy322.js?v=1756369731")},void 0,r.meta.url)}})};return U(a(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ee();case 1:"WebLogs"===i.value&&Ne();case 2:return e.a(2)}},e)}))),function(e,t){var n=g,r=k,a=b;return S(),P("div",null,[A("div",Ie,[t[6]||(t[6]=j(" 网站： ",-1)),_(n,{modelValue:V(o),"onUpdate:modelValue":t[0]||(t[0]=function(e){return G(o)?o.value=e:null}),options:V(Te),onChange:t[1]||(t[1]=function(e){return V(He)(V(i))}),placeholder:"请选择网站",class:"!w-[22rem]",filterable:""},null,8,["modelValue","options"]),"WebLogs"===V(i)?(S(),P("div",Je,[_(r,{class:"!ml-12px",onClick:l},{default:O(function(){return u(t[4]||(t[4]=[j(" 日志服务系统 ",-1)]))}),_:1})])):D("",!0),A("div",{class:"flex items-center ml-[16px]",onClick:t[2]||(t[2]=function(e){return V($)()})},u(t[5]||(t[5]=[A("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),A("span",{class:"bt-link"},"需求反馈",-1)])))]),_(a,{type:"card",modelValue:V(i),"onUpdate:modelValue":t[3]||(t[3]=function(e){return G(i)?i.value=e:null}),options:V(De)},null,8,["modelValue","options"])])}}}),Be=h(ze,[["__scopeId","data-v-276b29ef"]]),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"}));e("i",Ke)}}})}();
