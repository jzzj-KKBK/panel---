import{c as e,s as a,g as s,w as l,p as t,q as r,v as m,e as o,A as d,x as i,P as n,M as u,B as p,C as c,y as g,z as f,S as x,a9 as _,ag as b,af as y,a7 as v}from"./base-lib.js?v=1756369731";import{_ as V}from"./validator.js?v=1756369731";import{j,ag as k,e as w}from"./utils-lib.js?v=1756369731";import{b as U}from"./index48.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";import"./column.js?v=1756369731";import"./index110.js?v=1756369731";import"./index105.js?v=1756369731";import"./store3.js?v=1756369731";import"./store4.js?v=1756369731";import"./store5.js?v=1756369731";import"./hooks.js?v=1756369731";const O={class:"px-[2rem] py-[4rem] give-dialog"},h={class:"flex items-center"},D={key:0,class:"text-[#999]"},R={key:1,class:"text-[#999]"},C={key:0,class:"text-[#999] ml-1.6rem text-[1.2rem]"},q={key:1,class:"text-[#999] ml-1.6rem text-[1.2rem]"},F={key:2,class:"text-[#999] ml-1.6rem text-[1.2rem]"},I={class:"flex items-center"},P=w(e({__name:"alarm-config",setup(e){const w=U(),{giveFormDisabled:P,giveFormRef:A,msgForm:B,maxCapacityAndUsageRate:$,options:z,nextOptions:G,rowData:H}=a(w),{type:M,data:S,id:T}=H.value,E={num:[{required:!0,message:"请输入发送次数",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"请输入正整数",trigger:"blur"}],usageRate:[{required:!0,message:"请输入告警阈值",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"请输入正整数",trigger:"blur"}],give:[{required:!0,message:"请至少选择一个告警方式",trigger:"change"}]},J=s(()=>{switch(M){case"load":return"【负载状态】告警";case"cpu":return"【CPU使用率】告警";case"mem":return"【内存使用率】告警"}if(-1!==M.indexOf("disk"))return"磁盘【".concat(M.split("-")[1],"】告警")}),K=s(()=>{switch(M){case"load":return"负载状态";case"cpu":case"mem":return"使用率"}if(-1!==M.indexOf("disk"))return 2===S.cycle||"2"===B.value.typeDetection?"占用率":"剩余容量"}),L=s(()=>"2"===B.value.typeDetection?"%":"GB");return l(()=>H.value,()=>{w.alarmInfo()}),t(async()=>{w.alarmInfo()}),(e,a)=>{const s=x,l=_,t=b,U=y,z=j,H=k,S=V,T=v;return r(),m("div",O,[o(T,{model:i(B),rules:E,ref_key:"giveFormRef",ref:A,disabled:i(P)},{default:d(()=>[o(l,{label:"任务类型"},{default:d(()=>[o(s,{class:"!w-[30rem]",modelValue:i(J),"onUpdate:modelValue":a[0]||(a[0]=e=>n(J)?J.value=e:null),readonly:!0,disabled:""},null,8,["modelValue"])]),_:1}),-1!==i(M).indexOf("disk")?(r(),u(l,{key:0,label:"检测类型"},{default:d(()=>[o(U,{modelValue:i(B).typeDetection,"onUpdate:modelValue":a[1]||(a[1]=e=>i(B).typeDetection=e),onChange:i(w).switchTypeDetection},{default:d(()=>[o(t,{label:"2"},{default:d(()=>[...a[6]||(a[6]=[p("占用百分比",-1)])]),_:1}),o(t,{label:"1"},{default:d(()=>[...a[7]||(a[7]=[p("剩余容量",-1)])]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1})):c("",!0),o(l,{label:i(K),prop:"usageRate"},{default:d(()=>[g("div",h,[o(z,{class:"!w-[12rem]",modelValue:i(B).usageRate,"onUpdate:modelValue":a[2]||(a[2]=e=>i(B).usageRate=e),min:0,max:i($),type:"number"},{append:d(()=>[-1!==i(M).indexOf("disk")?(r(),m("span",D,f(i(L)),1)):(r(),m("span",R,"%"))]),_:1},8,["modelValue","max"]),i(M).indexOf("cpu")>-1?(r(),m("span",C," 每5分钟平均CPU超过该数值就告警 ")):-1===i(M).indexOf("disk")?(r(),m("span",q," 每5分钟平均负载超过该数值就告警 ")):(r(),m("span",F," 每隔10分钟磁盘占用超过该数值就告警 "))])]),_:1},8,["label"]),o(l,{label:"发送次数",prop:"num"},{default:d(()=>[g("div",I,[o(z,{class:"!w-[12rem]",modelValue:i(B).num,"onUpdate:modelValue":a[3]||(a[3]=e=>i(B).num=e),min:0,type:"number"},{append:d(()=>[...a[8]||(a[8]=[g("span",{class:"text-[#999]"},"次",-1)])]),_:1},8,["modelValue"]),a[9]||(a[9]=g("span",{class:"text-[#999] ml-1.6rem text-[1.2rem]"}," 后将不再发送告警信息，如需发送多次请填写2次以上 ",-1))])]),_:1}),-1===i(M).indexOf("disk")?(r(),u(l,{key:1,label:"告警后执行",prop:"next_data"},{default:d(()=>[o(H,{modelValue:i(B).next_data,"onUpdate:modelValue":a[4]||(a[4]=e=>i(B).next_data=e),options:i(G),class:"!w-[30rem]",multiple:""},null,8,["modelValue","options"])]),_:1})):c("",!0),o(l,{label:"告警方式",prop:"give"},{default:d(()=>[o(S,{class:"!w-[30rem]",modelValue:i(B).give,"onUpdate:modelValue":a[5]||(a[5]=e=>i(B).give=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","disabled"]),a[10]||(a[10]=g("div",{class:"tip"},[g("ul",null,[g("li",null,"【发送次数】设置0时，每天触发告警次数没有上限")])],-1))])}}}),[["__scopeId","data-v-b8ff39e3"]]);export{P as default};
