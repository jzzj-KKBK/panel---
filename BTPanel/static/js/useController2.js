import{n as t,K as s,l as a,L as e,by as o,o as r}from"./utils-lib.js?v=1756369731";import{s as c,j as l,r as u,P as i}from"./base-lib.js?v=1756369731";const n=()=>t.post("ssh_security/get_login_record",{check:"object"}),p=s=>{const a=s?"stop_login_record":"start_login_record";return t.post("ssh_security/".concat(a),{check:"msg"})},m=s=>t.post("ssh_security/get_record_list",{data:s,check:"object"}),d=()=>t.post("xterm/get_command_list",{check:"array"}),h=s=>t.post("xterm/create_command",{data:s,check:"msg"}),v=s=>t.post("xterm/modify_command",{data:s,check:"msg"}),_=s=>t.post("xterm/remove_command",{data:{title:s},check:"msg"}),g=()=>t.post("xterm/out_command",{check:"msg"}),y=s=>t.post("xterm/set_completion_tool_status",{data:{status:s},check:"msg"}),w=()=>t.post("xterm/completion_tool_status",{check:"msg"}),f=l("TERM-HOST-LIST",()=>{const a=u({}),e=u(!1),o=u(!1),r=u("password"),c=u(!1);return{isEdit:e,rowData:a,$reset:()=>{e.value=!1,o.value=!1,r.value="password"},isTableLoad:o,cutAuthType:r,getHostData:async()=>{const a=await s({loading:o,request:t.post("xterm/get_host_list",{check:"array"}),data:Array});return{data:a,total:a.length,other:{}}},isRefreshList:c}}),k=()=>{const t=f();return{...t,...c(t)}},{cutAuthType:x,isEdit:b,rowData:T,isRefreshList:j}=k(),L=(t,s,o)=>{null==o||o.stopPropagation(),T.value=t,a({title:b.value?"编辑主机信息":"添加主机信息",area:48,component:()=>e(()=>import("./add-host.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{rows:t||{},refresh:s},showFooter:!0})},O=t=>{if(b.value)return;if(!i(t)||!t.value)return;let s,a,e,o=t.value.host;if(-1!=o.indexOf("@")){let t=o.split("@");if(o=t[1],a=t[0],-1!=a.indexOf(":")){let t=a.split(":");a=t[0],e=t[1]}}if(-1!=o.indexOf(":")){let t=o.split(":");o=t[0],s=t[1]}o&&(t.value.host=o,t.value.ps=o),s&&(t.value.port=Number(s)),a&&(t.value.username=a),e&&(t.value.password=e)},D=(t,s)=>{s();for(const a in t.value)"password"===a&&(t.value[a]="");"password"===x.value?(t.value.pkey="",t.value.pkey_passwd=""):t.value.password=""},E=async s=>{const{data:a}=await(e=s.host,o=s.port,t.post("xterm/get_host_find",{data:{host:e,port:o},check:"object"}));var e,o;for(const t in a)"host"!==t&&(s[t]=a[t]);return(t=>{let s=t.shell;try{s=JSON.parse(null==t?void 0:t.shell)}catch(a){s=t.shell}t.shell=s})(s),a},A=async a=>{try{const{status:r}=await s({loading:"正在"+(b.value?"修改":"创建")+"主机信息，请稍后...",request:(e=o(a.value),t.post("xterm/create_host",{data:e,check:"msg"})),data:{status:Boolean,msg:String},message:!0});return j.value=!0,r}catch(r){return!1}var e},P=async(a,e,o)=>{o.stopPropagation();try{await r({title:"删除服务器信息【"+a.host+"】",content:"删除选中的信息后，该服务器信息将不在列表中显示，是否继续操作？",icon:"warning-filled"});const{status:o}=await s({loading:"正在删除服务器信息，请稍后...",request:(c=a.host,l=a.port,t.post("xterm/remove_host",{data:{host:c,port:l},check:"msg"})),data:{status:Boolean},message:!0});o&&e()}catch(u){}var c,l},R=async()=>{if(T.value){if(T.value.isLocal)return{...T.value.rows,authType:T.value.rows.pkey?"private":"password"};{const t=await E(T.value);return t.authType=t.pkey?"private":"password",t}}return{host:"",port:22,username:"root",password:"",pkey:"",pkey_passwd:"",ps:"",authType:"password"}};export{O as a,y as b,D as c,P as d,L as e,m as f,w as g,n as h,R as i,p as j,d as k,g as l,v as m,h as n,_ as r,A as s,k as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
