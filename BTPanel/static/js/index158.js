import{c as e,k as a,r as s,bT as l,p as t,q as o,v as n,y as r,B as u,F as i,a_ as c,J as p,z as d,H as v,I as m,x as y,e as f,A as x,M as b,C as _,P as h,S as k,ax as g,a9 as M,a7 as w,D as j,bl as C}from"./base-lib.js?v=1756369731";import{u as V,am as U,fY as q,bb as I,b as H,e as B}from"./utils-lib.js?v=1756369731";import{v as z}from"./validator.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";import"./column.js?v=1756369731";const E={class:"nps-survey-box"},F={class:"py-[40px] px-[30px]"},J={class:"nps-survey-score h-[130px]"},N={id:"survey-score",class:"flex items-center justify-around"},S={class:"survey-score-num small"},A=["data-content","onMouseover","onMouseleave","onClick"],D={class:"survey-score-num medium"},G=["data-content","onMouseover","onMouseleave","onClick"],O={class:"survey-score-num large"},P=["data-content","onMouseover","onMouseleave","onClick"],T={class:"flex flex-col items-center"},Y={class:"nps-survey-title"},$={key:0,class:"text-danger"},K={class:"text-[14px]"},L={key:0,class:"nps-surver-tips"},Q=B(e({__name:"index",emits:["close"],setup(e,{emit:B}){const Q=B,{proxy:R}=C(),{load:W,error:X}=H(),{panel:Z}=V(),ee=a({}),ae=s([]),se=s(!1),le=s(0),te=s(0),oe=e=>le.value===e||te.value===e,ne=(e,a)=>{if(te.value===a)return!1;le.value=a},re=(e,a,s)=>{ae.value[s].error=""==e?"问题答案不可为空":"",ee[a]=e,R.$forceUpdate()},ue=(e,a)=>{if(te.value===a)return!1;le.value=-1},ie=(e,a)=>{if(!ae.value.length)return X("暂时无法进行评分哦~请刷新页面重试"),!1;te.value=a},ce=async()=>{try{await ae.value.forEach(e=>{if(""!=e.error)throw X("还有必填项没有填写哦~"),new Error("还有必填项没有填写哦~")});let e=W("正在提交问卷，请稍后...");(await I({questions:JSON.stringify(ee),product_type:0,rate:te.value,software_name:"panel"})).status&&(e.close(),Q("close"),z())}catch(e){}};return l(async()=>{try{const{data:e}=await U({version:-1,product_type:0});ae.value=e.msg,ae.value=[{id:4,hint:"您在使用产品过程中有什么需求没有被满足，或遇到什么BUG没被解决，请将您的问题或需求详细描述给我们，我们尽力为您解决及开发对应的功能",product_type:0,question:"您的哪些需求在宝塔面板上还没有被满足的?",required:1,version:0,textarea:!0,isHint:!0}],ae.value.forEach(e=>{ee[e.id]=""})}catch(e){}}),t(async()=>{Z.value.panelNps=!0,q({software_name:"panel"})}),(e,a)=>{const s=k,l=g,t=M,C=w,V=j;return o(),n("div",E,[a[5]||(a[5]=r("div",{class:"nps-survey-banner"},[r("span",null,[r("i"),u(),r("span",{style:{"vertical-align":"4px"}},"宝塔面板产品体验调查")])],-1)),r("div",F,[r("div",J,[a[2]||(a[2]=r("div",{class:"text-[20px] font-bold text-center text-[#000]"},"您向朋友或同事推荐宝塔面板的可能性有多大?",-1)),r("div",N,[r("ul",S,[(o(),n(i,null,c([1,2,3,4,5,6],e=>r("li",{key:e,"data-content":e,class:p({act:oe(e)}),onMouseover:a=>ne(0,e),onMouseleave:a=>ue(0,e),onClick:a=>ie(0,e)},d(oe(e)?"".concat(e,"分"):e),43,A)),64))]),r("ul",D,[(o(),n(i,null,c([7,8],e=>r("li",{key:e,"data-content":e,class:p({act:oe(e)}),onMouseover:a=>ne(0,e),onMouseleave:a=>ue(0,e),onClick:a=>ie(0,e)},d(e+(oe(e)?"分":"")),43,G)),64))]),r("ul",O,[(o(),n(i,null,c([9,10],e=>r("li",{key:e,"data-content":e,class:p({act:oe(e)}),onMouseover:a=>ne(0,e),onMouseleave:a=>ue(0,e),onClick:a=>ie(0,e)},d(oe(e)?"".concat(e,"分"):e),43,P)),64))])])]),v(r("div",T,[f(C,{ref:"npsForm","label-position":"top",model:y(ee),size:"default"},{default:x(()=>[(o(!0),n(i,null,c(y(ae),(e,u)=>(o(),b(t,{key:u,label:"",error:e.error},{label:x(()=>[r("span",Y,[e.required?(o(),n("span",$,"*")):_("",!0),r("span",K,d(e.question),1)]),e.textarea?_("",!0):(o(),n("span",L,d(e.hint),1))]),default:x(()=>[e.textarea?(o(),b(l,{key:0,ref_for:!0,ref:"popover",visible:y(se),"onUpdate:visible":a[1]||(a[1]=e=>h(se)?se.value=e:null),placement:"top-start","popper-class":"green-tips-popover p-20px !border-none",title:"",width:"51.2rem",trigger:"focus",content:e.hint},{reference:x(()=>[f(s,{modelValue:y(ee)[e.id],"onUpdate:modelValue":a=>y(ee)[e.id]=a,type:"textarea",class:"!w-[51.2rem]",rows:6,maxlength:500,placeholder:e.isHint?e.hint:"",onFocus:a[0]||(a[0]=e=>se.value=!0),onInput:a=>re(a,e.id,u),onBlur:a=>e.isHint=!0},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput","onBlur"])]),_:2},1032,["visible","content"])):(o(),b(s,{key:1,modelValue:y(ee)[e.id],"onUpdate:modelValue":a=>y(ee)[e.id]=a,class:"w-[51.2rem]",maxlength:500,placeholder:"请填写问题答案",onInput:a=>re(a,e.id,u)},null,8,["modelValue","onUpdate:modelValue","onInput"]))]),_:2},1032,["error"]))),128))]),_:1},8,["model"]),a[4]||(a[4]=r("div",{class:"text-primary leading-[3.5rem] mb-[1rem]"},"我们特别重视您的需求反馈，我们会每周进行需求评审。希望能更好的帮到您",-1)),f(V,{class:"w-[12.5rem]",size:"large",type:"primary",onClick:ce},{default:x(()=>[...a[3]||(a[3]=[u("提交",-1)])]),_:1})],512),[[m,0!==y(te)]])])])}}}),[["__scopeId","data-v-543c2bb3"]]);export{Q as default};
