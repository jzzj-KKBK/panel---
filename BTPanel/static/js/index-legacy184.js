!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function c(n,a,o,i){var c=a&&a.prototype instanceof l?a:l,s=Object.create(c.prototype);return r(s,"_invoke",function(n,r,a){var o,i,c,l=0,s=a||[],f=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,c=e,p.n=n,u}};function m(n,r){for(i=n,c=r,t=0;!f&&l&&!a&&t<s.length;t++){var a,o=s[t],m=p.p,v=o[2];n>3?(a=v===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,p.v=r,p.n=o[1]):m<v&&(a=n<3||o[0]>r||r>v)&&(o[4]=n,o[5]=r,p.n=v,i=0))}if(a||n>1)return u;throw f=!0,r}return function(a,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,v),i=s,c=v;(t=i<2?e:c)||!f;){o||(i?i<3?(i>1&&(p.n=-1),m(i,c)):p.n=c:p.v=c);try{if(l=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==u)break}catch(t){o=e,i=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),s}var u={};function l(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][o]?t(t([][o]())):(r(t={},o,function(){return this}),t),m=f.prototype=l.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,r(m,"constructor",f),r(f,"constructor",s),s.displayName="GeneratorFunction",r(f,i,"GeneratorFunction"),r(m),r(m,i,"Generator"),r(m,o,function(){return this}),r(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:v}})()}function r(e,t,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r=function(e,t,n,a){function i(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},r(e,t,n,a)}function a(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}System.register(["./index-legacy116.js?v=1756369731","./database-legacy.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731"],function(t,r){"use strict";var o,i,c,u,l,s,f,p,m,v,d,y,g,b,h;return{setters:[function(e){o=e._},function(e){i=e.getBackupSize,c=e.getImportSize},function(e){u=e.M},function(e){l=e.c,s=e.r,f=e.p,p=e.aD,m=e.q,v=e.v,d=e.y,y=e.z,g=e.x,b=e.e,h=e.C},null],execute:function(){var r={class:"relative w-full text-[1.6rem] flex items-center mb-2rem"},x={class:"flex flex-col ml-1rem leading-2rem"},j={class:"text-[1.2rem] mt-[8px]"},w={class:"grid grid-cols-3 leading-3rem py-1rem text-[1.4rem]"},S={class:"flex items-center mr-1rem"},_={class:"truncate flex-1"},O={class:"flex items-center mr-1rem"},k={class:"truncate flex-1"},D={class:"flex items-center"},T={class:"truncate flex-1"},F={key:0,class:"pl-2rem mt-2re leading-8 text-[1.2rem] list-disc"};t("default",l({__name:"index",props:{compData:{default:function(){return{type:"",refreshFn:function(){},successFlag:!1,config:{id:"",name:"",path:""}}}}},emits:["close","onCancel"],setup:function(t,l){var A=l.expose,G=l.emit,P=t,C=G,E=P.compData.config,I=E.id,z=E.name,M=(E.path,s("")),N=s(""),q=s("获取中...\t"),B=s(!0),H=s(null),U=s("import"===P.compData.type?"导入":"recover"===P.compData.type?"恢复":"压缩"),$=s(),J=function(){var e,t=(e=n().m(function e(){var t,r,a;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"backup"!==P.compData.type){e.n=2;break}return e.n=1,i({id:Number(I)});case 1:a=e.v,e.n=4;break;case 2:return e.n=3,c({name:z});case 3:a=e.v;case 4:if(t=a.data,$.value&&(B.value=!0),t.status){e.n=5;break}return L(),B.value=!1,q.value=t.msg,e.a(2);case 5:q.value!==t.msg&&(q.value=t.msg),null!=t&&t.total&&(M.value=t.total,N.value=t.speed);case 6:if(!(r=(-1!==t.msg.indexOf("成功!")||-1!==t.msg.indexOf("successful"))&&t.status)){e.n=7;break}return K(),e.a(2);case 7:null!=t&&t.speed&&B.value&&!r&&(H.value=setTimeout(function(){J()},1e3)),e.n=9;break;case 8:e.p=8,e.v,L();case 9:return e.a(2)}},e,null,[[0,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,u,"next",e)}function u(e){a(i,r,o,c,u,"throw",e)}c(void 0)})});return function(){return t.apply(this,arguments)}}(),K=function(){B.value=!1,"repair"===P.compData.type&&(u.success("修复完成，请按 Ctrl+F5 刷新缓存，或等待2s自动刷新！"),setTimeout(function(){localStorage.clear(),sessionStorage.clear(),window.location.reload()},2e3)),C("close"),L(),P.compData.refreshFn&&P.compData.refreshFn()},L=function(){H.value=null,clearTimeout(H.value),B.value=!1};return f(J),p(L),A({onCancel:L}),function(t,n){var a=o;return m(),v("div",{class:"p-2rem flex-wrap",ref_key:"progressDialog",ref:$},[d("div",r,[n[0]||(n[0]=d("i",{class:"svgtofont-el-loading text-3rem animate-spin"},null,-1)),d("div",x,[d("span",null,"正在"+y(g(U))+"数据库文件，请稍后...",1),d("span",j,"当前"+y(g(U))+"任务为后台"+y(g(U))+"，可关闭此页面进行其他操作",1)])]),n[2]||(n[2]=d("hr",{class:"!border-[#dedede]"},null,-1)),d("div",w,[d("div",S,[d("span",null,y(g(U))+"数据库：",1),d("div",_,y(t.compData.config.name),1)]),d("div",O,[d("div",null,y(g(U))+"大小：",1),d("div",k,y(g(M)||"--"),1)]),d("div",D,[d("div",null,y(g(U))+"速度：",1),d("div",T,y(g(N)||"--"),1)])]),b(a,{class:"h-[30rem]",content:g(q)},null,8,["content"]),"import"===t.compData.type?(m(),v("ul",F,e(n[1]||(n[1]=[d("li",null,"导入完成后，可到导入->导入日志查看导入结果",-1)])))):h("",!0)],512)}}}))}}})}();
