import{c as e,r as t,g as n,k as u,w as o,aD as l,Z as i,H as a,e as r,br as s,ay as c,i as d,n as v,I as f,P as m}from"./base-lib.js?v=1756369731";var p=function(e,t){var n,u=t.arg;if(u){var o=t.value,l=m(u)?u.value:null===(n=t.instance)||void 0===n?void 0:n.$refs[u];l&&"function"==typeof l.addReference&&(e.$contextmenuKey=u,l.addReference(e,o))}},h=function(e,t){var n,u=e.$contextmenuKey;if(u){var o=m(u)?u.value:null===(n=t.instance)||void 0===n?void 0:n.$refs[u];o&&"function"==typeof o.removeReference&&o.removeReference(e)}},b={mounted:p,updated:function(e,t){h(e,t),p(e,t)},beforeUnmount:h},g="v-contextmenu",x="v-contextmenu-icon",y="v-contextmenu-inner",w="v-contextmenu-item",C="v-contextmenu-item--hover",k="v-contextmenu-item--disabled",j="v-contextmenu-submenu",_="v-contextmenu-submenu__title",M="v-contextmenu-submenu__menus",R="v-contextmenu-submenu__menus--top",O="v-contextmenu-submenu__menus--right",A="v-contextmenu-submenu__menus--bottom",E="v-contextmenu-submenu__menus--left",P="v-contextmenu-submenu__arrow";var $=["contextmenu"],B=e({name:"VContextmenu",props:{modelValue:{type:Boolean,default:!1},autoAdjustPlacement:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleport:{type:[String,Object],default:function(){return"body"}},preventContextmenu:{type:Boolean,default:!0}},emits:["show","hide","update:modelValue","contextmenu"],setup:function(e,a){var r=a.emit,s=t(null),c=t(e.modelValue||!1),d=function(e){c.value=e,r("update:modelValue",e)},f=t({top:0,left:0}),m=n(function(){return{top:"".concat(f.value.top,"px"),left:"".concat(f.value.left,"px")}}),p=t(null),h=function(t,n){var u,o,l=t instanceof Event?n:t,i=(null==l?void 0:l.autoAdjustPlacement)||e.autoAdjustPlacement,a={top:(null==l?void 0:l.top)||0,left:(null==l?void 0:l.left)||0};t instanceof Event&&(t.preventDefault(),a.top=null!==(u=null==l?void 0:l.top)&&void 0!==u?u:t.pageY,a.left=null!==(o=null==l?void 0:l.left)&&void 0!==o?o:t.pageX);d(!0),v(function(){if(i){var e=s.value;if(!e)return;var t=e.clientWidth,n=e.clientHeight;if(n+a.top>=window.innerHeight+window.scrollY){var u=a.top-n;u>window.scrollY&&(a.top=u)}if(t+a.left>=window.innerWidth+window.scrollX){var o=a.left-t;o>window.scrollX&&(a.left=o)}}f.value=a,r("show")})},b=function(){p.value=null,d(!1),r("hide")},g=u(new Map),x=t(),y=n(function(){return x.value&&g.get(x.value)}),w=function(e){e.target&&s.value&&x.value&&(s.value.contains(e.target)||y.value&&y.value.triggers.includes("click")&&x.value.contains(e.target)||d(!1))};return o(c,function(e){e?document.addEventListener("click",w):document.removeEventListener("click",w)}),l(function(){document.removeEventListener("click",w)}),i("visible",c),i("autoAdjustPlacement",e.autoAdjustPlacement),i("show",h),i("hide",b),{visible:c,style:m,currentReferenceOptions:y,currentOptions:p,contextmenuRef:s,addReference:function(t,n){var u=null!=n&&n.trigger?Array.isArray(n.trigger)?n.trigger:[n.trigger]:$,o=function(n){e.disabled||(x.value=t,h(n,{}))};u.forEach(function(e){t.addEventListener(e,o)}),g.set(t,{triggers:u,handler:o})},removeReference:function(e){var t=g.get(e);t&&(t.triggers.forEach(function(n){e.removeEventListener(n,t.handler)}),g.delete(e))},toggle:d,show:h,hide:b}},methods:{renderContent:function(){var e,t,n=this;return a(r("div",{class:g,ref:"contextmenuRef",style:this.style,onContextmenu:function(e){n.$props.preventContextmenu&&e.preventDefault(),n.$emit("contextmenu",e)}},[r("ul",{class:y},[null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t,{triggerOptions:"currentReferenceOptions",options:"currentOptions"})])]),[[f,"visible"]])}},render:function(){var e,t;return this.visible?this.teleport?r(s,{to:this.teleport},"function"==typeof(t=e=this.renderContent())||"[object Object]"===Object.prototype.toString.call(t)&&!d(t)?e:{default:function(){return[e]}}):this.renderContent():null}});function S(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var u=n.call(e,t||"default");if("object"!=typeof u)return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function V(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=e({name:"VContextmenuItem",props:{disabled:{type:Boolean,default:!1},hideOnClick:{type:Boolean,default:!0},contextmenuAsClick:{type:Boolean,default:!0}},emits:["click","contextmenu","mouseenter","mouseleave"],setup:function(e,u){var o=u.emit,l=c("hide"),i=t(!1);return{classes:n(function(){return V(V(V({},w,!0),k,e.disabled),C,i.value)}),handleClick:function(t){o("click",t),e.disabled||e.hideOnClick&&(null==l||l())},handleContextmenu:function(t){if(o("contextmenu",t),e.contextmenuAsClick){if(e.disabled)return;e.hideOnClick&&(null==l||l())}},handleMouseenter:function(t){o("mouseenter",t),e.disabled||(i.value=!0)},handleMouseleave:function(t){o("mouseleave",t),e.disabled||(i.value=!1)}}},render:function(){var e,t;return r("li",{class:this.classes,onClick:this.handleClick,onContextmenu:this.handleContextmenu,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t)])}}),L=e({name:"VContextmenuIcon",props:{name:{type:String,required:!0}},render:function(){return r("i",{class:[x,"".concat(x,"-").concat(this.name)]},null)}}),W=e({name:"VContextmenuSubmenu",props:{title:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["mouseenter","mouseleave"],setup:function(e,u){var o=u.emit,l=t(null),i=c("autoAdjustPlacement"),a=t(["top","right"]),r=t(!1),s=n(function(){return V(V(V(V({},w,!0),_,!0),C,r.value),k,e.disabled)}),d=n(function(){return V(V(V(V(V(V({},g,!0),M,!0),R,a.value.includes("top")),O,a.value.includes("right")),A,a.value.includes("bottom")),E,a.value.includes("left"))});return{hover:r,submenuRef:l,titleClasses:s,menusClasses:d,handleMouseenter:function(t){e.disabled||(r.value=!0,o("mouseenter",t),v(function(){var e=[];if(i){var n=t.target.getBoundingClientRect();if(!l.value)return;var u=l.value.clientWidth,o=l.value.clientHeight;n.right+u>=window.innerWidth?e.push("left"):e.push("right"),n.bottom+o>=window.innerHeight?e.push("bottom"):e.push("top")}a.value=e}))},handleMouseleave:function(t){e.disabled||(r.value=!1,o("mouseleave",t))}}},render:function(){var e,t,n,u;return r("li",{class:j,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[r("div",{class:this.titleClasses},[(null===(e=(t=this.$slots).title)||void 0===e?void 0:e.call(t))||this.title,r("span",{class:P},[r(L,{name:"right-arrow"},null)])]),this.hover?r("div",{ref:"submenuRef",class:this.menusClasses},[r("ul",{class:y},[null===(n=(u=this.$slots).default)||void 0===n?void 0:n.call(u)])]):null])}});export{H as C,B as a,W as b,b as c};
