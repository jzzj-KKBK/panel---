!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function u(e,a,i,o){var u=a&&a.prototype instanceof s?a:s,l=Object.create(u.prototype);return t(l,"_invoke",function(e,t,a){var i,o,u,s=0,l=a||[],p=!1,f={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(e,t){return i=e,o=0,u=n,f.n=t,c}};function m(e,t){for(o=e,u=t,r=0;!p&&s&&!a&&r<l.length;r++){var a,i=l[r],m=f.p,g=i[2];e>3?(a=g===t)&&(u=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=n):i[0]<=m&&((a=e<2&&m<i[1])?(o=0,f.v=t,f.n=i[1]):m<g&&(a=e<3||i[0]>t||t>g)&&(i[4]=e,i[5]=t,f.n=g,o=0))}if(a||e>1)return c;throw p=!0,t}return function(a,l,g){if(s>1)throw TypeError("Generator is already running");for(p&&1===l&&m(l,g),o=l,u=g;(r=o<2?n:u)||!p;){i||(o?o<3?(o>1&&(f.n=-1),m(o,u)):f.n=u:f.v=u);try{if(s=2,i){if(o||(a="next"),r=i[a]){if(!(r=r.call(i,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,o<2&&(o=0)}else 1===o&&(r=i.return)&&r.call(i),o<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=n}else if((r=(p=f.n<0)?u:e.call(t,f))!==c)break}catch(r){i=n,o=1,u=r}finally{s=1}}return{value:r,done:p}}}(e,i,o),!0),l}var c={};function s(){}function l(){}function p(){}r=Object.getPrototypeOf;var f=[][i]?r(r([][i]())):(t(r={},i,function(){return this}),r),m=p.prototype=s.prototype=Object.create(f);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,t(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=p,t(m,"constructor",p),t(p,"constructor",l),l.displayName="GeneratorFunction",t(p,o,"GeneratorFunction"),t(m),t(m,o,"Generator"),t(m,i,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:u,m:g}})()}function t(e,n,r,a){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}t=function(e,n,r,a){function o(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?i?i(e,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[n]=r:(o("next",0),o("throw",1),o("return",2))},t(e,n,r,a)}function n(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(a,i){var o=e.apply(t,r);function u(e){n(o,a,i,u,c,"next",e)}function c(e){n(o,a,i,u,c,"throw",e)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./site-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./useStore-legacy4.js?v=1756369731"],function(t,n){"use strict";var a,i,o,u,c,s,l,p,f,m,g,v,h,y,d,b,_,w,k,j,x,L,z,P,G,q,E,O,I,S,B;return{setters:[function(e){a=e.o,i=e.K,o=e.l,u=e.L,c=e.w,s=e.b,l=e.a2},function(e){p=e.r,f=e.k,m=e.c,g=e.w,v=e.q,h=e.M,y=e.x},function(e){d=e.proxyGetGlobal,b=e.clearProxyCache,_=e.proxyGlobalCache,w=e.proxyGlobalCompress,k=e.proxyGlobalAddLimit,j=e.proxyGlobalSetLogs,x=e.proxyGlobalSetWebsocket,L=e.proxyGlobalDelBasic,z=e.proxyGlobalEditBasic,P=e.proxyGlobalAddBasic,G=e.proxyGlobalBatchDelLimit,q=e.proxyGlobalDelLimit},function(e){E=e.a,O=e.u,I=e.c},function(e){S=e.f},function(e){B=e.u}],execute:function(){var T,C=s(),N=B().siteInfo,A=t("p",p("cache")),D=t("h",p({site_name:"",domain_list:[],site_port:[],port_conf:"",ssl_port_conf:"",site_path:"",ssl_info:{},err_age_404:"",err_age_502:"",ip_limit:{ip_black:[],ip_white:[]},basic_auth:[],proxy_cache:{},gzip:{},sub_filter:{},websocket:{},security:{},redirect:{},proxy_log:{},http_block:"",server_block:"",remark:"",proxy_info:[]})),F=function(){var t=r(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({site_name:N.value.name});case 1:if((n=e.v).status){e.n=2;break}return C.error(n.msg),e.a(2);case 2:D.value=n.data;case 3:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),R=(t("f",p(!1)),t("e",p(!1))),U=t("b",p()),W=t("c",f({status:!1,time:"",unit:"m"})),M=(t("t",[{label:"分钟",value:"m"},{label:"小时",value:"h"},{label:"天",value:"d"}]),t("g",[{content:"缓存是一种用于加速网站性能和提高用户体验的技术"},{content:"开启后资源会被缓存，如果影响网站访问请关闭"},{content:"缓存键由主机名、URI 和请求参数组成"},{content:"默认忽略的响应头有：Set-Cookie|Cache-Control|expires|X-Accel-Expires"},{content:"默认缓存的静态资源有：css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map"}]),t("d",{time:[{required:!0,message:"请输入正确的缓存时间",trigger:"blur",validator:function(e,t,n){t?isNaN(Number(t))?n(new Error("请输入数字")):Number(t)<1?n(new Error("请输入正确数字")):n():n(new Error("目标URL不能为空"))}},{}]}),t("a",r(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({title:"清理缓存【".concat(N.value.name,"】"),width:"35rem",icon:"warning-filled",content:"清理后包含所有URL的及站点的缓存都会被清空,是否继续？"});case 1:return e.n=2,i({loading:"正在清理缓存，请稍后...",request:b({site_name:N.value.name}),message:!0});case 2:return e.a(2)}},t)}))),t("o",r(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.n){case 0:return n={site_name:N.value.name,cache_status:W.status?1:0,expires:"".concat(W.time).concat(W.unit)},e.n=1,U.value.validate();case 1:return e.n=2,i({loading:R,request:_(n),message:!0});case 2:return e.a(2)}},t)}))),t("k",p())),H=t("i",f({status:!1,type:"",level:1,minLength:"",unit:"m"})),K=(t("l",[{label:"k",value:"k"},{label:"m",value:"m"}]),t("n",[{content:"用于对 HTTP 响应的内容进行压缩，以减少数据传输量，提高网站性能和加载速度"},{content:"压缩级别1-9，例如：1为压缩速度最快，但压缩率较低；9为压缩速度最慢，但压缩率最高，建议默认"},{content:"如果开启gzip后影响网站正常访问，请关闭此功能 和请求参数组成"}]),t("m",{type:[{required:!0,message:"请输入压缩类型",trigger:["blur","change"]}],minLength:[{required:!0,message:"请输入正确的压缩最小长度",trigger:"blur",validator:function(e,t,n){t?isNaN(Number(t))?n(new Error("请输入数字")):Number(t)<1?n(new Error("请输入正确数字")):n():n(new Error("压缩最小长度不能为空"))}},{}]}),t("s",function(e){H.status=e.gzip_status,H.type=e.gzip_types,H.level=e.gzip_comp_level;var t="",n="m";e.gzip_min_length&&e.gzip_min_length.length>1&&(t=e.gzip_min_length.slice(0,-1),n=e.gzip_min_length.slice(-1)),H.minLength=t,H.unit=n}),t("j",r(e().m(function t(){var n,r;return e().w(function(e){for(;;)switch(e.n){case 0:return n={site_name:N.value.name,gzip_status:H.status?1:0,gzip_min_length:"".concat(H.minLength).concat(H.unit),gzip_comp_level:H.level,gzip_types:H.type},e.n=1,M.value.validate();case 1:return e.n=2,i({loading:R,request:w(n),message:!0});case 2:return r=e.v,e.a(2,r.status)}},t)}))),t("w",f({loading:!1,type:"black",white:[],black:[]}))),X=(t("r",p()),t("q",p()),t("v",function(e){K.type="ipBlackList"===A.value?"black":"white",K.white=e.ip_white.map(function(e){return{ip:e,type:"white"}}),K.black=e.ip_black.map(function(e){return{ip:e,type:"black"}})}),function(){var t=r(e().m(function t(n){var r,o,u;return e().w(function(e){for(;;)switch(e.n){case 0:return r=!!Array.isArray(n),e.n=1,a({title:"".concat(r?"批量删除IP":"删除".concat("white"===n.type?"白名单":"黑名单","【").concat(n.ip,"】")),content:r?"批量删除选中的IP，是否继续操作？":"删除".concat("white"===n.type?"白名单":"黑名单","【").concat(n.ip,"】，是否继续操作？")});case 1:return o={site_name:N.value.name},r?(o.ip_type="ipBlackList"===A.value?"black":"white",o.ips=n.map(function(e){return e.ip}).join("\n")):(o.ip_type=n.type,o.ip=n.ip),u=r?G:q,e.n=2,i({loading:"正在删除，请稍后...",request:u(o),message:!0});case 2:e.v.status&&F();case 3:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),J=(t("x",p([E({key:"ip"}),{label:"IP",prop:"ip",minWidth:120},O([{title:"删除",onClick:function(e){X(e)}}])])),t("T",[{label:"删除IP",value:"delete",event:(T=r(e().m(function t(n,a,i,o,u){var c;return e().w(function(t){for(;;)switch(t.n){case 0:return c=function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,q({site_name:N.value.name,ip:n.ip,ip_type:"ipBlackList"===A.value?"black":"white"});case 1:return e.a(2,e.v)}},t)}));return function(e){return t.apply(this,arguments)}}(),t.n=1,n({title:"批量删除",content:"批量删除选中的ip，是否继续操作？",column:[{prop:"ip",label:"IP"},I()],onConfirm:function(){var t=r(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a(c);case 1:return F(),e.a(2,!1)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)})),function(e,t,n,r,a){return T.apply(this,arguments)})}]),t("u",function(){J.value.address="",o({isAsync:!0,title:"添加IP".concat("ipBlackList"===A.value?"黑":"白","名单"),area:40,btn:"确认",component:function(){return u(function(){return n.import("./add-ip-legacy2.js?v=1756369731")},void 0,n.meta.url)},compData:{listType:K.type,refreshEvent:function(){F()}}})}),t("O",p({types:K.type,address:""}))),Q=(t("P",[{content:"一行一条配置，多个IP请换行"}]),t("Q",p()),t("R",{address:[{validator:function(e,t,n){t.length>0?n():n(new Error("请输入IP地址"))},trigger:["blur","change"]}]}),t("N",r(e().m(function t(){var n,r,a;return e().w(function(e){for(;;)switch(e.n){case 0:return n=J.value.address,r={site_name:N.value.name,ip_type:"ipBlackList"===A.value?"black":"white",ips:n},e.n=1,i({loading:R,request:k(r),message:!0});case 1:return(a=e.v).status&&F(),e.a(2,a.status)}},t)}))),t("z",p([]))),V=t("B",function(e){Z.value=e||!1,o({isAsync:!0,title:"".concat(e?"编辑":"添加","http认证").concat(e?"【".concat(e.auth_name,"】"):""),area:48,btn:"确认",component:function(){return u(function(){return n.import("./http-auth-add-legacy2.js?v=1756369731")},void 0,n.meta.url)},compData:{refreshEvent:F,proxy_info:D.value.proxy_info,isEdit:!!e,row:e}})}),Y=function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({title:"删除http认证【".concat(n.auth_name,"】"),content:"删除http认证【".concat(n.auth_name,"】，是否继续操作？")});case 1:return e.n=2,i({loading:"正在删除http认证，请稍候...",request:L({site_name:N.value.name,auth_path:n.auth_path,name:n.auth_name}),message:!0});case 2:e.v.status&&F();case 3:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),Z=(t("A",p([{label:"名称",prop:"auth_name"},{label:"路径",prop:"auth_path"},O([{onClick:V,title:"编辑"},{onClick:Y,title:"删除"}])])),t("y",function(e){Q.value=e||[]}),t("W",p())),$=t("V",p({name:c(5),path:"",user:"",password:""})),ee=(t("Y",[{content:"例如我设置了加密访问/test/,那我访问http://aaa.com/test/时就要输入账号密码才能访问"}]),t("Z",p())),te=(t("_",{name:[{required:!0,message:"请输入名称",trigger:["blur","change"]}],path:[{required:!0,message:"请输入路径",trigger:["blur","change"]}],user:[{required:!0,message:"请输入用户名",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:["blur","change"]}]}),t("X",function(e,t){var n=D.value.proxy_info.map(function(e){return{value:e.proxy_path}});t(e?n.filter(function(t){return t.value.includes(e)}):n)}),t("U",r(e().m(function t(){var n,r,a,o;return e().w(function(e){for(;;)switch(e.n){case 0:return n=$.value,e.n=1,ee.value.validate();case 1:return r={site_name:N.value.name,auth_path:n.path,username:n.user,password:n.password,name:n.name},a=Z.value?z:P,e.n=2,i({loading:R,request:a(r)});case 2:return(o=e.v).status&&F(),e.a(2,o.status)}},t)}))),t("S",function(){Object.assign($.value,{name:Z.value?Z.value.auth_name:c(5),path:Z.value?Z.value.auth_path:"",user:"",password:""})}),t("H",p())),ne=t("E",f({type:"default",accessLog:"",address:"",port:"514"})),re=(t("I",{accessLog:[{validator:function(e,t,n){"file"!==ne.type||t?n():n(new Error("请选择日志目录"))},trigger:["blur","change"]}],address:[{validator:function(e,t,n){"rsyslog"!==ne.type||t?n():n(new Error("请输入接收地址"))},trigger:["blur","change"]}]}),t("J",[{content:"指定目录可选择自定义的日志存储目录，请注意此目录必须www用户可写"},{content:"发送到远程服务器设置之后本地不会保存日志内容，填写前请确保日志接收端可正常访问"}]),t("F",[{label:"默认",value:"default"},{label:"不记录日志",value:"off"},{label:"指定目录",value:"file"},{label:"发送到远程服务器",value:"rsyslog"}]),t("G",function(e){S({type:"dir",path:"/www/wwwroot",change:function(e){ne.accessLog=e}})}),t("C",function(e){e?(ne.type=e.log_type,ne.accessLog=e.log_path,ne.address=e.rsyslog_host):ne.type="default"}),t("D",r(e().m(function t(){var n,r;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,te.value.validate();case 1:return n={site_name:N.value.name,log_type:ne.type,log_path:"file"==ne.type?ne.accessLog:ne.address},e.n=2,i({loading:R,request:j(n),message:!0});case 2:return r=e.v,e.a(2,r.status)}},t)}))),t("L",f({websocket:!1}))),ae=(t("M",function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i({loading:R,request:x({site_name:N.value.name,websocket_status:n?1:0}),message:!0});case 1:e.v.status||(re.websocket=!n);case 2:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),t("K",function(e){re.websocket=!!e&&e.websocket_status}),m({__name:"index",setup:function(e){var t=l({type:"card",value:A,options:[{label:"缓存",name:"cache",lazy:!0,render:function(){return u(function(){return n.import("./cache-legacy.js?v=1756369731")},void 0,n.meta.url)}},{label:"内容压缩",name:"compress",lazy:!0,render:function(){return u(function(){return n.import("./content-compression-legacy.js?v=1756369731")},void 0,n.meta.url)}},{label:"IP黑名单",name:"ipBlackList",lazy:!0,render:function(){return u(function(){return n.import("./ip-list-legacy.js?v=1756369731")},void 0,n.meta.url)}},{label:"IP白名单",name:"ipWhiteList",lazy:!0,render:function(){return u(function(){return n.import("./ip-list-legacy.js?v=1756369731")},void 0,n.meta.url)}},{label:"http认证",name:"basicauth",lazy:!0,render:function(){return u(function(){return n.import("./http-auth-legacy.js?v=1756369731")},void 0,n.meta.url)}},{label:"日志",name:"siteLogs",lazy:!0,render:function(){return u(function(){return n.import("./log-legacy.js?v=1756369731")},void 0,n.meta.url)}},{label:"websocket",name:"websocket",lazy:!0,render:function(){return u(function(){return n.import("./websocket-legacy.js?v=1756369731")},void 0,n.meta.url)}}]}).BtTabs;return g(function(){return A.value},function(e){F()}),F(),function(e,n){return v(),h(y(t))}}})),ie=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));t("$",ie)}}})}();
