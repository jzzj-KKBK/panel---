import{ay as a,K as e,c7 as s,M as r,i7 as l,G as t,e as o}from"./utils-lib.js?v=1756369731";import{r as u,c as n,ay as i,g as m,p as c,a4 as d,q as p,v,e as f,x as g}from"./base-lib.js?v=1756369731";import{k as b,b as _}from"./form-item.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";const{refs:{isRefreshTableList:h}}=a(),x=u([]),y=()=>{x.value=[]},k={class:"flex flex-col p-[1.6rem] lib-box"},j=o(n({__name:"index",props:{compData:{default:()=>({})}},setup(a,{expose:o}){const u=a,n=i("popupClose",()=>{}),{BtForm:j,submit:q,param:w}=t({data:()=>{var a;return{tag:"",name:"",id:(null==(a=u.compData.row)?void 0:a.id)||"",loading:!1}},options:()=>m(()=>[b("仓库名","name",x.value,{attrs:{class:"!w-[24rem]",placeholder:"请选择仓库名"},rules:[{required:!0,message:"请选择仓库名",trigger:"change"}]}),_("标签","tag",{attrs:{placeholder:"请输入版本，如：btphp_1.1",class:"!w-[24rem]"},rules:[{required:!0,message:"请输入版本，如：btphp_1.1",trigger:"blur"}]})]),submit:async(a,s,r)=>{await s(),(async(a,s)=>{let r={tag:a.value.tag,id:a.value.id,name:x.value.find(e=>e.url==a.value.name).name,url:x.value.find(e=>e.url==a.value.name).url};e({request:l({data:JSON.stringify(r)}),message:!0,success:({status:a})=>{a&&(h.value=!0,y(),s())}})})(a,n)}});return c(async()=>{(async(a,l)=>{e({request:s(),data:Array,success:e=>{var s;if(1===e.length){const a=e[0];"docker.io"==a.url&&"docker官方库"==a.name&&""==a.username&&(r.error("docker官方库不支持推送镜像"),l())}e.forEach(a=>{"docker.io"==a.url&&"docker官方库"==a.name&&""==a.username||x.value.push({value:a.url,label:"".concat(a.name).concat("docker.io"===a.url?"":"(".concat(a.url,")")),url:a.url,name:a.name})}),a.value.name=(null==(s=x.value[0])?void 0:s.value)||""}})})(w,n)}),d(()=>{y()}),o({onConfirm:q}),(a,e)=>(p(),v("div",k,[f(g(j))]))}}),[["__scopeId","data-v-a5048bc3"]]);export{j as default};
