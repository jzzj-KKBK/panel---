!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.toStringTag||"@@toStringTag";function c(n,o,a,u){var c=o&&o.prototype instanceof s?o:s,l=Object.create(c.prototype);return r(l,"_invoke",function(n,r,o){var a,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,u=0,c=e,p.n=n,i}};function d(n,r){for(u=n,c=r,t=0;!f&&s&&!o&&t<l.length;t++){var o,a=l[t],d=p.p,m=a[2];n>3?(o=m===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(u=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,u=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),u=l,c=m;(t=u<2?e:c)||!f;){a||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(t){a=e,u=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,a,u),!0),l}var i={};function s(){}function l(){}function f(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(r(t={},a,function(){return this}),t),d=f.prototype=s.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,u,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=f,r(d,"constructor",f),r(f,"constructor",l),l.displayName="GeneratorFunction",r(f,u,"GeneratorFunction"),r(d),r(d,u,"Generator"),r(d,a,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:m}})()}function r(e,t,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,t,n,o){function u(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},r(e,t,n,o)}function o(e,t,n,r,o,a,u){try{var c=e[a](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function c(e){o(u,r,a,c,i,"next",e)}function i(e){o(u,r,a,c,i,"throw",e)}c(void 0)})}}System.register(["./base-lib-legacy.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731"],function(t,r){"use strict";var o,u,c,i,s,l,f,p,d,m,v,y,h,g,_,w,b,j,k;return{setters:[function(e){o=e.j,u=e.aE,c=e.r,i=e.o,s=e.g},function(e){l=e.n,f=e.u,p=e.K,d=e.S,m=e.ai,v=e.M,y=e.cE,h=e.o,g=e.Z,_=e.aq,w=e.cW},function(e){b=e.p,j=e.l,k=e.k}],execute:function(){var r=function(){return l.post("plugin/get_index_list")},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.post("plugin/get_soft_list",{data:e,check:"object"})},T=function(e){return l.post("plugin?action=add_index",{data:{sName:e},customType:"model",check:"msg"})},x=function(e){return l.post("plugin?action=remove_index",{data:{sName:e},customType:"model",check:"msg"})};t("q",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.post("warning/get_list",{data:e})}),t("h",function(){return l.post("warning/get_result",{check:"object"})}),t("w",function(){return l.post("project/safecloud/get_safe_overview",{customType:"model"})}),t("t",function(){return l.post("project/safecloud/get_pending_alarm_trend",{customType:"model"})}),t("u",function(){return l.post("project/safecloud/get_security_trend",{customType:"model"})}),t("v",function(){return l.post("project/safecloud/get_security_dynamic",{customType:"model"})}),t("r",function(){return l.post("/plugin?action=a&name=bt_hids&s=set_process",{customType:"model"})}),t("c",function(){return l.post("system/ReMemory")}),t("k",function(e){return l.post("monitor/process_management/kill_process_all",{data:e,customType:"model",check:"msg"})}),t("o",function(){return l.post("warning/get_scan_bar",{check:"object"})}),t("p",function(){return l.post("safe/security/get_repair_bar",{check:"object",customType:"model"})}),t("g",function(){return l.post("panel/overview/GetOverview",{check:"array",customType:"model"})}),t("a",function(e){return l.post("panel/overview/AddOverview",{data:e,check:"msg",customType:"model"})}),t("b",function(e){return l.post("panel/overview/SetOverview",{data:e,check:"msg",customType:"model"})}),t("e",function(e){return l.post("panel/overview/SortOverview",{data:e,check:"msg",customType:"model"})}),t("d",function(e){return l.post("panel/overview/DelOverview",{data:e,check:"msg",customType:"model"})}),t("n",function(){return l.post("warning/get_tmp_result")}),t("m",function(){return l.post("warning/kill_get_list")}),t("s",function(e){return l.post("system/set_rname",{data:e,check:"msg"})}),t("i",function(e){return l.post("/mod/ssh/com/index_ssh_info",{data:e,check:"array",customType:"model"})}),t("x",function(){return l.post("/safe/exportreport/get_pdf",{check:"object",customType:"model"})}),t("f",function(){return l.post("/project/safecloud/get_safecloud_list",{check:"object",customType:"model"})}),t("A",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.post("/project/safecloud/get_webshell_result",{data:e,customType:"model",check:"object"})}),t("B",function(){return l.post("/project/scanning/get_vuln_info",{check:"object",customType:"model"})}),t("j",function(){return l.post("/project/safecloud/get_config",{customType:"model",check:"object"})}),t("l",function(e){return l.post("/project/safecloud/set_config",{data:e,customType:"model",check:"object"})}),t("y",function(e){return l.post("/project/safecloud/ignore_file",{data:e,customType:"model",check:"object"})}),t("z",function(e){return l.post("/project/safecloud/deal_webshell_file",{data:e,customType:"model",check:"object"})}),t("C",function(e){return l.post("/project/safecloud/set_alarm_config",{data:e,customType:"model",check:"object"})}),t("H",o("SOFTWARE-STORE",function(){var t=u(),o=f(),O=o.forceLtd,A=o.aliyunEcsLtd,L=c(""),I=c(!1),q=c([]),E=c(),P=c([]),C=c([]),G=c(!1),F=c(!1),H=c(0),R=c(!1),M=c([]),N=[],V=function(){var e=a(n().m(function e(){var t,r,o=arguments;return n().w(function(e){for(;;)switch(e.n){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:"",!R.value){e.n=1;break}return e.a(2);case 1:if(!m(t)||""===t){e.n=2;break}return R.value=!0,r=s(function(){if(!t)return M.value;var e=t.toLowerCase();return N.filter(function(t){return t.name.toLowerCase().includes(e)||t.ps.toLowerCase().includes(e)||t.title.toLowerCase().includes(e)})}),M.value=r.value,R.value=!1,e.a(2);case 2:W(t);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),W=i(function(){var e=a(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,p({loading:R,request:S({p:1,type:-1,tojs:"soft.get_list",query:t,force:0,row:100}),data:{"list.data":[Array,M],"list.page":d(H)},success:function(e){M.value=e["list.data"].filter(function(e){return e.index_display}).concat(e["list.data"].filter(function(e){return!e.index_display})),N=M.value}});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),5e3),B=function(){var e=a(n().m(function e(t,r){var o,a;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=N.filter(function(e){return e.index_display}).length,N.length,M.value.length,!(o>12&&t.index_display)){e.n=1;break}return t.index_display=!t.index_display,e.a(2,v.error("首页最多只能显示12个软件!"));case 1:return e.p=1,a=t.index_display?T:x,e.n=2,p({loading:"正在处理，请稍后...",request:a(t.name),message:!0,success:function(e){e.status&&(M.value=M.value.map(function(e){return e.name==e.name&&(e.index_display=e.index_display),e}),N=N.map(function(e){return e.name==e.name&&(e.index_display=e.index_display),e}),P.value=N.filter(function(e){return e.index_display})),$()}});case 2:e.n=4;break;case 3:e.p=3,e.v,t.index_display=!t.index_display;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}(),D=function(e){var t=e?N.filter(function(t){if(t.title.toLowerCase().includes(e.trim().toLowerCase()))return{value:t.title}}):N,n=[];return t.forEach(function(e,t,r){n.push({value:e.title})}),n},K=function(){var e=a(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,p({loading:G,request:r(),success:function(e){var t=e.data.filter(function(e){return e.setup});C.value=t,P.value=t,$(),X()}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),$=function(){if(P.value.length<=12&&(q.value.length>0&&!O.value&&!A.value?C.value=[].concat(e(P.value),e(q.value)).slice(0,12):C.value=e(P.value).slice(0,12)),C.value.length<12)for(;C.value.length<12;)C.value.push({})},z=function(){var e=a(n().m(function e(){var t,r,o,a;return n().w(function(e){for(;;)switch(e.n){case 0:if(t=Math.ceil(H.value/12),!((r=Math.ceil(M.value.length/12))>=t)){e.n=1;break}return e.a(2);case 1:return e.n=2,S({p:r+1,type:-1,tojs:"soft.get_list",force:0,row:12});case 2:o=e.v,a=o.data,M.value=M.value.concat(a.list.data);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),U=function(e){b({disablePro:!(8===e.type),sourceId:{total:41,monitor:175,btwaf:40,tamper_core:42,bt_security:43,oneav:44,security_notice:56}[e.name]||0})},X=function(){var e,t=document.querySelector(".soft-wrapper");y.create(t,{animation:500,handle:".soft-move",chosenClass:"ghost",onEnd:(e=a(n().m(function e(t){var r;return n().w(function(e){for(;;)switch(e.n){case 0:r=C.value.splice(t.oldIndex,1)[0],C.value.splice(t.newIndex,0,r),Y();case 1:return e.a(2)}},e)})),function(t){return e.apply(this,arguments)})})},Y=function(){var e,t=C.value.filter(function(e){return void 0!==e.id&&e.name}).map(function(e){return e.name}).join("|");p({request:(e={ssort:t},l.post("plugin/sort_index",{data:e}))})},Z=function(){var e=a(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:if(!(t.endtime>=0||0===t.price)){e.n=1;break}j({name:t.name,pluginInfo:t}),e.n=3;break;case 1:return e.n=2,h({title:"购买插件",content:"插件已过期，是否前往购买？"});case 2:U(t);case 3:return e.a(2,!1)}},e)}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=a(n().m(function e(t){var r,o;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_({sName:t.name});case 1:if(r=e.v,"-1"!==(o=r.data).task){e.n=2;break}return e.a(2,v.error("当前插件正在安装，不可重复安装"));case 2:k({name:o.name,type:"i",pluginInfo:o});case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=a(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,p({request:w(),success:function(e){var t;Array.isArray(e.data)&&e.data.length>0&&(q.value=(null===(t=e.data[1])||void 0===t?void 0:t.list)||[])}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{popShow:F,isGetSoft:G,pluginKeyword:L,recommendList:q,containerRef:E,mySoftList:M,tableLoading:R,softShowList:C,load:z,createSoftList:$,getHomeInstallSoftData:K,getRecommendInfo:Q,goSoft:function(){t.push({path:"/soft"})},showPopoverHandle:V,leave:function(e){var t=e.offsetX,n=e.offsetY,r=E.value.offsetWidth,o=E.value.offsetHeight;if(t<0||n<0||t>=r||n>=o){var a=document.querySelector(".soft-search-popover");a&&"none"!=(null==a?void 0:a.style.display)?F.value=!0:(F.value=!1,L.value="")}},querySearch:function(e,t){t(D(e))},searchPluginHandle:function(){""==L.value?(I.value=!1,V()):(I.value=!0,V(L.value))},renderSoftImages:function(e){return"/static/img/soft_ico".concat("/ico-",e.replace(/-+[{0-9},\.,]+$/,""),".png")},changeSwitchHandle:B,openSoftView:Z,softStatusColor:function(e){return e.status||"phpmyadmin"===e.name?"#20A53A":"#FF4949"},softStatus:function(e){return e.status||"phpmyadmin"===e.name?"start":"stop"},openRecommendSoftView:function(e){if(e.name&&!e.install&&!g(e.isBuy))return j({name:e.name,pluginInfo:e}),!1},openSoftPreLink:function(e){window.open(e.preview,"_blank","noopener,noreferrer")},openLtdPayView:U,openInstall:J}}))}}})}();
