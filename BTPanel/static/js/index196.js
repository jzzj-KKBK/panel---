import{ay as e,M as a,K as s,gN as l,gO as t,k as o,e as i,al as r}from"./utils-lib.js?v=1756369731";import{c,k as m,r as n,G as d,q as p,v as u,e as f,A as h,y as _,x as v,B as g,H as b,z as x,Q as y,ar as j,T as k,D as C,a7 as V,P as L,aA as D}from"./base-lib.js?v=1756369731";import S from"./add-compose-template.js?v=1756369731";import{_ as q}from"./index101.js?v=1756369731";import{f as w}from"./validator.js?v=1756369731";import{l as A}from"./useMethods.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./form-item.js?v=1756369731";import"./index104.js?v=1756369731";import"./index140.js?v=1756369731";import"./ace.js?v=1756369731";import"./column.js?v=1756369731";const I={class:"container-dialog !p-0"},N={class:"flex items-center relative"},O={class:"table w-full mt-[1rem]"},T={class:"pl-[2rem]"},U={class:"help-info-text c7 list-disc text-[#ff0000] mt-[1.5rem]"},z=i(c({__name:"search-local-template",emits:["close","complate"],setup(i,{expose:r,emit:c}){const L=c,{refs:{isRefreshTemplateList:D}}=e(),S=m({path:"",checked:!1}),z=m({loading:!1,list:[],selection:[]}),H=A(),J=n(),M=m({selectList:[]}),P=()=>{w({type:"dir",change:e=>{S.path=e}})},R=async()=>{if(""===S.path)return a.error("请选择路径"),!1;s({request:l({data:JSON.stringify({path:S.path,sub_dir:S.checked?"1":"0"})}),data:[Array,j(z,"list")],loading:j(z,"loading")})},B=e=>{M.selectList=e};return r({confirm:()=>{0!==M.selectList.length?s({request:t({data:JSON.stringify({template_list:M.selectList})}),message:!0,success:e=>{e.status&&(L("complate",e),D.value=!0,L("close"))}}):a.error("请选择模板")}}),(e,a)=>{const s=q,l=k,t=C,i=o,r=V,c=d("bt-loading");return p(),u("div",I,[f(r,{ref_key:"cmdFormRef",ref:J,size:"default",model:v(S),class:"relative w-full","label-position":"right",onSubmit:a[3]||(a[3]=y(()=>{},["prevent"]))},{default:h(()=>[_("div",N,[f(s,{modelValue:v(S).path,"onUpdate:modelValue":a[0]||(a[0]=e=>v(S).path=e),width:"51rem",icon:"icon-file_mode",onIconClick:P,onChangePassive:a[1]||(a[1]=e=>{S.path=S.path.replace(/\s+/g,"")}),placeholder:"请输入镜像路径"},null,8,["modelValue"]),f(l,{class:"!absolute top-[0rem] left-[36rem]",modelValue:v(S).checked,"onUpdate:modelValue":a[2]||(a[2]=e=>v(S).checked=e)},{default:h(()=>[...a[4]||(a[4]=[g("包含子目录",-1)])]),_:1},8,["modelValue"]),f(t,{class:"ml-8px",type:"primary",onClick:R},{default:h(()=>[...a[5]||(a[5]=[g("搜索",-1)])]),_:1})]),_("div",O,[b(f(i,{ref:"ftpTable",column:v(H),height:"33rem",data:v(z).list,description:"模板列表为空",onSelectionChange:B},null,8,["column","data"]),[[c,v(z).loading],[c,"正在加载模板列表，请稍后...","title"]])]),_("div",T,[_("ul",U,[_("li",null,"选中需要添加的Compose 【已选中："+x(v(M).selectList.length)+"个】",1)])])]),_:1},8,["model"])])}}}),[["__scopeId","data-v-4f929258"]]),H={class:"flex flex-col p-[1.6rem] lib-box"},J=i(c({__name:"index",props:{compData:{default:()=>({})}},emits:["close"],setup(e,{expose:a,emit:s}){const l=s,t=e,o=n("first"),i=n(),c=n(),m=e=>{var a;(null==(a=t.compData)?void 0:a.callback)&&t.compData.callback(e)},d=()=>{l("close")};return a({onConfirm:async()=>{try{"first"==o.value?i.value.onConfirm():c.value.confirm()}catch(e){}}}),(e,a)=>{const s=D,l=r;return p(),u("div",H,[f(l,{type:"card",modelValue:v(o),"onUpdate:modelValue":a[0]||(a[0]=e=>L(o)?o.value=e:null)},{default:h(()=>[f(s,{label:"添加Compose模板",name:"first"},{default:h(()=>[f(S,{ref_key:"first",ref:i,onClose:d,onComplate:m},null,512)]),_:1}),f(s,{label:"搜索本地模板",name:"second"},{default:h(()=>[f(z,{ref_key:"second",ref:c,onClose:d,onComplate:m},null,512)]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-36c9a99e"]]);export{J as default};
