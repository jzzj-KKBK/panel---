import{al as a,b as l}from"./utils-lib.js?v=1756369731";import{c as e,ay as n,r as t,g as s,w as u,p as r,q as i,v as o,y as d,e as m,A as v,B as c,z as p,x as g,H as _,I as f,F as b,a_ as j,P as x,bN as y,bM as h,D as w,M as k,aA as C}from"./base-lib.js?v=1756369731";import{_ as H}from"./index116.js?v=1756369731";import{getProjectLogs as S}from"./site.js?v=1756369731";import{j as V}from"./group-detail.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index103.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";const A={class:"p-[2rem]"},D={class:"text-[1.6rem] text-[#555] mb-[2rem] mt-[1.6rem] font-bold flex justify-between"},M={class:"mt-[2rem]"},N=e({__name:"group-logs",props:{compData:{default:{}}},setup(e){const N=l(),q=n("popupClose",()=>{}),z=t(""),B=s(()=>{var a;return(null==(a=V.value.running_step)?void 0:a.names)||[]}),F=t(!1),I=t(""),J=s(()=>!B.value.length);let O=s(()=>!V.value.running);u(()=>V.value.running_step,a=>{a&&(z.value=B.value[0],R(z.value))},{immediate:!0}),u(O,a=>{a&&(N.success("项目组已经执行完毕"),q())});const P=s(()=>{var a,l;return(null==(a=V.value.running_step)?void 0:a.msg)||(null==(l=V.value.running_data)?void 0:l.msg)||V.value.msg||"--"}),R=async a=>{F.value=!0;try{const l=await S({data:JSON.stringify({project_name:a})},"java");l.status?I.value=l.data.data:N.error(l.msg)}catch(l){}finally{F.value=!1}};return r(()=>{}),(l,e)=>{const n=y,t=h,s=w,u=H,r=C,S=a;return i(),o("div",A,[d("div",null,[m(t,{title:"项目组信息",border:"",column:3,class:"table-descriptions"},{default:v(()=>[m(n,{label:"总项目数"},{default:v(()=>{var a,l,e,n;return[c(p((null==(l=null==(a=g(V))?void 0:a.running_data)?void 0:l.length)>-1?null==(n=null==(e=g(V))?void 0:e.running_data)?void 0:n.length:"--"),1)]}),_:1}),m(n,{label:"未执行的项目数"},{default:v(()=>{var a,l,e,n;return[c(p((null==(l=null==(a=g(V))?void 0:a.running_data)?void 0:l.remaining)>-1?null==(n=null==(e=g(V))?void 0:e.running_data)?void 0:n.remaining:"--"),1)]}),_:1}),m(n,{label:"正在执行中的项目数"},{default:v(()=>{var a,l,e,n;return[c(p((null==(l=null==(a=g(V))?void 0:a.running_data)?void 0:l.executing)>-1?null==(n=null==(e=g(V))?void 0:e.running_data)?void 0:n.executing:"--"),1)]}),_:1}),m(n,{label:"当前执行步骤"},{default:v(()=>[c(p(g(P)),1)]),_:1})]),_:1})]),d("div",D,[e[4]||(e[4]=c(" 项目日志 ",-1)),_(m(s,{type:"default",onClick:e[0]||(e[0]=a=>R(g(z)))},{default:v(()=>[...e[3]||(e[3]=[c("刷新",-1)])]),_:1},512),[[f,!g(O)&&!g(J)]])]),_(m(S,{class:"h-[30rem]",type:"card",modelValue:g(z),"onUpdate:modelValue":e[1]||(e[1]=a=>x(z)?z.value=a:null),onTabClick:e[2]||(e[2]=a=>R(g(z)))},{default:v(()=>[(i(!0),o(b,null,j(g(B),a=>(i(),k(r,{key:a,label:a,name:a},{default:v(()=>[m(u,{content:g(I),isHtml:!0,class:"mt-16x",fullScreen:{title:"全屏查看【项目】日志",onRefresh:()=>R(g(z))},style:{height:"48rem",width:"99.5%"}},null,8,["content","fullScreen"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),[[f,!g(J)]]),_(d("span",M,"暂无日志",512),[[f,g(J)]])])}}});export{N as default};
