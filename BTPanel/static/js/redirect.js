import{fj as e,bv as a,fk as t,a7 as s,b as l,a8 as r,W as o,h as i}from"./utils-lib.js?v=1756369731";import{_ as n}from"./index103.js?v=1756369731";import{B as p}from"./index140.js?v=1756369731";import{c as m,G as d,q as u,v as c,e as f,A as h,x as v,D as b,B as j,M as y,C as x,y as _,H as C,P as k}from"./base-lib.js?v=1756369731";import{a as g,b as B,u as V}from"./column.js?v=1756369731";import{u as H}from"./useStore4.js?v=1756369731";import{u as S,i as q,f as w,g as R,a as T,e as U,j as A,h as D,b as E,s as F,c as G,d as L,k as M}from"./useController17.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./ace.js?v=1756369731";import"./index104.js?v=1756369731";import"./site.js?v=1756369731";const P={class:"h-full"},W={class:"p-[20px]"},z=m({__name:"redirect",setup(m){const z=l(),{siteType:I}=H(),{isRefreshList:J}=S(),K=r([{label:"启用重定向规则",value:"start",event:M},{label:"停用重定向规则",value:"stop",event:M},{label:"删除重定向规则",value:"delete",event:M}]),{BtTable:N,BtRefresh:O,BtBatch:Q}=e({request:q,columns:[g(),{label:"被重定向",render:e=>{var t;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null==(t=a(e.redirectdomain,"array",[]))?void 0:t.join("、"):e.redirectpath}},{label:"重定向类型",prop:"domainorpath",render:e=>e.errorpage?"错误":"domain"===e.domainorpath?"域名":"路径"},{label:"重定向到",render:e=>e.topath?e.topath:e.tourl},B({prop:"type",event:w,data:["已停止","运行中"]}),V([{width:70,title:"配置文件",onClick:e=>{if(!e.type)return z.warn("请先启用重定向规则再查看配置文件");R(e)}},{title:"编辑",onClick:e=>{e.errorpage?T(e):U(e)}},{onClick:A,title:"删除"}])],extension:[t(),K,s(J)]});return(e,a)=>{const t=n,s=o,l=i,r=d("bt-loading");return u(),c("div",P,[f(t,null,{"header-left":h(()=>[f(v(b),{type:"primary",onClick:a[0]||(a[0]=e=>v(U)())},{default:h(()=>[...a[6]||(a[6]=[j("添加重定向",-1)])]),_:1}),["php","html"].includes(v(I))?(u(),y(v(b),{key:0,type:"default",onClick:a[1]||(a[1]=e=>v(T)())},{default:h(()=>[...a[7]||(a[7]=[j("404重定向",-1)])]),_:1})):x("",!0)]),"header-right":h(()=>[f(v(O))]),content:h(()=>[f(v(N),{"max-height":460})]),"footer-left":h(()=>[f(v(Q))]),_:1}),f(s,{class:"mt-2rem",options:v(D),"list-style":"disc"},null,8,["options"]),f(l,{title:"编辑配置文件",modelValue:v(L),"onUpdate:modelValue":a[5]||(a[5]=e=>k(L)?L.value=e:null),area:54},{default:h(()=>[_("div",W,[a[9]||(a[9]=j(" 提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换 ",-1)),C(f(v(p),{class:"!h-[36rem] my-[8px]",ref:"aceEditor",modelValue:v(E),"onUpdate:modelValue":a[2]||(a[2]=e=>k(E)?E.value=e:null),onSave:a[3]||(a[3]=e=>v(F)())},null,8,["modelValue"]),[[r,v(G)]]),f(v(b),{type:"primary",onClick:a[4]||(a[4]=e=>v(F)())},{default:h(()=>[...a[8]||(a[8]=[j("保存",-1)])]),_:1}),a[10]||(a[10]=_("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[_("li",null,"此处为该重定向的配置文件，若您不了解配置规则,请勿随意修改。")],-1))])]),_:1},8,["modelValue"])])}}});export{z as default};
