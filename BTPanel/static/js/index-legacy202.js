!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){u(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function u(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var a=r.call(n,t||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function u(t,r,a,u){var i=r&&r.prototype instanceof l?r:l,c=Object.create(i.prototype);return o(c,"_invoke",function(t,r,a){var u,i,o,l=0,c=a||[],f=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return u=n,i=0,o=e,p.n=t,s}};function v(t,r){for(i=t,o=r,n=0;!f&&l&&!a&&n<c.length;n++){var a,u=c[n],v=p.p,m=u[2];t>3?(a=m===r)&&(o=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=v&&((a=t<2&&v<u[1])?(i=0,p.v=r,p.n=u[1]):v<m&&(a=t<3||u[0]>r||r>m)&&(u[4]=t,u[5]=r,p.n=m,i=0))}if(a||t>1)return s;throw f=!0,r}return function(a,c,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&v(c,m),i=c,o=m;(n=i<2?e:o)||!f;){u||(i?i<3?(i>1&&(p.n=-1),v(i,o)):p.n=o:p.v=o);try{if(l=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(f=p.n<0)?o:t.call(r,p))!==s)break}catch(n){u=e,i=1,o=n}finally{l=1}}return{value:n,done:f}}}(t,a,u),!0),c}var s={};function l(){}function c(){}function f(){}n=Object.getPrototypeOf;var p=[][r]?n(n([][r]())):(o(n={},r,function(){return this}),n),v=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=f,o(v,"constructor",f),o(f,"constructor",c),c.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(v),o(v,a,"Generator"),o(v,r,function(){return this}),o(v,"toString",function(){return"[object Generator]"}),(i=function(){return{w:u,m:m}})()}function o(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,n,t,r){function u(n,t){o(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(u("next",0),u("throw",1),u("return",2))},o(e,n,t,r)}function s(e,n,t,r,a,u,i){try{var o=e[u](i),s=o.value}catch(e){return void t(e)}o.done?n(s):Promise.resolve(s).then(r,a)}function l(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){s(u,r,a,i,o,"next",e)}function o(e){s(u,r,a,i,o,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./useController-legacy4.js?v=1756369731","./index-legacy103.js?v=1756369731","./index-legacy418.js?v=1756369731","./form-item-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./index-legacy140.js?v=1756369731","./useStore-legacy4.js?v=1756369731","./site-legacy.js?v=1756369731","./index-legacy116.js?v=1756369731"],function(e,t){"use strict";var r,u,o,s,c,f,p,v,m,d,h,g,y,w,b,_,k,x,E,j,P,S,C,V,O,R,q,D,T,L,I,U,z,F,H,A,B,N,M,G,J,K,W,Q,X,$,Z,Y,ee,ne,te,re,ae,ue,ie,oe,se,le,ce,fe,pe,ve,me,de,he,ge,ye,we,be,_e,ke,xe,Ee,je,Pe,Se,Ce,Ve,Oe,Re,qe,De,Te,Le,Ie,Ue,ze,Fe,He,Ae,Be,Ne,Me,Ge,Je,Ke,We,Qe,Xe,$e,Ze,Ye,en,nn,tn,rn,an,un,on,sn,ln,cn,fn,pn,vn,mn,dn,hn,gn,yn,wn,bn,_n,kn,xn,En,jn,Pn,Sn,Cn,Vn,On;return{setters:[function(e){r=e.K,u=e.hi,o=e.hj,s=e.hk,c=e.M,f=e.hl,p=e.N,v=e.bX,m=e.aH,d=e.o,h=e.fj,g=e.c,y=e.a7,w=e.a8,b=e.G,_=e.bV,k=e.aa,x=e.l,E=e.j,j=e.hm,P=e.at,S=e.hn,C=e.ho,V=e.hp,O=e.hq,R=e._,q=e.e,D=e.hr,T=e.hs,L=e.ht,I=e.u,U=e.hu,z=e.hv,F=e.W,H=e.hw,A=e.hx,B=e.b,N=e.A,M=e.ag,G=e.a2,J=e.hy,K=e.hz,W=e.hA,Q=e.hB,X=e.bv,$=e.L,Z=e.fk,Y=e.h,ee=e.hC,ne=e.hD,te=e.hE,re=e.hF,ae=e.hG,ue=e.hH,ie=e.hI,oe=e.hJ,se=e.w,le=e.hK,ce=e.hL,fe=e.hM,pe=e.hN,ve=e.hO,me=e.hP,de=e.hQ,he=e.hR,ge=e.hS,ye=e.hT,we=e.hU,be=e.al,_e=e.hV,ke=e.hW},function(e){xe=e.s,Ee=e.j,je=e.r,Pe=e.c,Se=e.e,Ce=e.B,Ve=e.aB,Oe=e.q,Re=e.v,qe=e.y,De=e.A,Te=e.x,Le=e.P,Ie=e.z,Ue=e.H,ze=e.I,Fe=e.g,He=e.ax,Ae=e.D,Be=e.aj,Ne=e.ai,Me=e.a$,Ge=e.al,Je=e.p,Ke=e.a4,We=e.i,Qe=e.t,Xe=e.G,$e=e.F,Ze=e.a_,Ye=e.M,en=e.Q,nn=e.C,tn=e.o,rn=e.J,an=e.k,un=e.Z,on=e.a9,sn=e.T,ln=e.a7,cn=e.w},function(e){fn=e.n,pn=e.k,vn=e.D},function(e){mn=e._},function(e){dn=e.B},function(e){hn=e.h,gn=e.F,yn=e.k,wn=e.g},function(e){bn=e.i,_n=e.f},function(e){kn=e.a,xn=e.c,En=e.b,jn=e.u},function(e){Pn=e.B},function(e){Sn=e.S},function(e){Cn=e.saveFileBody,Vn=e.getRedirectList},function(e){On=e._}],execute:function(){var Rn=Ee("DOCKERSITE-DOMAIN-STORE",function(){var e=je(),n=je(!1),t=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({request:u(n)});case 1:return t=e.v,e.a(2,{data:t.data,status:!0});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"获取域名信息失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在设置HTTPS端口，请稍候...",request:o(n),message:!0});case 1:return t=e.v,e.a(2,a({},t));case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"设置https端口失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在添加域名，请稍后...",request:s(n)});case 1:return t=e.v,e.a(2,{status:t.status,msg:t.msg,data:t.data});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"添加域名失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=l(i().m(function e(n){var t,r,a,u;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=c.load("正在删除域名，请稍后..."),e.p=1,e.n=2,f(n);case 2:if(a=e.v,u=null!==(r=a.data)&&void 0!==r&&r.hasOwnProperty("status")?a.data:a,!p(u.data)){e.n=3;break}return e.a(2,{status:u.status,msg:u.data[0].msg});case 3:return e.a(2,{status:u.status,msg:(null==u?void 0:u.data)||(null==u?void 0:u.error_msg)||u.msg});case 4:return e.p=4,e.v,e.a(2,{status:!1,msg:"删除域名失败"});case 5:return e.p=5,t.close(),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=l(i().m(function e(n){var t,r,u,o,s,l;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=c.load("正在删除域名，请稍后..."),e.p=1,e.n=2,f(n);case 2:return r=e.v,u=r.data,o=bn(u),s=o.data,l=s.map(function(e){return a({name:e.domain},e)}),e.a(2,{data:l,status:!0});case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"删除域名失败"});case 4:return e.p=4,t.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}();return{isRefreshDomain:n,port:e,delMultDomainEvent:h,getDomainListEvent:t,addDomainEvent:m,setPortEvent:v,delDomainEvent:d}}),qn=function(){return xe(Rn())},Dn=fn().siteInfo,Tn=qn(),Ln=Tn.port,In=Tn.isRefreshDomain,Un=Rn(),zn=Un.getDomainListEvent,Fn=Un.setPortEvent,Hn=Un.addDomainEvent,An=Un.delDomainEvent,Bn=Un.delMultDomainEvent,Nn=je(!1),Mn=je(""),Gn=function(e){var n=Dn.value,t=n.name;return{id:n.id,site_name:t,domains:e}},Jn=function(){var e=l(i().m(function e(){var n,t,r,a,u,o,s;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n=Mn.value,t=["21","25","443","888","8888","8443"],""!==n){e.n=1;break}return c.error("域名不能为空"),e.a(2,!1);case 1:if(r=String(n.match(/:(\d+)/g)).replace(/:/g,""),!t.includes(r)){e.n=2;break}return c.error("端口不能为常用端口21、25、443、888、8888、8443"),e.a(2,!1);case 2:return e.n=3,Qn();case 3:if(e.v){e.n=4;break}return e.a(2,!1);case 4:return a=Gn(n),e.n=5,Hn(a);case 5:return(u=e.v).status&&pn({title:"域名添加结果",resultData:(null==u||null===(o=u.data)||void 0===o?void 0:o.domains)||(null==u||null===(s=u.data)||void 0===s?void 0:s.data)||[],autoTitle:"添加域名完成"}),In.value=!0,Mn.value="",e.a(2,u.status);case 6:e.p=6,e.v;case 7:return e.a(2)}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),Kn=function(){var e=Dn.value;return{site_name:e.name,id:e.id}},Wn=function(){var e=l(i().m(function e(){var n,t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=Kn(),e.n=1,zn(n);case 1:return t=e.v,Ln.value=Number(t.data.https_port)||"未开启",e.a(2,{data:t.data.domain_list,total:t.data.domain_list.length,other:{port:t.data.https_port}});case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Qn=function(){var e=l(i().m(function e(){var n,t,r,a,u,o,s=arguments;return i().w(function(e){for(;;)switch(e.n){case 0:n=s.length>0&&void 0!==s[0]?s[0]:Mn.value,t=n.trim().replace(" ","").split("\n"),r=t.findIndex(function(e){return e.split(":")[0].length<3}),a=0;case 1:if(!(a<t.length)){e.n=4;break}if(u=t[a],!(o=u.includes(":"))||v(u)){e.n=2;break}return c.error("第"+(a+1)+"行【"+u+"】域名格式错误"),e.a(2,!1);case 2:if(o||m(u)){e.n=3;break}return c.error("第"+(a+1)+"行【"+u+"】域名格式错误"),e.a(2,!1);case 3:a++,e.n=1;break;case 4:if(-1===r){e.n=5;break}return c.error("第 ".concat(r+1," 个域名长度不符合要求（必须大于3个字符）")),e.a(2,!1);case 5:return e.a(2,t)}},e)}));return function(){return e.apply(this,arguments)}}(),Xn=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Fn({site_name:Dn.value.name,https_port:n.value.port});case 1:null!=(t=e.v)&&t.status&&(Ln.value=Number(n.value.port)),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),$n=function(e){var n=Dn.value;return{id:n.id,site_name:n.name,domain:e.name,port:e.port}},Zn=function(){var e=l(i().m(function e(n){var t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d({icon:"warning-filled",title:"删除【".concat(n.name,"】"),content:"删除".concat(n.name,"后，将无法使用该域名访问网站，是否继续操作？")});case 1:return t=$n(n),e.n=2,An(t);case 2:return r=e.v,c.request(r),In.value=!0,e.a(2,r);case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n){return e.apply(this,arguments)}}(),Yn=function(e){var n=Dn.value.name,t=e.map(function(e){return{id:e.id,port:e.port,domain:e.name,site_name:n}});return{del_domain_list:JSON.stringify(t)}},et=function(){var e=l(i().m(function e(n){var t,r,a;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d({icon:"warning-filled",title:"批量删除",content:"同时删除选中的域名，是否继续？",type:"calc"});case 1:return t=[],r=Yn(n),e.n=2,Bn(r);case 2:return a=e.v,t=a.data,e.n=3,pn({resultData:t,autoTitle:"删除域名完成"});case 3:return In.value=!0,e.a(2,{status:!0,msg:"删除域名成功"});case 4:return e.p=4,e.v,e.a(2,{status:!1,msg:"删除域名失败"})}},e,null,[[0,4]])}));return function(n){return e.apply(this,arguments)}}(),nt=function(){var e=l(i().m(function e(){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Wn();case 1:return e.a(2,e.v);case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),tt={class:""},rt={class:"flex items-end mb-[12px]"},at=Pe({__name:"index",setup:function(e){var t,r=qn(),a=r.isRefreshDomain,u=r.port,o=w([{label:"删除",value:"delete",event:(t=l(i().m(function e(n,t,r,a){return i().w(function(e){for(;;)switch(e.n){case 0:et(r.value);case 1:return e.a(2)}},e)})),function(e,n,r,a){return t.apply(this,arguments)})}]),s=h({request:nt,columns:[kn(),{label:"域名",prop:"name",width:400,render:function(e){return Se("div",{class:"truncate"},[Se(g,{class:"bt-link",href:"http://".concat(e.name,":").concat(e.port),target:"_blank"},{default:function(){return[e.name]}})])}},{label:"端口",prop:"port"},{label:"操作",align:"right",render:function(e){return 1===p.data.length?Se("span",null,[Ce("不可操作")]):Ve("span",{class:"cursor-pointer bt-link",onClick:function(){Zn(e)}},"删除")}}],extension:[o,y(a)]}),c=s.BtTable,f=s.BtBatch,p=s.config,v=function(){var e=b({data:{port:u.value},options:function(e){return Fe(function(){return[hn("HTTPS端口",function(){return Se(dn,{modelValue:e.value.port,"onUpdate:modelValue":function(n){return e.value.port=n}},null)},"port",{attrs:{min:1,max:65535},rules:[_({message:"请输入端口号",trigger:"blur"}),k()]})]})},submit:Xn}),n=e.BtForm,t=e.submit;x({title:"更换端口",area:42,showFooter:!0,component:function(){return Se(n,{class:"p-2rem"},null)},onConfirm:t})};return function(e,t){var r=E,a=He,i=Ae,o=mn;return Oe(),Re("div",tt,[qe("div",rt,[Se(a,{ref:"popover",placement:"top-start",width:"41rem","popper-class":"green-tips-popover !p-0 !border-none",visible:Te(Nn),"onUpdate:visible":t[2]||(t[2]=function(e){return Le(Nn)?Nn.value=e:null}),"trigger-keys":[],trigger:"focus"},{default:De(function(){return n(t[3]||(t[3]=[qe("div",{class:"!p-[12px] bg-[#20a53a] text-white"},[Ce(" 如需绑定外网，请换行填写，每行一个域名，默认为80端口 "),qe("br"),Ce(" IP地址格式：192.168.1.199 "),qe("br"),Ce(" 泛解析添加方法 *.domain.com "),qe("br"),Ce(" 如另加端口格式为 www.domain.com:88 ")],-1)]))}),reference:De(function(){return[Se(r,{modelValue:Te(Mn),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Le(Mn)?Mn.value=e:null}),type:"textarea",resize:"none",rows:4,width:"42rem",onFocus:t[1]||(t[1]=function(e){return Nn.value=!0}),placeholder:"如需绑定外网，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},null,8,["modelValue"])]}),_:1},8,["visible"]),Se(i,{type:"primary",class:"absolute",style:{right:"4rem",top:"5rem"},onClick:Te(Jn)},{default:De(function(){return n(t[4]||(t[4]=[Ce("添加",-1)]))}),_:1},8,["onClick"])]),Se(o,null,{"header-right":De(function(){return[qe("div",null,[Ce(" HTTPS端口："+Ie(Te(u))+" ",1),Ue(qe("span",{class:"bt-link cursor-pointer",onClick:v},"更换",512),[[ze,"number"==typeof Te(u)]])])]}),content:De(function(){return[Se(Te(c),{"max-height":440})]}),"footer-left":De(function(){return[Se(Te(f))]}),_:1}),t[5]||(t[5]=qe("ul",{class:"mt-[.8rem] leading-8 text-[1.2rem] list-disc ml-2rem"},[qe("li",null,"建议所有域名都使用默认的80端口")],-1))])}}}),ut=Ee("DOCKER-SITE-SITE-DIR-STORE",function(){var e=fn().siteInfo,n=je([]),t=je({path:"",run_path:"",userini:!1}),u=function(){var n=l(i().m(function n(){var a,u,o;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,a={id:e.value.id},n.n=1,r({loading:"正在获取版本，请稍后...",request:j(a)});case 1:(u=n.v).status?t.value.path=u.data.path:P(u),n.n=3;break;case 2:n.p=2,o=n.v,P(o);case 3:return n.a(2)}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),o=function(){var a=l(i().m(function a(){var u,o,s;return i().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.p=0,u={id:e.value.id},a.n=1,r({loading:"正在获取版本，请稍后...",request:S(u)});case 1:(o=a.v).status?(t.value.userini=o.data.userini,t.value.run_path=o.data.runPath.runPath,n.value=o.data.runPath.dirs.map(function(e){return{label:e,value:e}})):P(o),a.n=3;break;case 2:a.p=2,s=a.v,P(s);case 3:return a.a(2)}},a,null,[[0,2]])}));return function(){return a.apply(this,arguments)}}(),s=function(){var n=l(i().m(function n(t,u){var o;return i().w(function(n){for(;;)switch(n.n){case 0:if(t){n.n=1;break}return c.error("请选择目录"),n.a(2);case 1:o=a({site_name:e.value.name,id:e.value.id},"path"===u?{path:t}:{run_path:t}),r({loading:"正在获取版本，请稍后...",message:!0,request:"path"===u?C(o):V(o)});case 2:return n.a(2)}},n)}));return function(e,t){return n.apply(this,arguments)}}(),f=function(){var n=l(i().m(function n(t){var a;return i().w(function(n){for(;;)switch(n.n){case 0:a={id:e.value.id,status:t?1:0},r({loading:"正在设置，请稍后...",message:!0,request:O(a)});case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}();return{dirOptions:n,resetData:function(){n.value=[],t.value.path="",t.value.run_path=""},getFormData:function(){return t},getDir:u,formData:t,saveDirPath:s,setDirUser:f,getUserini:o}}),it={class:"p-[2rem] overflow-auto"};var ot=Pe({__name:"index",setup:function(e,n){var t=n.expose,r=ut(),a=xe(r),u=a.dirOptions,i=a.formData,o=r.getDir,s=r.resetData,l=r.saveDirPath,c=r.setDirUser,f=r.getUserini,p=b({data:function(){return i.value},options:function(e){return Fe(function(){return[hn("网站目录",function(){return Se("div",null,[Se("div",{class:"formItem"},[Se(E,{modelValue:e.value.path,"onUpdate:modelValue":function(n){return e.value.path=n},width:"32rem"},{append:function(){return Se(Ae,{onClick:function(){return function(e){_n({type:"dir",path:e.value.path||"/www/dk_project/wwwroot",change:function(n,t){e.value.path=n}})}(e)}},{default:function(){return[Se(R,{icon:"icon-file_mode",class:"cursor-pointer"},null)]}})}}),Se(Ae,{type:"primary",class:"!ml-[1.2rem]",onClick:function(){return l(e.value.path,"path")}},{default:function(){return[Ce("保存")]}})]),Se("span",{class:"formTips"},[Ce("当前网站的部署目录，可以选择其他目录")])])},"path",{rules:[{required:!1,trigger:"change",message:"请选择网站目录"}]}),hn("运行目录",function(){var n,t;return Se("div",null,[Se("div",{class:"formItem"},[Se(Be,{class:"!w-[32rem]",modelValue:e.value.run_path,"onUpdate:modelValue":function(n){return e.value.run_path=n}},(t=n=u.value.map(function(e){return Se(Ne,{key:e.value,label:e.label,value:e.value},null)}),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!We(t)?n:{default:function(){return[n]}})),Se(Ae,{type:"primary",class:"!ml-[1.2rem]",onClick:function(){return l(e.value.run_path,"run_path")}},{default:function(){return[Ce("保存")]}})]),Se("span",{class:"formTips"},[Ce("部分程序需要指定二级目录作为运行目录，如ThinkPHP5,Laravel")])])},"run_path",{rules:[{required:!1,trigger:"change",message:"请选择网站运行目录"}]}),gn(function(){return Se("div",null,[Se(Me,null,null),Se("div",{class:"formItem"},[Se("span",{class:"formLabel"},[Ce("防跨站攻击")]),Se(Ge,{class:"mr-[12px]",modelValue:e.value.userini,"onUpdate:modelValue":function(n){return e.value.userini=n},onChange:c},null),Se("span",{class:"text-[#999]"},[Ce("防跨站攻击(open_basedir)，防止黑客通过其他网站目录进行入侵攻击")])])])},{key:"userini",rules:[]})]})}}),v=p.BtForm;return Je(function(){o(),f()}),Ke(function(){s()}),t({init:function(){o(),f()}}),function(e,n){return Oe(),Re("div",it,[Se(Te(v))])}}}),st=q(ot,[["__scopeId","data-v-4728c209"]]),lt=Ee("SITE-PSEUDO-STORE",function(){var e=function(){var e=l(i().m(function e(n){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在删除伪静态规则，请稍候...",request:D(n),message:!0});case 1:e.v,e.n=3;break;case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"删除失败"});case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=l(i().m(function e(n){var t,a;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({request:T(n)});case 1:return t=e.v,a=t.data,e.a(2,{data:a,status:status});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"获取伪静态列表失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),t=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在设置模板，请稍候...",request:L(n),message:!0});case 1:return t=e.v,e.a(2,{status:t.status,msg:t.msg});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"设置模板失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}();return{delPseudoStaticEvent:e,getReWriteListEvent:n,setTemplateEvent:t}}),ct=fn().siteInfo,ft=Sn().getFileEvent,pt=I(),vt=pt.plugin,mt=pt.getGlobalInfo,dt=Qe(vt.value).webserver,ht=lt(),gt=ht.delPseudoStaticEvent,yt=ht.getReWriteListEvent,wt=ht.setTemplateEvent,bt=je(""),_t=je([]),kt=je(""),xt=je([]),Et=je(!1),jt=je(""),Pt=je(!1),St=[{content:"请选择您的应用，若设置伪静态后，网站无法正常访问，请尝试设置回default"},{content:"您可以对伪静态规则进行修改，修改完后保存即可。"}],Ct=function(e){return!_t.value.includes(e)},Vt=function(){var e=l(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({title:"删除伪静态模板【".concat(n.name,"】"),content:"删除后不可恢复，确定删除吗？",icon:"warning-filled"});case 1:return e.n=2,gt(n);case 2:if(!e.v.status){e.n=4;break}return e.n=3,Ot();case 3:return e.n=4,qt();case 4:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Ot=function(){var e=l(i().m(function e(){var n,t;return i().w(function(e){for(;;)switch(e.n){case 0:return n={siteName:ct.value.name},Pt.value=!0,e.n=1,yt(n);case 1:t=e.v,Rt(t.data),Pt.value=!1;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=l(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:xt.value=n.rewrite,_t.value=n.default_list,jt.value=n.sitePath+"/.htaccess",kt.value=n.rewrite[0]||"";case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),qt=function(){var e=l(i().m(function e(){var n,t,r,a=arguments;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:{site_name:ct.value.name},e.p=1,Pt.value=!0,!n.path){e.n=3;break}return e.n=2,ft(n);case 2:r=e.v,e.n=5;break;case 3:return e.n=4,U(n);case 4:r=e.v;case 5:return t=r,bt.value=t.data.data,Pt.value=!1,e.a(2,t);case 6:return e.p=6,e.v,Pt.value=!1,e.a(2,{data:"获取伪静态内容失败"})}},e,null,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),Dt=function(e){var n="/www/server/panel/rewrite/".concat(dt.value,"/").concat(e,".conf");qt({path:"0.当前"===e?"":n})},Tt=function(){var e=l(i().m(function e(){var n,t,r=arguments;return i().w(function(e){for(;;)switch(e.n){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{rewrite_conf:bt.value,site_name:"".concat(ct.value.name)},e.n=1,z(n);case 1:t=e.v,c.request(t),t.status&&Ot();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=l(i().m(function e(n){var t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,(t=a(a({},n),{},{data:bt.value})).name=t.name.trim(),!t.name.includes(" ")){e.n=1;break}return e.a(2,c.error("模板名称不能包含空格"));case 1:if(""!==t.name){e.n=2;break}return e.a(2,c.error("模板名称不能为空"));case 2:if(!xt.value.includes(t.name)){e.n=3;break}return e.a(2,c.error("模板名称不能和已有的模板名称重复且不可为空"));case 3:return e.n=4,wt(t);case 4:if(!(r=e.v).status){e.n=6;break}return Et.value=!1,e.n=5,Ot();case 5:return e.n=6,qt();case 6:return e.a(2,r.status);case 7:return e.p=7,e.v,e.a(2,!1)}},e,null,[[0,7]])}));return function(n){return e.apply(this,arguments)}}(),It=function(){var e=l(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,mt();case 1:return e.n=2,Ot();case 2:return e.n=3,qt();case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ut={class:"h-full"},zt={class:"flex items-center justify-between"},Ft={class:"flex items-center justify-between"},Ht=["onClick"],At={class:"flex items-center"},Bt={class:"my-[12px]"},Nt=Pe({__name:"index",setup:function(e){var t=function(){var e,n=b({options:function(){return Fe(function(){return[{type:"input",label:"模板名称",key:"name",attrs:{placeholder:"请输入模板名称"},rules:[{required:!0,message:"请输入模板名称",trigger:"blur"}]}]})},submit:(e=l(i().m(function e(n,t){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t();case 1:return e.n=2,Lt(n.value);case 2:return e.a(2,e.v)}},e)})),function(n,t){return e.apply(this,arguments)})}),t=n.BtForm,r=n.submit;x({title:"另存为模板",area:42,showFooter:!0,component:function(){return Se(t,{class:"p-2rem"},null)},onConfirm:r})};return Je(It),function(e,r){var a=Ne,u=Be,i=g,o=Pn,s=Ae,l=F,c=Xe("bt-loading");return Oe(),Re("div",Ut,[Ue((Oe(),Re("div",null,[qe("div",zt,[Se(u,{class:"!w-[15rem]",modelValue:Te(kt),"onUpdate:modelValue":r[0]||(r[0]=function(e){return Le(kt)?kt.value=e:null}),onChange:Te(Dt)},{default:De(function(){return[(Oe(!0),Re($e,null,Ze(Te(xt),function(e,n){return Oe(),Ye(a,{key:n,value:e},{default:De(function(){return[qe("div",Ft,[qe("span",null,Ie(e),1),Te(Ct)(e)?(Oe(),Re("span",{key:0,class:"el-icon-close cursor-pointer text-[1.4rem] ml-1rem",onClick:en(function(n){return Te(Vt)({name:e})},["stop"])},null,8,Ht)):nn("",!0)])]}),_:2},1032,["value"])}),128))]}),_:1},8,["modelValue","onChange"]),qe("span",At,[r[4]||(r[4]=Ce("规则转换工具： ",-1)),Se(i,{class:"bt-link",href:"https://www.bt.cn/Tools"},{default:De(function(){return n(r[3]||(r[3]=[Ce("Apache转Nginx ",-1),qe("i",{class:"svgtofont-el-link"},null,-1)]))}),_:1})])]),qe("div",Bt,[Se(o,{id:"staticContentRef",request:!1,class:"!h-[40rem] !w-full border border-[#DCDFE6] rounded-[4px]",modelValue:Te(bt),"onUpdate:modelValue":r[1]||(r[1]=function(e){return Le(bt)?bt.value=e:null}),onSave:Te(Tt)},null,8,["modelValue","onSave"])]),qe("div",null,[Se(s,{type:"primary",onClick:r[2]||(r[2]=function(e){return Te(Tt)()})},{default:De(function(){return n(r[5]||(r[5]=[Ce("保存",-1)]))}),_:1}),Se(s,{onClick:t},{default:De(function(){return n(r[6]||(r[6]=[Ce("另存为模板",-1)]))}),_:1})]),Se(l,{options:Te(St),class:"ml-[20px] mt-[20px]"},null,8,["options"])])),[[c,Te(Pt)],[c,"正在加载内容，请稍候...","title"]])])}}}),Mt=B(),Gt=fn().siteInfo,Jt=je("master"),Kt=je("server_block"),Wt=[{label:"server块",value:"server_block"},{label:"HTTP块",value:"http_block"}],Qt=[{content:"主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作"}],Xt=[{content:"保存前请检查输入的配置文件是否正确，错误的配置可能会导致网站访问异常"},{content:"如果您对此配置不熟悉，请勿添加自定义配置"},{isHtml:!0,content:'server块的nginx官方配置文档：<a class="text-primary cursor-pointer" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#server" target="_blank" rel="noreferrer noopener">点击跳转</a>'}],$t=[{content:"保存前请检查输入的配置文件是否正确，错误的配置可能会导致网站访问异常"},{content:"如果您对此配置不熟悉，请勿添加自定义配置"},{isHtml:!0,content:'http块的nginx官方配置文档：<a class="text-primary cursor-pointer" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#http" target="_blank" rel="noreferrer noopener">点击跳转</a>'}],Zt=je(Xt),Yt=je(""),er=je(!1),nr=function(){var e=l(i().m(function e(){var n,t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,er.value=!0,e.n=1,H({site_name:Gt.value.name});case 1:return n=e.v,(t=n.data).status?"master"===Jt.value?Yt.value=t.data.site_conf:(Yt.value=t.data[Kt.value],Zt.value="server_block"===Kt.value?Xt:$t):Mt.error(t.msg),e.a(2,{data:Yt.value});case 2:return e.p=2,e.v,e.a(2,{data:""});case 3:return e.p=3,er.value=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}();tn(function(){Mt.error("主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作")},3e3);var tr,rr=function(){var e=l(i().m(function e(){var n,t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if("master"!==Jt.value){e.n=1;break}return e.a(2,{status:!1,msg:"主配置文件不允许修改，如需自定义配置请到上方自定义配置文件中操作"});case 1:return n=Mt.load("正在保存内容，请稍候..."),e.p=2,e.n=3,A({site_name:Gt.value.name,conf_type:Kt.value,body:Yt.value});case 3:return t=e.v,Mt.msg({dangerouslyUseHTMLString:!0,message:t.msg,type:t.status?"success":"error",duration:t.status?2e3:0,showClose:!t.status}),e.a(2,t);case 4:return e.p=4,r=e.v,P(r),e.a(2,{status:!1,msg:"保存文件失败"});case 5:return e.p=5,n.close(),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),ar={class:"h-full"},ur={key:0,class:"mb-1rem text-[#666] flex items-center"},ir={class:"mt-1rem"},or={key:0,class:"ml-[20px] mt-[2rem]"},sr=Pe({__name:"files",props:{type:{}},setup:function(e){var t=e;return Je(function(){nr()}),function(e,r){var a=M,u=F,i=Pn,o=Ae,s=Xe("bt-loading");return Oe(),Re("div",ar,[qe("div",null,["master"!==Te(Jt)?(Oe(),Re("div",ur,[r[4]||(r[4]=qe("span",null,"选择配置块：",-1)),Se(a,{class:"!w-[16rem]",modelValue:Te(Kt),"onUpdate:modelValue":r[0]||(r[0]=function(e){return Le(Kt)?Kt.value=e:null}),options:Te(Wt),onChange:r[1]||(r[1]=function(e){return Te(nr)()})},null,8,["modelValue","options"])])):nn("",!0),Ue(Se(u,{options:Te(Qt),"list-style":"none",class:"ml-[12px] text-[1.2rem] mb-1rem"},null,8,["options"]),[[ze,"master"===Te(Jt)]]),Ue(Se(i,{class:rn(["!w-[64rem] border border-[#DCDFE6] rounded-[4px]","master"===t.type?"!h-[50rem]":"!h-[34rem]"]),modelValue:Te(Yt),"onUpdate:modelValue":r[2]||(r[2]=function(e){return Le(Yt)?Yt.value=e:null}),id:1e3*Math.random(),editorOption:{readOnly:"master"===Te(Jt),mode:"ace/mode/nginx"}},null,8,["modelValue","class","id","editorOption"]),[[s,Te(er)]]),qe("div",ir,["master"!==Te(Jt)?(Oe(),Ye(o,{key:0,type:"primary",onClick:Te(rr)},{default:De(function(){return n(r[5]||(r[5]=[Ce("保存",-1)]))}),_:1},8,["onClick"])):nn("",!0),Se(o,{type:"default",onClick:r[3]||(r[3]=function(e){return Te(N)({value:Te(Yt)})})},{default:De(function(){return n(r[6]||(r[6]=[Ce("复制",-1)]))}),_:1})])]),"master"!==Te(Jt)?(Oe(),Re("div",or,[Se(u,{options:Te(Zt)},null,8,["options"])])):nn("",!0)])}}}),lr=q(Pe({__name:"index",setup:function(e,n){var t=n.expose,r=an({site_conf:"",http_block:"",server_block:""});un("configList",r),un("tabActive",Jt);var a=G({type:"card",value:Jt,options:[{label:"主配置文件",name:"master",render:function(){return Se(sr,{type:"master"},null)}},{label:"自定义配置文件",name:"custom",lazy:!0,render:function(){return Se(sr,{type:"custom"},null)}}]}).BtTabs;return t({init:nr}),function(e,n){return Oe(),Re("div",null,[Se(Te(a),{onChange:Te(nr)},null,8,["onChange"])])}}}),[["__scopeId","data-v-4ed3f2da"]]),cr=Ee("DOCKERSITE-REDIRECT-STORE",function(){var e=je(!1),n=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在修改，请稍后...",request:J(n),message:!0});case 1:return t=e.v,e.a(2,{status:t.status,msg:t.msg});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"修改状态失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),t=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在保存内容，请稍候...",request:Cn(n),data:{status:Boolean,msg:String},message:!0});case 1:return t=e.v,e.a(2,{status:t.status,msg:t.msg});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"保存文件失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),a=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在删除，请稍后...",request:K(n),message:!0});case 1:return t=e.v,e.a(2,{status:t.status,msg:t.msg});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"删除重定向失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在获取内容，请稍候...",request:W(n)});case 1:return t=e.v,e.a(2,{data:{content:t.data.data,redirect_conf_file:n.path},status:!0});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"获取配置文件失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({request:Vn(n,"proxy"),data:Array});case 1:return t=e.v,e.a(2,{data:t,total:t.length,other:{}});case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=l(i().m(function e(n,t){var a;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:"正在提交，请稍后...",request:t?J(n):Q(n),message:!0});case 1:return a=e.v,e.a(2,{status:a.status,msg:a.msg});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"添加重定向失败"})}},e,null,[[0,2]])}));return function(n,t){return e.apply(this,arguments)}}(),f=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({request:u(n)});case 1:return t=e.v,e.a(2,{data:t.data,status:!0});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"获取域名信息失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}();return{changeStatusEvent:n,delRedirectEvent:a,getRedirectFileEvent:o,getRedirectDataEvent:s,submitRedirectEvent:c,isRefreshList:e,saveFileEvent:t,getDomainListEvent:f}}),fr=function(){return xe(cr())},pr=fn().siteInfo,vr=fr().isRefreshList,mr=cr(),dr=mr.getDomainListEvent,hr=mr.changeStatusEvent,gr=mr.delRedirectEvent,yr=mr.getRedirectDataEvent,wr=mr.getRedirectFileEvent,br=mr.submitRedirectEvent,_r=mr.saveFileEvent,kr=je([]),xr=je(!1),Er=je(!1),jr=je(""),Pr=je(""),Sr=je(!1),Cr=je(),Vr=je(!1),Or=e("L",je()),Rr=e("I",je()),qr=[{content:"设置域名重定向后，该域名的404重定向将失效"},{content:"取消重定向时，由于浏览器会缓存重定向信息，在清除缓存前，浏览器仍会根据缓存自动重定向"}],Dr=(e("M",[{content:"重定向类型：表示访问选择的“域名”或输入的“路径”时将会重定向到指定URL"},{content:"目标URL：可以填写你需要重定向到的站点，目标URL必须为可正常访问的URL，否则将返回错误"},{content:"重定向方式：使用301表示永久重定向，使用302表示临时重定向"},{content:"保留URI参数：表示重定向后访问的URL是否带有子路径或参数如设置访问http://b.com"},{content:"重定向到http://a.com 保留URI参数： http://b.com/1.html ---\x3e http://a.com/1.html"},{content:"不保留URI参数：http://b.com/1.html ---\x3e http://a.com"}]),function(e){var n=a(a({},e),{},{type:e.type?0:1,redirectdomain:JSON.stringify(e.redirectdomain)});return delete n.redirect_conf_file,n.site_name=pr.value.name,delete n.sitename,n}),Tr=function(){var e=l(i().m(function e(n,t,r,u){var o,s,c,f;return i().w(function(e){for(;;)switch(e.n){case 0:return o=u.label,s=u.value,c=new Map([["start","批量启用选中的规则后，配置的重定向域名/目录将会生效"],["stop","批量停用选中的规则后，配置的重定向域名/目录将会失效"],["delete","批量删除当前选中的规则后，配置的重定向域名/目录将会彻底失效"]]),f=function(){var e=l(i().m(function e(n){var t,r,u,o,l;return i().w(function(e){for(;;)switch(e.n){case 0:t=new Map([["start",J],["stop",J],["delete",K]]),r=n.redirectname,u=t.get(s),l=s,e.n="start"===l||"stop"===l?1:"delete"===l?3:5;break;case 1:if(!u){e.n=3;break}return o=Dr(a(a({},n),{},{type:"stop"===s?1:0})),e.n=2,u(o);case 2:case 4:return e.a(2,e.v);case 3:if(!u){e.n=5;break}return e.n=4,u({site_name:pr.value.name,redirectname:r});case 5:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),e.n=1,n({title:"批量".concat(o),content:"".concat(c.get(s),"，是否继续操作？"),column:[{label:"规则名称",render:function(e){var n;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null===(n=X(e.redirectdomain,"array",[]))||void 0===n?void 0:n.join("、"):e.redirectpath}},xn()],onConfirm:function(){var e=l(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t(f);case 1:return vr.value=!0,e.a(2,!1)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(n,t,r,a){return e.apply(this,arguments)}}(),Lr=function(){var e=l(i().m(function e(n){var t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=Dr(n),e.n=1,hr(t);case 1:return(r=e.v).status&&(vr.value=!0),e.a(2,r);case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"修改状态失败"})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),Ir=function(){var e=l(i().m(function e(n){var t,r,a,u,o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d({title:"删除重定向【".concat("domain"===n.domainorpath?null===(t=X(n.redirectdomain,"array",[]))||void 0===t?void 0:t.join("、"):n.redirectpath,"】"),content:"删除选中的规则后，配置的重定向域名/目录将指向源地址，是否继续操作？",icon:"warning-filled",type:"calc"});case 1:return r=pr.value.name,a=n.redirectname,u={proxy:{site_name:r,redirectname:a}},e.n=2,gr(u.proxy);case 2:return(o=e.v).status&&(vr.value=!0),e.a(2,o);case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"删除重定向失败"})}},e,null,[[0,3]])}));return function(n){return e.apply(this,arguments)}}(),Ur=function(){var e=l(i().m(function e(n){var t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Er.value=!0,t={path:n.redirect_conf_file},e.n=1,wr(t);case 1:(r=e.v).status?(xr.value=!0,jr.value=r.data.content,Pr.value=r.data.redirect_conf_file):(c.error(r.msg),xr.value=!1),Er.value=!1,e.n=3;break;case 2:e.p=2,e.v,xr.value=!1;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),zr=function(){var e=l(i().m(function e(){var n,t,r=arguments;return i().w(function(e){for(;;)switch(e.n){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{data:jr.value,encoding:"utf-8",path:Pr.value},e.n=1,_r(n);case 1:return t=e.v,e.a(2,t)}},e)}));return function(){return e.apply(this,arguments)}}(),Fr=function(){var e=l(i().m(function e(){var n,t,r,a=arguments;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=a.length>0&&void 0!==a[0]&&a[0],t={sitename:pr.value.name},e.p=1,e.n=2,yr(t);case 2:return r=e.v,n&&c.success("刷新成功"),Sr.value=!1,Cr.value=null,Array.isArray(r.data)&&r.data.forEach(function(e){e.errorpage&&(Sr.value=!0,Cr.value=e)}),e.a(2,r);case 3:return e.p=3,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),Hr=function(e){Vr.value=!!e,Rr.value=e||!1,x({title:"".concat(e?"编辑":"添加","重定向").concat(e?"【".concat(e.sitename,"】"):""),area:68,component:function(){return $(function(){return t.import("./add-redirect-legacy.js?v=1756369731")},void 0,t.meta.url)},btn:!0})},Ar=function(){var e=l(i().m(function e(){var n,t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Fr();case 1:return t=e.v,kr.value=Array.isArray(t.data)?t.data.map(function(e){return e.redirectdomain}).flat():[],e.a(2,a(a({},t),{},{data:(null===(n=t.data)||void 0===n?void 0:n.map(function(e,n){return a(a({},e),{},{id:n+1})}))||[]}));case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Br=function(e){var n=pr.value.name,t=e.holdpath,r=e.type,u=e.redirectdomain;return a(a({},e),{},{site_name:n,holdpath:t?"1":"0",type:r?"1":"0",redirectdomain:JSON.stringify(u),redirectname:e.redirectname||(new Date).getTime()})},Nr=(e("J",function(){var e=l(i().m(function e(n){var t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=Br(n),e.n=1,br(t,Vr.value);case 1:return(r=e.v).status&&(vr.value=!0),e.a(2,r.status);case 2:return e.p=2,e.v,e.a(2,!1)}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}()),function(){return{site_name:pr.value.name,id:pr.value.id}}),Mr=(e("K",l(i().m(function e(){var n,t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=Nr(),e.n=1,dr(n);case 1:return t=e.v,Or.value=Vr.value?t.data.domain_list:t.data.domain_list.filter(function(e){return!kr.value.some(function(n){return n.includes(e.name)})}),e.a(2,t);case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"获取域名失败"})}},e,null,[[0,2]])}))),{class:"h-full"}),Gr={class:"p-[20px]"},Jr=Pe({__name:"index",setup:function(e){var t=B(),r=fr().isRefreshList,a=w([{label:"启用重定向规则",value:"start",event:Tr},{label:"停用重定向规则",value:"stop",event:Tr},{label:"删除重定向规则",value:"delete",event:Tr}]),u=h({request:Ar,columns:[kn(),{label:"被重定向",render:function(e){var n;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null===(n=X(e.redirectdomain,"array",[]))||void 0===n?void 0:n.join("、"):e.redirectpath}},{label:"重定向类型",prop:"domainorpath",render:function(e){return e.errorpage?"错误":"domain"===e.domainorpath?"域名":"路径"}},{label:"重定向到",render:function(e){return e.topath?e.topath:e.tourl}},En({prop:"type",event:Lr,data:["已停止","运行中"]}),jn([{width:70,title:"配置文件",onClick:function(e){if(!e.type)return t.warn("请先启用重定向规则再查看配置文件");Ur(e)}},{title:"编辑",onClick:function(e){Hr(e)}},{onClick:Ir,title:"删除"}])],extension:[Z(),a,y(r)]}),i=u.BtTable,o=u.BtRefresh,s=u.BtBatch;return function(e,t){var r=mn,a=F,u=Y,l=Xe("bt-loading");return Oe(),Re("div",Mr,[Se(r,null,{"header-left":De(function(){return[Se(Te(Ae),{type:"primary",onClick:t[0]||(t[0]=function(e){return Te(Hr)()})},{default:De(function(){return n(t[5]||(t[5]=[Ce("添加重定向",-1)]))}),_:1})]}),"header-right":De(function(){return[Se(Te(o))]}),content:De(function(){return[Se(Te(i),{"max-height":460})]}),"footer-left":De(function(){return[Se(Te(s))]}),_:1}),Se(a,{class:"mt-2rem",options:Te(qr),"list-style":"disc"},null,8,["options"]),Se(u,{title:"编辑配置文件",modelValue:Te(xr),"onUpdate:modelValue":t[4]||(t[4]=function(e){return Le(xr)?xr.value=e:null}),area:54},{default:De(function(){return[qe("div",Gr,[t[7]||(t[7]=Ce(" 提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换 ",-1)),Ue(Se(Te(Pn),{class:"!h-[36rem] my-[8px]",ref:"aceEditor",modelValue:Te(jr),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Le(jr)?jr.value=e:null}),onSave:t[2]||(t[2]=function(e){return Te(zr)()})},null,8,["modelValue"]),[[l,Te(Er)]]),Se(Te(Ae),{type:"primary",onClick:t[3]||(t[3]=function(e){return Te(zr)()})},{default:De(function(){return n(t[6]||(t[6]=[Ce("保存",-1)]))}),_:1}),t[8]||(t[8]=qe("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[qe("li",null,"此处为该重定向的配置文件，若您不了解配置规则,请勿随意修改。")],-1))])]}),_:1},8,["modelValue"])])}}}),Kr=fn().siteInfo,Wr=je(),Qr=je(!1),Xr=je(!1),$r=an({fix:"jpg,jpeg,gif,png,js,css",domains:"",return_rule:"404",http_status:!1,status:!1}),Zr=je(null),Yr=[{content:'【URL后缀】一般填写文件后缀,每个文件后缀使用","分隔,如: png,jpg'},{content:"【许可域名】允许作为来路的域名，每行一个域名,如: www.bt.cn"},{content:"【响应资源】可设置404/403等状态码，也可以设置一个有效资源，如：/security.png"},{content:"【允许空HTTP_REFERER请求】是否允许浏览器直接访问，若您的网站访问异常，可尝试开启此功能"}],ea=function(e){if(!$r.status)return c.error("请先启用防盗链!")},na=function(e){$r.status=e,e||($r.http_status=!1)},ta=function(){var e=l(i().m(function e(n){var t,u,o;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Zr.value.validate();case 1:return u=a(a({},$r),{},{domains:null===(t=$r.domains)||void 0===t?void 0:t.replace(/\n/g,",")}),Qr.value?u.site_ids=JSON.stringify(Wr.value.map(function(e){return e.id})):(u.id=Kr.value.id,u.site_name=Kr.value.name),o=ne,e.n=2,r({loading:"正在设置防盗链，请稍后...",request:o(u),message:!Qr.value});case 2:ra(Wr.value);case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ra=function(){var e=l(i().m(function e(n){var t,r,a,u,o,s,l;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(Wr.value=n||[],n){e.n=5;break}return t=Kr.value,r=t.id,a=t.name,e.p=1,Xr.value=!0,e.n=2,ee({id:r,name:a});case 2:u=e.v,(o=u.data)&&($r.fix=o.fix||"jpg,jpeg,gif,png,js,css",$r.domains=(null===(s=o.domains)||void 0===s||null===(s=s.toString())||void 0===s?void 0:s.replace(/,/g,"\n"))||"",$r.return_rule=o.return_rule||"404",$r.http_status=o.http_status||!1,$r.status=o.status||!1),e.n=4;break;case 3:e.p=3,l=e.v,P(l);case 4:return e.p=4,Xr.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}(),aa={fix:[{required:!0,message:"请输入url后缀",trigger:"blur"}],return_rule:[{required:!0,message:"请输入响应资源",trigger:"blur"}]},ua={class:"p-[20px]"},ia=Pe({__name:"index",props:{compData:{default:function(){}}},emits:["close"],setup:function(e,t){var r=t.expose,a=(t.emit,e);return Je(function(){ra(a.compData)}),r({onConfirm:ta}),function(e,t){var r=E,a=on,u=sn,i=Ae,o=ln,s=F,l=Xe("bt-loading");return Ue((Oe(),Re("div",ua,[Se(o,{ref_key:"hotFormRef",ref:Zr,model:Te($r),rules:Te(aa)},{default:De(function(){return[Se(a,{label:"URL后缀",prop:"fix"},{default:De(function(){return[Se(r,{modelValue:Te($r).fix,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Te($r).fix=e}),width:"30rem"},null,8,["modelValue"])]}),_:1}),Se(a,{label:"许可域名"},{default:De(function(){return[Se(r,{width:"30rem",modelValue:Te($r).domains,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Te($r).domains=e}),type:"textarea",resize:"none",rows:8,placeholder:"默认添加主域名，可追加其他的允许域名，一行一个，可为空"},null,8,["modelValue"])]}),_:1}),Se(a,{label:"响应资源",prop:"return_rule"},{default:De(function(){return[Se(r,{width:"30rem",modelValue:Te($r).return_rule,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Te($r).return_rule=e})},null,8,["modelValue"])]}),_:1}),Se(a,{label:" "},{default:De(function(){return[Se(u,{modelValue:Te($r).status,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Te($r).status=e}),onChange:Te(na)},{default:De(function(){return n(t[6]||(t[6]=[Ce("启用防盗链",-1)]))}),_:1},8,["modelValue","onChange"]),Se(u,{disabled:!Te($r).status,title:"".concat(Te($r).status?"":"需开启防盗链"),modelValue:Te($r).http_status,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Te($r).http_status=e}),onChange:Te(ea)},{default:De(function(){return n(t[7]||(t[7]=[Ce(" 允许空HTTP_REFERER请求 ",-1)]))}),_:1},8,["disabled","title","modelValue","onChange"])]}),_:1}),Te(Qr)?nn("",!0):(Oe(),Ye(a,{key:0,label:" "},{default:De(function(){return[Se(i,{type:"primary",onClick:t[5]||(t[5]=function(e){return Te(ta)()})},{default:De(function(){return n(t[8]||(t[8]=[Ce("保存",-1)]))}),_:1})]}),_:1}))]}),_:1},8,["model","rules"]),Te(Qr)?nn("",!0):(Oe(),Ye(s,{key:0,options:Te(Yr),class:"ml-[20px] mt-[20px]"},null,8,["options"]))])),[[l,Te(Xr)]])}}}),oa=Ee("DOCKERSITE-LOGS-STORE",function(){var e=function(){var e=l(i().m(function e(n){var t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,te(n);case 1:return t=e.v,r=t.data,e.a(2,{data:r,status:!0});case 2:return e.p=2,e.v,e.a(2,{msg:"获取错误日志失败",status:!1})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),n=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,te(n);case 1:return t=e.v,e.a(2,{data:t.data,status:t.status});case 2:return e.p=2,e.v,e.a(2,{msg:"获取日志失败",status:!1})}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}();return{getErrorLogsEvent:e,getResLogEvent:n}}),sa=B(),la=fn().siteInfo,ca=e("p",je("cache")),fa=e("h",je({site_name:"",domain_list:[],site_port:[],port_conf:"",ssl_port_conf:"",site_path:"",ssl_info:{},err_age_404:"",err_age_502:"",ip_limit:{ip_black:[],ip_white:[]},basic_auth:[],proxy_cache:{},gzip:{},sub_filter:{},websocket:{},security:{},redirect:{},proxy_log:{},http_block:"",server_block:"",remark:"",proxy_info:[],ipv6_status:!1})),pa=e("H",l(i().m(function e(){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,re({site_name:la.value.name});case 1:if((n=e.v).status){e.n=2;break}return sa.error(n.msg),e.a(2);case 2:fa.value=n.data;case 3:return e.a(2)}},e)}))),va=e("f",je(!1)),ma=e("e",je(!1)),da=e("b",je()),ha=e("c",an({status:!1,time:"",unit:"m"})),ga=(e("t",[{label:"分钟",value:"m"},{label:"小时",value:"h"},{label:"天",value:"d"}]),e("g",[{content:"缓存是一种用于加速网站性能和提高用户体验的技术"},{content:"开启后资源会被缓存，如果影响网站访问请关闭"},{content:"缓存键由主机名、URI 和请求参数组成"},{content:"默认忽略的响应头有：Set-Cookie|Cache-Control|expires|X-Accel-Expires"},{content:"默认缓存的静态资源有：css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map"}]),e("d",{time:[{required:!0,message:"请输入正确的缓存时间",trigger:"blur",validator:function(e,n,t){n?isNaN(Number(n))?t(new Error("请输入数字")):Number(n)<1?t(new Error("请输入正确数字")):t():t(new Error("目标URL不能为空"))}},{}]}),e("a",l(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({title:"清理缓存【".concat(la.value.name,"】"),width:"35rem",icon:"warning-filled",content:"清理后包含所有URL的及站点的缓存都会被清空,是否继续？"});case 1:return e.n=2,r({loading:"正在清理缓存，请稍后...",request:ae({site_name:la.value.name}),message:!0});case 2:return e.a(2)}},e)}))),e("o",l(i().m(function e(){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return n={site_name:la.value.name,cache_status:ha.status?1:0,expires:"".concat(ha.time).concat(ha.unit)},e.n=1,da.value.validate();case 1:return e.n=2,r({loading:ma,request:ue(n),message:!0});case 2:return e.a(2)}},e)}))),e("k",je())),ya=e("i",an({status:!1,type:"",level:1,minLength:"",unit:"m"})),wa=(e("l",[{label:"k",value:"k"},{label:"m",value:"m"}]),e("n",[{content:"用于对 HTTP 响应的内容进行压缩，以减少数据传输量，提高网站性能和加载速度"},{content:"压缩级别1-9，例如：1为压缩速度最快，但压缩率较低；9为压缩速度最慢，但压缩率最高，建议默认"},{content:"如果开启gzip后影响网站正常访问，请关闭此功能 和请求参数组成"}]),e("m",{type:[{required:!0,message:"请输入压缩类型",trigger:["blur","change"]}],minLength:[{required:!0,message:"请输入正确的压缩最小长度",trigger:"blur",validator:function(e,n,t){n?isNaN(Number(n))?t(new Error("请输入数字")):Number(n)<1?t(new Error("请输入正确数字")):t():t(new Error("压缩最小长度不能为空"))}},{}]}),e("s",function(e){ya.status=e.gzip_status,ya.type=e.gzip_types,ya.level=e.gzip_comp_level;var n="",t="m";e.gzip_min_length&&e.gzip_min_length.length>1&&(n=e.gzip_min_length.slice(0,-1),t=e.gzip_min_length.slice(-1)),ya.minLength=n,ya.unit=t}),e("j",l(i().m(function e(){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return n={site_name:la.value.name,gzip_status:ya.status?1:0,gzip_min_length:"".concat(ya.minLength).concat(ya.unit),gzip_comp_level:ya.level,gzip_types:ya.type},e.n=1,ga.value.validate();case 1:return e.n=2,r({loading:ma,request:ie(n),message:!0});case 2:return e.a(2)}},e)}))),e("u",an({loading:!1,type:"black",white:[],black:[]}))),ba=(e("r",function(e){wa.type="ipBlackList"===ca.value?"black":"white",_a.value.address="",_a.value.types=wa.type,wa.white=e.ip_white.map(function(e){return{ip:e,type:"white"}}),wa.black=e.ip_black.map(function(e){return{ip:e,type:"black"}})}),function(){var e=l(i().m(function e(n){var t,a,u;return i().w(function(e){for(;;)switch(e.n){case 0:return t=!!Array.isArray(n),e.n=1,d({title:"".concat(t?"批量删除IP":"删除".concat("white"===n.type?"白名单":"黑名单","【").concat(n.ip,"】")),content:t?"批量删除选中的IP，是否继续操作？":"删除".concat("white"===n.type?"白名单":"黑名单","【").concat(n.ip,"】，是否继续操作？")});case 1:return a={site_name:la.value.name},t?(a.ip_type=wa.type,a.ips=n.map(function(e){return e.ip}).join("\n")):(a.ip_type=n.type,a.ip=n.ip),u=t?ye:we,e.n=2,r({loading:"正在删除，请稍后...",request:u(a),message:!0});case 2:e.v.status&&pa();case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),_a=(e("v",je([kn(),{label:"IP",prop:"ip",minWidth:120},jn([{title:"删除",onClick:function(e){ba(e)}}])])),e("T",[{label:"删除IP",value:"delete",event:(tr=l(i().m(function e(n,t,r,a){return i().w(function(e){for(;;)switch(e.n){case 0:ba(r.value);case 1:return e.a(2)}},e)})),function(e,n,t,r){return tr.apply(this,arguments)})}]),e("q",function(){_a.value.address="",x({isAsync:!0,title:"添加IP".concat("ipBlackList"===ca.value?"黑":"白","名单"),area:40,btn:"确认",component:function(){return $(function(){return t.import("./add-ip-legacy.js?v=1756369731")},void 0,t.meta.url)},compData:{listType:wa.type,refreshEvent:function(){_a.value.address="",pa()}}})}),e("O",je({types:wa.type,address:""}))),ka=(e("P",[{content:"一行一条配置，多个IP请换行"}]),e("Q",je()),e("R",{address:[{validator:function(e,n,t){n.length>0?t():t(new Error("请输入IP地址"))},trigger:["blur","change"]}]}),e("N",function(){var e=l(i().m(function e(n){var t,a,u,o;return i().w(function(e){for(;;)switch(e.n){case 0:return t=_a.value,a=t.types,u=t.address,o={site_name:la.value.name,ip_type:a,ips:u},e.n=1,r({loading:ma,request:oe(o),message:!0});case 1:e.v.status&&(_a.value.address="",pa(),n());case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),e("y",je([]))),xa=e("w",function(e){ja.value=e||!1,x({isAsync:!0,title:"".concat(e?"编辑":"添加","http认证").concat(e?"【".concat(e.auth_name,"】"):""),area:48,btn:"确认",component:function(){return $(function(){return t.import("./http-auth-add-legacy.js?v=1756369731")},void 0,t.meta.url)},compData:{refreshEvent:pa,proxy_info:fa.value.proxy_info,isEdit:!!e,row:e}})}),Ea=function(){var e=l(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({title:"删除http认证【".concat(n.auth_name,"】"),content:"删除http认证【".concat(n.auth_name,"】，是否继续操作？")});case 1:return e.n=2,r({loading:"正在删除http认证，请稍候...",request:de({site_name:la.value.name,auth_path:n.auth_path,name:n.auth_name}),message:!0});case 2:e.v.status&&pa();case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ja=(e("z",je([{label:"名称",prop:"auth_name"},{label:"路径",prop:"auth_path"},jn([{onClick:xa,title:"编辑"},{onClick:Ea,title:"删除"}])])),e("x",function(e){ka.value=e||[]}),e("W",je())),Pa=e("V",je({name:se(5),path:"",user:"",password:""})),Sa=(e("Y",[{content:"例如我设置了加密访问/test/,那我访问http://aaa.com/test/时就要输入账号密码才能访问"}]),e("Z",je())),Ca=(e("_",{name:[{required:!0,message:"请输入名称",trigger:["blur","change"]}],path:[{required:!0,message:"请输入路径",trigger:["blur","change"]}],user:[{required:!0,message:"请输入用户名",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:["blur","change"]}]}),e("X",function(e,n){var t=fa.value.proxy_info.map(function(e){return{value:e.proxy_path}});n(e?t.filter(function(n){return n.value.includes(e)}):t)}),e("U",function(){var e=l(i().m(function e(n){var t,a,u;return i().w(function(e){for(;;)switch(e.n){case 0:return t=Pa.value,e.n=1,Sa.value.validate();case 1:return a={site_name:la.value.name,auth_path:t.path,username:t.user,password:t.password,name:t.name},u=ja.value?le:ce,e.n=2,r({loading:ma,request:u(a)});case 2:e.v.status&&(pa(),n&&n());case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),e("S",function(){Object.assign(Pa.value,{name:ja.value?ja.value.auth_name:se(5),path:ja.value?ja.value.auth_path:"",user:"",password:""})}),je()),Va=an({type:"default",accessLog:"",address:"",port:"514"}),Oa={accessLog:[{validator:function(e,n,t){"file"!==Va.type||n?t():t(new Error("请选择日志目录"))},trigger:["blur","change"]}],address:[{validator:function(e,n,t){"rsyslog"!==Va.type||n?t():t(new Error("请输入接收地址"))},trigger:["blur","change"]}]},Ra=[{content:"指定目录可选择自定义的日志存储目录，请注意此目录必须www用户可写"},{content:"发送到远程服务器设置之后本地不会保存日志内容，填写前请确保日志接收端可正常访问"}],qa=[{label:"默认",value:"default"},{label:"不记录日志",value:"off"},{label:"指定目录",value:"file"},{label:"发送到远程服务器",value:"rsyslog"}],Da=function(e){_n({type:"dir",path:"/www/wwwlogs",change:function(e){Va.accessLog=e}})},Ta=function(e){e?(Va.type=e.log_type,Va.accessLog=e.log_path,Va.address=e.rsyslog_host):Va.type="default"},La=function(){var e=l(i().m(function e(){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ca.value.validate();case 1:return n={site_name:la.value.name,log_type:Va.type,log_path:"file"==Va.type?Va.accessLog:Va.address},e.n=2,r({loading:"正在设置日志配置，请稍后...",request:he(n),message:!0});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ia=e("B",an({websocket:!1})),Ua=(e("C",function(){var e=l(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r({loading:ma,request:fe({site_name:la.value.name,websocket_status:n?1:0}),message:!0});case 1:e.v.status||(Ia.websocket=!n);case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),e("A",function(e){Ia.websocket=!!e&&e.websocket_status}),e("E",function(e){r({loading:"正在设置，请稍后...",request:pe({site_name:la.value.name,status:e?"1":"0"}),message:!0})}),e("D",function(){var e=l(i().m(function e(n,t,a,u){var o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r({loading:n,request:ve({site_name:la.value.name})});case 1:o=e.v,t.value=o.data.data,a.value=o.data.encoding||"utf-8",u.value=o.data.status,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n,t,r,a){return e.apply(this,arguments)}}()),e("F",function(){var e=l(i().m(function e(n,t){return i().w(function(e){for(;;)switch(e.n){case 0:r({request:ge({site_name:la.value.name,file_body:n,encoding:t}),message:!0});case 1:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}()),e("G",l(i().m(function e(){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return n={site_name:la.value.name,ipv6_status:fa.value.ipv6_status?"1":"0"},e.n=1,da.value.validate();case 1:return e.n=2,r({loading:ma,request:me(n),message:!0});case 2:return e.a(2)}},e)}))),{class:"h-full"}),za={class:"mb-[1.6rem]"},Fa={class:"flex"},Ha=Pe({__name:"error-log",setup:function(e){return Je(ru),function(e,n){var t=Xe("bt-loading");return Ue((Oe(),Re("div",Ua,[qe("div",za,"日志大小："+Ie(Te(Ya).size),1),qe("div",Fa,[Se(On,{content:Te(Ya).logs,isHtml:!0,fullScreen:{title:"全屏查看[错误]日志",onRefresh:Te(ru)},style:{height:"58rem",width:"99.5%"}},null,8,["content","fullScreen"])])])),[[t,Te(Za)]])}}}),Aa={class:"h-full"},Ba=Pe({__name:"response-log",setup:function(e){return Je(iu),function(e,n){var t=Xe("bt-loading");return Oe(),Re("div",Aa,[qe("div",null,"日志大小："+Ie(Te(au).size),1),Ue(Se(On,{class:"mt-[16px]",content:Te(au).logs,isHtml:!0,fullScreen:{title:"全屏查看[响应]日志",onRefresh:Te(uu)},style:{height:"58rem",width:"99.5%"}},null,8,["content","fullScreen"]),[[t,Te(Za)]])])}}}),Na={class:"p-[16px]"},Ma={class:"mt-[1.6rem]"},Ga={class:"mt-[1.6rem]"},Ja={class:"ml-[20px]"},Ka=Pe({__name:"config",setup:function(e,t){var r=t.expose;return cn(function(){return fa.value.proxy_log},function(e){Ta(e)}),Je(function(){Ta(fa.value.proxy_log)}),r({onConfirm:La}),function(e,t){var r=M,a=on,u=R,i=Ae,o=E,s=ln,l=F,c=Xe("bt-loading");return Oe(),Re("div",Na,[Ue((Oe(),Ye(s,{ref_key:"logFormRef",ref:Ca,class:"h-[48rem]",model:Te(Va),"label-width":"60px",rules:Te(Oa),disabled:Te(ma)},{default:De(function(){return[Se(a,{label:"日志",prop:"type"},{default:De(function(){return[Se(r,{class:"!w-[24rem]",modelValue:Te(Va).type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Te(Va).type=e}),options:Te(qa),placeholder:"请选择"},null,8,["modelValue","options"])]}),_:1}),Ue(qe("div",Ma,[Se(a,{label:"访问日志",prop:"accessLog"},{default:De(function(){return[Se(o,{modelValue:Te(Va).accessLog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Te(Va).accessLog=e}),placeholder:"请选择或输入目录，例如：/www/wwwlogs",width:"35rem"},{append:De(function(){return[Se(i,{onClick:t[1]||(t[1]=function(e){return Te(Da)("accessLog")})},{default:De(function(){return[Se(u,{icon:"el-folder-opened",class:"cursor-pointer"})]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})],512),[[ze,"file"===Te(Va).type]]),Ue(qe("div",Ga,[Se(a,{label:"接收地址",prop:"address"},{default:De(function(){return[Se(o,{modelValue:Te(Va).address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Te(Va).address=e}),placeholder:"接收地址，如：202.96.128.86:9204",width:"24rem"},null,8,["modelValue"])]}),_:1})],512),[[ze,"rsyslog"===Te(Va).type]]),Se(a,{class:"mt-[1.6rem]",label:" "},{default:De(function(){return[Se(i,{type:"primary",onClick:Te(La)},{default:De(function(){return n(t[4]||(t[4]=[Ce("保存",-1)]))}),_:1},8,["onClick"])]}),_:1})]}),_:1},8,["model","rules","disabled"])),[[c,Te(va)]]),qe("div",Ja,[Se(l,{options:Te(Ra)},null,8,["options"])])])}}}),Wa=oa(),Qa=Wa.getErrorLogsEvent,Xa=Wa.getResLogEvent,$a=fn().siteInfo,Za=je(!1),Ya=je({logs:"",size:"0 b"}),eu=je("response"),nu=je([{label:"响应日志",name:"response",lazy:!0,render:function(){return Se(Ba,null,null)}},{label:"错误日志",name:"error",lazy:!0,render:function(){return Se(Ha,null,null)}},{label:"配置",name:"config",lazy:!0,render:function(){return Se(Ka,null,null)}}]),tu=function(){var e;eu.value=(null===(e=$a.value)||void 0===e?void 0:e.tabName)||"response"},ru=function(){var e=l(i().m(function e(){var n,t,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=$a.value.name,e.p=1,Za.value=!0,e.n=2,Qa({site_name:n,type:"error"});case 2:return t=e.v,Ya.value.size=t.data.size||"0 b",Ya.value.logs=t.data.msg||"暂无日志信息",e.a(2,t);case 3:return e.p=3,r=e.v,P(r),e.a(2,{msg:"获取错误日志失败",status:!1});case 4:return e.p=4,Za.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),au=an({alert:!1,showIp:!1,ipData:0,logs:"",size:"0 b"}),uu=function(){var e=l(i().m(function e(){var n,t,r,a=arguments;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:$a.value.name,e.p=1,Za.value=!0,e.n=2,Xa({site_name:n,type:"access"});case 2:return t=e.v,au.logs=t.data.msg||"暂无日志信息",au.size=t.data.size||"0 b",e.a(2,t);case 3:return e.p=3,r=e.v,P(r),e.a(2,{msg:"获取日志失败",status:!1});case 4:return e.p=4,Za.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),iu=function(){var e=l(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,uu();case 1:pa();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ou=Pe({__name:"index",setup:function(e){return Je(tu),function(e,n){var t=be;return Oe(),Re("div",null,[Se(t,{type:"card",modelValue:Te(eu),"onUpdate:modelValue":n[0]||(n[0]=function(e){return Le(eu)?eu.value=e:null}),options:Te(nu)},null,8,["modelValue","options"])])}}}),su=fn().siteInfo,lu=je([]),cu=function(){return{version:"",oldVersion:""}},fu=function(){var e=l(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r({request:_e({id:su.value.id})});case 1:(t=e.v).status?(n.value.version="".concat(t.data.used.name,":").concat(t.data.used.version),n.value.oldVersion="".concat(t.data.used.name,":").concat(t.data.used.version),lu.value=t.data.runtime_list.map(function(e){return{label:"PHP-".concat(e.version,"(").concat(e.name,")"),value:"".concat(e.name,":").concat(e.version)}})):c.error(t.msg);case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),pu=function(){var e=l(i().m(function e(n,t){var a,u;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=n.version,u=n.oldVersion,e.p=1,a!==u){e.n=2;break}return c.error("当前版本与原版本一致，无需切换"),e.a(2);case 2:return e.n=3,d({title:"切换PHP版本",content:"切换PHP版本可能会导致无法访问，是否切换？"});case 3:r({loading:"正在切换PHP版本，请稍后...",request:ke({id:su.value.id,runtime_name:a}),message:!0,success:function(e){e.status&&(t.value.oldVersion=a)}}),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])}));return function(n,t){return e.apply(this,arguments)}}(),vu={class:"p-[16px]"},mu={class:"ml-[20px]"},du=Pe({__name:"index",setup:function(e,n){var t,r=n.expose,a=b({data:cu,options:function(){return Fe(function(){return[yn("PHP版本","version",lu.value,{attrs:{class:"!w-[22rem]"},rules:[{required:!0,message:"请选择PHP版本",trigger:"change"}]}),wn("切换",{label:" ",attrs:{type:"primary",onClick:o}})]})},submit:(t=l(i().m(function e(n,t,r){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t();case 1:pu(n.value,s);case 2:return e.a(2)}},e)})),function(e,n,r){return t.apply(this,arguments)})}),u=a.BtForm,o=a.submit,s=a.param;return Je(function(){fu(s)}),Ke(function(){lu.value=[]}),r({init:function(){fu(s)}}),function(e,n){var t=F;return Oe(),Re("div",vu,[Se(Te(u)),qe("div",mu,[Se(t,{options:[{content:"切换PHP版本可能会导致网站无法访问"},{content:"如果网站访问异常，建议删除网站重新创建以选择新的PHP版本"}]})])])}}}),hu=Pe({__name:"index",setup:function(e){var r=xe(vn()),a=r.settingTabActive,u=r.siteInfo,i=je(a.value||"domain"),o=G({type:"left-bg-card",value:i,options:[{label:"域名管理",name:"domain",lazy:!0,render:function(){return Se(at,null,null)}},{label:"网站目录",name:"dir",lazy:!0,render:function(){return Se(st,null,null)}},{label:"反向代理",name:"urlProxy",lazy:!0,render:function(){return $(function(){return t.import("./index-legacy430.js?v=1756369731").then(function(e){return e.af})},void 0,t.meta.url)}},{label:"全局配置",name:"golbalConfig",lazy:!0,render:function(){return $(function(){return t.import("./index-legacy431.js?v=1756369731")},void 0,t.meta.url)}},{label:"伪静态",name:"pseudo",lazy:!0,render:function(){return Se(Nt,null,null)}},{label:"配置文件",name:"configFile",lazy:!0,render:function(){return Se(lr,null,null)}},{label:"SSL",name:"ssl",lazy:!0,render:function(){return $(function(){return t.import("./index-legacy432.js?v=1756369731")},void 0,t.meta.url)}}].concat(n("PHP"===u.value.type?[{label:"PHP",name:"php",lazy:!0,render:function(){return Se(du,null,null)}}]:[]),[{label:"重定向",name:"redirect",lazy:!0,render:function(){return Se(Jr,null,null)}},{label:"防盗链",name:"antiLeech",lazy:!0,render:function(){return Se(ia,null,null)}},{label:"日志",name:"siteLogs",lazy:!0,render:function(){return Se(ou,null,null)}}])}).BtTabs;return cn(function(){return a.value},function(e){e&&(i.value=a.value,a.value="")}),function(e,n){return Oe(),Ye(Te(o))}}}),gu=q(hu,[["__scopeId","data-v-59d4f08d"]]),yu=Object.freeze(Object.defineProperty({__proto__:null,default:gu},Symbol.toStringTag,{value:"Module"}));e("$",yu)}}})}();
