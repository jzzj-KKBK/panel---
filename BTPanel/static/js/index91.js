import{fo as e,j as a,o as t,l,fM as s,fN as o,b as r,fO as n,_ as c,H as i,bg as u,c as p,bq as f}from"./utils-lib.js?v=1756369731";import{_ as m}from"./version-compare.vue_vue_type_script_setup_true_lang.js?v=1756369731";import{c as d,q as v,v as _,y as x,e as y,x as C,p as k,A as w,B as b,z as P,J as g,P as I}from"./base-lib.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const V={class:"p-[20px] flex"},S={class:"flex-1 flex flex-col mr-[15px]"},j={class:"flex-1 flex flex-col"},h=d({__name:"index",setup(t){const{certInfo:l}=e();return(e,t)=>{const s=a;return v(),_("div",V,[x("div",S,[t[2]||(t[2]=x("span",{class:"mb-[5px]"},"密钥 (KEY)",-1)),y(s,{type:"textarea",rows:16,modelValue:C(l).private_key,"onUpdate:modelValue":t[0]||(t[0]=e=>C(l).private_key=e),class:"w-full"},null,8,["modelValue"])]),x("div",j,[t[3]||(t[3]=x("span",{class:"mb-[5px]"},"证书 (CRT/PEM)",-1)),y(s,{type:"textarea",rows:16,modelValue:C(l).certificate,"onUpdate:modelValue":t[1]||(t[1]=e=>C(l).certificate=e),class:"w-full"},null,8,["modelValue"])])])}}}),{request:q,error:E}=r(),{getInfo:M,hasCert:U,serverIP:H,serverProtocol:L,serverPort:O,certInfo:R,getCertInfo:z}=e(),A=new Map([["start","启动"],["stop","停止"],["reload","重载"],["restart","重启"]]),B=e=>{const a=A.get(e)||"";t({title:"".concat(a,"服务"),content:"是否".concat(a,"虚拟主机服务，是否继续？"),onConfirm:async()=>{const a=await n(e);await q(a),M()}})},F=async()=>{U.value?l({title:"设置SSL证书",area:70,component:h,showFooter:!0,onOpen:()=>{z()},onConfirm:async()=>{const{certificate:e,private_key:a}=R.value,t=await s(e,a);await q(t)}}):E("请先上传证书")},J=async()=>{if(""===H.value)return void E("Please enter the server IP");const e=await o(H.value);await q(e)},K=()=>{window.open("".concat(L.value,"://").concat(H.value).concat(O.value,"/account/login"),"_blank","noopener,noreferrer")},N={class:""},T={class:"ml-[100px] mt-[2px]"},Y=d({__name:"index",setup(t){const{isServerRunning:l,serverIP:s,serverProtocol:o,serverPort:r,resetServerEvent:n,getServerIP:d,getCertInfo:V}=e();return k(()=>{V(),d()}),(e,t)=>{const d=c,k=i,V=u,S=a,j=p,h=f;return v(),_("div",N,[y(m),y(h,{class:"my-[16px]"},{default:w(()=>[y(V,{label:"服务状态"},{default:w(()=>[x("div",{class:g(["mr-[8px] text-[#666] flex items-center",C(l).color])},[b(P(C(l).tips),1),y(d,{icon:"icon-".concat(C(l).icon),class:g(["mr-[4px]",C(l).color])},null,8,["icon","class"])],2),y(k,{onClick:t[0]||(t[0]=e=>C(B)(C(l).type))},{default:w(()=>[b(P(C(l).text),1)]),_:1}),y(k,{onClick:t[1]||(t[1]=e=>C(B)("restart"))},{default:w(()=>[...t[4]||(t[4]=[b("重启",-1)])]),_:1}),y(k,{onClick:t[2]||(t[2]=e=>C(B)("reload"))},{default:w(()=>[...t[5]||(t[5]=[b("重载",-1)])]),_:1})]),_:1}),y(V,{label:"证书SSL"},{default:w(()=>[y(k,{type:"primary",onClick:C(F)},{default:w(()=>[...t[6]||(t[6]=[b("修改",-1)])]),_:1},8,["onClick"])]),_:1}),y(V,{label:"IP地址"},{default:w(()=>[y(S,{modelValue:C(s),"onUpdate:modelValue":t[3]||(t[3]=e=>I(s)?s.value=e:null),class:"mr-[10px] w-[250px]"},null,8,["modelValue"]),y(k,{onClick:C(J),type:"primary"},{default:w(()=>[...t[7]||(t[7]=[b("修改",-1)])]),_:1},8,["onClick"]),y(k,{onClick:C(n)},{default:w(()=>[...t[8]||(t[8]=[b("重置",-1)])]),_:1},8,["onClick"])]),_:1}),x("p",T,[t[9]||(t[9]=x("span",{class:"mr-[4px]"},"访问地址:",-1)),y(j,{onClick:C(K)},{default:w(()=>[b(P("".concat(C(o),"://").concat(C(s)).concat(C(r),"/account/login")),1)]),_:1},8,["onClick"])])]),_:1})])}}});export{Y as default};
