import{ag as e,c as l,W as a}from"./utils-lib.js?v=1756369731";import{c as s,s as t,r as o,w as d,n,q as p,v as i,e as u,A as m,y as r,x as c,z as _,P as f,B as x,F as b,a_ as v,H as V,I as w,C as g,S as h,a9 as y,R as j,ax as I,ai as P,aj as U,T as C,a7 as k,M as D,ba as H}from"./base-lib.js?v=1756369731";import{_ as S}from"./index.vue_vue_type_script_setup_true_lang13.js?v=1756369731";import{y as A}from"./ssl.js?v=1756369731";import{d as M}from"./useMethod12.js?v=1756369731";import{M as q,i as N,a as z,g as F}from"./index56.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";import"./useStore10.js?v=1756369731";import"./useMethod10.js?v=1756369731";import"./index103.js?v=1756369731";import"./index112.js?v=1756369731";import"./useMethod7.js?v=1756369731";import"./validator.js?v=1756369731";import"./useMethod9.js?v=1756369731";import"./header-nav-tools.vue_vue_type_script_setup_true_lang.js?v=1756369731";const R={class:"p-20px"},E={class:"w-320px"},B={class:"w-320px"},O={class:"w-100px ml-20px"},T={class:"!w-[320px] flex items-center"},W={class:"!p-[12px] bg-[#20a53a] text-white leading-[2.4rem]"},G={class:"w-320px"},J={class:"el-select-dropdown__empty"},K={style:{float:"left"}},L={class:"ml-[1rem]",style:{float:"right",color:"#8492a6","font-size":"13px"}},Q={key:0,class:"flex flex-wrap gap-[5px]"},X={class:"text-[#8492a6] ml-1"},Y={style:{float:"left","max-width":"10ch","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Z={class:"ml-[.8rem]",style:{float:"right",color:"#8492a6","font-size":"13px"}},$=s({__name:"index",props:{compData:{}},emits:["close"],setup(s,{emit:$}){const ee=q(),{form:le,formRef:ae,propsData:se}=t(ee),{initForm:te,rules:oe,unitOptions:de}=ee,ne=o(!1),pe=[{content:'<span class="text-[#dc2626]">提示A记录解析失败，请检查填写的A记录域名是否已解析到服务器IP</span>',isHtml:!0},{content:'<span class="text-[#dc2626]">在IP池中选择一个IP时，此IP将作为本域名发送邮件的出口IP</span>',isHtml:!0},{content:'<span class="text-[#dc2626]">在IP池中选择多个IP时，将开启IP轮换在多个IP中定时切换</span>',isHtml:!0},{content:"需要在DNS服务提供商控制台添加一条A记录",isHtml:!0},{content:"如果使用CloudFlare，添加记录时请选择[DNS only]",isHtml:!0}],ie=[{label:"捕获不存在的邮箱",value:"none"},{label:"捕获所有邮箱",value:"all"}],ue=$,me=s,re=o([]),ce=()=>{ue("close"),M()},_e=()=>{ue("close"),z()},fe=e=>{const l=N.value.find(l=>l.value===e);return l?l.ip:""};return d(ne,e=>{e&&(F(),(async()=>{const{data:e}=await A(),{data:l}=e;re.value=l})())}),n(()=>{te(me.compData)}),(s,t)=>{const o=h,d=y,n=j,A=e,M=I,q=l,z=P,F=U,$=C,ee=H,te=S,ue=k,me=a;return p(),i("div",R,[u(ue,{ref_key:"formRef",ref:ae,model:c(le),rules:c(oe)},{default:m(()=>[u(d,{label:"域名",prop:"domain"},{default:m(()=>[r("div",E,[u(o,{modelValue:c(le).domain,"onUpdate:modelValue":t[0]||(t[0]=e=>c(le).domain=e),disabled:c(se).isEdit,placeholder:"请输入域名，例如：bt.cn"},null,8,["modelValue","disabled"])])]),_:1}),u(d,{label:"A 记录"},{default:m(()=>[r("div",B,[u(o,{modelValue:c(le).a_record,"onUpdate:modelValue":t[1]||(t[1]=e=>c(le).a_record=e),disabled:c(se).isEdit,placeholder:"请输入A记录，例如：mail.bt.cn"},null,8,["modelValue","disabled"])])]),_:1}),u(d,{label:"域名配额"},{default:m(()=>[u(n,{modelValue:c(le).quota,"onUpdate:modelValue":t[2]||(t[2]=e=>c(le).quota=e),class:"!w-200px",min:0,controls:!1},null,8,["modelValue"]),r("div",O,[u(A,{modelValue:c(le).quota_unit,"onUpdate:modelValue":t[3]||(t[3]=e=>c(le).quota_unit=e),options:c(de)},null,8,["modelValue","options"])])]),_:1}),u(d,{label:"最大邮箱数量",prop:"mailboxes"},{default:m(()=>[u(n,{modelValue:c(le).mailboxes,"onUpdate:modelValue":t[4]||(t[4]=e=>c(le).mailboxes=e),class:"!w-320px",min:0,controls:!1},null,8,["modelValue"])]),_:1}),u(d,{label:"邮件捕获"},{default:m(()=>[r("div",T,[u(A,{class:"!w-[140px]",modelValue:c(le).catch_type,"onUpdate:modelValue":t[5]||(t[5]=e=>c(le).catch_type=e),options:ie},null,8,["modelValue"]),u(M,{placement:"top-start",width:"auto",trigger:"click","popper-class":"green-tips-popover !p-0 !border-none"},{reference:m(()=>[u(o,{class:"!w-[170px] ml-10px",modelValue:c(le).email,"onUpdate:modelValue":t[6]||(t[6]=e=>c(le).email=e)},null,8,["modelValue"])]),default:m(()=>[r("div",W,_("none"===c(le).catch_type?"捕获不存在的邮箱，转发到此邮箱":"捕获所有邮箱，转发到此邮箱"),1)]),_:1})])]),_:1}),u(te,{showConfig:c(ne),"onUpdate:showConfig":t[10]||(t[10]=e=>f(ne)?ne.value=e:null)},{config:m(()=>[u(d,{label:"DNS"},{default:m(()=>[r("div",G,[u(F,{modelValue:c(le).dns_id,"onUpdate:modelValue":t[7]||(t[7]=e=>c(le).dns_id=e),class:"!w-320px",filterable:"","default-first-option":"",size:"default",placeholder:"请选择验证类型"},{empty:m(()=>[r("p",J,[t[12]||(t[12]=r("span",null,"暂无数据，请先添加DNS接口",-1)),u(q,{class:"!text-[14px]",onClick:ce},{default:m(()=>[...t[11]||(t[11]=[x(">>添加",-1)])]),_:1})])]),default:m(()=>[(p(!0),i(b,null,v(c(re),e=>(p(),D(z,{key:e.id,label:e.dns_name,value:e.id},{default:m(()=>[r("span",K,_(e.dns_name),1),r("span",L,_(e.ps),1)]),_:2},1032,["label","value"]))),128)),u(z,{label:"更多类型",value:"none",disabled:""},{default:m(()=>[r("p",null,[t[14]||(t[14]=r("span",null,"更多类型，请添加DNS接口",-1)),u(q,{class:"!text-[14px]",onClick:ce},{default:m(()=>[...t[13]||(t[13]=[x(">>添加",-1)])]),_:1})])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),V(u(d,{label:" "},{default:m(()=>[u($,{modelValue:c(le).auto_create_record,"onUpdate:modelValue":t[8]||(t[8]=e=>c(le).auto_create_record=e),"true-label":1,"false-label":0},{default:m(()=>[...t[15]||(t[15]=[x("一键解析",-1)])]),_:1},8,["modelValue"])]),_:1},512),[[w,c(le).dns_id]]),u(d,{label:"IP池"},{default:m(()=>[u(F,{class:"!w-[320px] bt-multiple-select",modelValue:c(le).ip_tag,"onUpdate:modelValue":t[9]||(t[9]=e=>c(le).ip_tag=e),multiple:"",placeholder:"请选择IP"},{tag:m(()=>[c(le).ip_tag&&c(le).ip_tag.length?(p(),i("div",Q,[(p(!0),i(b,null,v(c(le).ip_tag,e=>(p(),D(ee,{type:"info",key:e,closable:"",class:"!w-auto inline-flex items-center",onClose:l=>(e=>{le.value.ip_tag=le.value.ip_tag.filter(l=>l!==e)})(e)},{default:m(()=>[x(_(e)+" ",1),r("span",X,"IP: "+_(fe(e)),1)]),_:2},1032,["onClose"]))),128))])):g("",!0)]),default:m(()=>[(p(!0),i(b,null,v(c(N),e=>(p(),D(z,{key:e.value,label:e.label,value:e.value},{default:m(()=>[r("span",Y,_(e.label),1),r("span",Z,"IP: "+_(e.ip),1)]),_:2},1032,["label","value"]))),128)),u(z,{label:"更多类型",value:"none",disabled:""},{default:m(()=>[r("p",null,[t[17]||(t[17]=r("span",null,"更多IP，请前往IP池",-1)),u(q,{class:"!text-[14px]",onClick:_e},{default:m(()=>[...t[16]||(t[16]=[x(">>添加",-1)])]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["showConfig"])]),_:1},8,["model","rules"]),u(me,{class:"pl-20px",options:pe})])}}});export{$ as default};
