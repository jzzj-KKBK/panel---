import{c as e,r as l,k as a,p as o,q as t,v as r,y as s,B as c,z as n,x as i,M as d,P as p,C as m,J as u,e as h,A as f,O as v,Q as b,F as k,a_ as x,H as y,I as C,bU as _,S as g,ax as V,a9 as w,a7 as j,D as E,ba as S}from"./base-lib.js?v=1756369731";import{u as U,fZ as z,bb as q,bm as N,b as T,e as D}from"./utils-lib.js?v=1756369731";import{v as J}from"./validator.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";import"./column.js?v=1756369731";const M={class:"nps-survey-box"},O={class:"nps-survey-banner"},P={style:{"vertical-align":"4px"}},R={class:"px-[4rem] text-center !relative"},A={key:0,class:"px-[4rem] mt-[2rem] vertical-top"},H={class:"my-[1rem]"},I={class:"inline-block cardView"},L=["onMouseover"],B={class:"mt-[4px] ml-[7.6rem]"},F={key:0},K={key:1,class:"px-[4rem] mt-[2rem]"},Q={class:"mb-1rem"},Z={class:"w-[36rem] ml-[7.6rem] inline-block"},$={class:"flex flex-col items-center p-[2rem] mt-[1.2rem]"},G=D(e({__name:"index",props:{compData:{default:()=>({})}},emits:["close"],setup(e,{emit:D}){const{payment:G}=U(),W=T(),X=D,Y=e,{id:ee,type:le,name:ae,softName:oe,description:te,isNoRate:re,title:se,isCard:ce,isShowPhone:ne}=Y.compData,ie=l("top-0"),de=l(""),pe=l(0),me=l(),ue=[{text:"很不满意",color:"#ef0808",borderColor:"#ef080842",bgColor:"#ef08080d"},{text:"不满意",color:"#ef0808",borderColor:"#ef080842",bgColor:"#ef08080d"},{text:"一般",color:"#f0ad4e",borderColor:"#f7be5642",bgColor:"#f7be562b"},{text:"满意",color:"#20a53a",borderColor:"#69be3d42",bgColor:"#69be3d2b"},{text:"非常满意",color:"#20a53a",borderColor:"#69be3d42",bgColor:"#69be3d2b"}],he=l(0),fe=l(""),ve=l([{text:"软件和互联网",checked:!0},{text:"事业单位",checked:!1},{text:"传统企业",checked:!1},{text:"创业公司",checked:!1},{text:"个人",checked:!1},{text:"其他",checked:!1}]),be=l(""),ke=l([[{role:"软件开发",check:!1},{role:"建站",check:!1},{role:"互联网服务",check:!1},{role:"软件服务",check:!1}],[{role:"政府单位",check:!1},{role:"政企单位",check:!1},{role:"医院",check:!1},{role:"学校",check:!1}],[{role:"工业",check:!1},{role:"服务",check:!1},{role:"餐饮",check:!1},{role:"制造业等",check:!1}],[{role:"创业公司",check:!1}],[{role:"个人站长",check:!1},{role:"学生",check:!1}]]),xe=se||(ae?"您对".concat(ae,"有什么改进的方向和建议?"):"宝塔面板需求反馈收集"),ye=te||"如果您在使用过程中遇到任何问题或功能不完善，请将您的问题或需求详细描述给我们，我们将尽力为您解决或完善。",Ce=a({phone:"",status:!1}),_e=async()=>{let e={product_type:le,software_name:oe||"panel",rate:pe.value},l={};if(re||null!==pe.value&&0!==pe.value)if(""!==de.value)try{if(l[ee]=de.value,5!=he.value?l[1e3]=fe.value:l[1e3]=be.value,e.questions=JSON.stringify(l),Ce.status){if(!Ce.phone)return void W.error("请留下您的手机号码方便后续回访~");let l=z(Ce.phone);e.feedback=JSON.stringify(l?{phone:Ce.phone}:{email:Ce.phone})}await q(e),J(),X("close")}catch(a){}else W.error("请输入您的需求");else W.error("打个分数再提交吧，麻烦您了~")},ge=l();return o(()=>{if(!re){ie.value="top-34";const e=me.value.$el.querySelectorAll(".el-rate__item");e.forEach((l,a)=>{const o=document.createElement("div"),t=ue[a];o.innerText=t.text,o.classList.add("rate-tips"),o.style.color=t.color,o.style.borderColor=t.borderColor,o.style.backgroundColor=t.bgColor,l.appendChild(o),[1,3,5].includes(a)||(o.style.display="block"),l.addEventListener("mouseover",()=>{e.forEach(e=>{e.querySelector(".rate-tips").style.display="none"}),pe.value=a+1,o.style.display="block"})})}setTimeout(()=>{var e;null==(e=ge.value)||e.focus()},400)}),(e,l)=>{const a=_,o=g,U=V,z=S,q=N,T=w,D=j,J=E;return t(),r("div",M,[s("div",O,[s("span",null,[l[6]||(l[6]=s("i",null,null,-1)),l[7]||(l[7]=c()),s("span",P,n(i(xe)),1)])]),s("div",R,[i(re)?m("",!0):(t(),d(a,{key:0,ref_key:"rate",ref:me,class:"mt-[8px] mb-[3rem]",modelValue:i(pe),"onUpdate:modelValue":l[0]||(l[0]=e=>p(pe)?pe.value=e:null),colors:["#ef0808","#f0ad4e","#20a53a"],texts:["很不满意","不满意","一般","满意","非常满意"],"aria-label":"Rate",size:"large"},null,8,["modelValue"])),s("span",{class:u(["text-[red] absolute left-12",i(ie)])},"*",2),h(U,{placement:"top-start",width:"440","popper-class":"tips !bg-[#20a53a] !text-white !text-[1.2rem] !p-12px !leading-[2rem]",trigger:"click","visible-arrow":!0,content:i(ye)},{reference:f(()=>[h(o,{ref_key:"inputRef",ref:ge,type:"textarea",rows:5,modelValue:i(de),"onUpdate:modelValue":l[1]||(l[1]=e=>p(de)?de.value=e:null),placeholder:i(ye),onKeydown:l[2]||(l[2]=v(b(()=>{},["stop"]),["enter"]))},null,8,["modelValue","placeholder"])]),_:1},8,["content"])]),i(ce)?(t(),r("div",A,[s("div",H,[l[8]||(l[8]=s("span",{class:"text-[1.3rem] text-[#666] align-top"},"您所属行业：",-1)),s("div",I,[(t(!0),r(k,null,x(i(ve),(e,l)=>(t(),r("span",{key:l,class:u(["inline-block text-[1.3rem] h-[1.7rem] cardTitle align-super",{active:e.checked}]),onMouseover:a=>((e,l)=>{he.value=l,ve.value.forEach(e=>{e.checked=!1}),e.checked=!0})(e,l)},n(e.text),43,L))),128))]),s("div",B,[5==i(he)?(t(),r("span",F,[h(o,{modelValue:i(be),"onUpdate:modelValue":l[3]||(l[3]=e=>p(be)?be.value=e:null),placeholder:"您的行业是",class:"!w-[36rem]"},null,8,["modelValue"])])):(t(!0),r(k,{key:1},x(i(ke)[i(he)],(e,l)=>(t(),d(z,{class:u(e.check?"active":""),size:"small",key:l,type:"info",onClick:l=>(e=>{fe.value=e.role,ke.value.forEach(e=>{e.forEach(e=>{e.check=!1})}),e.check=!0})(e),effect:"plain"},{default:f(()=>[c(n(e.role),1)]),_:2},1032,["class","onClick"]))),128))])])])):m("",!0),"ltd"===i(G).authType&&i(ne)?(t(),r("div",K,[s("div",Q,[l[9]||(l[9]=s("span",{class:"text-[1.3rem] text-[#666]"},"是否愿意接受回访：",-1)),h(q,{size:"small",modelValue:i(Ce).status,"onUpdate:modelValue":l[4]||(l[4]=e=>i(Ce).status=e)},null,8,["modelValue"])]),h(D,{ref:"formPhone","label-position":"top",model:i(Ce)},{default:f(()=>[y(h(T,{label:"",prop:"phone"},{default:f(()=>[s("span",Z,[h(o,{modelValue:i(Ce).phone,"onUpdate:modelValue":l[5]||(l[5]=e=>i(Ce).phone=e),placeholder:"请留下手机号码或邮箱"},null,8,["modelValue"])])]),_:1},512),[[C,i(Ce).status]])]),_:1},8,["model"])])):m("",!0),l[11]||(l[11]=s("div",{class:"mt-[2.4rem] text-[1.3rem] text-primary leading-[4.6rem] flex justify-center"},"我们特别重视您的需求反馈，我们会每周进行需求评审，希望能更好的帮到您",-1)),s("div",$,[h(J,{class:"w-[12.5rem] !py-12px !px-20px !h-auto",size:"large",type:"primary",onClick:_e},{default:f(()=>[...l[10]||(l[10]=[c("提交",-1)])]),_:1})])])}}}),[["__scopeId","data-v-e9088e57"]]);export{G as default};
