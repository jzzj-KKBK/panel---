import{r as e,k as a,e as l,B as s,c as t,p as n,G as i,q as r,M as o,A as u,x as d,P as m,H as c,y as p,v,F as _,a_ as f,z as h,C as b,J as x,K as y,aA as g,D as w,ai as k,aj as V,a9 as C,a7 as q,bN as B,bM as P,a$ as G}from"./base-lib.js?v=1756369731";import{B as U}from"./index140.js?v=1756369731";import{K as L,bT as j,M as H,o as M,at as S,u as I,k as O,j as T,h as z,al as A,e as F}from"./utils-lib.js?v=1756369731";import{_ as E}from"./index116.js?v=1756369731";import{_ as N}from"./index103.js?v=1756369731";import{S as D,_ as R}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1756369731";import{a3 as $,a4 as K,m as J,a5 as Q,a6 as W,a7 as X,a8 as Y,a9 as Z,aa as ee,ab as ae,ac as le,ad as se,ae as te,af as ne,ag as ie,ah as re,ai as oe,aj as ue,ak as de,al as me,am as ce,V as pe,an as ve,ao as _e,ap as fe,aq as he,ar as be}from"./validator.js?v=1756369731";import{u as xe}from"./column.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./ace.js?v=1756369731";import"./index104.js?v=1756369731";const ye=D(),ge=e({}),we=e("service"),ke=e(!1),Ve=e(!1),Ce=e(""),qe=e(""),Be=e(""),Pe={pool:"应用池(pool)",process_manager:"进程管理方式(process manager)",dynamic:"动态",static:"静态",start_time:"启动日期(start time)",accepted_conn:"请求数(accepted conn)",listen_queue:"请求队列(listen queue)",max_listen_queue:"最大等待队列(max listen queue)",len_queue:"socket队列长度(listen queue len)",idle_processes:"空闲进程数量(idle processes)",active_processes:"活跃进程数量(active processes)",total_processes:"总进程数量(total processes)",max_active_processes:"最大活跃进程数量(max active processes)",max_children_reached:"到达进程上限次数(max children reached)",slow_requests:"慢请求数量(slow requests)"},Ge=e([]),Ue=e(!1),Le=a({slowLogs:"",logs:""}),je=e(""),He=a({uploadLimit:"",timeLimit:""}),Me=async()=>{await L({loading:Ue,request:$({version:qe.value}),success:e=>{Le.slowLogs=e.data.msg||"当前暂无数据"}})},Se=async()=>{await L({loading:Ue,request:K({version:qe.value}),success:e=>{Le.logs=e.msg?e.msg:"当前暂无数据"}})},Ie=async()=>{if(!(e=>{if("timeout"===e){if(!/^[1-9]\d*$/.test(He.timeLimit))return H.error("请输入正整数"),!1;if(Number(He.timeLimit)<30||Number(He.timeLimit)>86400)return H.error("超时限制范围为30-86400"),!1}else{if(!/^[1-9]\d*$/.test(He.uploadLimit))return H.error("请输入正整数"),!1;if(Number(He.uploadLimit)<2)return H.error("上传大小限制不可小于2M"),!1}return!0})(we.value))return;const e="timeout"===we.value,a=e?de:me,l={version:qe.value,[e?"time":"max"]:e?He.timeLimit:He.uploadLimit};await L({loading:"正在保存中，请稍后...",request:a(l),message:!0})},Oe=async e=>{await L({loading:Ue,request:pe({path:e}),data:{data:[String,je]}})},Te=async e=>{await L({loading:"正在保存配置，请稍后...",request:j({path:"/www/server/php/"+qe.value+"/etc/"+e,data:je.value,encoding:"utf-8"}),message:!0})},ze=e([{label:"名称",prop:"name"},{label:"类型",prop:"type"},{label:"说明",prop:"msg",width:320},{label:"状态",prop:"status",width:60,render:e=>e.status?l("i",{class:"svgtofont-el-check font-bold "},null):l("i",{class:"svgtofont-el-close font-bold "},null)},{label:"操作",align:"right",render:e=>"-1"===e.task&&"-1"!=e.phpversions.indexOf(Be.value)?l("span",{class:"bt-link",onClick:J},[s("正在安装")]):"0"===e.task&&"-1"!=e.phpversions.indexOf(Be.value)?l("span",{class:"!text-medium bt-link",onClick:J},[s("等待安装..")]):e.status?l("span",{class:"!text-danger bt-link",onClick:()=>{L({loading:"正在卸载中，请稍后...",request:Q({name:e.name,version:Be.value}),message:!0})}},[s("卸载")]):l("span",{class:"bt-link",onClick:()=>{L({loading:"正在安装中，请稍后...",request:W({name:e.name.toLowerCase(),version:Be.value,type:1}),message:!0,success:()=>{J(),Ee()}})}},[s("安装")])}]),Ae=e([]),Fe=a({list:[],functionInput:""}),Ee=async()=>{await L({loading:Ue,request:X({version:qe.value}),data:{libs:[Array,Ae],disable_functions:String},success:e=>{const a=e.libs.filter(e=>e.versions.includes(qe.value));Ae.value=a,Fe.list=e.disable_functions?e.disable_functions.split(",").map(e=>({name:e})):[]}})},Ne=e([]),De=async()=>{let e={version:qe.value};Ne.value.forEach(a=>{e[a.name]=a.value}),await L({loading:"正在保存中，请稍后...",request:Y(e),message:!0})},Re=async(e=!1)=>{await L({loading:ke,request:Z({version:qe.value}),data:[Array,Ne],success:a=>{e&&H.success("刷新成功")}})},$e=async e=>{const a=(()=>{const e=Fe.list.map(e=>e.name).join(",");return{version:qe.value,disable_functions:e}})();await L({loading:"正在保存中，请稍后...",request:ve(a),message:!0,success:e=>{e.status&&(Fe.functionInput="",Ee())}})},Ke=async()=>{Fe.list.push({name:Fe.functionInput}),await $e()},Je=e([{label:"名称",prop:"name"},xe([{title:"删除",onClick:async e=>{Fe.list.splice(Fe.list.indexOf(e),1),await $e()}}])]),Qe={"1GB内存":{max_children:30,start_servers:5,min_spare_servers:5,max_spare_servers:20},"2GB内存":{max_children:50,start_servers:5,min_spare_servers:5,max_spare_servers:30},"4GB内存":{max_children:80,start_servers:10,min_spare_servers:10,max_spare_servers:30},"8GB内存":{max_children:120,start_servers:10,min_spare_servers:10,max_spare_servers:30},"16GB内存":{max_children:200,start_servers:15,min_spare_servers:15,max_spare_servers:50},"32GB内存":{max_children:300,start_servers:20,min_spare_servers:20,max_spare_servers:50},"48GB内存":{max_children:400,start_servers:20,min_spare_servers:20,max_spare_servers:50},"64GB内存":{max_children:500,start_servers:30,min_spare_servers:30,max_spare_servers:60},"96GB内存":{max_children:700,start_servers:40,min_spare_servers:40,max_spare_servers:70},"128GB内存":{max_children:1e3,start_servers:50,min_spare_servers:50,max_spare_servers:100}},We=a({limit:"",listen:"",bind_port:"",allowed:"",pm:"",max_children:"",start_servers:"",min_spare_servers:"",max_spare_servers:""}),Xe=e([]),Ye={max_children:"允许创建的最大子进程数",start_servers:"起始进程数（服务启动后初始进程数量）",min_spare_servers:"最小空闲进程数（清理空闲进程后的保留数量）",max_spare_servers:"最大空闲进程数（当空闲进程达到此值时清理）"},Ze=e=>{Xe.value=Object.entries(Qe[e]).map(e=>({name:e[0],value:e[1],tips:Ye[e[0]]}))},ea=async()=>{Xe.value.forEach((e,a)=>{a<4&&(We[e.name]=e.value)}),await L({loading:"正在保存中，请稍后...",request:ee({version:qe.value,...We,btn_children_submit:""}),message:!0})},aa=a({save_handler:"",save_path:"",port:"",passwd:""}),la=a({total:0,oldfile:0}),sa=async()=>{await L({loading:"正在保存中，请稍后...",request:ae({version:qe.value,save_handler:aa.save_handler,ip:aa.save_path,port:aa.port,passwd:aa.passwd}),message:!0})},ta=async()=>{await M({title:"清理php_session文件",icon:"warning-filled",content:"是否清理php_session文件？"}),L({loading:"正在清理，请稍后...",request:le(),message:!0,success:na})},na=async()=>{await L({loading:Ue,request:se({version:qe.value}),success:e=>{la.total=e.data.total,la.oldfile=e.data.oldfile}})},ia=async()=>{switch(aa.save_handler){case"redis":aa.save_path="127.0.0.1",aa.port="6379";break;case"memcache":case"memcached":aa.save_path="127.0.0.1",aa.port="11211";break;case"files":aa.save_path="",aa.port="",aa.passwd=""}},ra=e([]),oa=e(!1),ua=e(""),da=a({data:{},key:[]}),ma=async()=>{await L({loading:ke,request:he({php_version:qe.value}),success:e=>{da.data=e.data,da.key=Object.keys(da.data.phpinfo.keys);const a=e.data.phpinfo.modules.split(" ")||[];ra.value=a.map(e=>({name:e}))}})},ca=async()=>{await L({request:te({version:qe.value}),success:e=>{ua.value=e.data.replace("a:link {color: #009; text-decoration: none; background-color: #fff;}","").replace("a:link {color: #000099; text-decoration: none; background-color: #ffffff;}",""),oa.value=!0}})},pa=async({props:{name:e}})=>{switch(e){case"development":case"function":Ee();break;case"performance":(async()=>{ke.value=!0;try{const{data:e}=await _e({version:qe.value});Xe.value=[],Object.keys(e).forEach(a=>{Xe.value.push({name:a,value:e[a],tips:Ye[a]})}),We.listen=e.unix,We.allowed=e.allowed,We.bind_port=e.bind+(e.port?":"+e.port:""),We.pm=e.pm,Object.keys(Qe).forEach(a=>{Qe[a].max_children===Number(e.max_children)&&(We.limit=a)})}catch(e){S(e)}finally{ke.value=!1}})();break;case"session":(async()=>{await L({loading:ke,request:fe({version:qe.value}),success:e=>{aa.save_handler=e.data.save_handler,aa.save_path=e.data.save_path,aa.port=e.data.port,aa.passwd=e.data.passwd}})})(),na();break;case"phpinfo":ma();break;case"settings":Re();break;case"config":Oe("/www/server/php/"+qe.value+"/etc/php.ini");break;case"fpm":Oe("/www/server/php/"+qe.value+"/etc/php-fpm.conf");break;case"state":(async()=>{ke.value=!0;try{const e=await ce({version:qe.value});Ge.value=[],Object.keys(e.data).forEach(a=>{Pe[a.replaceAll(" ","_")]&&Ge.value.push({name:Pe[a.replaceAll(" ","_")],value:e.data[a]})}),0===Ge.value.length&&(Ge.value=[{name:"当前暂无数据",value:"null"}])}catch(e){S(e)}finally{ke.value=!1}})();break;case"logs":Se();break;case"slowLogs":Me();break;case"timeout":case"upload":(async()=>{await L({loading:ke,request:ue({version:qe.value}),success:e=>{He.uploadLimit=e.data.max,He.timeLimit=e.data.maxTime}})})()}},va=async()=>{try{L({loading:"正在获取中，请稍后...",request:ne(),message:!0})}catch(e){}},_a=e("list"),fa=async({props:{name:e}})=>{_a.value=e,"list"===e?Ee():"installed"===e?ma():"pecl"===e&&wa()},ha=e([]),ba=e(""),xa=e(!1),ya=e(""),ga=async()=>{if(!ba.value)return H.error("请输入扩展名称");try{await L({loading:"正在安装中，请稍后...",request:ie({name:ba.value,version:qe.value}),message:!0}),ba.value=""}catch(e){}},wa=async()=>{try{await L({request:re({version:qe.value}),data:[Array,ha]})}catch(e){}},ka=async()=>{try{const e=await L({loading:"正在获取中，请稍后...",request:oe({version:qe.value})});ya.value=e.data.msg||"当前暂无数据",xa.value=!0}catch(e){}},Va=e([{label:"扩展名称",prop:"name"},{label:"版本",prop:"version"},{label:"类型",prop:"type"},xe([{title:"删除",onClick:async e=>{try{await M({title:"删除扩展",icon:"warning-filled",content:"是否删除扩展【"+e.name+"】？"}),await L({loading:"正在删除中，请稍后...",request:be({phpv:qe.value,name:e.name}),message:!0})}catch(a){}}}])]),Ca={class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},qa={class:"flex items-center"},Ba={key:0,class:"flex items-center"},Pa={key:1,class:"flex items-center"},Ga={class:"flex text-[#666] items-center"},Ua={class:"flex text-[#666] items-center"},La={class:"my-[12px]"},ja={class:"leading-8 mt-20px text-[1.2rem] list-disc ml-[20px]"},Ha={class:"my-[12px]"},Ma={class:"flex items-center"},Sa={class:"flex flex-col text-[#666] performance"},Ia={class:"flex items-center"},Oa={class:"flex items-center"},Ta={class:"flex items-center"},za={class:"flex items-center"},Aa={class:"flex items-center"},Fa={class:"ml-[12px] text-[#999]"},Ea={class:"flex items-center"},Na={class:"phpinfo pb-[20px]"},Da={class:"inline-block max-w-[50rem]"},Ra=["innerHTML"],$a=F(t({__name:"index",props:{compData:{default:{}}},setup(e){const a=e,{mainHeight:t}=I();return n(()=>{var e;e=a.compData,we.value="service",e&&(ge.value=e),ye.init(ge.value),Ve.value=ge.value.status,Ce.value=ge.value.s_version+"-"+ge.value.name.replace("php-","").replace(".",""),qe.value=ge.value.name.replace("php-","").replace(".",""),Be.value=ge.value.version.split(".")[0]+ge.value.version.split(".")[1]}),(e,a)=>{const n=g,L=O,j=T,H=w,M=N,S=E,I=z,F=A,D=k,$=V,K=C,J=q,Q=U,W=B,X=P,Y=G,Z=i("bt-loading");return r(),o(F,{modelValue:d(we),"onUpdate:modelValue":a[24]||(a[24]=e=>m(we)?we.value=e:null),type:"left-bg-card",onTabClick:d(pa)},{default:u(()=>[l(n,{label:"服务",name:"service"},{default:u(()=>[l(R)]),_:1}),l(n,{label:"安装扩展",name:"development",lazy:""},{default:u(()=>[l(F,{type:"card",onTabClick:d(fa),modelValue:d(_a),"onUpdate:modelValue":a[3]||(a[3]=e=>m(_a)?_a.value=e:null)},{default:u(()=>[l(n,{label:"安装列表",name:"list"},{default:u(()=>[c(l(L,{column:d(ze),data:d(Ae),"max-height":"450"},null,8,["column","data"]),[[Z,d(Ue)]]),p("ul",Ca,[p("li",null,[p("span",{class:"bt-link",onClick:a[0]||(a[0]=(...e)=>d(va)&&d(va)(...e))},"点击获取最新扩展列表")]),a[25]||(a[25]=p("li",null,"Redis扩展仅支持一个PHP版本安装使用，若在其它PHP版本已安装redis扩展，请勿再装",-1)),a[26]||(a[26]=p("li",null,"请按实际需求安装扩展,不要安装不必要的PHP扩展,这会影响PHP执行效率,甚至出现异常",-1)),a[27]||(a[27]=p("li",null,"opcache/xcache/apc等脚本缓存扩展,请只安装其中1个,否则可能导致您的站点程序异常",-1))])]),_:1}),l(n,{label:"已安装扩展",name:"installed"},{default:u(()=>[c(l(L,{column:[{label:"扩展名称",prop:"name"}],data:d(ra),"max-height":"520"},null,8,["data"]),[[Z,d(Ue)]])]),_:1}),l(n,{label:"pecl扩展安装",name:"pecl"},{default:u(()=>[l(M,null,{"header-left":u(()=>[p("div",qa,[a[30]||(a[30]=p("span",{class:"mr-8px"},"扩展名称",-1)),l(j,{placeholder:"请输入扩展名称",width:"32rem",modelValue:d(ba),"onUpdate:modelValue":a[1]||(a[1]=e=>m(ba)?ba.value=e:null)},null,8,["modelValue"]),l(H,{type:"primary",class:"ml-[8px]",onClick:d(ga)},{default:u(()=>[...a[28]||(a[28]=[s("点击安装",-1)])]),_:1},8,["onClick"]),l(H,{class:"ml-[8px]",onClick:d(ka)},{default:u(()=>[...a[29]||(a[29]=[s("安装日志",-1)])]),_:1},8,["onClick"])])]),content:u(()=>[l(L,{column:d(Va),data:d(ha),"max-height":"500"},null,8,["column","data"])]),"footer-left":u(()=>[...a[31]||(a[31]=[p("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[p("li",null,"pecl扩展与扩展安装仅能选择一处安装"),p("li",null,"如出现安装异常请查看安装日志手动处理"),p("li",null,"安装时的选项参数均为默认"),p("li",null,"安装日志仅展示最新一次的安装日志数据")],-1)])]),_:1}),l(I,{title:"pecl安装日志",area:54,modelValue:d(xa),"onUpdate:modelValue":a[2]||(a[2]=e=>m(xa)?xa.value=e:null)},{default:u(()=>[l(S,{title:"全屏查看日志",content:d(ya),autoScroll:!0,isHtml:!0,style:"height:460px"},null,8,["content"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["onTabClick","modelValue"])]),_:1}),l(n,{label:"配置修改",name:"settings",lazy:""},{default:u(()=>[c((r(),v("div",null,[l(J,{"label-position":"right","label-width":"200px",class:"settings"},{default:u(()=>[(r(!0),v(_,null,f(d(Ne),(e,a)=>(r(),o(K,{label:e.name,key:a},{default:u(()=>[2==e.type||3===e.type||"cgi.fix_pathinfo"===e.name?(r(),v("div",Ba,[l(j,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,width:"12rem",class:"mr-[12px]"},null,8,["modelValue","onUpdate:modelValue"]),p("span",null,h(e.ps),1)])):(r(),v("div",Pa,[l($,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,class:"!w-[12rem] mr-[12px]"},{default:u(()=>[l(D,{label:"开启",value:"On"}),l(D,{label:"关闭",value:"Off"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),p("span",null,h(e.ps),1)]))]),_:2},1032,["label"]))),128)),l(K,{label:" ",class:"mt-[20px]"},{default:u(()=>[l(H,{type:"primary",onClick:d(De)},{default:u(()=>[...a[32]||(a[32]=[s("保存",-1)])]),_:1},8,["onClick"]),l(H,{type:"default",onClick:a[4]||(a[4]=e=>d(Re)(!0))},{default:u(()=>[...a[33]||(a[33]=[s("刷新",-1)])]),_:1})]),_:1})]),_:1})])),[[Z,d(ke)]])]),_:1}),c((r(),o(n,{label:"上传限制",name:"upload"},{default:u(()=>[p("div",Ga,[l(j,{modelValue:d(He).uploadLimit,"onUpdate:modelValue":a[5]||(a[5]=e=>d(He).uploadLimit=e),type:"number","text-type":"MB",width:"14rem"},{append:u(()=>[...a[34]||(a[34]=[s("MB",-1)])]),_:1},8,["modelValue"]),l(H,{type:"primary",class:"ml-[12px]",onClick:d(Ie)},{default:u(()=>[...a[35]||(a[35]=[s("保存",-1)])]),_:1},8,["onClick"])])]),_:1})),[[Z,d(ke)]]),c((r(),o(n,{label:"超时限制",name:"timeout"},{default:u(()=>[p("div",Ua,[l(j,{modelValue:d(He).timeLimit,"onUpdate:modelValue":a[6]||(a[6]=e=>d(He).timeLimit=e),type:"number","text-type":"秒",width:"14rem"},{append:u(()=>[...a[36]||(a[36]=[s("秒",-1)])]),_:1},8,["modelValue"]),l(H,{type:"primary",class:"ml-[12px]",onClick:d(Ie)},{default:u(()=>[...a[37]||(a[37]=[s("保存",-1)])]),_:1},8,["onClick"])])]),_:1})),[[Z,d(ke)]]),l(n,{label:"配置文件",name:"config",lazy:""},{default:u(()=>[a[40]||(a[40]=p("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),p("div",La,[c(l(Q,{class:"!h-[46rem] !w-[64rem]",modelValue:d(je),"onUpdate:modelValue":a[7]||(a[7]=e=>m(je)?je.value=e:null),id:"configContent",onSave:a[8]||(a[8]=e=>d(Te)("php.ini"))},null,8,["modelValue"]),[[Z,d(Ue)]])]),l(H,{type:"primary",onClick:a[9]||(a[9]=e=>d(Te)("php.ini"))},{default:u(()=>[...a[38]||(a[38]=[s("保存",-1)])]),_:1}),p("ul",ja,[p("li",null,"此处为"+h(e.compData.name)+"主配置文件,若您不了解配置规则,请勿随意修改",1),a[39]||(a[39]=p("li",null,"默认已开启Openssl/Curl/Mysql等扩展，详情可点击phpinfo查看",-1))])]),_:1}),l(n,{label:"FPM配置文件",name:"fpm"},{default:u(()=>[a[42]||(a[42]=p("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),p("div",Ha,[c(l(Q,{class:"!h-[48rem] !w-[64rem]",modelValue:d(je),"onUpdate:modelValue":a[10]||(a[10]=e=>m(je)?je.value=e:null),id:"fpmContent",onSave:a[11]||(a[11]=e=>d(Te)("php-fpm.conf"))},null,8,["modelValue"]),[[Z,d(Ue)]])]),l(H,{type:"primary",onClick:a[12]||(a[12]=e=>d(Te)("php-fpm.conf"))},{default:u(()=>[...a[41]||(a[41]=[s("保存",-1)])]),_:1}),a[43]||(a[43]=p("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[p("li",null,"此处为PHP-FPM配置文件,若您不了解配置规则，请勿修改!")],-1))]),_:1}),l(n,{label:"禁用函数",name:"function",lazy:""},{default:u(()=>[l(M,null,{"header-left":u(()=>[p("div",Ma,[l(j,{placeholder:"添加要被禁止的函数名,如: exec",width:"32rem",modelValue:d(Fe).functionInput,"onUpdate:modelValue":a[13]||(a[13]=e=>d(Fe).functionInput=e)},null,8,["modelValue"]),l(H,{type:"primary",class:"ml-[8px]",onClick:d(Ke)},{default:u(()=>[...a[44]||(a[44]=[s("保存",-1)])]),_:1},8,["onClick"])])]),content:u(()=>[c(l(L,{column:d(Je),data:d(Fe).list,"max-height":"500"},null,8,["column","data"]),[[Z,d(Ue)]])]),"footer-left":u(()=>[...a[45]||(a[45]=[p("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[p("li",null,"在此处可以禁用指定函数的调用,以增强环境安全性!"),p("li",null,"强烈建议禁用如exec,system等危险函数!")],-1)])]),_:1})]),_:1}),l(n,{label:"性能调整",name:"performance",lazy:""},{default:u(()=>[c((r(),v("div",Sa,[l(J,{"label-position":"right","label-width":"140px",class:"mb-[20px] performance-form",model:d(We)},{default:u(()=>[l(K,{label:"并发方案"},{default:u(()=>[l($,{class:"!w-[16rem] mr-[4px]",modelValue:d(We).limit,"onUpdate:modelValue":a[14]||(a[14]=e=>d(We).limit=e),onChange:d(Ze)},{default:u(()=>[l(D,{label:"1GB内存",value:"1GB内存"}),l(D,{label:"2GB内存",value:"2GB内存"}),l(D,{label:"4GB内存",value:"4GB内存"}),l(D,{label:"8GB内存",value:"8GB内存"}),l(D,{label:"16GB内存",value:"16GB内存"}),l(D,{label:"32GB内存",value:"32GB内存"}),l(D,{label:"48GB内存",value:"48GB内存"}),l(D,{label:"64GB内存",value:"64GB内存"}),l(D,{label:"96GB内存",value:"96GB内存"}),l(D,{label:"128GB内存",value:"128GB内存"})]),_:1},8,["modelValue","onChange"])]),_:1}),l(K,{label:"连接方式"},{default:u(()=>[p("div",Ia,[l($,{class:"!w-[16rem] mr-[12px]",modelValue:d(We).listen,"onUpdate:modelValue":a[15]||(a[15]=e=>d(We).listen=e)},{default:u(()=>[l(D,{label:"Unix套接字",value:"unix"}),l(D,{label:"Tcp套接字",value:"tcp"})]),_:1},8,["modelValue"]),a[46]||(a[46]=p("span",{class:"text-[#999]"},"推荐Unix套接字",-1))])]),_:1}),l(K,{label:"连接信息"},{default:u(()=>[p("div",Oa,[l(j,{width:"16rem",modelValue:d(We).bind_port,"onUpdate:modelValue":a[16]||(a[16]=e=>d(We).bind_port=e)},null,8,["modelValue"]),a[47]||(a[47]=p("span",{class:"ml-12px text-[#999]"},"绑定IP:监听端口或Uinx套接字地址",-1))])]),_:1}),l(K,{label:"IP白名单"},{default:u(()=>[p("div",Ta,[l(j,{width:"16rem",modelValue:d(We).allowed,"onUpdate:modelValue":a[17]||(a[17]=e=>d(We).allowed=e)},null,8,["modelValue"]),a[48]||(a[48]=p("span",{class:"ml-12px text-[#999]"},"允许访问PHP的IP，多个请用逗号隔开",-1))])]),_:1}),l(K,{label:"运行模式"},{default:u(()=>[p("div",za,[l($,{class:"!w-[16rem] mr-[12px]",modelValue:d(We).pm,"onUpdate:modelValue":a[18]||(a[18]=e=>d(We).pm=e)},{default:u(()=>[l(D,{label:"静态模式",value:"static"}),l(D,{label:"动态模式",value:"dynamic"}),l(D,{label:"按需模式",value:"ondemand"})]),_:1},8,["modelValue"]),a[49]||(a[49]=p("span",{class:"text-[#999]"},"PHP-FPM运行模式",-1))])]),_:1}),(r(!0),v(_,null,f(d(Xe),(e,a)=>(r(),v(_,{key:a},[a<4?(r(),o(K,{key:0,label:e.name},{default:u(()=>[p("div",Aa,[l(j,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,width:"16rem",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),p("span",Fa,h(e.tips),1)])]),_:2},1032,["label"])):b("",!0)],64))),128)),l(K,{label:" "},{default:u(()=>[l(H,{type:"primary",onClick:d(ea)},{default:u(()=>[...a[50]||(a[50]=[s("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),a[51]||(a[51]=p("ul",{class:"mt-[8px] leading-8 text-[1.2rem] list-disc ml-[20px]"},[p("li",null,"【最大子进程数量】越大，并发能力越强，但max_children最大不要超过5000"),p("li",null,"【内存】每个PHP子进程需要20MB左右内存，过大的max_children会导致服务器不稳定"),p("li",null,"【静态模式】始终维持设置的子进程数量，对内存开销较大，但并发能力较好"),p("li",null,"【动态模式】按设置最大空闲进程数来收回进程，内存开销小，建议小内存机器使用"),p("li",null,"【按需模式】根据访问需求自动创建进程，内存开销极小，但并发能力略差"),p("li",null,"【外网访问】若需外网访问，连接方式为TCP套接字，并将[连接信息-绑定IP]改为0.0.0.0"),p("li",null,"【外网访问】配置正确的IP白名单，在防火墙/安全组放行监听端口，有安全风险，需谨慎"),p("li",null,"调整完配置需要重启PHP才会生效")],-1))])),[[Z,d(ke)]])]),_:1}),c((r(),o(n,{label:"负载状态",name:"state"},{default:u(()=>[l(X,{class:"margin-top table-descriptions",column:2,border:""},{default:u(()=>[(r(!0),v(_,null,f(d(Ge),(e,a)=>(r(),o(W,{key:a,span:2},{label:u(()=>[s(h(e.name),1)]),default:u(()=>[s(" "+h(e.value),1)]),_:2},1024))),128))]),_:1})]),_:1})),[[Z,d(ke)]]),l(n,{label:"Session配置",name:"session",lazy:""},{default:u(()=>[p("div",null,[c((r(),o(J,{form:d(aa),class:"session"},{default:u(()=>[l(K,{label:"存储模式"},{default:u(()=>[l($,{modelValue:d(aa).save_handler,"onUpdate:modelValue":a[19]||(a[19]=e=>d(aa).save_handler=e),onChange:d(ia),class:"!w-[24rem]"},{default:u(()=>[l(D,{label:"files",value:"files"}),l(D,{label:"Redis",value:"redis"}),l(D,{label:"Memcache",value:"memcache"}),l(D,{label:"Memcached",value:"memcached"})]),_:1},8,["modelValue","onChange"])]),_:1}),l(K,{label:"链接地址"},{default:u(()=>[p("div",Ea,[l(j,{modelValue:d(aa).save_path,"onUpdate:modelValue":a[20]||(a[20]=e=>d(aa).save_path=e),disabled:"files"===d(aa).save_handler,width:"24rem"},null,8,["modelValue","disabled"]),a[52]||(a[52]=p("span",{class:"ml-[8px]"},"支持域名和IP地址",-1))])]),_:1}),l(K,{label:"端口"},{default:u(()=>[l(j,{modelValue:d(aa).port,"onUpdate:modelValue":a[21]||(a[21]=e=>d(aa).port=e),disabled:"files"===d(aa).save_handler,width:"24rem"},null,8,["modelValue","disabled"])]),_:1}),l(K,{label:"密码"},{default:u(()=>[l(j,{placeholder:"无密码时留空",modelValue:d(aa).passwd,"onUpdate:modelValue":a[22]||(a[22]=e=>d(aa).passwd=e),disabled:"files"===d(aa).save_handler,width:"24rem"},null,8,["modelValue","disabled"])]),_:1}),l(K,{label:" "},{default:u(()=>[l(H,{type:"primary",onClick:d(sa)},{default:u(()=>[...a[53]||(a[53]=[s("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["form"])),[[Z,d(ke)]]),a[58]||(a[58]=p("ul",{class:"mt-[8px] leading-12 text-[1.2rem] list-disc ml-[20px]"},[p("li",null,"若你的站点并发比较高，使用Redis，Memcache能有效提升PHP并发能力"),p("li",null,"若调整Session模式后，网站访问异常，请切换回原来的模式"),p("li",null,"切换Session模式会使在线的用户会话丢失，请在流量小的时候切换")],-1)),l(Y),c((r(),v("div",null,[a[57]||(a[57]=p("div",null,"清理Session文件",-1)),l(X,{class:"my-[20px] w-[50%] session table-descriptions",column:1,border:""},{default:u(()=>[l(W,null,{label:u(()=>[...a[54]||(a[54]=[s(" 总Session文件数量 ",-1)])]),default:u(()=>[s(" "+h(d(la).total),1)]),_:1}),l(W,null,{label:u(()=>[...a[55]||(a[55]=[s(" 可清理的Session文件数量 ",-1)])]),default:u(()=>[s(" "+h(d(la).oldfile),1)]),_:1})]),_:1}),l(H,{type:"primary",onClick:d(ta)},{default:u(()=>[...a[56]||(a[56]=[s("清理session文件",-1)])]),_:1},8,["onClick"])])),[[Z,d(Ue)]])])]),_:1}),l(n,{label:"日志",name:"logs"},{default:u(()=>[l(S,{title:"全屏查看日志",content:d(Le).logs,autoScroll:!0,isHtml:!0,style:"height:600px",refresh:d(Se)},null,8,["content","refresh"])]),_:1}),l(n,{label:"慢日志",name:"slowLogs"},{default:u(()=>[l(S,{title:"全屏查看日志",content:d(Le).slowLogs,autoScroll:!0,isHtml:!0,style:"height:600px",refresh:d(Me)},null,8,["content","refresh"])]),_:1}),l(n,{label:"phpinfo",name:"phpinfo",lazy:"",class:"overflow-auto h-full"},{default:u(()=>[c((r(),v("div",null,[p("div",Na,[l(H,{type:"default",onClick:d(ca)},{default:u(()=>[...a[59]||(a[59]=[s("查看phpinfo",-1)])]),_:1},8,["onClick"]),l(X,{class:"margin-top table-descriptions",column:2,border:"",title:"基本信息"},{default:u(()=>[l(W,null,{label:u(()=>[...a[60]||(a[60]=[s(" PHP版本 ",-1)])]),default:u(()=>{var e;return[s(" "+h((null==(e=d(da).data.phpinfo)?void 0:e.php_version)||""),1)]}),_:1}),l(W,null,{label:u(()=>[...a[61]||(a[61]=[s(" 安装位置 ",-1)])]),default:u(()=>{var e;return[s(" "+h((null==(e=d(da).data.phpinfo)?void 0:e.php_path)||""),1)]}),_:1}),l(W,{span:2},{label:u(()=>[...a[62]||(a[62]=[s(" php.ini ",-1)])]),default:u(()=>{var e;return[s(" "+h((null==(e=d(da).data.phpinfo)?void 0:e.php_ini)||""),1)]}),_:1}),l(W,{span:2},{label:u(()=>[...a[63]||(a[63]=[s(" 已加载 ",-1)])]),default:u(()=>{var e;return[p("span",Da,h((null==(e=d(da).data.phpinfo)?void 0:e.modules)||""),1)]}),_:1})]),_:1}),(r(!0),v(_,null,f(d(da).key,(e,a)=>(r(),o(X,{column:3,class:"table-descriptions",border:"",title:d(da).data.phpinfo.keys[e],key:a},{default:u(()=>[(r(!0),v(_,null,f(Object.keys(d(da).data[e]),(a,l)=>(r(),o(W,{key:l},{label:u(()=>[s(h(a),1)]),default:u(()=>[p("span",{class:x(d(da).data[e][a]?"text-primary":"text-danger")},h(d(da).data[e][a]?"yes":"no"),3)]),_:2},1024))),128))]),_:2},1032,["title"]))),128))]),l(I,{title:"phpInfo",modelValue:d(oa),"onUpdate:modelValue":a[23]||(a[23]=e=>m(oa)?oa.value=e:null),area:["90%"]},{default:u(()=>[p("div",{innerHTML:d(ua),class:"overflow-auto",style:y("height:".concat(d(t)-100,"px"))},null,12,Ra)]),_:1},8,["modelValue"])])),[[Z,d(ke)]])]),_:1})]),_:1},8,["modelValue","onTabClick"])}}}),[["__scopeId","data-v-96abcbc9"]]);export{$a as default};
