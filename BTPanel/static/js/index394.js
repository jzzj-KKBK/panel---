import{c as e,k as a,g as l,r as o,p as d,q as s,v as r,e as n,A as i,y as t,x as m,B as p,z as _,F as c,a_ as u,Q as f,S as v,aj as y,a9 as A,a7 as b,ai as h}from"./base-lib.js?v=1756369731";import{S as k}from"./ssl.js?v=1756369731";import{b as w}from"./utils-lib.js?v=1756369731";import{g as T}from"./useStore10.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const V={class:"p-[16px]"},j={class:"flex items-center"},g=e({__name:"index",props:{compData:{type:Object,default:()=>{}}},emits:["close"],setup(e,{expose:g,emit:x}){const C=w(),{refs:{isRefreshDomainList:D}}=T(),M=e,X=x,E=a({domain_name:"",domain_dns_value:"",dns_id:"",record_type:"A",domain:""}),S=[{title:"A",key:"A",placeholderTip:"将域名指向IPv4地址"},{title:"TXT",key:"TXT",placeholderTip:"设置文本记录"},{title:"CNAME",key:"CNAME",placeholderTip:"将域名指向另外一个域名"},{title:"MX",key:"MX",placeholderTip:"如果需要设置邮箱，让邮箱能收到邮件，就需要添加MX记录。"},{title:"CAA",key:"CAA",placeholderTip:"CA证书颁发机构授权校验"},{title:"AAAA",key:"AAAA",placeholderTip:"用来指定主机名（或域名）对应的IPv6地址（例如：ff06:0:0:0:0:0:0:c3）记录。"}],z=l(()=>{var e;return null==(e=S.find(e=>e.key===E.record_type))?void 0:e.placeholderTip}),U=o(null),q={domain_name:[{validator:(e,a,l)=>{a?l():l(new Error("请填写域名前缀"))},trigger:"blur"}],domain_dns_value:[{validator:(e,a,l)=>{a?l():l(new Error("请输入记录值"))},trigger:"blur"}]};return d(()=>{M.compData.row.dns_id&&(E.dns_id=M.compData.row.dns_id,E.domain=".".concat(M.compData.row.domain))}),g({onConfirm:async()=>{try{await U.value.validate();const e=C.load("正在解析域名，请稍候..."),a=await k({dns_id:E.dns_id,domain_name:"".concat(E.domain_name).concat(E.domain),domain_dns_value:E.domain_dns_value,record_type:E.record_type,fun_name:"create_dns_record"});C.request(a),e&&e.close(),a.status&&(D.value=!0,E.domain_name="",E.domain_dns_value="",E.dns_id="",E.record_type="A",E.domain="",X("close"))}catch(e){}}}),(e,a)=>{const l=v,o=h,d=y,k=A,w=b;return s(),r("div",V,[n(w,{ref_key:"formRef",ref:U,size:"small",rules:q,model:m(E),class:"relative w-full","label-position":"right",onSubmit:a[3]||(a[3]=f(()=>{},["prevent"]))},{default:i(()=>[n(k,{label:"主机记录",prop:"domain_name"},{default:i(()=>[t("div",j,[n(l,{modelValue:m(E).domain_name,"onUpdate:modelValue":a[0]||(a[0]=e=>m(E).domain_name=e),class:"!w-[34rem]",placeholder:"请填写域名前缀，支持多级，如：ab.cd.ef"},{append:i(()=>[p(_(m(E).domain),1)]),_:1},8,["modelValue"]),n(d,{size:"small",modelValue:m(E).record_type,"onUpdate:modelValue":a[1]||(a[1]=e=>m(E).record_type=e),class:"!w-[8rem] ml-[1rem]",placeholder:"请选择"},{default:i(()=>[(s(),r(c,null,u(S,e=>n(o,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1}),n(k,{label:"记录值",prop:"domain_dns_value"},{default:i(()=>[n(l,{modelValue:m(E).domain_dns_value,"onUpdate:modelValue":a[2]||(a[2]=e=>m(E).domain_dns_value=e),class:"!w-[43rem]",placeholder:m(z)},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])])}}});export{g as default};
