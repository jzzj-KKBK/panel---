import{_ as a}from"./index103.js?v=1756369731";import{k as t,b as e}from"./utils-lib.js?v=1756369731";import{getJavaSpringProject as s,groupAddProjects as r}from"./site.js?v=1756369731";import{c as o,r as i,bT as n,G as l,q as c,v as m,e as p,A as u,H as d,x as f}from"./base-lib.js?v=1756369731";import{a as h}from"./column.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";const j={class:"p-[2rem]"},v=o({__name:"group-add-projects",props:{compData:{}},emits:["close"],setup(o,{expose:v,emit:_}){const g=o,b=e(),x=_,y=i([]),D=i(!1),q=i([]),w=[h(),{prop:"name",label:"项目名称"}],C=a=>{q.value=a.map(a=>a.id)};return n(async()=>{try{D.value=!0;const a=(a=>{const t=g.compData.projectList.map(a=>a.id);return a.filter(a=>!t.includes(a.id))})((await s()).data);if(0===a.length)return b.error("暂无可用项目"),void x("close");y.value=a}catch(a){}finally{D.value=!1}}),v({onConfirm:async()=>{try{if(0===q.value.length)return void b.error("请选择项目");const a=await r({group_id:g.compData.group_id,project_ids:JSON.stringify(q.value)});b.request(a),a.status&&(x("close"),g.compData.refreshEvent())}catch(a){}}}),(e,s)=>{const r=t,o=a,i=l("bt-loading");return c(),m("div",j,[p(o,null,{"header-left":u(()=>[...s[0]||(s[0]=[])]),"header-right":u(()=>[...s[1]||(s[1]=[])]),content:u(()=>[d(p(r,{"max-height":300,column:w,data:f(y),onSelectionChange:C},null,8,["data"]),[[i,f(D)]])]),"footer-left":u(()=>[...s[2]||(s[2]=[])]),_:1})])}}});export{v as default};
