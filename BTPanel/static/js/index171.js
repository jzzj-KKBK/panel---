import{K as a,bT as e,M as l,al as s}from"./utils-lib.js?v=1756369731";import{r as t,c as o,p as r,G as n,q as i,M as m,A as u,e as c,y as p,H as d,x as v,P as f,B as _,v as w,F as x,a_ as g,z as b,aA as y,D as j,ai as V,aj as h}from"./base-lib.js?v=1756369731";import{B as C}from"./index140.js?v=1756369731";import{S as k,_ as q}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1756369731";import{U as D,m as S,V as U,W as H}from"./validator.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./ace.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";const T=k(),A=t({}),B=t("service"),F=t(""),M=t(!1),P=t(""),z=t(""),G=t([]),K=async()=>{await a({loading:"正在保存中，请稍后...",request:e({path:"/www/server/tomcat/conf/server.xml",data:F.value,encoding:"utf-8"}),message:!0})},N=async a=>{let[e]=a.version.split(".");if(z.value!==e)try{await D({sName:"tomcat",version:z.value,min_version:""}),S()}catch(s){}else l.error("当前版本与选择版本一致")},W=({props:{name:e}})=>{switch(e){case"config":(async()=>{await a({loading:M,request:U({path:"/www/server/tomcat/conf/server.xml"}),data:{data:[String,F]}})})();break;case"logs":(async()=>{await a({loading:M,request:H({path:"/www/wwwlogs/nginx_error.log"}),data:{msg:[String,P]}})})()}},E={class:"my-[12px]"},I={class:"flex text-[#666] items-center"},J={class:"pre-box bg-[#333] text-white h-[50rem] overflow-auto p-[12px] rounded-[4px]"},L=o({__name:"index",props:{compData:{default:{}}},setup(a){const e=a;return r(()=>{var a;a=e.compData,B.value="service",a&&(A.value=a),T.init(A.value),z.value=A.value.version[0],G.value=A.value.versions}),(a,e)=>{const l=y,t=C,o=j,r=V,k=h,D=s,S=n("bt-loading"),U=n("scroll-bottom");return i(),m(D,{modelValue:v(B),"onUpdate:modelValue":e[3]||(e[3]=a=>f(B)?B.value=a:null),type:"left-bg-card",onTabClick:v(W)},{default:u(()=>[c(l,{label:"服务",name:"service"},{default:u(()=>[c(q)]),_:1}),c(l,{label:"配置文件",name:"config"},{default:u(()=>[e[5]||(e[5]=p("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),p("div",E,[d(c(t,{class:"!h-[36rem] !w-[full]",modelValue:v(F),"onUpdate:modelValue":e[0]||(e[0]=a=>f(F)?F.value=a:null),id:"configContent",filePath:"/www/server/tomcat/conf/server.xml"},null,8,["modelValue"]),[[S,v(M)]])]),c(o,{onClick:v(K),type:"primary"},{default:u(()=>[...e[4]||(e[4]=[_("保存",-1)])]),_:1},8,["onClick"]),e[6]||(e[6]=p("ul",{class:"leading-8 mt-20px text-[1.2rem] list-disc ml-[20px]"},[p("li",null,"此处为tomcat主配置文件,若您不了解配置规则,请勿随意修改")],-1))]),_:1}),c(l,{label:"版本切换",name:"version"},{default:u(()=>[p("div",I,[e[8]||(e[8]=p("span",null,"选择版本",-1)),c(k,{class:"mx-[12px] !w-[18rem]",modelValue:v(z),"onUpdate:modelValue":e[1]||(e[1]=a=>f(z)?z.value=a:null)},{default:u(()=>[(i(!0),w(x,null,g(v(G),(a,e)=>(i(),m(r,{key:e,label:"tomcat"+a.m_version,value:a.m_version},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),c(o,{type:"primary",onClick:e[2]||(e[2]=e=>v(N)(a.compData))},{default:u(()=>[...e[7]||(e[7]=[_("切换",-1)])]),_:1})])]),_:1}),c(l,{label:"运行日志",name:"logs"},{default:u(()=>[d((i(),w("div",J,[_(b(v(P)||"暂无日志"),1)])),[[S,v(M)],[U]])]),_:1})]),_:1},8,["modelValue","onTabClick"])}}});export{L as default};
