import{l as a,L as e,K as l,M as t,k as s,W as o,j as n,al as r,S as i,e as u}from"./utils-lib.js?v=1756369731";import{c as m,r as d,k as p,p as c,G as g,q as f,v as _,e as b,A as v,y as h,x as y,P as w,H as j,O as x,B as V,al as I,aA as P,D as k}from"./base-lib.js?v=1756369731";import{_ as q}from"./index103.js?v=1756369731";import{b4 as D,b5 as A,b6 as C,b7 as E,b8 as F}from"./firewall.js?v=1756369731";import{u as S}from"./column.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";const T={class:"flex items-center"},U=u(m({__name:"login-alert-setting",props:{compData:{default:()=>({alertStatus:"",refreshFn:()=>""})}},setup(u){const m=u,U=d("login"),z=d(""),H=d([]),K=d(!1),L=d("");d([]);const O=d({}),B=d(0),G=d(!1),M=d([]),R=p({p:1,p_size:8}),W=[{content:"只有root用户登录才会触发告警"}],J=async()=>{a({title:"登录告警设置",component:()=>e(()=>import("./alert-setting-dialog.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),area:50,compData:{...O.value,refreshEvent:Q},showFooter:!0})},N=async(a,e)=>{a?J():(await l({loading:G,request:D({task_id:O.value.id,status:0}),message:!0}),Q())},Q=async()=>{var a;const e=await(null==(a=m.compData)?void 0:a.refreshFn());L.value=e.status,O.value=e},X=a=>{var e;"white"===a?Z():(L.value=null==(e=m.compData)?void 0:e.alertStatus,Q(),(async()=>{await l({loading:G,request:F({...R}),data:{data:[Array,M],page:i(B)}})})())},Y=async()=>{z.value?(await l({loading:"正在添加IP白名单，请稍后...",request:A({ip:z.value}),message:!0}),z.value="",Z()):t.error("请输入正确的IP地址")},Z=async(a=1)=>{await l({loading:K,request:C(),data:{msg:[Array,H]}})},$=[{label:"IP地址",render:a=>a},S([{onClick:a=>(async a=>{await l({loading:"正在删除IP白名单，请稍后...",request:E({ip:a}),message:!0}),Z()})(a),title:"删除"}])],aa=[{label:"详情",prop:"log"},{label:"添加时间",prop:"addtime",align:"right",width:160}];return c(async()=>{X(U.value)}),(a,e)=>{const l=I,t=s,i=q,u=o,m=P,d=n,p=k,c=r,D=g("bt-loading");return f(),_("div",null,[b(c,{class:"!h-[580px]",modelValue:y(U),"onUpdate:modelValue":e[2]||(e[2]=a=>w(U)?U.value=a:null),type:"left-bg-card",position:"left",onChange:X},{default:v(()=>[b(m,{label:"登录日志",name:"login"},{default:v(()=>[b(i,null,{"header-left":v(()=>[h("span",T,[e[3]||(e[3]=h("span",{class:"mr-[1rem]"},"登录告警",-1)),b(l,{size:"small",class:"!mb-0",modelValue:y(L),"onUpdate:modelValue":e[0]||(e[0]=a=>w(L)?L.value=a:null),onChange:N},null,8,["modelValue"]),h("span",{class:"bt-link ml-8px",onClick:J}," 告警通道设置 ")])]),content:v(()=>[j(b(t,{"max-height":"450",ref:"portTable",column:aa,data:y(M)},null,8,["data"]),[[D,y(G)],[D,"正在加载列表，请稍后...","title"]])]),"footer-right":v(()=>[...e[4]||(e[4]=[])]),_:1}),b(u,{options:W,class:"mt-[1rem] mx-[1rem]"})]),_:1}),b(m,{label:"IP白名单",name:"white"},{default:v(()=>[b(i,null,{"header-left":v(()=>[b(d,{class:"mr-4",modelValue:y(z),"onUpdate:modelValue":e[1]||(e[1]=a=>w(z)?z.value=a:null),width:"20rem",placeholder:"请输入IP",onKeyup:x(Y,["enter","native"]),clearable:""},null,8,["modelValue"]),b(p,{type:"primary",onClick:Y},{default:v(()=>[...e[5]||(e[5]=[V("添加",-1)])]),_:1})]),content:v(()=>[j(b(t,{"max-height":"500",ref:"portTable",column:$,data:y(H)},null,8,["data"]),[[D,y(K)]])]),default:v(()=>[b(u,{options:W})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-8885db45"]]);export{U as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
