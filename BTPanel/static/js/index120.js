var a;import{K as o,S as e,v as s,b as t,k as r,c as n}from"./utils-lib.js?v=1756369731";import{_ as i}from"./index103.js?v=1756369731";import{_ as l}from"./index112.js?v=1756369731";import{C as p,i as d,o as m}from"./index14.js?v=1756369731";import{D as c,E as u}from"./useController3.js?v=1756369731";import{s as f,r as w,k as _,U as j,c as b,p as x,aM as g,G as h,q as v,v as C,e as k,A as y,H as U,x as q,B as A,C as D}from"./base-lib.js?v=1756369731";import{u as H}from"./column.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index116.js?v=1756369731";import"./index123.js?v=1756369731";import"./index124.js?v=1756369731";import"./validator.js?v=1756369731";import"./index104.js?v=1756369731";const O=t(),T=p(),{rowData:z}=f(T),B=w(!1),E=w([]),G=w(0),I=_({cron_id:(null==(a=z.value)?void 0:a.id)||0,p:1,rows:10}),K=j([{label:"文件名称",prop:"name",showOverflowTooltip:!0},{label:"备份时间",prop:"addtime"},{label:"备份到",prop:"filename",showOverflowTooltip:!0},{label:"文件大小",render:a=>s(a.size)},H([{onClick:async a=>{try{const o=await u({cron_id:a.cron_id,filename:a.filename});o.status?o.data.is_loacl?window.open("/download?filename="+encodeURIComponent(o.data.path),"_blank","noopener,noreferrer"):window.open(o.data.path,"_blank","noopener,noreferrer"):O.error(o.msg)}catch(o){}},title:"下载"}])]),M=async()=>{try{await o({loading:B,request:c({...I,cron_id:z.value.id}),data:{data:[Array,E],page:e(G)}})}catch(a){}},R={class:"p-[20px]"},S={key:0},F=b({__name:"index",emits:["close"],setup(a,{emit:o}){const e=o,s=()=>{e("close")};return x(()=>M()),(a,o)=>{const e=r,t=l,p=i,c=n,u=g("bt-tips"),f=h("bt-loading");return v(),C("div",R,[k(p,null,{content:y(()=>[U(k(e,{"max-height":400,column:q(K),data:q(E)},null,8,["column","data"]),[[f,q(B)],[f,"正在加载中，请稍候...","title"]])]),"footer-right":y(()=>[k(t,{total:q(G),page:q(I).p,"onUpdate:page":o[0]||(o[0]=a=>q(I).p=a),row:q(I).rows,"onUpdate:row":o[1]||(o[1]=a=>q(I).rows=a),onChange:q(M)},null,8,["total","page","row","onChange"])]),_:1}),k(u,{"list-style":"disc",class:"mt-[1rem]"},{default:y(()=>[q(d)?(v(),C("li",S,[k(c,{onClick:o[2]||(o[2]=a=>q(m)(s))},{default:y(()=>[...o[3]||(o[3]=[A("一键跳转至本地备份目录",-1)])]),_:1})])):D("",!0)]),_:1})])}}});export{F as default};
