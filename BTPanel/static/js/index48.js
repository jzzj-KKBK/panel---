import{c as e,r as t,t as a,p as l,x as s,q as o,v as n,y as i,z as r,C as c,s as d,g as u,e as m,A as p,M as v,N as f,B as h,d as y,ax as g,bs as x,w as b,j as w,aE as _,n as k,F as C,a_ as S,J as I,bt as P,bu as T,as as L,k as M,P as E,al as D,G as j,L as B,H as R,_ as O,bv as A,bw as F,D as V,aV as W,I as z,aW as N,ba as H,aQ as U,K as q,b3 as G,a4 as $,bx as K,b8 as J,b9 as Q,a0 as Z,by as X,bz as Y,aH as ee,bA as te,bB as ae,U as le,Q as se,bC as oe,bD as ne,bq as ie,O as re,bE as ce,S as de,au as ue,aw as me,W as pe,X as ve,bF as fe,ai as he,aj as ye,b as ge}from"./base-lib.js?v=1756369731";import{u as xe,K as be,cx as we,l as _e,L as ke,cy as Ce,e as Se,c as Ie,o as Pe,cz as Te,b as Le,Z as Me,aq as Ee,P as De,ae as je,cA as Be,cB as Re,ai as Oe,v as Ae,aA as Fe,r as Ve,p as We,cC as ze,cD as Ne,k as He,cE as Ue,at as qe,bT as Ge,cF as $e,M as Ke,cG as Je,i as Qe,bx as Ze,af as Xe,R as Ye,d as et,h as tt,x as at,I as lt}from"./utils-lib.js?v=1756369731";import{g as st,b as ot,e as nt,t as it,l as rt,p as ct,f as dt}from"./validator.js?v=1756369731";import{_ as ut}from"./index110.js?v=1756369731";import{_ as mt}from"./index104.js?v=1756369731";import{_ as pt}from"./index105.js?v=1756369731";import{H as vt}from"./store3.js?v=1756369731";import{H as ft}from"./store4.js?v=1756369731";import{c as ht,s as yt,k as gt,g as xt,i as bt,d as wt,a as _t,b as kt,e as Ct,H as St}from"./store5.js?v=1756369731";import{b as It,u as Pt,o as Tt}from"./column.js?v=1756369731";import{c as Lt}from"./hooks.js?v=1756369731";const Mt={class:"icon-end-time voucher-logo"},Et={class:"ml-[4px] font-bold text-[#ef9f00]"},Dt=Se(e({__name:"index",setup(e){const d=t([]),{payment:u,aliyunEcsLtd:m}=xe(),{voucherOpenTime:p,isGetCoupon:v}=a(u.value),f=async()=>{be({request:we(),data:[Array,d]})},h=()=>{m.value||_e({area:40,component:()=>ke(()=>import("./index311.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),customClass:"voucherFetchView",compData:{isCoupon:d.value,isHome:!0}})};return l(()=>{const e=Number(sessionStorage.getItem("voucherOpenTime"));if(-100!==e){if(e){e-Math.floor(Date.now()/1e3)<=0&&(v.value=!0,sessionStorage.removeItem("voucherOpenTime"),(async()=>{let e=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1;e=Math.floor(e>0?e/1e3:e),be({request:Ce({limit_time:e})}),v.value=!0})())}st({promises:[f],delay:3e3})}}),(e,t)=>s(d).length>0&&!s(v)&&!s(m)?(o(),n("div",{key:0,class:"flex items-center px-[1rem] py-[.4rem] mr-[8px] rounded-[2px] recom-bg",onClick:h},[i("span",Mt,[i("span",Et,"您有"+r(s(d).length)+"个优惠券待领取",1)])])):c("",!0)}}),[["__scopeId","data-v-f2661b93"]]),jt={class:"module-ui home-header"},Bt={class:"home-header-left"},Rt={class:"mr-[8px] flex items-center"},Ot={class:"cursor-pointer flex items-center mr-[4px] ml-[4px]"},At={class:"!mb-4px inline-block"},Ft={class:"block"},Vt={class:"home-header-right"},Wt=Se(e({__name:"index",setup(e){const{payment:t,aliyunEcsLtd:l,forceLtd:b,isHideAd:w,mainWidth:_}=xe(),{authType:k}=a(t.value),C=y(()=>ke(()=>import("./index312.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)),S=y(()=>ke(()=>import("./index179.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)),I=vt(),{bindUser:P,systemInfo:T,panelInfo:L,panelVersion:M}=d(I),E=u(()=>_.value<968),D=u(()=>{var e;return T.value.name?null==(e=T.value.name.split(" ")[0])?void 0:e.toLowerCase():""});return u(()=>(!l.value||"ltd"===t.value.authType)&&(!b.value||"ltd"===t.value.authType)),(e,t)=>{const a=pt,l=g,d=mt,u=ut,y=Dt,b=Ie,_=x;return o(),n("div",jt,[i("div",Bt,[m(l,{width:"328","popper-class":"el-popover-shadow",trigger:s(P)?"hover":"contextmenu"},{reference:p(()=>[i("div",Rt,[m(a,{name:"tools-user",size:"26",class:"mr-[4px]"}),s(E)?c("",!0):(o(),n("span",{key:0,class:"user-phone",onClick:t[0]||(t[0]=()=>s(ot)(s(P)?"切换宝塔账号":"绑定宝塔账号，享受更多服务"))},r(s(P)?s(P):"未绑定帐号，点击绑定"),1))])]),default:p(()=>[(o(),v(f(s(C))))]),_:1},8,["trigger"]),m(d),m(l,{width:"250","popper-class":"el-popover-shadow"},{reference:p(()=>[i("span",Ot,[m(a,{name:"system-"+s(D),size:"18",class:"mr-[4px]"},null,8,["name"]),i("span",null,r(s(T).name||"获取中"),1)])]),default:p(()=>[i("div",null,[i("span",At,"系统："+r(s(T).simpleName||"获取中"),1),i("span",Ft," 持续运行："+r(s(L).runningDays||"获取中"),1)])]),_:1}),s(w)?c("",!0):(o(),v(d,{key:0})),s(w)?c("",!0):(o(),v(l,{key:1,width:"580",disabled:"free"!==s(k),"show-arrow":!1,"popper-style":"padding: 0;border-radius: 16px;overflow: hidden;","popper-class":"el-product-state-popover"},{reference:p(()=>[m(u,{"is-home":!0,"disable-pro":!0})]),default:p(()=>[(o(),v(f(s(S))))]),_:1},8,["disabled"])),s(w)||s(E)?c("",!0):(o(),v(y,{key:2}))]),i("div",Vt,[s(L).isBeta?(o(),v(b,{key:0,class:"mr-[16px] reset-link bug-feedback",href:"https://www.bt.cn/bbs/forum-39-1.html"},{default:p(()=>[...t[8]||(t[8]=[h("[找Bug奖宝塔币]",-1)])]),_:1})):c("",!0),s(E)?c("",!0):(o(),v(l,{key:1,width:"1",placement:"bottom",trigger:"hover"},{reference:p(()=>[i("div",{class:"header-operation-icon",onClick:t[1]||(t[1]=e=>s(I).jumpRouter("ui"))},[m(a,{name:"tools-theme",size:"18",class:"hob-icon"})])]),default:p(()=>[t[9]||(t[9]=i("div",{class:"text-[12px] text-center w-full"},"打开界面设置",-1))]),_:1})),s(E)?c("",!0):(o(),v(l,{key:2,width:"1",placement:"bottom",trigger:"hover"},{reference:p(()=>[i("div",{class:"header-operation-icon",onClick:t[2]||(t[2]=e=>s(I).jumpRouter("alarm"))},[m(a,{name:"tools-alarm",size:"18",class:"hob-icon"})])]),default:p(()=>[t[10]||(t[10]=i("div",{class:"text-[12px] text-center w-full"},"打开告警设置",-1))]),_:1})),s(E)?c("",!0):(o(),v(l,{key:3,width:"20",placement:"bottom",trigger:"hover"},{reference:p(()=>[i("div",{class:"header-operation-icon",onClick:t[3]||(t[3]=e=>s(nt)({type:7,isNoRate:!0,isCard:!0}))},[m(a,{name:"tools-feedback",size:"18",class:"hob-icon"})])]),default:p(()=>[t[11]||(t[11]=i("div",{class:"text-[12px] text-center w-full"},"打开需求反馈",-1))]),_:1})),s(E)?c("",!0):(o(),v(d,{key:4})),i("span",{class:"versionInfo mx-[8px] bt-hover-link cursor-pointer",onClick:t[4]||(t[4]=(...e)=>s(I).histVersionInfoDialog&&s(I).histVersionInfoDialog(...e))}," v"+r((s(L).isBeta?"Beta ":"")+(s(M)||"获取中")),1),m(d),m(_,{class:"mr-[8px]","is-dot":"",hidden:1!==s(L).upgrade},{default:p(()=>[i("span",{class:"bt-link header-operation-btn",title:"点击获取最新版面板程序",onClick:t[5]||(t[5]=(...e)=>s(I).updateVersionDialog&&s(I).updateVersionDialog(...e))},[m(a,{name:"tools-update",size:"18",class:"hob-icon"}),t[12]||(t[12]=i("span",null,"更新",-1))])]),_:1},8,["hidden"]),i("span",{class:"bt-link header-operation-btn mr-[8px]",title:"修复面板会获取最新的面板代码程序，包含bug修复",onClick:t[6]||(t[6]=(...e)=>s(I).onRepair&&s(I).onRepair(...e))},[m(a,{name:"tools-repair",size:"18",class:"hob-icon"}),t[13]||(t[13]=i("span",null,"修复",-1))]),i("span",{class:"bt-link header-operation-btn",title:"点击可选择重启面板或重启服务器",onClick:t[7]||(t[7]=(...e)=>s(I).restartSeverDialog&&s(I).restartSeverDialog(...e))},[m(a,{name:"tools-restart",size:"18",class:"hob-icon"}),t[14]||(t[14]=i("span",null,"重启",-1))])])])}}}),[["__scopeId","data-v-802f21e0"]]);const zt=new class{constructor(){this.watchList=new Map;const e=ft();this.refs=d(e),this.useHomeData()}useRunCallback(){for(const[e,t]of this.watchList.entries())e in this.refs&&t(this.refs[e].value)}async useHomeData(){this.stopWatching=b(this.refs.isRefreshData,e=>{e&&(this.useRunCallback(),this.refs.isRefreshData.value=!1)},{immediate:!0})}useSetCallback(e,t){this.watchList.set(e,t)}stopUseHomeData(){this.stopWatching&&this.stopWatching()}unload(){this.watchList.size>0&&this.watchList.clear(),this.stopUseHomeData()}async getFirewallStatus(){_e({area:45,component:()=>ke(()=>import("./index313.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})}},Nt=w("NOTICE-STORE",()=>{const{panel:e}=xe(),a=_(),l=t({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0,memNewRealUsed:"0",memNewTotal:"0",memNewRealUsedList:[],memNewTotalList:[]}),s=t([]),o=t(!1),n=t(!1),i=t(!1),r=t(!1),c=t([]),d=t([]),m=u(()=>8888===e.value.port&&!e.value.noticeIgnore.port),p=u(()=>!(window.location.protocol.indexOf("https")>=0||e.value.noticeIgnore.https)),v=u(()=>o.value||n.value||m.value||p.value||i.value||r.value);zt.useSetCallback("memory",e=>{l.value=e;const{memTotal:t,memRealUsed:a}=l.value,s=t-a;o.value=s<64}),zt.useSetCallback("diskUsage",e=>{d.value=e,f()}),zt.useSetCallback("disk",e=>{s.value=e;s.value.some(e=>parseInt(e.data.inodes[3])>90)?(r.value=!0,c.value=[],c.value=s.value.map(e=>{if(parseInt(e.data.inodes[3])>90)return e.data.path})):r.value=!1});const f=()=>{d.value&&Number(d.value[2])<524288&&(i.value=!0)};return{noticeStatus:v,memoryStatus:o,usernameStatus:n,portStatus:m,httpsStatus:p,diskFullStatus:i,inodeFullStatus:r,inodePath:c,setNoticeStatus:async(t,a)=>{try{await Pe({title:"忽略通知",content:"是否忽略".concat(a,"通知，不再提醒？")});const{data:l}=await Te({name:t});e.value.noticeIgnore[t]=!0,Le().request(l)}catch(l){}},checkFullDisk:f,onClear:async()=>{await Pe({type:"calc",title:"释放内存",content:"若您的站点处于有大量访问的状态，释放内存可能带来无法预测的后果，您确定现在就释放内存吗？"}),be({loading:"正在释放内存，请稍后...",request:ht(),message:!0})},editPortInfo:()=>{window.localStorage.setItem("config-dialog","port"),a.push({path:"/config/common"})},jumpConfig:()=>{window.localStorage.setItem("config-dialog","ssl"),a.push({path:"/config/common"})},jumpFiles:()=>{a.push({path:"/files"})}}}),Ht={key:0,class:"module-ui !p-0 mx-[1.2rem] mb-[1.2rem]"},Ut={class:"mr-16px"},qt=["title"],Gt=Se(e({__name:"index",setup(e){const a=Nt(),{noticeStatus:u,memoryStatus:f,usernameStatus:y,portStatus:g,httpsStatus:x,diskFullStatus:b,inodeFullStatus:w,inodePath:_}=d(a),L=t(!1);return l(()=>{a.checkFullDisk(),k(()=>{const e=setInterval(async()=>{if(window.$extension){const t=await window.$extension();Me(t.extensionElement)&&!t.extensionElement&&clearTimeout(e),t.extensionElement&&(t.extensionElement(),L.value=!0,clearTimeout(e))}},1e3)})}),(e,t)=>{const l=Ie,d=P,k=T;return o(),n("div",null,[s(u)?(o(),n("div",Ht,[m(k,{class:"playTips",height:"5.6rem",direction:"vertical"},{default:p(()=>[s(f)?(o(),v(d,{key:1},{default:p(()=>[t[4]||(t[4]=i("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),t[5]||(t[5]=i("span",{class:"mr-[16px]"},"当前可用物理内存小于64M，这可能导致MySQL自动停止，站点502等错误，请尝试释放内存！",-1)),m(l,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]",size:"1.4rem",disabled:!0,href:"javascript:;"},{default:p(()=>[...t[2]||(t[2]=[h("[ 不可忽略 ]",-1)])]),_:1}),m(l,{onClick:s(a).onClear,class:"align-middle flex items-center",size:"1.4rem"},{default:p(()=>[...t[3]||(t[3]=[h("[ 立即清理 ]",-1)])]),_:1},8,["onClick"])]),_:1})):c("",!0),s(y)?(o(),v(d,{key:2},{default:p(()=>[t[8]||(t[8]=i("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),t[9]||(t[9]=i("div",{class:"mr-[16px]"},"当前面板用户为admin,这可能为面板安全带来风险！",-1)),m(l,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]",size:"1.4rem",disabled:!0,href:"javascript:;"},{default:p(()=>[...t[6]||(t[6]=[h("[ 不可忽略 ]",-1)])]),_:1}),m(l,{onClick:s(it),class:"align-middle flex items-center",size:"1.4rem"},{default:p(()=>[...t[7]||(t[7]=[h("[ 立即修复 ] ",-1)])]),_:1},8,["onClick"])]),_:1})):c("",!0),s(g)?(o(),v(d,{key:3},{default:p(()=>[t[12]||(t[12]=i("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),t[13]||(t[13]=i("div",{class:"mr-[16px]"},"当前面板使用的是默认端口[8888]，可能存在入侵风险，请到面板设置中修改面板端口！",-1)),m(l,{type:"info",title:"该风险可忽略，但存在一定的风险，推荐修改面板端口",class:"align-middle mr-[16px]",size:"1.4rem",onClick:t[0]||(t[0]=e=>s(a).setNoticeStatus("port","面板端口"))},{default:p(()=>[...t[10]||(t[10]=[h("[ 点击忽略 ]",-1)])]),_:1}),m(l,{onClick:s(a).editPortInfo,target:"_self",class:"align-middle flex items-center",size:"1.4rem"},{default:p(()=>[...t[11]||(t[11]=[h("[ 立即修复 ] ",-1)])]),_:1},8,["onClick"])]),_:1})):c("",!0),s(x)?(o(),v(d,{key:4},{default:p(()=>[t[16]||(t[16]=i("i",{class:"svgtofont-el-warning-filled mr-[8px] text-[1.8rem]"},null,-1)),t[17]||(t[17]=i("div",{class:"mr-[16px]"},"警告！当前面板使用HTTP访问，可能存在被窃取敏感信息风险，请立即开启【面板SSL】。",-1)),m(l,{type:"info",title:"该风险可忽略，但存在一定的风险，推荐开启面板SSL访问",class:"align-middle mr-[16px]",disabled:!0,size:"1.4rem",onClick:t[1]||(t[1]=e=>s(a).setNoticeStatus("https","面板SSL"))},{default:p(()=>[...t[14]||(t[14]=[h("[ 点击忽略 ]",-1)])]),_:1}),m(l,{onClick:s(a).jumpConfig,class:"align-middle flex items-center",size:"1.4rem"},{default:p(()=>[...t[15]||(t[15]=[h("[ 立即处理 ]",-1)])]),_:1},8,["onClick"])]),_:1})):c("",!0),s(b)?(o(),v(d,{key:5},{default:p(()=>[t[19]||(t[19]=i("i",{class:"svgtofont-el-warning-filled mr-8px text-[1.8rem]"},null,-1)),t[20]||(t[20]=i("div",{class:"mr-16px"},"警告：检测到磁盘可用空间不足，无法访问面板数据库，请前往文件管理清理",-1)),m(l,{onClick:s(a).jumpFiles,class:"align-middle",size:"1.4rem"},{default:p(()=>[...t[18]||(t[18]=[h("[ 立即前往 ]",-1)])]),_:1},8,["onClick"])]),_:1})):c("",!0),s(w)?(o(),v(d,{key:6},{default:p(()=>[t[24]||(t[24]=i("i",{class:"svgtofont-el-warning-filled mr-8px text-[1.8rem]"},null,-1)),i("div",Ut,[t[21]||(t[21]=h(" 警告：检测到磁盘【 ",-1)),i("div",{class:"inline-block",title:s(_).join("\n")},[(o(!0),n(C,null,S(s(_),(e,t)=>(o(),n("span",{key:t},r(e),1))),128))],8,qt),t[22]||(t[22]=h(" 】Inode使用率超过90%，可用空间不足，请前往文件管理清理 ",-1))]),m(l,{onClick:s(a).jumpFiles,class:"align-middle",size:"1.4rem"},{default:p(()=>[...t[23]||(t[23]=[h("[ 立即前往 ]",-1)])]),_:1},8,["onClick"])]),_:1})):c("",!0)]),_:1})])):c("",!0),i("div",{id:"extension",class:I(s(L)?"module-ui !p-0 mx-[1.2rem] mb-[1.2rem]":"")},null,2)])}}}),[["__scopeId","data-v-e2f94c9e"]]),$t=w("HOME-STATE-STORE",()=>{const e=ft(),{payment:l,push:s}=xe(),{authType:o}=a(l.value),n=t(0),i=t(12),r=t(!1),c=t(!1),d=L("colSpan",6),u=L("diskColSpan",6),p=L("stateHeight","22rem"),v=L("displayMode","single"),f=t([]),h=t("loadPopover"),y=t(!1),g=t(!0),x=t(null);let b=!1;const w=t([]),_=t({one:0,max:0,five:0,fifteen:0}),k=t({occupy:"",framework:"",coresOccupy:[0,0,0],cpuNumber:0,logicCores:0,cores:0,process:[0,0]}),C=t({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0,memNewRealUsedList:[],memNewTotalList:[]}),S=t([]),I=M({memory:"success",cpu:"success",load:"success"}),P=t(null),T=t(!1),E=t(null),D=t(null),j=t(null),B=new je,R=M({type:"load",title:"负载",range:0}),O=M({type:"cpu",title:"CPU",range:0,desc:"获取中"}),A=M({type:"mem",title:"内存",range:0,desc:"0 / 0(MB)",disabled:!1});zt.useSetCallback("cpuTimes",e=>{S.value=[[{title:"用户级别的 CPU 时间百分比",name:"user",value:e.user},{title:'运行带有 "nice" 优先级的进程时使用的 CPU 时间百分比',name:"nice",value:e.nice}],[{title:"系统级别的 CPU 时间百分比",name:"system",value:e.system},{title:"空闲状态的 CPU 时间百分比",name:"idle",value:e.idle}],[{title:"等待 I/O 操作完成的 CPU 时间百分比",name:"iowait",value:e.iowait},{title:"处理硬件中断的 CPU 时间百分比",name:"irq",value:e.irq}],[{title:"处理软件中断的 CPU 时间百分比",name:"softirq",value:e.softirq},{title:"当前 CPU 被其他虚拟机偷取的CPU时间百分比",name:"steal",value:e.steal}],[{title:"运行虚拟机时使用的 CPU 时间百分比",name:"guest",value:e.guest},{title:'运行带有 "nice" 优先级的虚拟机时使用的CPU时间百分比',name:"guest_nice",value:e.guest_nice}]]}),zt.useSetCallback("load",e=>{_.value=e,F()}),zt.useSetCallback("disk",e=>{w.value=e});const F=()=>{const{one:e,max:t}=_.value,a=parseInt(Math.round(e/t*100).toFixed(0)),l=a>100?100:a;R.range=l<0?0:l,I.load=l>=90?"danger":l>=80?"warning":"success"};zt.useSetCallback("cpu",e=>{k.value=e,V(),(()=>{const{cpuNumber:e,logicCores:t,cores:a}=k.value;O.desc=e&&t&&a?"".concat(a,"核心"):"获取中"})(),W()});const V=()=>{const{occupy:e}=k.value;O.range=parseInt(e)||0,O.range>80?I.cpu="warning":O.range>90?I.cpu="danger":I.cpu="success"},W=()=>{let e=[],t=0,a="核心 ",l="";for(let s=0;s<k.value.coresOccupy.length;s++)if(t<2){if(t++,s===k.value.coresOccupy.length-1){a+="".concat(s+1," "),l+="".concat(parseFloat(k.value.coresOccupy[s]).toFixed(1),"% "),e.push({name:a,value:l});break}a+="".concat(s+1," / "),l+="".concat(parseFloat(k.value.coresOccupy[s]).toFixed(1),"% / "),k.value.coresOccupy.length%2==1&&s===k.value.coresOccupy.length-1&&e.push({name:a,value:l})}else t=0,a+="".concat(s+1),l+="".concat(parseFloat(k.value.coresOccupy[s]).toFixed(1),"%"),e.push({name:a,value:l}),a="核心 ",l="";f.value=e};zt.useSetCallback("memory",e=>{C.value=e,z()});const z=()=>{const{memRealUsed:e,memTotal:t,memNewRealUsedList:a,memNewTotalList:l}=C.value;if(y.value)return;const s=parseInt((Math.round(e/t*1e3)/10).toFixed(0));I.memory=s>=80?"warning":s>=90?"danger":"success",A.type="mem",A.range=s,A.desc={used:null==a?void 0:a[0],used_unit:null==a?void 0:a[1],total:null==l?void 0:l[0],total_unit:null==l?void 0:l[1]}},N=async()=>{try{(()=>{let e="";y.value=!0,g.value=!1,A.disabled=!0,x.value=setInterval(()=>{let{range:t}=A;e="..."===e?".":"".concat(e,"."),A.rangeText="释放中".concat(e),t>0&&(t-=.2*t),t=Number(t.toFixed(2)),t<0&&(t=0),A.range=t},400)})();const{data:e}=await ht();(e=>{x.value&&clearInterval(x.value);const t=e.memRealUsed-e.memRealUsed,a=Oe(t)?t:Ae(t);A.range=1,A.rangeText="已释放\n ".concat(a),setTimeout(()=>{y.value=!1,A.rangeText="",A.disabled=!1,g.value=!0},1500)})(e)}catch(e){}},H=t(),U=M({name:"",path:""}),q=M({loading:!0,list:[],total:0}),G=e=>{Q(!0,e)},$=async e=>{await Pe({title:"删除告警任务",isHtml:!0,icon:"warning-filled",iconColor:"warning",content:"删除后将不再告警此条任务，是否继续？"}),await be({loading:"正在删除告警任务，请稍后...",request:Be({task_id:e.id}),message:!0,success:Z})},K=[{title:"钉钉",type:"dingding"},{title:"飞书",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"短信通知",type:"sms"},{title:"自定义消息通道",type:"webhook"}],J=t([{label:"标题",prop:"title"},It({event:async e=>{const t=e.status,a=e.title;await Pe({title:(t?"停用":"启用")+"告警任务【"+a+"】",content:"".concat(t?"停用":"启用","选中的告警任务后，该告警任务将").concat(t?"停止":"开启","告警，是否继续操作？"),icon:"warning-filled"}),await be({loading:"正在设置告警状态，请稍后...",request:Re({task_id:e.id,status:t?0:1}),message:!0}),await Z()},width:80,data:["已停用","已启用"]}),{label:"告警方式",width:140,showOverflowTooltip:!0,render:e=>{let t=[];return e.sender.forEach(e=>{const a=s.value.config.find(t=>t.id===e);if(null==a?void 0:a.sender_type){const e=K.find(e=>e.type===a.sender_type);(null==e?void 0:e.title)&&t.push("sms"===a.sender_type?e.title:a.data.title?a.data.title+"(".concat(e.title,")"):e.title)}}),m("span",{class:"truncate"},[t.join("、")])}},{label:"告警条件",render:e=>{const t=e.view_msg.match(/<span>(.*?)<\/span>/);return t?t[1]:""}},Pt([{title:"编辑",onClick:G},{title:"删除",onClick:$}])]),Q=(e,t)=>{_e({title:"进程告警",area:[80],btn:["保存","取消"],component:()=>ke(()=>import("./index113.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{isEdit:e,row:t||{},diyProcessTemplate:!0,diyProcessTemplateTid:["60","61","62"],onRefresh:Z}})},Z=async()=>{var e;const{data:t}=await De();q.list=(null==(e=null==t?void 0:t.data)?void 0:e.filter(e=>["60","61","62"].includes(e.template_id)))||[],q.list.length>0||Q(!1),q.loading=!1};return{stateMainWidth:n,gutter:i,isBreakLines:r,isShowAllDisk:c,colSpan:d,diskColSpan:u,stateHeight:p,displayMode:v,cpuCoreDesc:f,statePopoverTimr:P,loadInfo:R,loadPopover:E,processAlarmShow:T,tagsType:I,load:_,cpu:k,loadInfoList:S,cpuInfo:O,cpuPopover:D,memoryInfo:A,memoryPopover:j,memory:C,disk:w,getProcessAlarm:async()=>{const{data:e}=await Ee({sName:"task_manager"});e.setup?T.value=!0:T.value=!1},moveStatePopover:async(t,a)=>{if(h.value=a,"ltd"!==o.value)return;const l=async()=>{b||(b=!0,await e.getHomeProcessInfo(),b=!1)};P.value=setInterval(l,5e3),B.removePending({method:"post",url:"/monitor/process_management/specific_resource_load_type"}),await l()},removeStatePopover:()=>{clearInterval(P.value)},onClearMemory:async()=>{try{await Pe({type:"calc",title:"释放内存",content:"若您的站点处于有大量访问的状态，释放内存可能带来无法预测的后果，您确定现在就释放内存吗？"}),N()}catch(e){}},$reset:()=>{B.reset(),clearInterval(P.value),clearInterval(x.value)},setPsFormRef:H,setPsForm:U,onConfirmPs:e=>{be({loading:"正在修改备注，请稍后...",request:yt(U),message:!0,success:t=>{t.status&&e()}})},processAlarmTableColumn:J,processTableData:q,openProcessAlarm:Q,initAlarm:Z,hoverType:h,isClearMemory:y,showMemoryDesc:g}}),Kt=w("HOME-STATE-POPOVER-STORE",()=>{var e;const l=ft(),{specificResource:s,diskQuota:o}=d(l),{payment:n,push:i,getAlarmData:r}=xe(),{authType:c}=a(n.value),u=$t(),{setPsForm:p}=d(u),v=t(),f=t(),h=t();let y=null;const g=[{desc:"运行堵塞",val:90,color:"#dd2f00"},{desc:"运行缓慢",val:80,color:"#ff9900"},{desc:"运行正常",val:70,color:"#20a53a"},{desc:"运行流畅",val:30,color:"#20a53a"}],x=t("show"),b=t("two"),w=M({loading:!0,list:[]}),_=t((null==(e=i.value)?void 0:e.alarmPopupData)||[]),k={load:{title:"负载",id:"22"},cpu:{title:"cpu",id:"21"},mem:{title:"内存",id:"23"},disk:{title:"磁盘",id:"20"}},C=t({});t();const S=async e=>{var t;C.value={...e,id:e.id||k[null==(t=e.type)?void 0:t.split("-")[0]].id},_e({title:"告警设置",component:()=>ke(()=>import("./alarm-config.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),area:60,btn:"保存",onConfirm:O,onCancel:()=>{r()}})},I=e=>{let t,a,l;switch(e){case"load":a="平均负载超过";break;case"mem":a="内存超过";break;case"cpu":a="平均CPU超过"}const s=T(e);return t=s.cycle,l=s.count,a||(a=s.text),We(t)||We(a)?"":"".concat((null==e?void 0:e.includes("disk"))?"":"".concat(t,"分钟内")).concat(a).concat(l,"触发")},P=e=>{var t;const a=k[e.split("-")[0]];return!!Array.isArray(_.value)&&(null==(t=_.value)?void 0:t.find(t=>(null==e?void 0:e.includes("disk"))?t.template_id===a.id&&t.task_data.project===e.split("-")[1]:t.template_id===a.id))},T=e=>{let t,a,l;const s=P(e);if(s){const o=s.task_data;t=o.cycle,l="".concat(o.count,"%"),e.includes("disk")&&o.project===e.split("-")[1]&&(a=2===o.cycle?"该磁盘用量超过":"该磁盘余量不足",l=2===o.cycle?"".concat(o.count,"%"):"".concat(o.count,"GB"))}return{cycle:t,text:a,count:l}},L=t(!1),E=t(),D=M({num:0,usageRate:0,give:[],option:{},type:"",selectOptions:[],typeDetection:"2",next_data:[]}),j=t(100),B=t([]),R=t([]),O=async()=>{await E.value.validate();const{type:e,data:t,id:a}=C.value;let l={task_data:{...t||{},type:e.includes("disk")?e.split("-")[0]:e,count:parseInt("".concat(D.usageRate)),cycle:e.includes("disk")?parseInt(D.typeDetection):5,project:e.split("-")[1]?e.split("-")[1]:"",next_data:D.next_data},time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:parseInt("".concat(D.num)),total:0},sender:D.give};await be({loading:"正在保存告警配置，请稍后...",request:ze({task_data:JSON.stringify(l),template_id:a}),message:!0,success:async t=>{await r(),I(e)}})},A=t([{label:"磁盘路径",prop:"filesystem",render:e=>m("div",{class:"flex items-center"},[m("span",{class:"svgtofont-file-hdd mr-4px !text-16px align-text-bottom"},null),m("span",null,[e.filesystem])])},{label:"总大小",prop:"size"}]),F=e=>{if("0"===e)return 0;const t=e.match(/^(\d+(?:\.\d+)?)(?: )?([a-zA-Z]+)$/);if(!t)throw new Error("Invalid size format: ".concat(e));const a=parseFloat(t[1]),l=t[2].toUpperCase(),s=["B","KB","MB","G","GB","T","TB"].indexOf(l);if(-1===s)throw new Error("Invalid unit: ".concat(l));return a*Math.pow(1024,s)};return{virtualRef:v,popover:f,popoverContent:h,chartColorActive:(e,t)=>{let a={};for(let l=0;l<g.length;l++){const t=g[l];if(e>=t.val){a={...t};break}if(e<30){a={...g[g.length-1]};break}}return t&&(a.color="#dd2f00"),a.val=e,a},dirEvent:(e,t)=>{"None"!==t?(Fe("Path",e),Ve.push({path:"/files"})):rt({name:"sysdisk"})},init:()=>{y=new ResizeObserver(()=>{f.value&&f.value.updatePopper()}),h.value&&y.observe(h.value)},$reset:()=>{y&&h.value&&y.unobserve(h.value)},authType:c,specificResource:s,tableData:w,foldExpand:x,foldActive:b,useHomeTableColumn:(e,a,l)=>t([{label:"进程名称",minWidth:80,render:e=>{const t="备注：".concat(e.explain,"\n启动路径： ").concat(e.exe_path,"\n运行目录：").concat(e.cwd_path,"\n线程数量：").concat(e.num_threads);return m("span",{title:t},[e.proc_name])}},{label:a,prop:l,minWidth:70},{label:"操作",align:"right",fixed:"right",width:50,render:t=>m("span",{class:"cursor-pointer text-[#20a53a]",onClick:()=>{(async(e,t)=>{if(1!==e.important){const a=t?"结束进程":"释放内存";await Pe({type:"calc",title:a,content:"结束".concat(e.proc_name,"进程会导致").concat(e.explain.split("的进程")[0],"无法正常运行，是否结束?")}),await be({loading:"正在".concat(a,"，请稍后..."),request:gt({pid:e.pid}),message:!0})}})(t,e)}},[1===t.important?"":"cpu_percent"===l?"结束":"释放"])}]),openProcessAlarmDialog:()=>{_e({title:"进程告警",area:["100","50"],component:()=>ke(()=>import("./process-alarm-manage.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},openProduct:()=>{ct({sourceId:141})},push:i,devTaskList:_,openAlarmPopup:async(e,t)=>{if(0===t.id)S(t);else try{const a=e?"开启":"关闭";!e&&await Pe({title:"".concat(a,"告警"),content:"".concat(a,"告警后，将").concat(e?"":"不再","接收到该项的告警信息，是否继续操作？")});const l=P(t.type);await be({loading:"正在".concat(a,"告警，请稍后..."),request:Re({task_id:l.id,status:e?1:0}),message:!0,success:r})}catch(a){t.flag=!e,r()}},setAlarmDialog:S,createPushStatus:I,getCurrentTask:P,onConfirm:O,giveFormDisabled:L,giveFormRef:E,msgForm:D,maxCapacityAndUsageRate:j,nextOptions:B,options:R,alarmInfo:async()=>{(async()=>{try{const e=await Ne();B.value=e.data.map(e=>({label:e.title,value:e.value}))}catch(e){}})();const{type:e,data:t,id:a}=C.value;t?(D.usageRate=t.count,D.num=t.push_count,D.next_data=t.next_data||[],-1!==e.indexOf("disk")&&(D.typeDetection=t.cycle.toString()),D.give=t.module):(D.usageRate=80,D.num=3,-1!==e.indexOf("disk")&&(D.typeDetection="2"))},rowData:C,mountColumn:A,computedSpace:(e,t)=>{const a=["B","KB","MB","GB","TB"];let l=F(e)-F(t),s=0;for(;l>=1024&&s<a.length-1;)l/=1024,s++;return l=Math.round(100*l)/100,"".concat(l," ").concat(a[s])},setPsDialog:async e=>{p.value.name=e.ps,p.value.path=e.path,_e({title:"设置磁盘【"+e.path+"】别名",area:45,component:()=>ke(()=>import("./index314.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),btn:!0,onConfirm:u.onConfirmPs})},scanRubbishFile:async e=>{rt({pluginName:"disk_analysis",source:120,type:"ltd"}),Fe("diskPath",e),Fe("taskStatus","true")},switchTypeDetection:()=>{const{type:e,data:t,id:a}=C.value;D.typeDetection!==t.cycle&&("2"===D.typeDetection?D.usageRate=80:o.value.forEach(t=>{t.diskName===e.split("-")[1]&&(j.value=t.diskQuota,D.usageRate=parseInt((.2*t.diskQuota).toString()))}))}}}),Jt={class:"alarm"},Qt={class:"w-[21rem] ml-[0.8rem]"},Zt=Se(e({__name:"alarm",props:{type:{},diskName:{}},setup(e){const a=e,c=u(()=>a.type),v=Kt(),{push:f,devTaskList:y}=d(v);b(()=>f.value.alarmPopupData,e=>{y.value=e},{deep:!0,immediate:!0});const g=t(!1),x=u(()=>{var e;const t={type:c.value,data:!1,id:0,status:!1},a=v.getCurrentTask(c.value);if(a){const l=a.task_data;(null==(e=c.value)?void 0:e.includes("disk"))?(2===l.cycle?"".concat(l.count,"%"):"".concat(l.count,"GB"),g.value=!!a.status,t.status=!!a.status,t.data={...l,module:a.sender,push_count:a.number_rule.day_num},t.id=a.template_id):(g.value=!!a.status,t.status=!!a.status,t.data={...l,module:a.sender,push_count:a.number_rule.day_num},t.id=a.template_id)}return t});return b(()=>x.value,e=>{g.value=e.status},{deep:!0,immediate:!0}),l(()=>{}),(e,t)=>{const a=D,l=Ie;return o(),n("div",Jt,[t[4]||(t[4]=i("div",null,[i("span",null,"告警")],-1)),m(a,{size:"small",class:"ml-[0.8rem]",modelValue:s(g),"onUpdate:modelValue":t[0]||(t[0]=e=>E(g)?g.value=e:null),onChange:t[1]||(t[1]=e=>s(v).openAlarmPopup(s(g),s(x)))},null,8,["modelValue"]),t[5]||(t[5]=i("div",{class:"switch"},null,-1)),m(l,{onClick:t[2]||(t[2]=e=>s(v).setAlarmDialog(s(x)))},{default:p(()=>[...t[3]||(t[3]=[h("设置",-1)])]),_:1}),i("span",Qt,r(s(v).createPushStatus(s(c))),1)])}}}),[["__scopeId","data-v-2738e2f0"]]),Xt={class:""},Yt={class:"flex justify-between w-full"},ea={class:"px-[8px] text-[#666] text-[1.4rem]"},ta={class:"mt-[10px] space-y-[1rem] mx-[8px] text-[#666] text-[1.3rem]"},aa={class:"flex justify-between items-center w-full"},la={class:"px-[8px] text-[#666] text-[1.4rem] leading-[3rem] text-center"},sa={class:"space-y-[1rem] text-[#666] text-[1.3rem] leading-[1.4rem] px-[0.8rem]"},oa={class:"flex justify-between w-full"},na={class:"px-[8px] text-[#666] text-[1.4rem] leading-[3rem] text-center"},ia={class:"mt-[8px] space-y-[1rem]"},ra={key:0,class:"mb-1rem"},ca={class:"flex items-center justify-center flex-nowrap w-full"},da={class:"whitespace-nowrap"},ua=Se(e({__name:"popover-content",props:{loadType:{default:""},type:{default:""},processAlarmShow:{type:Boolean,default:!1}},setup(e,{expose:t}){const a=e,{hoverType:l}=d($t()),f=Kt(),{specificResource:y,authType:g,tableData:x,foldExpand:w,foldActive:_}=d(f),k=u(()=>{const{type:e}=a;return-1!==e.indexOf("未挂载")}),S=u(()=>"loadPopover"===l.value||"cpuPopover"===l.value),P=u(()=>f.useHomeTableColumn(S.value,S.value?"CPU占用率":"内存使用率",S.value?"cpu_percent":"memory_usage").value),T=u(()=>"memoryInfo"!==a.loadType),L=u(()=>"diskInfo"!==a.loadType),M=u(()=>{const{loadType:e}=a,t={one:"",two:"",three:""};return t.one="memoryInfo"===e?"内存信息":"基础信息","diskInfo"!==e?S.value?("loadInfo"===e?t.two="更多负载信息":"cpuInfo"===e&&(t.two="核心使用率"),t.three="CPU占用率top5的进程信息"):"memoryInfo"===e&&(t.two="内存信息",t.three="内存使用率top5的进程信息"):t.two="Inode信息",t});return b(()=>y.value,e=>{"ltd"===g.value?(x.value.loading=!1,S.value?x.value.list=y.value.cpuProcess:x.value.list=y.value.memProcess):(x.value.loading=!1,x.value.list=[])},{deep:!0,immediate:!0}),b(()=>g.value,e=>{"ltd"!==e&&(x.value.loading=!1,x.value.list=[])}),t({showTwo:T,showThree:L}),(e,t)=>{const l=A,d=F,u=V,y=Ie,b=He,S=W,D=j("bt-loading");return o(),v(S,{shadow:"never",class:"card-popover !p-[8px]"},{default:p(()=>[i("div",Xt,[B(e.$slots,"button",{},void 0,!0)]),m(d,{class:"text-[1.2rem]",modelValue:s(w),"onUpdate:modelValue":t[0]||(t[0]=e=>E(w)?w.value=e:null),accordion:!0},{default:p(()=>[m(l,{ref:"base-info",name:"show"},{title:p(()=>[i("div",Yt,[i("span",ea,r(s(M).one),1)])]),default:p(()=>[i("div",ta,[B(e.$slots,"base-info",{},void 0,!0)]),s(k)?c("",!0):(o(),n(C,{key:0},[t[2]||(t[2]=i("hr",{style:{width:"calc(100% - 16px)",margin:"12px auto","border-top":"1px solid #f0f0f0"}},null,-1)),m(Zt,{type:e.type,class:"mx-[8px]"},null,8,["type"])],64))]),_:3},512)]),_:3},8,["modelValue"]),s(k)?c("",!0):(o(),v(d,{key:0,class:"text-[1.2rem]",modelValue:s(_),"onUpdate:modelValue":t[1]||(t[1]=e=>E(_)?_.value=e:null),accordion:!0},{default:p(()=>[s(T)?(o(),v(l,{key:0,name:"two"},{title:p(()=>[i("div",aa,[i("span",la,r(s(M).two),1),i("span",null,r("two"===s(_)?"收起":"展开"),1)])]),default:p(()=>[i("div",sa,[B(e.$slots,"content-info",{},void 0,!0)])]),_:3})):c("",!0),s(L)?(o(),v(l,{key:1,name:"three",class:I({"!mb-0":!s(T)})},{title:p(()=>[i("div",oa,[i("span",na,r(s(M).three),1),i("span",null,r("three"===s(_)?"收起":"展开"),1)])]),default:p(()=>[i("div",ia,[i("div",null,[a.processAlarmShow?(o(),n("div",ra,[m(u,{size:"small",onClick:s(f).openProcessAlarmDialog},{default:p(()=>[...t[3]||(t[3]=[h("进程告警",-1)])]),_:1},8,["onClick"])])):c("",!0),R((o(),v(b,{column:s(P),data:s(x).list,"max-height":450},O({_:2},["ltd"!==s(g)?{name:"empty",fn:p(()=>[i("div",ca,[i("span",da,[t[5]||(t[5]=h("当前为企业版专享功能, ",-1)),m(y,{onClick:s(f).openProduct},{default:p(()=>[...t[4]||(t[4]=[h("立即购买",-1)])]),_:1},8,["onClick"])])])]),key:"0"}:void 0]),1032,["column","data"])),[[D,s(x).loading]])])])]),_:1},8,["class"])):c("",!0)]),_:3},8,["modelValue"]))]),_:3})}}}),[["__scopeId","data-v-a4cdc175"]]),ma={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},pa={class:"flex items-center"},va={class:"flex align-left flex-col"},fa={class:"flex items-center"},ha=["title"],ya={class:"flex align-left flex-col"},ga={key:0,class:"m-4x flex items-center"},xa={class:"!my-[1rem]"},ba={class:"!my-[1rem]"},wa={class:"!my-[1rem]"},_a=Se(e({__name:"disk-popover",props:{custom:{type:Boolean,default:!1},item:{default:[]}},setup(e){const t=e,{enterpriseRec:a}=xe(),l=Kt(),{mountColumn:f}=d(l),y=u(()=>"None"===t.item.data.path),g=u(()=>{const e="string"==typeof t.item.data.size?0:parseFloat(t.item.data.size[3].substring(0,t.item.data.size[3].lastIndexOf("%")));return e>=90?"danger":e>=80?"warning":"success"});return(e,d)=>{const u=N,x=H,b=V,w=U,_=Ie,k=He;return o(),v(ua,{"load-type":"diskInfo",type:"disk-".concat(t.item.info.title)},{button:p(()=>[s(y)?c("",!0):(o(),n(C,{key:0},[parseInt(t.item.data.inodes[3])>90?(o(),v(u,{key:0,title:"Inode可用不足10%，请前往文件管理清理不必要文件",type:"error",class:"!mb-8px !min-h-[24px] !py-4px",closable:!1})):c("",!0),i("div",ma,[i("div",pa,[d[2]||(d[2]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前磁盘",-1)),m(x,{type:s(g)},{default:p(()=>[h(r("容量占用".concat(t.item.data.size[3].substring(0,t.item.data.size[3].lastIndexOf("%")),"%")),1)]),_:1},8,["type"])]),R(m(b,{type:"primary",onClick:d[0]||(d[0]=e=>s(l).scanRubbishFile(t.item.info.title))},{default:p(()=>[...d[3]||(d[3]=[h("立即清理",-1)])]),_:1},512),[[z,s(a)]])])],64))]),"base-info":p(()=>[s(y)?(o(),v(k,{key:1,data:e.item.data.list,column:s(f)},null,8,["data","column"])):(o(),n(C,{key:0},[i("div",va,[i("div",fa,[i("div",{class:"block truncate max-w-[30rem]",title:"挂载点：".concat(e.item.info.title,"\n备注：").concat(e.item.data.rname)},"挂载点： "+r(e.item.info.title+(e.item.data.rname?" (".concat(e.item.data.rname,")"):"")),9,ha),m(w,{placement:"right",content:"点击设置备注"},{default:p(()=>[i("i",{class:"svgtofont-el-edit text-primary ml-[8px] cursor-pointer",onClick:d[1]||(d[1]=t=>s(l).setPsDialog({ps:e.item.data.rname||e.item.info.title,path:e.item.info.title}))})]),_:1})]),i("span",null,r("共：".concat(e.item.data.size[0])+"，可用：".concat(e.item.data.size[2])+"，\t已用：".concat(e.item.data.size[1])),1)]),i("div",ya,[i("span",null," 文件系统："+r(e.item.data.filesystem),1),i("span",null," 类型："+r(e.item.data.type+"，系统占用：".concat(e.item.data.size[3])),1)]),"None"!==e.item.data.d_size?(o(),n("div",ga,[i("span",null," 磁盘大小："+r(e.item.data.d_size),1),m(w,{class:"item",effect:"dark",content:"根据系统设置的不同，如分区/SWAP/LVM/扩容，可能显示大小不一致，点击查看详情",placement:"top-start"},{default:p(()=>[i("span",null,[m(_,{class:"bt-ico-ask ml-3",href:"https://www.bt.cn/bbs/thread-136532-1-1.html",target:"_blank"},{default:p(()=>[...d[4]||(d[4]=[h("?",-1)])]),_:1})])]),_:1})])):c("",!0)],64))]),"content-info":p(()=>[i("p",xa,"总数："+r(e.item.data.inodes[0]),1),i("p",ba,"已用："+r(e.item.data.inodes[1]),1),i("p",wa,"可用："+r(e.item.data.inodes[2]),1),i("p",{class:I(["!my-[1rem]",{"text-warning":parseInt(t.item.data.inodes[3])>90&&parseInt(t.item.data.inodes[3])<100,"text-danger":100===parseInt(t.item.data.inodes[3])}])}," 使用率："+r(e.item.data.inodes[3]+(e.item.data.inodes[3].includes("%")?"":"%")),3)]),_:1},8,["type"])}}}),[["__scopeId","data-v-a6e59bc7"]]),ka={class:"disk-info flex flex-col items-start flex-1 min-w-0"},Ca={class:"disk-title text-[#333] text-[1.2rem] md:text-2xl font-semibold mb-2 break-all truncate w-full"},Sa={class:"disk-desc text-[1.2rem] text-gray-500 break-all mb-1 truncate w-full"},Ia={class:"disk-progress ml-5 flex items-center justify-center"},Pa={class:"flex flex-col items-center text-[1.2rem]"},Ta={class:"text-[1.6rem]"},La={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},Ma={class:"flex items-center"},Ea={class:"flex align-left flex-col"},Da={class:"flex items-center"},ja=["title"],Ba=["onClick"],Ra={class:"flex align-left flex-col"},Oa={key:0,class:"m-4x flex items-center"},Aa={class:"!my-[1rem]"},Fa={class:"!my-[1rem]"},Va={class:"!my-[1rem]"},Wa={key:1,class:"p-4 text-gray-400"},za=Se(e({__name:"disk-popover-extends",props:{list:{default:()=>[]},isShowAllDisk:{type:Boolean,default:!1}},setup(e){const t=e,{enterpriseRec:a}=xe(),l=Kt(),{mountColumn:u}=d(l),f=(e,t)=>{var a;const l=null==(a=e.info)?void 0:a.range;return Number(l)>90?"#ef0808":Number(l)>80?"#ff9900":"#20a53a"},y=e=>{const t="string"==typeof e.data.size?0:parseFloat(e.data.size[3].substring(0,e.data.size[3].lastIndexOf("%")));return t>=90?"danger":t>=80?"warning":"success"};return(e,d)=>{const x=G,b=N,w=H,_=V,k=U,P=Ie,T=He,L=g;return t.list&&t.list.length?(o(!0),n(C,{key:0},S(t.list,(e,g)=>{var S;return o(),v(L,{key:(null==(S=null==e?void 0:e.info)?void 0:S.title)?e.info.title+"-"+g:g,trigger:"hover",width:400,placement:"bottom-start",teleported:!1,"popper-class":"el-popover-shadow","show-after":100,"hide-after":0},{reference:p(()=>{var a,l,s,c,u,v,y,g,b,w,_,k,S,P;return[i("div",{class:I([t.isShowAllDisk?"p-[1rem]":"px-[1rem]","flex items-center justify-between min-w-0 cursor-pointer transition-colors hover:bg-[#fafafa] rounded-[1.6rem]"])},[i("div",ka,[i("div",Ca,r((null==(a=e.info)?void 0:a.title)||"-"),1),i("div",Sa,["object"==typeof(null==(l=e.info)?void 0:l.desc)&&"disk"===(null==(s=e.info)?void 0:s.type)?(o(),n(C,{key:0},[i("span",{style:q({color:null==(c=e.info)?void 0:c.color})},r(null==(v=null==(u=e.info)?void 0:u.desc)?void 0:v.used)+" "+r(null==(g=null==(y=e.info)?void 0:y.desc)?void 0:g.used_unit),5),d[0]||(d[0]=i("span",null," / ",-1)),i("span",null,r(null==(w=null==(b=e.info)?void 0:b.desc)?void 0:w.total)+" "+r(null==(k=null==(_=e.info)?void 0:_.desc)?void 0:k.total_unit),1)],64)):(o(),n(C,{key:1},[h(r((null==(S=e.info)?void 0:S.desc)||"-"),1)],64))])]),i("div",Ia,[m(x,{"show-text":!0,type:"circle",width:50,"stroke-width":6,color:f(e),percentage:(null==(P=e.info)?void 0:P.range)||0},{default:p(({percentage:t})=>[i("div",Pa,[i("span",{class:"percentage-value",style:q({color:f(e)})},[i("span",Ta,r(t),1),d[1]||(d[1]=h("% ",-1))],4)])]),_:2},1032,["color","percentage"])])],2)]}),default:p(()=>[e&&e.data&&e.info?(o(),v(ua,{key:0,"load-type":"diskInfo",type:"disk-".concat(e.info.title),item:e},{button:p(()=>["None"!==e.data.path?(o(),n(C,{key:0},[parseInt(e.data.inodes[3])>90?(o(),v(b,{key:0,title:"Inode可用不足10%，请前往文件管理清理不必要文件",type:"error",class:"!mb-8px !min-h-[24px] !py-4px",closable:!1})):c("",!0),i("div",La,[i("div",Ma,[d[2]||(d[2]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前磁盘",-1)),m(w,{type:y(e)},{default:p(()=>[h(r("容量占用".concat(e.data.size[3].substring(0,e.data.size[3].lastIndexOf("%")),"%")),1)]),_:2},1032,["type"])]),R(m(_,{type:"primary",onClick:t=>s(l).scanRubbishFile(e.info.title)},{default:p(()=>[...d[3]||(d[3]=[h("立即清理",-1)])]),_:2},1032,["onClick"]),[[z,s(a)]])])],64)):c("",!0)]),"base-info":p(()=>["None"!==e.data.path?(o(),n(C,{key:0},[i("div",Ea,[i("div",Da,[i("div",{class:"block truncate max-w-[30rem]",title:"挂载点：".concat(e.info.title,"\n备注：").concat(e.data.rname)},"挂载点： "+r(e.info.title+(e.data.rname?" (".concat(e.data.rname,")"):"")),9,ja),m(k,{placement:"right",content:"点击设置备注"},{default:p(()=>[i("i",{class:"svgtofont-el-edit text-primary ml-[8px] cursor-pointer",onClick:t=>s(l).setPsDialog({ps:e.data.rname||e.info.title,path:e.info.title})},null,8,Ba)]),_:2},1024)]),i("span",null,r("共：".concat(e.data.size[0],"，可用：").concat(e.data.size[2],"，\t已用：").concat(e.data.size[1])),1)]),i("div",Ra,[i("span",null," 文件系统："+r(e.data.filesystem),1),i("span",null," 类型："+r(e.data.type+"，系统占用：".concat(e.data.size[3])),1)]),"None"!==e.data.d_size?(o(),n("div",Oa,[i("span",null," 磁盘大小："+r(e.data.d_size),1),m(k,{class:"item",effect:"dark",content:"根据系统设置的不同，如分区/SWAP/LVM/扩容，可能显示大小不一致，点击查看详情",placement:"top-start"},{default:p(()=>[i("span",null,[m(P,{class:"bt-ico-ask ml-3",href:"https://www.bt.cn/bbs/thread-136532-1-1.html",target:"_blank"},{default:p(()=>[...d[4]||(d[4]=[h("?",-1)])]),_:1})])]),_:1})])):c("",!0)],64)):(o(),v(T,{key:1,data:e.data.list,column:s(u)},null,8,["data","column"]))]),"content-info":p(()=>[i("p",Aa,"总数："+r(e.data.inodes[0]),1),i("p",Fa,"已用："+r(e.data.inodes[1]),1),i("p",Va,"可用："+r(e.data.inodes[2]),1),i("p",{class:I(["!my-[1rem]",{"text-warning":parseInt(e.data.inodes[3])>90&&parseInt(e.data.inodes[3])<100,"text-danger":100===parseInt(e.data.inodes[3])}])}," 使用率："+r(e.data.inodes[3]+(e.data.inodes[3].includes("%")?"":"%")),3)]),_:2},1032,["type","item"])):(o(),n("div",Wa,"无数据"))]),_:2},1024)}),128)):c("",!0)}}}),[["__scopeId","data-v-38379853"]]),Na={class:"module-ui relative"},Ha={class:"flex flex-shrink-0 w-full"},Ua={class:"flex flex-col justify-end flex-shrink-0 w-full home-load-status-title"},qa=["title"],Ga={class:"text-[2rem] text-[#333] font-alibaba-heavy 2xl:text-[2.6rem] whitespace-nowrap",style:{fontSize:"var(--home-state-font-size)"}},$a={class:"text-[1.2rem]"},Ka={class:"text-[1.2rem]"},Ja={class:"flex flex-col items-center text-[1.2rem] font-alibaba-semibold"},Qa={class:"font-800 md:text-[2.4rem] lg:text-[3.2rem] 2xl:text-[4rem]"},Za=Se(e({__name:"main",props:{visible:{type:Boolean,default:!1},custom:{type:Boolean,default:!1},showDesc:{type:Boolean,default:!0},href:{default:""},info:{default:()=>({type:"",title:"",range:0})},disk:{type:Boolean,default:!1},data:{default:()=>({})},type:{default:""},alert:{type:Boolean,default:!1},mainWidth:{default:200}},emits:["update:visible","openPopover","show","hide"],setup(e,{emit:t}){const a=$t(),{tagsType:c}=d(a),f=e,y=Kt(),{virtualRef:x,popoverContent:b}=d(y),w=u(()=>{const e=f.mainWidth||200;let t=0;return t=e<=200?Math.max(80,Math.min(100,Math.floor(.35*e)-20)):e<=300?Math.max(100,Math.min(120,Math.floor(.33*e)-20)):Math.max(120,Math.min(140,Math.floor(.3*e)-20)),t}),_=u(()=>{const{info:e,alert:t}=f,{desc:a,title:l,range:s,rangeText:o,disabled:n,type:i}=e,r=y.chartColorActive(s,t);let c=a,{color:d}=r;if("disk"===f.type&&"#20a53a"===d){const{data:e}=f;d=Number(e.inodes[3].replace("%",""))>90?"#ef0808":Number(e.inodes[3].replace("%",""))>80?"#ff9900":"#20a53a"}if("object"==typeof a&&("disk"===i||"mem"===i))try{c={used:a.used?a.used:"0",used_unit:a.used_unit?a.used_unit:"0",total:a.total?a.total:"0",total_unit:a.total_unit?a.total_unit:"0"}}catch(u){c="获取中"}return{type:i,title:l,color:d,range:s,disabled:!!n,desc:c||r.desc,rangeText:o||"",position:"bottom-start"}}),k=e=>{const{rangeText:t}=_.value;return t||"".concat(e,"%")};u(()=>S.value?{backgroundColor:_.value.color}:{});const S=u(()=>"load"===_.value.type&&"success"!==c.value.load);return l(()=>{y.init()}),$(()=>{y.$reset()}),(e,t)=>{const a=G,l=g,c=K;return o(),n("div",Na,[m(l,{trigger:"hover","virtual-ref":s(x),width:400,offset:e.custom?1:0,placement:s(_).position,teleported:!1,"show-after":100,"auto-close":0,"popper-class":"el-popover-shadow",onShow:t[0]||(t[0]=t=>e.$emit("show")),onHide:t[1]||(t[1]=t=>e.$emit("hide"))},{reference:p(()=>{var l,d,u,m;return[i("div",{ref_key:"popoverContent",ref:b,class:"flex flex-row items-end justify-between w-full h-full"},[i("div",Ha,[i("div",Ua,[i("span",{class:"pb-[.2rem] text-[1.4rem] truncate block w-[50%] font-alibaba-semibold",title:s(_).title},r(s(_).title),9,qa),R(i("span",Ga,["object"!=typeof s(_).desc||"disk"!==s(_).type&&"mem"!==s(_).type?(o(),n(C,{key:1},[h(r(s(_).desc),1)],64)):(o(),n(C,{key:0},[i("span",{style:q({color:s(_).color})},[i("span",null,r(null==(l=s(_).desc)?void 0:l.used),1),i("span",$a,r(null==(d=s(_).desc)?void 0:d.used_unit),1)],4),t[2]||(t[2]=i("span",null," / ",-1)),i("span",null,r(null==(u=s(_).desc)?void 0:u.total),1),i("span",Ka,r(null==(m=s(_).desc)?void 0:m.total_unit),1)],64))],512),[[z,e.showDesc]])])]),R((o(),v(a,{class:I(["status-main-progress",{"mount-progress":"None"===e.data.path}]),type:"circle",width:s(w),"stroke-width":8,color:s(_).color,percentage:s(_).range||0,format:k,style:q("color:"+s(_).color)},{default:p(({percentage:e})=>[i("div",Ja,[i("span",{class:"percentage-value",style:q({color:s(_).color})},[i("span",Qa,r(Number(e).toFixed(0)),1),t[3]||(t[3]=h("% ",-1))],4)])]),_:1},8,["width","class","color","percentage","style"])),[[c,void 0,"popover"]])],512)]}),default:p(()=>[B(e.$slots,"default",{},void 0,!0)]),_:3},8,["virtual-ref","offset","placement"])])}}}),[["__scopeId","data-v-0b44d678"]]),Xa={class:"module-ui flex"},Ya={class:"flex flex-row items-end justify-between w-full"},el={class:"pb-[.2rem] text-[1.4rem] truncate block disk-list-title"},tl={class:"text-[1.4rem] text-[#787A79] font-400 font-alibaba-bold disk-list-desc"},al={class:"flex flex-col justify-center items-center h-full"},ll=Se(e({__name:"disk-main",props:{list:{default:()=>[]}},emits:["update:visible","openPopover","show","hide"],setup(e,{emit:a}){const{mainWidth:c}=xe(),f=Kt();d(f);const y=u(()=>c.value<=1600?130:144),x=t(12),b=u(()=>x.value+4),w=t(null);let _=null;function k(e,t=120){_&&clearTimeout(_),_=setTimeout(()=>{w.value=e},t)}l(()=>{});const P=(e,t)=>{if(null!==w.value&&w.value!==t)return"#eaeaea";const{range:a}=e.info;return Number(a)>90?"#ef0808":Number(a)>80?"#ff9900":"#20a53a"},T=e=>y.value-e*b.value*2,L=e=>{const t=T(e);return{left:(y.value-t)/2+"px",top:(y.value-t)/2+"px"}};return l(()=>{f.init()}),$(f.$reset),(e,t)=>{const a=g,l=J,c=G,d=Q;return o(),n("div",Xa,[i("div",Ya,[m(d,{span:24,class:"w-full"},{default:p(()=>[m(l,{span:16,xl:16},{default:p(()=>[i("div",{class:I(["h-full flex-2 gap-y-[10px]",2===e.list.length?"grid grid-cols-1 grid-rows-2":"grid grid-cols-2 grid-rows-2"])},[(o(!0),n(C,null,S(e.list,(e,l)=>(o(),v(a,{key:e.info.title+"-"+l,trigger:"hover",width:400,placement:"bottom-start",teleported:!1,"popper-class":"el-popover-shadow","hide-after":0,onShow:e=>k(l),onHide:t[0]||(t[0]=e=>k(null))},{reference:p(()=>{var a,c,d,u;return[i("div",{class:I(["flex flex-col justify-end cursor-pointer",{"is-inactive":null!==s(w)&&s(w)!==l}])},[i("span",el,r(e.info.title),1),i("span",{class:"text-[2.6rem] font-700 leading-[1.2] disk-list-range",style:q({color:P(e,l)})},r(e.info.range)+"%",5),i("span",tl,["object"==typeof e.info.desc&&"disk"===e.info.type?(o(),n(C,{key:0},[i("span",{style:q({color:e.info.color})},[i("span",null,r(null==(a=e.info.desc)?void 0:a.used)+r(null==(c=e.info.desc)?void 0:c.used_unit),1)],4),t[2]||(t[2]=i("span",null,"/",-1)),i("span",null,r(null==(d=e.info.desc)?void 0:d.total)+r(null==(u=e.info.desc)?void 0:u.total_unit),1)],64)):(o(),n(C,{key:1},[h(r(e.info.desc),1)],64))])],2)]}),default:p(()=>[m(_a,{item:e},null,8,["item"])]),_:2},1032,["onShow"]))),128))],2)]),_:1}),m(l,{span:8,xl:8},{default:p(()=>[i("div",al,[i("div",{class:"flex relative",style:q({width:s(y)+"px",height:s(y)+"px"})},[(o(!0),n(C,null,S(e.list,(e,l)=>(o(),v(a,{key:e.info.title,trigger:"hover",width:400,placement:"bottom-start",teleported:!1,"popper-class":"el-popover-shadow","show-after":100,"hide-after":0,transition:"none",onShow:e=>k(l),onHide:t[1]||(t[1]=e=>k(null))},{reference:p(()=>[i("div",{class:"flex absolute",style:q(L(l))},[m(c,{class:I(["cursor-pointer",{"mount-progress":"None"===e.data.path}]),type:"circle","show-text":!1,width:T(l),"stroke-width":s(x),color:P(e,l),percentage:e.info.range||0},null,8,["class","width","stroke-width","color","percentage"])],4)]),default:p(()=>[m(_a,{item:e},null,8,["item"])]),_:2},1032,["onShow"]))),128))],4)])]),_:1})]),_:1})])])}}}),[["__scopeId","data-v-bef5b135"]]),sl={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},ol={class:"flex items-center"},nl={class:"disk-body-list flex justify-between"},il={id:"load_one"},rl={class:"disk-body-list flex justify-between"},cl={id:"load_cpu_times_num"},dl={class:"disk-item-body",id:"other_info_html"},ul={class:"table table-fixed whitespace-nowrap"},ml=["title"],pl=["title"],vl={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},fl={class:"flex items-center"},hl={class:"max-h-[8.2rem] overflow-y-auto"},yl={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},gl={class:"flex items-center"},xl={class:"flex align-left flex-col"},bl={class:"flex justify-between mb-[4px]"},wl={class:"w-[50%]"},_l={class:"inline-flex justify-start"},kl={class:"w-[50%]"},Cl={class:"inline-flex justify-start"},Sl={class:"flex justify-between mb-[4px]"},Il={class:"w-[50%]"},Pl={class:"inline-flex justify-start"},Tl={class:"w-[50%]"},Ll={class:"inline-flex justify-start"},Ml={class:"flex justify-between mb-[4px]"},El={class:"w-[50%]"},Dl={class:"w-[50%]"},jl={class:"inline-flex justify-start"},Bl={class:"disk-grid grid gap-4 w-full box-border",style:{"grid-template-columns":"repeat(3, minmax(0, 1fr))"}},Rl={class:"disk-grid grid gap-4 w-full box-border h-full",style:{"grid-template-columns":"repeat(auto-fill, minmax(220px, 1fr))"}},Ol="home_state_layout_cache",Al=Se(e({__name:"index",props:{mainWidth:{}},setup(e){const a=e,f=t(null),y=t(0);Z(f,e=>{if(!e[0])return;const{width:t}=e[0].contentRect;y.value=t});const g={diskCount:-1,containerWidth:-1},x={baseComponentCount:3,minElementWidth:235,elementGap:12,stackMinWidth:460,stackMaxWidth:650,tileMinWidth:600,tileMaxWidth:800,defaultContainerWidth:1200,maxSingleLineComponents:6,maxHybridDisks:6},w=$t(),{stateMainWidth:_,gutter:k,displayMode:P,stateHeight:T,isBreakLines:L,isShowAllDisk:M,cpuCoreDesc:E,statePopoverTimr:D,loadInfo:j,loadPopover:B,processAlarmShow:R,tagsType:O,load:A,cpu:F,loadInfoList:W,cpuInfo:z,cpuPopover:N,memoryInfo:U,memoryPopover:G,memory:K,disk:J}=d(w),Q=t(null);Z(Q,e=>{const t=e[0],{width:a}=t.contentRect;_.value=a}),u(()=>"single"===P.value&&L.value);const Y=sessionStorage.getItem(Ol);if(Y)try{const e=JSON.parse(Y);P.value=e.displayMode,T.value=e.stateHeight,L.value=e.isBreakLines,M.value=e.isShowAllDisk}catch(ne){sessionStorage.removeItem(Ol)}const ee=(e,t,a,l)=>{P.value=e,T.value=t,L.value=a,M.value=l;const s={displayMode:e,stateHeight:t,isBreakLines:a,isShowAllDisk:l};try{sessionStorage.setItem(Ol,JSON.stringify(s))}catch(ne){}},te=()=>{const e=_.value||a.mainWidth||x.defaultContainerWidth,t=(J.value||[]).length;if(g.diskCount===t&&g.containerWidth===e)return;g.diskCount=t,g.containerWidth=e;const l=x.baseComponentCount,s=l+t,o=x.minElementWidth,n=x.elementGap;if(e>=o*s+n*(s-1)){if((e-n*(s-1))/s>=o)return void ee("single","18rem",!1,!1)}if(t>=2&&t<=4){if(e>=o*l+x.stackMinWidth+n*l){if((e-x.stackMinWidth-n*l)/l>=o)return void ee("stack","22rem",!1,!1)}}if(t>=5&&t<=6){if(e>=o*l+x.tileMinWidth+n*l)return void ee("tile","22rem",!1,!1)}if(t>6){const a=t-6;return e>=(l+a+1-1)*n+(l+a)*o+x.tileMinWidth?void ee("hybrid","22rem",!1,!0):void ee("tile","18rem",!0,!0)}ee("single","18rem",!0,t>6)},ae=u(()=>"".concat(A.value.one.toFixed(2)," / ").concat(A.value.five.toFixed(2)," / ").concat(A.value.fifteen.toFixed(2))),le=u(()=>{const{process:e}=F.value;return Array.isArray(e)?"".concat(e[0]," / ").concat(e[1]):"获取中"});X(te),b(()=>D.value,(e,t)=>{clearInterval(e)},{immediate:!0}),b(()=>[(J.value||[]).length,_.value],([e,t])=>{if(0===t)return;if(g.diskCount!==e||g.containerWidth!==t){const{baseComponentCount:a,minElementWidth:l,elementGap:s,stackMinWidth:o,tileMinWidth:n}=x,i=a*l+(a-1)*s,r=t-i-s;let c="single";if(e>Math.floor(r/(l+s))&&(c=e>=5?t>=i+n?"tile":"stack":t>=i+o?"stack":"single"),e>6&&"single"!==c){const o=e-6;(t-n-(a+o+1)*s)/(a+o)>=l&&(c="hybrid")}ee(c,T.value,L.value,M.value),g.diskCount=e,g.containerWidth=t}},{immediate:!0,deep:!0}),l(async()=>{st({promises:[w.getProcessAlarm],delay:1e3}),te()}),$(w.$reset);const se=e=>{const t=_.value||a.mainWidth||x.defaultContainerWidth,l=x.elementGap;if(P.value,"single"===P.value){if(L.value){const e=x.baseComponentCount+(J.value||[]).length,a=oe(t,e,l),s="calc((100% - ".concat(l*(a-1),"px) / ").concat(a,")");return{flex:"1 0 ".concat(s),minWidth:"".concat(x.minElementWidth,"px")}}{const e=x.baseComponentCount+(J.value||[]).length,a=t-l*(e-1),s=Math.floor(a/e),o=Math.max(s,x.minElementWidth);return{width:"".concat(o,"px"),minWidth:"".concat(x.minElementWidth,"px"),flexShrink:0}}}if("hybrid"===P.value){const a=(J.value||[]).length-6,s=x.baseComponentCount+a,o=(s+1-1)*l;if("disk-area"===e)return{width:"".concat(x.tileMinWidth,"px"),minWidth:"".concat(x.tileMinWidth,"px"),flexShrink:0};{const e=t-x.tileMinWidth-o,a=Math.floor(e/s),l=Math.max(a,x.minElementWidth);return{width:"".concat(l,"px"),minWidth:"".concat(x.minElementWidth,"px"),flexShrink:0}}}{if(L.value)return{width:"100%"};const a="stack"===P.value?x.stackMinWidth:x.tileMinWidth,s="stack"===P.value?x.stackMaxWidth:x.tileMaxWidth,{baseComponentCount:o,minElementWidth:n}=x,i=l*o,r=t-n*o-i,c=Math.max(a,Math.min(r,s));let d=(t-c-i)/o;return d<n&&(d=n),"disk-area"===e?{width:"".concat(c,"px"),minWidth:"".concat(a,"px"),flexShrink:0}:{width:"".concat(d,"px"),minWidth:"".concat(n,"px"),flexShrink:0}}},oe=(e,t,a)=>{const l=x.minElementWidth;for(let s=Math.min(t,6);s>=1;s--){if(l*s+a*(s-1)<=e)return s}return 1};return(e,t)=>{const a=H,l=V;return o(),n("div",{ref_key:"stateMainRef",ref:Q},[i("div",{class:I(["state-container flex gap-[1.2rem] mb-[1.2rem]",{"flex-wrap":s(L),"flex-nowrap":!s(L)}])},[i("div",{style:q(se("load")),ref_key:"loadRef",ref:f,class:I(["state-component",s(M)?"flex-1":""])},[m(Za,{style:q({height:s(T)}),info:s(j),"main-width":s(y),onShow:t[0]||(t[0]=e=>s(w).moveStatePopover(s(B),"loadPopover")),onHide:s(w).removeStatePopover,href:"https://www.bt.cn/bbs/thread-11402-1-1.html"},{default:p(()=>[m(ua,{"load-type":"loadInfo",ref_key:"loadPopover",ref:B,type:"load","process-alarm-show":s(R)},{button:p(()=>[i("div",sl,[i("div",ol,[t[3]||(t[3]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前负载",-1)),m(a,{type:s(O).load},{default:p(()=>[h(r("运行达到".concat(s(j).range,"%")),1)]),_:1},8,["type"])])])]),"base-info":p(()=>[i("div",nl,[t[4]||(t[4]=i("div",null,"最近1/5/15分钟平均负载：",-1)),i("div",il,r(ae.value),1)]),i("div",rl,[t[5]||(t[5]=i("div",null,"活动进程数 / 总进程数:",-1)),i("div",cl,r(le.value),1)])]),"content-info":p(()=>[i("div",dl,[i("table",ul,[i("tbody",null,[(o(!0),n(C,null,S(s(W),(e,t)=>(o(),n("tr",{key:t},[(o(!0),n(C,null,S(e,(e,t)=>(o(),n(C,{key:t},[i("td",{title:e.title,class:"break-all text-ellipsis p-[.4rem] pl-0"},[i("span",null,r(e.name),1)],8,ml),i("td",{title:e.title,class:"break-all text-ellipsis"},[i("span",null,r(e.value),1)],8,pl)],64))),128))]))),128))])])])]),_:1},8,["process-alarm-show"])]),_:1},8,["style","info","main-width","onHide"])],6),i("div",{style:q(se("cpu")),class:I(["state-component",s(M)?"flex-1":""])},[m(Za,{style:q({height:s(T)}),info:s(z),type:"cpu","main-width":s(y),onShow:t[1]||(t[1]=e=>s(w).moveStatePopover(s(N),"cpuPopover")),onHide:s(w).removeStatePopover},{default:p(()=>[m(ua,{"load-type":"cpuInfo",type:"cpu",ref_key:"cpuPopover",ref:N,"process-alarm-show":s(R)},{button:p(()=>[i("div",vl,[i("div",fl,[t[6]||(t[6]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前CPU使用率",-1)),m(a,{type:s(O).cpu},{default:p(()=>[h(r("占用".concat(s(z).range,"%")),1)]),_:1},8,["type"])])])]),"content-info":p(()=>[i("div",hl,[(o(!0),n(C,null,S(s(E),(e,t)=>(o(),n("div",{key:t,class:"flex direction-row items-center justify-between my-[1rem]"},[i("span",null,r(e.name),1),i("span",null,r(e.value),1)]))),128))])]),"base-info":p(()=>[i("p",null,r(s(F).framework),1),i("p",null,r("".concat(s(F).cpuNumber,"个物理CPU，").concat(s(F).logicCores,"个物理核心，").concat(s(F).cores,"个逻辑核心")),1)]),_:1},8,["process-alarm-show"])]),_:1},8,["style","info","main-width","onHide"])],6),i("div",{style:q(se("mem")),class:I(["state-component",s(M)?"flex-1":""])},[m(Za,{style:q({height:s(T)}),type:"mem",info:s(U),"main-width":s(y),onShow:t[2]||(t[2]=e=>s(w).moveStatePopover(s(G),"memoryPopover")),onHide:s(w).removeStatePopover},{default:p(()=>[m(ua,{"load-type":"memoryInfo",type:"mem",ref_key:"memoryPopover",ref:G,"process-alarm-show":s(R)},{button:p(()=>[i("div",yl,[i("div",gl,[t[7]||(t[7]=i("span",{class:"text-[#666] text-[1.4rem] mr-[4px] ml-[8px]"},"检测到当前内存",-1)),m(a,{type:s(O).memory},{default:p(()=>[h(r("占用".concat(s(U).range,"%")),1)]),_:1},8,["type"])]),m(l,{type:"primary",onClick:s(w).onClearMemory},{default:p(()=>[...t[8]||(t[8]=[h("立即释放",-1)])]),_:1},8,["onClick"])])]),"base-info":p(()=>[i("div",xl,[i("div",bl,[i("div",wl,[t[9]||(t[9]=i("span",{class:"w-[81px] inline-flex justify-end"},"空闲内存：",-1)),i("span",_l,r(s(K).memFree+" MB"),1)]),i("div",kl,[t[10]||(t[10]=i("span",{class:"w-[81px] inline-flex justify-end"},"已用：",-1)),i("span",Cl,r(s(K).memRealUsed+" MB"),1)])]),i("div",Sl,[i("div",Il,[t[11]||(t[11]=i("span",{class:"w-[81px] inline-flex justify-end"},"总内存：",-1)),i("span",Pl,r(s(K).memTotal+" MB"),1)]),i("div",Tl,[t[12]||(t[12]=i("span",{class:"w-[81px] inline-flex justify-end"},"共享：",-1)),i("span",Ll,r(s(K).memShared+" MB"),1)])]),i("div",Ml,[i("div",El,[t[13]||(t[13]=i("span",{class:"w-[81px] inline-flex justify-end"},"可分配内存：",-1)),i("span",null,r(s(K).memAvailable+"MB"),1)]),i("div",Dl,[t[14]||(t[14]=i("span",{class:"w-[81px] inline-flex justify-end"},"buff/cache：",-1)),i("span",jl,r(s(K).memCached+"/"+s(K).memBuffers+" MB"),1)])])])]),_:1},8,["process-alarm-show"])]),_:1},8,["style","info","main-width","onHide"])],6),"single"===s(P)?(o(!0),n(C,{key:0},S(s(J),(e,t)=>(o(),n("div",{key:t,style:q(se("disk")),class:"state-component"},[m(Za,{style:q({height:s(T)}),type:"disk",info:e.info,"main-width":s(y),onHide:s(w).removeStatePopover,data:e.data,alert:"None"!==e.data.path&&100===parseInt(e.data.inodes[3])},{default:p(()=>[m(_a,{item:e},null,8,["item"])]),_:2},1032,["style","info","main-width","onHide","data","alert"])],4))),128)):"hybrid"===s(P)?(o(),n(C,{key:1},[(o(!0),n(C,null,S(s(J).slice(0,s(J).length-6),(e,t)=>(o(),n("div",{key:"hybrid-disk-".concat(t),style:q(se("disk")),class:"state-component"},[m(Za,{style:q({height:s(T)}),type:"disk",info:e.info,"main-width":s(y),onHide:s(w).removeStatePopover,data:e.data,alert:"None"!==e.data.path&&100===parseInt(e.data.inodes[3])},{default:p(()=>[m(_a,{item:e},null,8,["item"])]),_:2},1032,["style","info","main-width","onHide","data","alert"])],4))),128)),i("div",{style:q(se("disk-area")),class:"state-component"},[i("div",{class:"module-ui bg-[#FFFC] rounded-[1.6rem] p-[2.4rem]",style:q({height:s(T)})},[i("div",Bl,[m(za,{list:s(J).slice(s(J).length-6),"is-show-all-disk":s(M)},null,8,["list","is-show-all-disk"])])],4)],4)],64)):(o(),n("div",{key:2,style:q(se("disk-area")),class:"state-component"},["stack"===s(P)?(o(),v(ll,{key:0,list:s(J),class:"bg-white shadow rounded",style:q({height:s(T)})},null,8,["list","style"])):"tile"===s(P)?(o(),n("div",{key:1,class:"module-ui bg-[#FFFC] rounded-[1.6rem] p-[2.4rem]",style:q({height:s(M)?"auto":s(T)})},[i("div",Rl,[m(za,{list:s(M)?s(J):s(J).slice(0,6),"is-show-all-disk":s(M)},null,8,["list","is-show-all-disk"])])],4)):c("",!0)],4))],2)],512)}}}),[["__scopeId","data-v-27c900f7"]]);function Fl(e,t,a={}){let l;const{document:s=te,...o}=a,n={onUpdate:e=>{!function(e,t,a,l=null){null!=l&&((s=l.item).parentNode&&s.parentNode.removeChild(s),function(e,t,a){const l=e.children[a];e.insertBefore(t,l)}(l.from,l.item,t));var s;const o=E(e),n=o?[...ae(e)]:ae(e);if(a>=0&&a<n.length){const l=n.splice(t,1)[0];k(()=>{n.splice(a,0,l),o&&(e.value=n)})}}(t,e.oldIndex,e.newIndex,e)}},i=()=>{const t=null==s?void 0:s.querySelector(e);t&&void 0===l&&(l=new Ue(t,{...n,...o}))},r=()=>{null==l||l.destroy(),l=void 0};return Y(i),ee(r),{stop:r,start:i,option:(e,t)=>{if(void 0===t)return null==l?void 0:l.option(e);null==l||l.option(e,t)}}}const Vl=w("HOME-OVERVIEW-STORE",()=>{const e=_(),{mainWidth:l,payment:s}=xe(),{authType:o}=a(s.value),n=t([]),i=t(!0),r=t(!1),c=async()=>{try{const e=await be({request:xt(),data:{data:[Array,n]}});return d(),Promise.resolve(e.data)}catch(e){qe(e)}finally{i.value=!1,k(()=>{h()})}},d=()=>{const e=n.value.findIndex(e=>"ssh_log"===e.name);-1!==e&&be({loading:r,request:bt({log_type:n.value[e].params[0].source}),success:t=>{Array.isArray(t.data)&&(n.value[e].value=t.data)}})},u=async e=>_e({title:"自定义概览模块",area:100,compData:e,component:()=>ke(()=>import("./index315.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),m=async()=>_e({title:"备忘录",area:[70,60],component:()=>ke(()=>import("./index316.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)}),p=async()=>_e({area:[90,60],component:()=>ke(()=>import("./index317.js?v=1756369731").then(e=>e.i),__vite__mapDeps([]),import.meta.url)}),v=e=>{const{type:t}=e.plugin_info;return"free"===o.value&&(8===t||12===t)||"ltd"!==o.value&&12===t},f=e=>{const{type:t,endtime:a,setup:l}=e.plugin_info,s="total"===e.name?41:"btwaf"===e.name?366:42;if(v(e)&&a<0)return ct({disablePro:!0,sourceId:s});rt({name:e.name})},h=()=>{Fl(".overview-wrapper",n,{animation:500,handle:".move-icon",chosenClass:"ghost",onUpdate:async e=>{const t=e.oldIndex,a=e.newIndex,l=n.value[t];n.value.splice(t,1),n.value.splice(a,0,l),(async()=>{const e=n.value.map((e,t)=>e.id);await be({request:Ct({overview:JSON.stringify(e)}),message:!0,success:e=>{e.status||c()}})})()}})},y=()=>{Fe("searchFile","true"),e.push({path:"/files"})},g=t(""),x=t("/www/server/panel/data/memo.txt"),b=le([]),w=t([]),C=le(!1),S=le(0),I=t({val0:0,val1:0,val2:0,val3:0}),P=t(["sites","databases","total","ssh_log","monitor"]),T=t(["open_dir"]),L=()=>{let e={};w.value=[],n.value.forEach(t=>{e[t.name]=t}),b.value.forEach(t=>{const a=t.template;t.option.forEach(t=>{const l=e[t.name]||!1;w.value.push({...t,isShow:Boolean(l),showItem:l,template:a,overviewPopover:!1})})})},M=(e,t=!1)=>{let a={...e},l=[],s=[];for(const o in I.value)e.params.length&&s.push(I.value[o]);if(0===s.length&&(s=[0]),"open_dir"===e.name){const t=I.value.val0||e.params[0].option[0].source;l=[{name:t,source:t}]}else l=a.params.map((t,a)=>"select"===t.type?t.option[s[a]]:e.params?e.params[a]:void 0);return delete a.overviewPopover,t?(e.showItem.params=l,a={...e.showItem}):(delete a.showItem,a.params=l),a},E=async e=>{const t=Boolean(e.showItem);if(!t&&6===n.value.length)return e.overviewPopover=!1,k(()=>e.isShow=!1),Ke.warn("最多只能显示6个模块");const a={overview:JSON.stringify(M(e,t))},l=t&&e.isShow?kt:_t;be({loading:"正在".concat(t?"修改":"添加","模块，请稍后..."),request:l(a),message:!0,success:async t=>{e.overviewPopover=!1,e.isShow=!0,D(),t.status&&(await c(),L())}})},D=()=>{I.value={val0:0,val1:0,val2:0,val3:0}},j=async()=>{await be({loading:C,request:Je(),data:{data:[Array,b]}})};return{mainWidth:l,loading:i,isSshLoading:r,overviewShowList:n,getOverviewData:c,openOverviewTemplate:()=>{u({getOverviewData:c})},openModelDialog:async t=>{switch(t.type){case"base":const a=t.params[0].source,l="/"+(["ftps","sites","databases"].includes(t.name)&&"all"===a?"":a).replace("proxy","nginx");return e.push({path:t.source.href+l});case"model":if("memo"===t.name)return m();if("safety_risk"===t.name)return p();if("ssh_log"===t.name)return e.push({path:"/logs/ssh"});case"plugin":return f(t);default:if("search_file"===t.name)return y();if("open_dir"===t.name)return Tt({path:t.params[0].name})}},securityRisksDialog:p,getModelTitle:e=>{let t=e.title,a=0,l=e.params.length||0,s=["ssh_log"];if(!e.status)return t;if("open_dir"===e.name)return t;l>=2&&(t="");for(let o=l-1;o>=0;o--){let n=e.params[o];(t===n.name||s.indexOf(e.name)>-1)&&(t=""),2!==a&&(1===l&&""!=t&&(t+=" - "),t+="".concat(n.name)+(o===l-1&&l>1?" - ":""),a++),a=0}return t.replace(" - 全部","")},getPayStatus:v,getModelTips:e=>{switch(e.template){case"base":return"memo"===e.name||"safety_risk"===e.name?"打开".concat(e.title,"模块"):"跳转至".concat(e.title,"页面");case"browse":return"plugin"===e.type?"打开".concat(e.title,"插件"):"打开".concat(e.title,"模块");case"open_dir":return"打开".concat(e.title)}},content:g,path:x,saveFileEvent:async()=>{be({loading:"正在保存备忘录，请稍后...",request:Ge({path:x.value,data:g.value,encoding:"utf-8"}),message:!0,success:e=>{e.status&&c()}})},getMemoData:async()=>{be({loading:"正在获取备忘录数据，请稍后...",request:$e(),data:[String,g]})},isLoading:C,overviewModelList:w,supportConfig:P,supportPath:T,form:I,onPathChange:e=>{dt({type:"dir",change:t=>{I.value.val0=t,E(e)}})},getOverviewTemplateData:j,dataAlignment:L,setOverviewTemplateShow:async e=>{try{if(e.isShow&&6===n.value.length)return k(()=>e.isShow=!1),Ke.warn("最多只能显示6个模块");const t=M(e);!e.isShow&&We(e.showItem.id)&&(await j(),(e=w.value.find(t=>t.name===e.name)).isShow=!e.isShow);const a=e.isShow?_t:wt,l=e.isShow?{overview:JSON.stringify(t)}:{overview_id:e.showItem.id};be({loading:"正在".concat(e.isShow?"删除":"添加","模块，请稍后..."),request:a(l),message:!0,data:{data:Array,msg:String,status:Boolean},success:async t=>{t.status&&(e.isShow&&(e.showItem=t.data.length?t.data[t.data.length-1]:e.showItem),await c(),L())}})}catch(t){qe(t)}},addOverviewFun:E,setPopoverShow:(e,t)=>{w.value[t].overviewPopover=!0,S.value=t;const a=e.showItem.params,l=Object.entries(I.value);for(let s=0;s<l.length&&s<e.params.length;s++){const t=e.params[s];if("select"===t.type){const e=t.option.findIndex(e=>!a||(!a[s]||e.source===a[s].source));I.value["val"+s]=e}else I.value["val"+s]=a?a[s].source:t.option[s].source}}}}),Wl={class:"module-ui mb-[1.2rem] mx-[1.2rem]"},zl={class:"module-ui-header"},Nl={class:"flex w-full justify-between"},Hl={class:"module-ui-body mt-[1.2rem]"},Ul={class:"!mx-0 w-full"},ql={class:"flex flex-col w-full relative inline-block"},Gl={class:"overview-box"},$l={class:"overview-content"},Kl={class:"content w-full"},Jl={class:"title"},Ql={class:"flex h-[4.4rem] items-center w-full"},Zl={key:0,class:"risk not-install bt-blink"},Xl={key:1,class:"model font-bold"},Yl={class:"to-day"},es={class:"yester-day ml-[1.6rem]"},ts={key:2,class:"path-info bt-link-primary truncate"},as={key:3,class:"path-info bt-link-primary truncate"},ls={key:4,class:"icon-open-routes"},ss={class:"icon-open-routes-text"},os=Se(e({__name:"index",setup(e){const t=Vl(),{mainWidth:a,loading:f,isSshLoading:h,overviewShowList:y}=d(t),g=u(()=>{let e=0;const t=a.value<1100?a.value<800?a.value<400?1:2:4:a.value>1800?8:6,l=Math.floor((a.value-16*t-50)/t);return e=Math.min(Math.max(l,200),270),{number:24/(t>y.value.length?y.value.length:t),width:e}}),x=u(()=>g.value.width<230);return l(async()=>{st({promises:[t.getOverviewData],delay:100})}),(e,a)=>{const l=oe,d=ne,u=J,b=Q,w=ie;return o(),n("div",Wl,[i("div",zl,[i("div",Nl,[a[3]||(a[3]=i("span",{class:"font-alibaba-semibold"},"概览",-1)),i("span",{title:"自定义概览模块",class:"!ml-[1rem] cursor-pointer",onClick:a[0]||(a[0]=e=>s(t).openOverviewTemplate())},[...a[2]||(a[2]=[i("i",{class:"svgtofont-el-more-filled !text-[1.8rem] hover:text-[#20a53a] inline-block",style:{transform:"rotate(90deg)"}},null,-1)])])])]),i("div",Hl,[i("div",Ul,[m(b,{span:24,gutter:20,class:"overview-wrapper draggable-group"},{default:p(()=>[s(f)?(o(),n(C,{key:0},S(5,e=>m(d,{style:q({width:"".concat(s(g).width,"px")}),class:"overview-box",key:e},{template:p(()=>[i("div",ql,[m(l,{variant:"text",class:"!w-[40%]"}),m(l,{variant:"text",class:"mt-10px"})])]),_:2},1032,["style"])),64)):c("",!0),(o(!0),n(C,null,S(s(y),e=>(o(),v(u,{span:s(g).number,xl:s(g).number,class:"rounded-[8px]",key:e.id,onClick:a=>s(t).openModelDialog(e),style:q({minWidth:"".concat(s(g).width,"px")})},{default:p(()=>[i("div",Gl,[i("i",{class:"svgtofont-icon-drag move-icon",onClick:a[1]||(a[1]=se(()=>{},["stop"])),title:"可拖拽"}),i("div",$l,[i("div",Kl,[i("span",Jl,r(s(t).getModelTitle(e)),1),i("div",Ql,["base"===e.template?(o(),n("span",{key:0,class:I(["bt-link-primary !text-[2.8rem] text-alibaba",{memo:"memo"===e.name,risk:"safety_risk"===e.name&&e.value[0]>0,"!text-[#CBCBCB]":"memo"===e.name&&!e.value[0]}])},r(e.value[0]||("memo"===e.name?"当前内容为空，点击编辑":e.value[0])),3)):"browse"===e.template?(o(),n(C,{key:1},["plugin"!==e.type||e.plugin_info.setup?"plugin"===e.type||"model"===e.type?R((o(),n("div",Xl,[i("div",Yl,[a[4]||(a[4]=i("span",{class:""},"今日",-1)),i("span",null,r(e.value[0]||0),1)]),i("div",es,[a[5]||(a[5]=i("span",null,"昨日",-1)),i("span",null,r(e.value[1]||0),1)])])),[[w,s(h)&&"ssh_log"===e.name]]):c("",!0):(o(),n("span",Zl,r(s(t).getPayStatus(e)?"立即购买":"立即安装"),1))],64)):"open_dir"===e.template?(o(),n("span",ts,r(e.params[0].name),1)):"search_file"===e.template?(o(),n("span",as," 点击搜索内容 ")):c("",!0),"base"===e.type||"safety_risk"===e.name?(o(),n("div",ls,[a[6]||(a[6]=i("span",{class:"icon-open-routes-icon"},[i("i",{class:"svgtofont-el-arrow-right font-bold text-[1.6rem]"})],-1)),i("span",ss,r(s(x)?"打开":"打开到".concat(s(t).getModelTitle(e).split("-")[0])),1)])):c("",!0)])])])])]),_:2},1032,["span","xl","onClick","style"]))),128))]),_:1})])])])}}}),[["__scopeId","data-v-0be1e476"]]),ns={class:"module-ui flex flex-col"},is={class:"module-ui-header"},rs={class:"w-full flex justify-between items-center"},cs={class:"plugin-search"},ds={class:"pluginInfo"},us=["src"],ms={class:"plugin-desc"},ps={class:"wrapper module-ui-body soft-wrapper"},vs=["onClick"],fs={key:0,id:"freeTagCon"},hs={class:"h-38 pt-5 w-full text-center flex justify-center items-center"},ys={class:"w-[6rem] h-[6rem] rounded-[1.2rem] bg-[#f6f6f6] flex items-center justify-center"},gs=["src","custom"],xs={class:"text-[#888] h-9 leading-9 flex items-center justify-center pb-[8px]"},bs={class:"w-full truncate text-center"},ws=["onClick"],_s={class:"h-38 pt-5 w-full text-center flex justify-center items-center"},ks={class:"w-[6rem] h-[6rem] rounded-[1.2rem] bg-[#f6f6f6] flex items-center justify-center"},Cs=["src"],Ss={class:"flex justify-center items-center h-9 leading-9 pb-[8px]"},Is={class:"text-[#999] h-9 leading-9 w-full truncate text-center"},Ps={class:"flex justify-center align-middle mt-2 mb-4 opacity-70"},Ts=Se(e({__name:"index",setup(e){const t=St(),{popShow:a,pluginKeyword:u,recommendList:f,containerRef:y,mySoftList:x,tableLoading:w,isGetSoft:_,softShowList:P}=d(t);return b(f,e=>{e.length>0&&t.createSoftList()},{immediate:!0}),l(async()=>{await st({promises:[t.getHomeInstallSoftData,t.getRecommendInfo],delay:100}),k(()=>{const{type:e}=Lt();if(e.includes("aliyun")){const e=setInterval(async()=>{if(window.$extension){const t=await window.$extension();Me(t.extensionElement)&&!t.extensionElement&&clearTimeout(e),t.extensionElement&&(t.extensionElement(),clearTimeout(e))}},1e3)}})}),(e,l)=>{const d=V,f=de,b=ue,k=D,T=me,L=g,M=j("table-scroll-load"),B=j("bt-loading");return o(),n("div",ns,[i("div",is,[i("div",rs,[i("span",{onClick:l[0]||(l[0]=(...e)=>s(t).goSoft&&s(t).goSoft(...e)),class:"cursor-pointer hover:text-primary font-alibaba-semibold"},"软件"),m(L,{"popper-class":"myPopover",placement:"right-start",visible:s(a),width:"400",onShow:l[7]||(l[7]=e=>s(t).showPopoverHandle(""))},{reference:p(()=>[m(d,{ref:"softButton",class:"soft-button-no-padding",type:"default",title:"软件自定义编辑",link:"",onClick:l[6]||(l[6]=e=>a.value=!s(a))},{default:p(()=>[...l[10]||(l[10]=[i("i",{class:"svgtofont-el-more-filled text-[#22223F] !text-[1.8rem] hover:text-[#20a53a] inline-block",style:{transform:"rotate(90deg)"}},null,-1)])]),_:1},512)]),default:p(()=>[i("div",{ref_key:"containerRef",ref:y,class:"plugin-box p-[.8rem]",onMouseleave:l[5]||(l[5]=(...e)=>s(t).leave&&s(t).leave(...e))},[i("div",cs,[m(f,{placeholder:"请输入要搜索的应用",modelValue:s(u),"onUpdate:modelValue":l[2]||(l[2]=e=>E(u)?u.value=e:null),"fetch-suggestions":s(t).querySearch,"trigger-on-focus":!1,class:"search-input w-full","popper-class":"soft-search-popover",onKeyup:l[3]||(l[3]=re(e=>s(t).searchPluginHandle("select"),["enter","native"])),onSelect:l[4]||(l[4]=e=>s(t).searchPluginHandle())},{append:p(()=>[m(d,{onClick:l[1]||(l[1]=e=>s(t).searchPluginHandle("select"))},{default:p(()=>[...l[9]||(l[9]=[i("i",{class:"svgtofont-el-search"},null,-1)])]),_:1})]),_:1},8,["modelValue","fetch-suggestions"])]),R((o(),v(T,{data:s(x),height:"400"},{default:p(()=>[m(b,{width:"260",property:"date",label:"软件名称"},{default:p(e=>[i("div",ds,[i("img",{class:"plugin-img",src:s(t).renderSoftImages(e.row.name)},null,8,us),i("span",ms,r(e.row.title)+" "+r(e.row.version),1)])]),_:1}),m(b,{property:"setup",sortable:"",label:"首页显示",prop:"index_display"},{default:p(e=>[m(k,{modelValue:e.row.index_display,"onUpdate:modelValue":t=>e.row.index_display=t,"active-color":"#20A53A","inactive-color":"#CDCDCD",width:32,size:"small",onChange:a=>s(t).changeSwitchHandle(e.row,e.$index)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])),[[M,s(t).load],[B,s(w)]])],544)]),_:1},8,["visible"])])]),R((o(),n("div",ps,[m(ce,null,{default:p(()=>[(o(!0),n(C,null,S(s(P),(e,a)=>(o(),n("div",{key:e.name+"_id",class:I(e.title?"box-wrapper cursor-pointer relative":"")},[a<12?(o(),n(C,{key:0},[e.id&&e.setup?(o(),n("div",{key:0,onClick:a=>s(t).openSoftView(e)},[i("i",{class:"svgtofont-icon-drag !text-[1.4em] text-[#666] !hidden absolute right-6 top-6 cursor-move mover soft-move",onClick:l[8]||(l[8]=se(()=>{},["stop"]))}),e.tag?(o(),n("span",fs)):c("",!0),i("div",hs,[i("div",ys,[i("img",{src:s(t).renderSoftImages(e.name),class:"w-[4rem]",custom:!s(Qe)},null,8,gs)])]),i("div",xs,[i("span",bs,[h(r(e.title.replace(/PHP-[{0-9},\.]+/,"PHP-")+" "+e.version)+" ",1),R(i("i",{style:q("color:".concat(s(t).softStatusColor(e))),class:I("ml-[5px] svgtofont-icon-".concat(s(t).softStatus(e)))},null,6),[[z,5===e.type]])])])],8,vs)):s(Ze)(e)?c("",!0):(o(),n(C,{key:1},[i("div",{onClick:a=>s(t).openRecommendSoftView(e),class:"absolute rounded-[3px] left-2 top-2 py-.5 px-3 transform scale-75 bg-[#efefef] text-[#999] opacity-80"},"推荐",8,ws),i("div",_s,[i("div",ks,[i("img",{src:"".concat(s(Qe)?"/static/images":"/static/img","/soft_ico/ico-").concat(e.name,".png"),class:"w-[4rem]"},null,8,Cs)])]),i("div",Ss,[i("div",Is,[h(r(e.title)+" "+r(e.version),1),l[11]||(l[11]=i("span",{class:"text-btColor"},null,-1))])]),i("div",Ps,[e.preview?(o(),v(d,{key:0,type:"default",size:"small",onClick:a=>s(t).openSoftPreLink(e),plain:""},{default:p(()=>[...l[12]||(l[12]=[h("预览",-1)])]),_:2},1032,["onClick"])):c("",!0),e.isBuy?c("",!0):(o(),v(d,{key:1,type:"success",size:"small",plain:"",onClick:a=>s(t).openLtdPayView(e)},{default:p(()=>[...l[13]||(l[13]=[h("购买",-1)])]),_:2},1032,["onClick"])),e.isBuy&&!e.install?(o(),v(d,{key:2,type:"success",size:"small",plain:"",onClick:a=>s(t).openInstall(e)},{default:p(()=>[...l[14]||(l[14]=[h("安装",-1)])]),_:2},1032,["onClick"])):c("",!0)])],64))],64)):c("",!0)],2))),128))]),_:1})])),[[B,s(_)],[B,"正在获取软件列表，请稍后...","title"]])])}}}),[["__scopeId","data-v-199a917a"]]),Ls={class:"monitor monitor-chart w-full"},Ms=Se(e({__name:"main",props:pe({info:{default:()=>({info:[],option:{}})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:a}){const l=ve(e,"modelValue"),i=t();b(l,e=>{e&&u(e)});const{BtECharts:r,getEChart:c,setOption:d}=Xe({options:{xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{boundaryGap:[0,"50%"],type:"value"},series:[]}}),u=async e=>{var t;d(p(e)),i.value=await c(),null==(t=i.value)||t.resize()},p=(e={})=>{var t;const a={grid:{right:"5%",bottom:"6%",top:"6%"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:e.formatter},xAxis:{type:"category",boundaryGap:!1,data:e.tData,axisLine:{lineStyle:{color:"#cccccc"}}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitNumber:e.splitNumber,min:0,..."iostat"===(null==(t=l.value)?void 0:t.type)?{axisLabel:{formatter:(e,t)=>Ae(e,!1,0),color:"#666"}}:{},splitLine:{lineStyle:{color:"#cccccc"}},axisLine:{lineStyle:{color:"#cccccc"}}},series:[]},{legend:s,dataZoom:o,list:n}=e;return s&&(a.legend=s),o&&(a.dataZoom=o),n.forEach(e=>{const t={name:e.name,data:e.data,type:e.type||"line",smooth:e.smooth||!0,symbol:"circle",symbolSize:6,showSymbol:!0,emphasis:{symbolSize:8},sampling:e.sampling||"average",areaStyle:e.areaStyle||{},lineStyle:{...e.lineStyle||{}},itemStyle:{...e.itemStyle||{},borderColor:"#fff",borderWidth:"1px"}};a.series.push(t)}),a};return a({echartRef:i,setConfig:u}),(e,t)=>(o(),n("div",Ls,[B(e.$slots,"default",{},void 0,!0),m(s(r),{class:"w-full"})]))}}),[["__scopeId","data-v-f3ecbdc6"]]),Es=w("HOME-MONITOR-STORE",()=>{const e=ft(),{isRefreshData:a}=d(e),l=t(!0),s=t(!1),o=t(),n=t(),i=t("net"),r=t(localStorage.getItem("netUnit")||"KB"),c=le({}),m=le({}),p=t([]),v=t([]),f=M({net:{selectVal:"ALL",selectList:[],data:{timeList:[],upList:[],downList:[]},info:{up:{label:"上行",value:"0 B",bgColor:"#20a53a"},down:{label:"下行",value:"0 B",bgColor:" #FF9901"},upTotal:{label:"总发送",value:"0 B"},downTotal:{label:"总接收",value:"0 B"}}},iostat:{selectVal:"ALL",selectList:[],data:{timeList:[],readList:[],writeList:[],tipsList:[]},info:{read:{label:"读取",value:"0 B",bgColor:"#FF4683"},write:{label:"写入",value:"0 B",bgColor:"#6CC0CF"},second:{label:"每秒读写",value:"0次"},io:{label:"IO延迟",value:"0 ms",color:"#20a53a"}}}}),h=t([{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!1}]);let y;var g;(g=y||(y={})).Net="net",g.Iostat="iostat",zt.useSetCallback("network",e=>{var t,a;if(!e)return;p.value=e,"net"===i.value&&_(e,r.value);const l=L("net","data");c.value=C(l),(null==(a=null==(t=T(i.value))?void 0:t.echartRef)?void 0:a.id)&&(s.value=!1),b()}),zt.useSetCallback("diskIo",async e=>{var t,a;if(!e)return;v.value=e,"iostat"===i.value&&S(e);const l=L("iostat","data");m.value=I(l),(null==(a=null==(t=T(i.value))?void 0:t.echartRef)?void 0:a.id)&&(s.value=!1),b()});const x=u(()=>f[i.value].selectVal),b=()=>{for(const e in f){const t=E(e),a=f[e],{selectList:l}=a;l.length=0,Object.keys(t).forEach(e=>{if("ALL"===e)return a.selectVal||(a.selectVal=e),void l.unshift({label:"所有",value:"ALL"});l.push({label:e,value:e})})}},w=(e,t)=>{const{up:a,down:l,upTotal:s,downTotal:o}=e;return{up:Ae(1024*a,!1,2,t),down:Ae(1024*l,!1,2,t),upTotal:Ae(1024*s,!1,2,t),downTotal:Ae(1024*o,!1,2,t)}},_=(e,t)=>{const{info:a}=L("net"),l=e[x.value||"ALL"];if(!l)return;const{up:s,down:o,upTotal:n,downTotal:i}=a,r=w(l,t),c=w(l,"MB");if(s.value=Ae(1024*l.up,!0,1),o.value=Ae(1024*l.down,!0,1),n.value=Ae(l.upTotal,!0,1),i.value=Ae(l.downTotal,!0,1),100*parseFloat(c.down)==0||100*parseFloat(c.down)==0)h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!0},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{const e=w(l,"GB");if(100*parseFloat(e.down)==0||100*parseFloat(e.down)==0)h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{const e=w(l,"TB");100*parseFloat(e.down)!=0&&100*parseFloat(e.down)!=0||(h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!0}])}}P("net",[{key:"timeList"},{key:"upList",value:r.up},{key:"downList",value:r.down}])},C=e=>({dataZoom:[],tData:e.timeList,list:[{name:"上行",data:e.upList,circle:"circle",itemStyle:{color:"#20a53a"},lineStyle:{width:2,color:"#20a53a"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(32, 165, 58, .6)"},{offset:.8,color:"rgba(32, 165, 58, 0)"}]}}},{name:"下行",data:e.downList,circle:"circle",itemStyle:{color:" #FF9901"},lineStyle:{width:2,color:"#FF9901"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 153, 1, .6)"},{offset:.8,color:"rgba(255, 153, 1, 0)"}]}}}],formatter(e){let t="";for(let a=0;a<e.length;a++){const l=e[a];if(We(l.data))return!1;t+='<span class="inline-block w-[1rem] h-[1rem] mr-[1rem]" style="border-radius: 50%; background: '.concat(l.color,';"></span>').concat(l.seriesName,"：").concat(Ae(1024*parseFloat(l.data),!0,1),"/s ").concat(e.length-1!==a?"<br />":"")}return"时间：".concat(e[0].axisValue,"<br />").concat(t)}}),S=e=>{const{info:t}=L("iostat"),a=e[f.iostat.selectVal||"ALL"],{read:l,write:s,second:o,io:n}=t;if(!a)return;const{read_bytes:i,write_bytes:r}=a,{read_count:c,write_count:d}=a,{read_time:u,write_time:m}=a;l.value=Ae(i,!0,1),s.value=Ae(r,!0,1),o.value="".concat(c+d," 次"),n.value="".concat(m>u?m:u," ms");const p=parseInt(n.value);n.color=p>=1e3?"#ff0000":p>100&&p<1e3?"#ff9900":"#20a53a",P("iostat",[{key:"timeList"},{key:"readList",value:i},{key:"writeList",value:r},{key:"tipsList",value:a}])},I=e=>({dataZoom:[],type:"iostat",tData:e.timeList,list:[{name:"读取字节数",data:e.readList,circle:"circle",itemStyle:{color:"#FF4683"},lineStyle:{width:2,color:"#FF4683"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 70, 131, .8)"},{offset:.8,color:"rgba(255, 70, 131, 0)"}]}}},{name:"写入字节数",data:e.writeList,circle:"circle",itemStyle:{color:"#6CC0CF"},lineStyle:{width:2,color:"#6CC0CF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(108, 192, 207, .8)"},{offset:.8,color:"rgba(108, 192, 207, 0)"}]}}}],formatter(t){let a="时间：".concat(t[0].axisValue,"<br />");const l={read_bytes:"读取字节数",read_count:"读取字节数",read_merged_count:"合并读取次数",read_time:"读取延迟",write_bytes:"写入字节数",write_count:"写入次数",write_merged_count:"合并写入次数",write_time:"写入延迟"},s=e.tipsList[t[0].dataIndex];for(let e=0;e<t.length;e++){const l=t[e];if(We(l.data))return!1;a+='<span class="inline-block w-[1rem] h-[1rem] mr-[.1rem]" style="border-radius: 50%; background: '.concat(l.color,';"></span>&nbsp;&nbsp;<span>').concat(l.seriesName,"：").concat(Ae(parseFloat(l.data),!0,1),"/s</span><br />")}return["read_count","write_count","read_merged_count","write_merged_count","read_time","write_time"].forEach(e=>{const t=s[e],o=t>100&&t<1e3?"#ff9900":t>=1e3?"red":"#20a53a",n=e.indexOf("time")>-1?"color: ".concat(o):"",i=e.indexOf("time")>-1?" ms":" 次/秒";a+='<span class="inline-block w-[1rem] h-[1rem]"></span>&nbsp;&nbsp;<span style="'.concat(n,'">').concat(l[e],"：").concat(t+i,"</span><br />")}),a}}),P=(e,t,a=8)=>{const l=L(e,"data");t.forEach(e=>{const{key:t,value:s}=e,o=l[t];o.length>=a&&o.splice(0,1),"timeList"==t?o.push(Ye((new Date).getTime(),"hh:mm:ss",!0)):o.push(s)})},T=e=>"net"==e?o.value:"iostat"==e?n.value:void 0,L=(e="net",t="")=>t?f[e][t]:f[e],E=(e="net")=>"net"==e?p.value:"iostat"==e?v.value:{};return{netRefs:o,iostatRefs:n,loading:s,iostatConfig:m,resource:f,unitList:h,activeName:i,netConfig:c,netUnit:r,initChart:()=>{s.value=!0;const e=localStorage.getItem("home-model-active"),t=localStorage.getItem("home-".concat(e,"-active"));e&&(i.value=e,f[e].selectVal=t||"ALL"),k(()=>{a.value=!0});const l=L("net","data");c.value=C(l);const o=L("iostat","data");m.value=I(o)},onSelectChange:()=>{localStorage.setItem("home-model-active",i.value),localStorage.setItem("home-".concat(i.value,"-active"),x.value),"net"===i.value?_(p.value,r.value):S(v.value)},onNetUnitChange:()=>{f.net.data.timeList=[],f.net.data.upList=[],f.net.data.downList=[],localStorage.setItem("netUnit",r.value),_(p.value,r.value)},onTabsChange:()=>{const e=i.value;localStorage.setItem("home-model-active",e);const t=localStorage.getItem("home-".concat(e,"-active"));t&&f[e].selectList.some(e=>e.value===t)?f[e].selectVal=t:f[e].selectVal="ALL",k(()=>{const t=T(e);if((null==t?void 0:t.echartRef)&&setTimeout(()=>{t.echartRef.resize()},100),l.value&&"iostat"===e){l.value=!1;const e=L("iostat","data");t&&e&&t.setConfig(I(e))}})}}}),Ds={class:"module-ui"},js={class:"module-ui-header"},Bs={class:"flex justify-between items-center w-full -ml-[1.4rem]"},Rs={class:"flex items-center"},Os={class:"flex items-center"},As={class:"text-[#888] font-500 text-[1.2rem] mr-[1.5rem] whitespace-pre"},Fs={class:"module-ui-body"},Vs=e({__name:"index",setup(a){const c=t(!1),h=t(!1),y=e({name:"NetMonitor",setup(e,{emit:t}){const a=Es(),{netConfig:s,resource:o,unitList:n,netUnit:i,netRefs:r}=d(a);return l(()=>{t("cache-status",{type:"net",cached:!0})}),()=>m("div",{class:"home-monitor-content"},[m("div",{class:"home-monitor__stats-grid"},[Object.values(o.value.net.info).map((e,t)=>m("div",{key:t,class:"home-monitor__stat-item"},[m("div",{class:"home-monitor__stat-content"},[m("div",{class:"home-monitor__stat-left"},[e.bgColor&&m("div",{class:"home-monitor__stat-dot-wrapper"},[m("span",{class:"home-monitor__stat-dot",style:{backgroundColor:e.bgColor}},null),m("span",{class:"home-monitor__stat-dot-ripple",style:{borderColor:e.bgColor}},null)]),m("span",{class:"home-monitor__stat-label"},[e.label])]),m("div",{class:"home-monitor__stat-right"},[m("div",{class:"home-monitor__stat-value",style:{color:e.color||"#777"}},[e.value])])])]))]),m("div",{class:"home-monitor__chart-container"},[m(Ms,{ref:r,modelValue:s.value,info:o.value.net.info},null)])])}}),g=e({name:"IostatMonitor",setup(e,{emit:t}){const a=Es(),{iostatConfig:s,resource:o,iostatRefs:n}=d(a);return l(()=>{t("cache-status",{type:"iostat",cached:!0})}),()=>m("div",{class:"home-monitor-content"},[m("div",{class:"home-monitor__stats-grid"},[Object.values(o.value.iostat.info).map((e,t)=>m("div",{key:t,class:"home-monitor__stat-item"},[m("div",{class:"home-monitor__stat-content"},[m("div",{class:"home-monitor__stat-left"},[e.bgColor&&m("div",{class:"home-monitor__stat-dot-wrapper"},[m("span",{class:"home-monitor__stat-dot",style:{backgroundColor:e.bgColor}},null),m("span",{class:"home-monitor__stat-dot-ripple",style:{borderColor:e.bgColor}},null)]),m("span",{class:"home-monitor__stat-label"},[e.label])]),m("div",{class:"home-monitor__stat-right"},[m("div",{class:"home-monitor__stat-value",style:{color:e.color||"#777"}},[e.value])])])]))]),m("div",{class:"home-monitor__chart-container"},[m(Ms,{ref:n,modelValue:s.value,info:o.value.iostat.info},null)])])}}),x=Es(),{loading:b,resource:w,activeName:_}=d(x),k=u(()=>"net"===_.value?y:g),P=u(()=>"net"===_.value?"正在获取流量信息，请稍候...":"正在获取磁盘IO信息，请稍候..."),T=e=>{"net"===e.type?c.value=e.cached:"iostat"===e.type&&(h.value=e.cached)},L=e=>{_.value!==e&&(performance.now(),_.value=e,x.onTabsChange())};return l(()=>{const e=localStorage.getItem("home-model-active");e&&["net","iostat"].includes(e)&&(_.value=e),x.initChart()}),(e,t)=>{const a=he,l=ye,c=j("bt-loading");return o(),n("div",Ds,[i("div",js,[i("div",Bs,[i("div",Rs,[i("div",{class:I(["tab-item",{active:"net"===s(_)},"font-alibaba-semibold"]),onClick:t[0]||(t[0]=e=>L("net"))},"流量",2),i("div",{class:I(["tab-item",{active:"iostat"===s(_)},"font-alibaba-semibold"]),onClick:t[1]||(t[1]=e=>L("iostat"))},"磁盘IO",2)]),i("div",Os,[i("span",As,r("net"===s(_)?"网卡":"磁盘"),1),(o(!0),n(C,null,S(s(w),(e,t)=>R((o(),v(l,{key:t,modelValue:e.selectVal,"onUpdate:modelValue":t=>e.selectVal=t,placeholder:"请选择","fit-input-width":!0,onChange:s(x).onSelectChange,size:"small",class:"!min-w-[100px] !rounded-[.8rem]"},{default:p(()=>[(o(!0),n(C,null,S(e.selectList,e=>(o(),v(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])),[[z,"".concat(t)==s(_)]])),128))])])]),i("div",Fs,[(o(),v(fe,null,[R((o(),v(f(s(k)),{key:s(_),"v-bt-loading:title":s(P),onCacheStatus:T},null,40,["v-bt-loading:title"])),[[c,s(b)]])],1024))])])}}}),Ws=w("RECOMMEND-STORE",()=>{const{payment:e}=xe(),{authType:l,authExpirationTime:s}=a(e.value),o=t(!1),n=t([["time","5分钟极速响应"],["refund","15天无理由退款"],["plunge","30+款付费插件"],["function","20+企业版专享功能"],["certificate","2张SSL商用证书（年付）"],["message","1000条免费短信（年付）"]]),i=t([["speed","5分钟极速响应"],["fifteen","15天无理由退款"],["plugin","30+款付费插件"],["more","20+企业版专享功能"],["recom","2张SSL商用证书（年付）"],["message","1000条免费短信（年付）"]]),r=t(["多对一技术支持","全年5次安全排查","5分钟极速响应","30+款付费插件","20+企业版专享功能","1000条免费短信（年付）","2张SSL商用证书（年付）","一对一服务（年付）","WAF防火墙","更换授权IP","客服优先响应","15+款付费插件","15天无理由退款"]),c=t([0,0,0,0,0,0,0,0,1,1,1,1,1]),d=t([0,0,1,1,1,1,1,1,1,1,1,1,1]),u=t([1,1,1,1,1,1,1,1,1,1,1,1,1]),m=t(!1),p=t(!0);return{plusPrivilegeList:u,ltdPrivilegeList:d,proPrivilegeList:c,privilegeList:r,limitTimeShow:m,advantageList:n,newAdvantageList:i,recommendShow:p,showPrivilege:o,authType:l,authExpirationTime:s,setRecommendHide:e=>{const t=((new Date).getTime()+864e5*e).toString();localStorage.setItem("HOME-RECOMMEND-HIDE-TIME",t),p.value=!1},checkRecommendHide:()=>{const e=parseInt(localStorage.getItem("HOME-RECOMMEND-HIDE-TIME")||"0");e&&(p.value=e<(new Date).getTime())},openProduct:e=>ct({sourceId:e,disablePro:!0})}}),zs={key:0,class:"h-auto"},Ns={class:"absolute left-0 right-0 flex items-center px-[16px]"},Hs={class:"advantage-list"},Us={class:"text-[#888] text-[1.3rem]"},qs={class:"absolute left-0 right-0 flex items-center px-[16px]"},Gs={class:"flex items-center"},$s={class:"relative mr-[2rem]"},Ks={class:"advantage-list"},Js={class:"text-[#888] text-[1.3rem]"},Qs={class:"p-[24px] flex justify-center flex-col items-center"},Zs={class:"flex items-center mt-[20px]"},Xs={class:"flex-col items-center border border-[rgb(221,221,221)] justify-center w-[22rem]"},Ys={class:"flex flex-col text-[1.4rem] text-[#666] function-text"},eo={class:"flex-col border border-[#FFEFD0] items-center bg-[#fff8eb] justify-center w-[22rem]"},to={class:"text-[2rem] text-[#333] font-medium h-[9.4rem] leading-[9.4rem] text-center"},ao={class:"flex flex-col text-[1.4rem] text-[#666] pro-text"},lo={key:0,class:"svgtofont-el-close text-[red] text-[3px]l font-bold"},so={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},oo={key:0,class:"recommend-left"},no={class:"text-[#E5A734] flex justify-center font-bold"},io={class:"flex flex-col text-[1.4rem] text-[#666] ltd-text"},ro={key:0,class:"svgtofont-el-close text-[red] text-[18px] font-bold"},co={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},uo={key:0,class:"svgtofont-el-close text-[red] text-[18px] font-bold"},mo={key:1,class:"svgtofont-el-check text-[#feaa04] text-[18px] font-bold"},po=Se(e({__name:"index",setup(e){const{forceLtd:t,aliyunEcsLtd:a,authRemainingDays:u}=xe(),v=Ws(),{plusPrivilegeList:f,ltdPrivilegeList:y,proPrivilegeList:g,privilegeList:x,limitTimeShow:b,advantageList:w,newAdvantageList:_,recommendShow:k,showPrivilege:P,authType:T,authExpirationTime:L}=d(v);return l(()=>{v.checkRecommendHide()}),(e,l)=>{const d=Ie,w=pt,M=et,D=tt;return!s(k)||s(t)||s(a)?c("",!0):(o(),n("div",zs,["ltd"===s(T)?(o(),n("div",{key:0,class:"advantage-view",onMouseover:l[2]||(l[2]=e=>b.value=!0),onMouseleave:l[3]||(l[3]=e=>b.value=!1)},[i("div",Ns,[i("div",{class:"flex items-center text-[1.3rem] mr-[3rem] flex-shrink-0 cursor-pointer",onClick:l[0]||(l[0]=e=>s(v).openProduct(28))},[l[11]||(l[11]=i("div",{class:"ltd-privilege-title flex flex-shrink-0 items-center ltd-title-edit"},[i("span",{class:"text-[1.4rem] pl-[2.4rem] font-bold"}," 企业版 ")],-1)),i("span",{class:I({"text-danger":s(u)<7,"text-[#fc6d26]":s(u)>=7,"ml-[8px]":!0,"font-bold":!0})},r(s(Ye)(s(L),"yyyy-MM-dd")),3),m(d,{class:"ml-[8px]",size:"13px"},{default:p(()=>[...l[10]||(l[10]=[h("续费",-1)])]),_:1})]),i("div",Hs,[(o(!0),n(C,null,S(s(_),(e,t)=>(o(),n("div",{class:"advantage-item",key:t},[m(w,{name:"tools-".concat(e[0]),size:"20",class:"mr-[4px]"},null,8,["name"]),i("span",Us,r(e[1]),1)]))),128))])]),R(i("div",{class:"day-not-display",onClick:l[1]||(l[1]=e=>s(v).setRecommendHide(3))},[...l[12]||(l[12]=[i("i",{class:"svgtofont-el-close"},null,-1),i("span",null,"近3天不再显示",-1)])],512),[[z,s(b)]])],32)):"free"===s(T)?(o(),n("div",{key:1,class:"advantage-view",onMouseover:l[6]||(l[6]=e=>b.value=!0),onMouseleave:l[7]||(l[7]=e=>b.value=!1)},[i("div",qs,[i("div",Gs,[i("div",$s,[i("button",{class:"product-payment-btn",onClick:l[4]||(l[4]=e=>s(v).openProduct(27))},[...l[13]||(l[13]=[i("span",{class:"ml-[1.2rem text-[1.4rem]"}," 立即开通 ",-1)])])]),l[14]||(l[14]=i("div",{class:"ltd-privilege-title flex flex-shrink-0 items-center mr-[8px]"},[i("span",{class:"text-[1.6rem] ml-[.4rem] mr-[2rem] pl-[3rem] font-bold"}," 企业版VIP特权 ")],-1))]),i("div",Ks,[(o(!0),n(C,null,S(s(_),(e,t)=>(o(),n("div",{class:"advantage-item",key:t},[m(w,{name:"tools-".concat(e[0]),size:"20",class:"mr-[4px]"},null,8,["name"]),i("span",Js,r(e[1]),1)]))),128))])]),R(i("div",{class:"day-not-display",onClick:l[5]||(l[5]=e=>s(v).setRecommendHide(1))},[...l[15]||(l[15]=[i("i",{class:"svgtofont-el-close"},null,-1),h("近24小时不再显示",-1)])],512),[[z,s(b)]])],32)):c("",!0),m(D,{modelValue:s(P),"onUpdate:modelValue":l[9]||(l[9]=e=>E(P)?P.value=e:null),area:96},{default:p(()=>[i("div",Qs,[m(M,{src:"/advantage/privilege-contrast.png"}),i("div",Zs,[i("div",Xs,[l[16]||(l[16]=i("p",{class:"text-[2rem] text-[#333] font-bold h-[9.4rem] leading-[9.4rem] text-center"},"功能特权",-1)),i("ul",Ys,[(o(!0),n(C,null,S(s(x),(e,t)=>(o(),n("li",{class:"px-[24px] h-[4rem] leading-[4rem]",key:t},r(e),1))),128))])]),i("div",eo,[i("div",to,[i("p",null,[m(M,{src:"/advantage/privilege-pro.svg",class:"mr-[8px]"}),l[17]||(l[17]=h("专业版",-1))])]),i("ul",ao,[(o(!0),n(C,null,S(s(g),(e,t)=>(o(),n("li",{class:"px-[24px] h-[4rem] leading-[4rem] text-center",key:t},[e?(o(),n("i",so)):(o(),n("i",lo))]))),128))])]),(o(),n(C,null,S(2,(e,t)=>i("div",{class:I(["w-[22rem] bg-[#272a2c] flex-col relative",t?"":"border-2 border-[#787878] h-[64.6rem] shadow"]),key:t},[0===t?(o(),n("span",oo)):c("",!0),i("div",{class:I(["text-[2rem] flex flex-col justify-center items-center",t?" h-[9.4rem]":" h-[11rem]"])},[i("div",no,[m(M,{class:"mr-[8px]",src:"/advantage/privilege-diamond.svg"}),i("span",{class:I(t?"":"linear")},r(t?"企业运维托管":"企业版"),3)]),i("button",{class:I(["px-[20px] py-[4px]",t?"linear text-border privilege-button font-bold":"button-linear privilege-button"]),onClick:l[8]||(l[8]=e=>s(v).openProduct(45))},"立即购买",2)],2),i("ul",io,[0===t?(o(!0),n(C,{key:0},S(s(y),(e,t)=>(o(),n("li",{key:t},[e?(o(),n("i",co)):(o(),n("i",ro))]))),128)):c("",!0),0!=t?(o(!0),n(C,{key:1},S(s(f),(e,t)=>(o(),n("li",{key:t},[e?c("",!0):(o(),n("i",uo)),e?(o(),n("i",mo)):c("",!0)]))),128)):c("",!0)])],2)),64))])])]),_:1},8,["modelValue"])]))}}}),[["__scopeId","data-v-2bd87120"]]),vo={class:"pt-[1.2rem]"},fo=Se(e({__name:"index",setup(e){const{getAlarmData:r,forceLtd:u,payment:f,panel:h,aliyunEcsLtd:y,getUserInfo:g,isHideAd:x}=xe(),w=ft(),{panelInfo:k}=d(w),{isRestart:C}=a(k.value),S=_(),I=ge(),P=t(null),T=t(0);Z(P,e=>{const t=e[0];T.value=t.contentRect.width});let L=null;return b(()=>h.value.initInstall,e=>{if(!e){if((u.value||y.value)&&"free"===f.value.authType)return;w.recommendInstallDialog()}},{immediate:!0,deep:!0}),l(async()=>{if("bind-cupon"===I.query.model){const e={...I.query};delete e.model,S.replace({path:I.path,query:e}),await g(),ct({disablePro:!0,sourceId:999})}w.monitorLoginInfo(),L=at({idle:36e5,request:async()=>(await w.getSystemInfo(),C.value),timeout:3e3,retries:3}),w.getHomeConfig(),st({promises:[r,w.getUpdateInfoNew],delay:1e3}),setTimeout(()=>{u.value&&"ltd"===f.value.recommendAuth&&f.value.authExpirationTime<0&&ct({compulsionLtd:!0})},2e3)}),$(()=>{null==L||L.stop(),lt(["/system?action=GetNetWork","/panel/overview/GetOverview","/plugin?action=get_index_list","/ajax?action=get_pay_type","/mod/push/task/get_task_list","/auth?action=get_coupon_list"])}),(e,t)=>{const a=J,l=Q;return o(),n("section",vo,[m(Wt,{class:"mx-[1.2rem] !rounded-[1.6rem]"}),m(l,{span:24},{default:p(()=>[m(a,{span:24},{default:p(()=>[m(Gt),i("div",{ref_key:"stateMainRef",ref:P},[m(Al,{class:"px-[1.2rem]","main-width":s(T)},null,8,["main-width"])],512),m(os)]),_:1})]),_:1}),m(l,{span:24,class:"px-[1.2rem]"},{default:p(()=>[m(l,{span:24,gutter:12,class:"flex-1"},{default:p(()=>[m(a,{md:24,sm:24,span:12,xs:24,lg:12},{default:p(()=>[m(Vs,{class:"mb-0 monitor-view"})]),_:1}),m(a,{md:24,sm:24,span:12,xs:24,lg:12},{default:p(()=>[m(Ts,{class:"mb-0 software-view"})]),_:1})]),_:1})]),_:1}),s(x)?c("",!0):(o(),v(po,{key:0,class:"mt-[1.2rem] mx-[1.2rem]"}))])}}}),[["__scopeId","data-v-c5ff123b"]]),ho=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"}));export{Vl as H,$t as a,Kt as b,ho as i};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
