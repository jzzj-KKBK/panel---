import{c as a,r as e,w as t,q as s,v as o,e as r,A as m,F as l,a_ as p,M as n,x as d,C as c,Q as u,a9 as i,a7 as f}from"./base-lib.js?v=1756369731";import{K as _,j as w,e as b}from"./utils-lib.js?v=1756369731";import{updateTableData as h,createTableData as D}from"./database.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const v={class:"p-[20px] max-h-[50rem] overflow-auto"},y=b(a({__name:"insert-data",props:{compData:{default:{keys:[],row:{},path:"",table:"",refresh:()=>{}}}},setup(a,{expose:b}){const y=a,g=e(),k=e({});t(()=>y.compData.keys,()=>{var a;null==(a=y.compData.keys)||a.forEach(a=>{k.value[a.name]=y.compData.row?y.compData.row[a.name]:""})},{immediate:!0});const j={path:[{required:!0,message:"请选择数据库文件",trigger:["blur","change"]}]};return b({onConfirm:async a=>{await g.value.validate();let e={path:y.compData.path,table:y.compData.table,new_data:k.value,where_data:y.compData.row};const t=y.compData.row;t||delete e.where_data,e=JSON.stringify(e),await _({loading:"正在提交，请稍后...",request:t?h({data:e}):D({data:e}),message:!0}),a(),y.compData.refresh()}}),(a,e)=>{const t=w,_=i,b=f;return s(),o("div",v,[r(b,{model:d(k),ref_key:"insertDataForm",ref:g,rules:j,onSubmit:e[0]||(e[0]=u(()=>{},["prevent"]))},{default:m(()=>[(s(!0),o(l,null,p(a.compData.keys,(a,e)=>(s(),o(l,null,[1!==a.pk?(s(),n(_,{label:a.name,prop:a.name,key:e},{default:m(()=>[r(t,{type:"text",modelValue:d(k)[a.name],"onUpdate:modelValue":e=>d(k)[a.name]=e,name:"item.name",width:"28rem"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"])):c("",!0)],64))),256))]),_:1},8,["model"])])}}}),[["__scopeId","data-v-5cbc35c0"]]);export{y as default};
