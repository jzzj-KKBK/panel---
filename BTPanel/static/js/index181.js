import{l as a,L as t,K as e,k as s,o as l}from"./utils-lib.js?v=1756369731";import{_ as o}from"./index103.js?v=1756369731";import{c as r,r as i,p as n,q as p,v as d,e as m,A as c,B as u,x as _,y as b,z as v,C as f,F as y,a_ as h,D as g}from"./base-lib.js?v=1756369731";import{getMysqlCloudServer as j,getModulesCloudServer as x,removeServer as w,removeModuleServer as k}from"./database.js?v=1756369731";import{g as q}from"./useStore2.js?v=1756369731";import{u as A}from"./column.js?v=1756369731";import{q as C}from"./useMethod4.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";import"./validator.js?v=1756369731";const S={class:"p-[20px]"},D={class:"ml-20px mt-12px leading-8 text-[1.2rem] list-disc"},E={key:0},L={key:1},O=r({__name:"index",setup(r){const{refs:{tabActive:O,isHaveServer:F},refreshTableList:H}=q(),J=i([]),N=[{content:"支持阿里云、腾讯云等云厂商的云数据库"},{content:"注意1：请确保本服务器有访问数据库的权限"},{content:"注意2：请确保填写的管理员帐号具备足够的权限"}],T=e=>{a({title:"".concat(e?"编辑":"添加","远程数据库"),area:[42],compData:{row:e,refreshEvent:()=>z()},showFooter:!0,component:()=>t(()=>import("./add-cloud-server.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},z=async()=>{const a=await e({loading:"正在获取数据中，请稍后...",request:"mysql"===O.value?j():x({data:JSON.stringify({type:O.value})},O.value),data:[Array,a=>a.filter(a=>0!==a.id)]});return J.value=a||[],F.value=a.length,a},B=[{prop:"db_host",label:"服务器地址",width:120},{prop:"db_port",label:"数据库端口"},{prop:"db_type",label:"数据库类型"},{prop:"db_user",label:"管理员名称"},{prop:"db_password",label:"管理员密码",width:150},{label:"备注",prop:"ps"},A([{onClick:a=>T(a),title:"编辑"},{onClick:a=>(async a=>{await l({title:"删除【".concat(a.db_host,"】远程数据库"),content:"该操作仅删除管理关系以及面板中的数据库记录，不会删除远程数据库中的数据,是否继续？",icon:"warning-filled"}),await e({loading:"正在删除中，请稍后...",request:"mysql"===O.value?w({id:a.id}):k({data:JSON.stringify({id:a.id})},O.value),message:!0}),z(),H()})(a),title:"删除"}])];return n(()=>{z()}),(a,t)=>{var e,l;const r=g,i=s,n=o;return p(),d("div",S,[m(n,null,{"header-left":c(()=>[m(r,{type:"primary",onClick:t[0]||(t[0]=a=>T())},{default:c(()=>[...t[1]||(t[1]=[u("添加远程数据库",-1)])]),_:1})]),content:c(()=>[m(i,{column:_(B),data:_(J),"max-height":300},null,8,["column","data"])]),_:1}),b("ul",D,[(null==(e=_(C))?void 0:e.length)&&_(C)[0]?(p(),d("li",E,v(_(C)[0]),1)):f("",!0),(p(),d(y,null,h(N,(a,t)=>b("li",{key:t},v(a.content),1)),64)),(null==(l=_(C))?void 0:l.length)&&_(C)[1]?(p(),d("li",L,v(_(C)[1]),1)):f("",!0)])])}}});export{O as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
