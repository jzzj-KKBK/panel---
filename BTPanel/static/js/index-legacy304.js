!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var u=null!=arguments[r]?arguments[r]:{};r%2?t(Object(u),!0).forEach(function(t){n(e,t,u[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))})}return e}function n(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var u=n.call(t,r||"default");if("object"!=e(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",u=r.toStringTag||"@@toStringTag";function a(r,n,u,a){var o=n&&n.prototype instanceof l?n:l,c=Object.create(o.prototype);return i(c,"_invoke",function(r,n,u){var a,o,i,l=0,c=u||[],f=!1,m={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,r){return a=t,o=0,i=e,m.n=r,s}};function v(r,n){for(o=r,i=n,t=0;!f&&l&&!u&&t<c.length;t++){var u,a=c[t],v=m.p,p=a[2];r>3?(u=p===n)&&(i=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=v&&((u=r<2&&v<a[1])?(o=0,m.v=n,m.n=a[1]):v<p&&(u=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,m.n=p,o=0))}if(u||r>1)return s;throw f=!0,n}return function(u,c,p){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&v(c,p),o=c,i=p;(t=o<2?e:i)||!f;){a||(o?o<3?(o>1&&(m.n=-1),v(o,i)):m.n=i:m.v=i);try{if(l=2,a){if(o||(u="next"),t=a[u]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(i=TypeError("The iterator does not provide a '"+u+"' method"),o=1);a=e}else if((t=(f=m.n<0)?i:r.call(n,m))!==s)break}catch(t){a=e,o=1,i=t}finally{l=1}}return{value:t,done:f}}}(r,u,a),!0),c}var s={};function l(){}function c(){}function f(){}t=Object.getPrototypeOf;var m=[][n]?t(t([][n]())):(i(t={},n,function(){return this}),t),v=f.prototype=l.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,u,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=f,i(v,"constructor",f),i(f,"constructor",c),c.displayName="GeneratorFunction",i(f,u,"GeneratorFunction"),i(v),i(v,u,"Generator"),i(v,n,function(){return this}),i(v,"toString",function(){return"[object Generator]"}),(o=function(){return{w:a,m:p}})()}function i(e,t,r,n){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}i=function(e,t,r,n){function a(t,r){i(e,t,function(e){return this._invoke(t,r,e)})}t?u?u(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},i(e,t,r,n)}function s(e,t,r,n,u,a,o){try{var i=e[a](o),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,u)}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./useStore-legacy8.js?v=1756369731","./form-item-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./column-legacy.js?v=1756369731"],function(e,t){"use strict";var n,a,i,l,c,f,m,v,p,g,d,b,y,h,S,j,w,O,z,_,N,q,P,x,E;return{setters:[function(e){n=e.M,a=e.K,i=e.G,l=e.a5,c=e.e},function(e){f=e.s,m=e.j,v=e.r,p=e.k,g=e.c,d=e.g,b=e.e,y=e.B,h=e.p,S=e.a4,j=e.q,w=e.v,O=e.x},function(e){z=e.aH},function(e){_=e.u,N=e.v},function(e){q=e.b,P=e.o,x=e.h,E=e.f},null,null,null],execute:function(){var t=m("FTP-CAPACITY-STORE",function(){var e=v();return{capacityData:v({used:0,size:0,status:!1,alarmSize:5,alarmNum:1,alarmModel:[],module:[],option:{}}),capFtpInfo:e,useSize:v()}}),I=function(){return f(t())},T=_().rowData,A=I(),F=A.capacityData,D=(A.capFtpInfo,A.useSize);p({size:[{required:!0,message:"容量不能为空",trigger:["blur"]},{validator:function(e,t,r){Number.isInteger(1*F.value.size)?r():r(new Error("容量必须为整数"))},trigger:["blur","change"]}],alarmSize:[{required:!0,message:"触发告警大小不能为空",trigger:["blur"]},{validator:function(e,t,r){F.value.status?Number.isInteger(1*F.value.alarmNum)?r():r(new Error("触发告警大小必须为整数")):r()},trigger:["blur","change"]}],alarmNum:[{required:!0,message:"告警次数不能为空",trigger:["blur"]},{validator:function(e,t,r){F.value.status?Number.isInteger(1*F.value.alarmNum)?r():r(new Error("告警次数必须为整数")):r()},trigger:["blur","change"]}],module:[{required:!0,validator:function(e,t,r){F.value.status&&0===F.value.module.length?r(new Error("请选择告警方式")):r()},trigger:["blur","change"]}]});var M=function(){var e=T.value.quota,t=e.quota_storage,r=e.quota_push;t&&(F.value.used=t.used,F.value.size=t.size),r&&void 0!==r.module&&(F.value.status=r.status,F.value.alarmSize=r.size,F.value.alarmNum=r.push_count,F.value.module=r.module.split(",")),function(){if(0===F.value.size)return D.value="未配置",void(F.value.useSize=D.value);var e=1024*F.value.size*1024;if(F.value.size>0&&F.value.used>=e)return D.value="当前容量已用完",void(F.value.useSize=D.value);D.value=(F.value.used/1024/1024).toFixed(2)||0,F.value.useSize=D.value}()},G=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F.value;return{path:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.value).path,quota_type:"ftp",quota_push:{status:t.status,size:Number(t.alarmSize),push_count:Number(t.alarmNum),module:null===(e=t.module)||void 0===e?void 0:e.join(",")},quota_storage:{size:Number(t.size)}}},k=function(){var e,t=(e=o().m(function e(t,r){var u,i;return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r();case 1:if(!(u=G(t.value)).quota_push.status||0!==u.quota_push.module.length){e.n=2;break}return n.error("请选择至少一种告警方式"),e.a(2,!1);case 2:return e.n=3,a({loading:"正在提交，请稍候...",request:N({data:JSON.stringify(u)}),data:{status:Boolean,msg:String}});case 3:return(i=e.v).status?n.success(i.msg):n.msg({message:i.msg,showClose:!0,dangerouslyUseHTMLString:!0,type:"error",customClass:"bt-message-error-html",duration:0}),e.a(2,i.status)}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,u){var a=e.apply(t,r);function o(e){s(a,n,u,o,i,"next",e)}function i(e){s(a,n,u,o,i,"throw",e)}o(void 0)})});return function(e,r){return t.apply(this,arguments)}}(),B=function(){F.value={used:0,size:0,status:!1,alarmSize:0,alarmNum:0,alarmModel:[],module:[],option:{}},T.value={}},C={class:"p-[2rem] container-dialog"},H=g({__name:"index",setup:function(e,t){var n=t.expose,a=I(),o=a.capacityData,s=a.useSize,c=i({data:o.value,options:function(e){var t={class:"!w-[220px]",clearable:!0};return d(function(){return[q("当前已用容量","useSize",{attrs:r(r({},t),{},{disabled:!0}),slots:l(s)?{append:function(){return b("span",{class:"text-gray-500"},[y("MB")])}}:{}}),q("当前容量配额","size",{attrs:r(r({},t),{},{type:"number",min:0}),slots:{append:function(){return b("span",{class:"text-gray-500"},[y("MB")])}},rules:[{required:!0,message:"容量不能为空",trigger:["blur"]},{validator:function(e,t,r){Number.isInteger(1*o.value.size)?r():r(new Error("容量必须为整数"))},trigger:["blur","change"]}]}),P("设置告警","status",{})].concat(u(e.value.status?[q("触发告警大小","alarmSize",{attrs:r(r({},t),{},{type:"number",min:0}),slots:{append:function(){return b("span",{class:"text-gray-500"},[y("MB")])}},rules:[{required:!0,message:"触发告警大小不能为空",trigger:["blur"]},{validator:function(e,t,r){o.value.status?Number.isInteger(1*o.value.alarmNum)?r():r(new Error("触发告警大小必须为整数")):r()},trigger:["blur","change"]}]}),q("触发次数","alarmNum",{attrs:r(r({},t),{},{type:"number",min:0}),slots:{append:function(){return b("span",{class:"text-gray-500"},[y("次")])}},rules:[{required:!0,message:"告警次数不能为空",trigger:["blur"]},{validator:function(e,t,r){o.value.status?Number.isInteger(1*o.value.alarmNum)?r():r(new Error("告警次数必须为整数")):r()},trigger:["blur","change"]}]}),x("告警方式",function(){return b(z,{class:"!w-[24rem]",modelValue:e.value.module,"onUpdate:modelValue":function(t){return e.value.module=t}},null)})]:[]),[E("",[{content:"需要XFS文件系统，且包含prjquota挂载参数才能使用"},{content:"fstab配置示例：/dev/vdc1 /data xfs defaults,prjquota 0 0"},{content:"配额容量：如需取消容量配额，请设为“0”"}])])})},submit:k}),f=c.BtForm;return n({onConfirm:c.submit}),h(M),S(B),function(e,t){return j(),w("div",C,[b(O(f),{"label-width":"10rem"})])}}});e("default",c(H,[["__scopeId","data-v-ee69391d"]]))}}})}();
