!function(){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(t)}function t(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function e(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,t,e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",a=e.toStringTag||"@@toStringTag";function u(e,r,i,a){var u=r&&r.prototype instanceof l?r:l,f=Object.create(u.prototype);return o(f,"_invoke",function(e,r,o){var i,a,u,l=0,f=o||[],s=!1,p={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(t,e){return i=t,a=0,u=n,p.n=e,c}};function m(e,r){for(a=e,u=r,t=0;!s&&l&&!o&&t<f.length;t++){var o,i=f[t],m=p.p,d=i[2];e>3?(o=d===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=n):i[0]<=m&&((o=e<2&&m<i[1])?(a=0,p.v=r,p.n=i[1]):m<d&&(o=e<3||i[0]>r||r>d)&&(i[4]=e,i[5]=r,p.n=d,a=0))}if(o||e>1)return c;throw s=!0,r}return function(o,f,d){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,d),a=f,u=d;(t=a<2?n:u)||!s;){i||(a?a<3?(a>1&&(p.n=-1),m(a,u)):p.n=u:p.v=u);try{if(l=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=n}else if((t=(s=p.n<0)?u:e.call(r,p))!==c)break}catch(t){i=n,a=1,u=t}finally{l=1}}return{value:t,done:s}}}(e,i,a),!0),f}var c={};function l(){}function f(){}function s(){}t=Object.getPrototypeOf;var p=[][i]?t(t([][i]())):(o(t={},i,function(){return this}),t),m=s.prototype=l.prototype=Object.create(p);function d(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,s):(n.__proto__=s,o(n,a,"GeneratorFunction")),n.prototype=Object.create(m),n}return f.prototype=s,o(m,"constructor",s),o(s,"constructor",f),f.displayName="GeneratorFunction",o(s,a,"GeneratorFunction"),o(m),o(m,a,"Generator"),o(m,i,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(r=function(){return{w:u,m:d}})()}function o(n,t,e,r){var i=Object.defineProperty;try{i({},"",{})}catch(n){i=0}o=function(n,t,e,r){function a(t,e){o(n,t,function(n){return this._invoke(t,e,n)})}t?i?i(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r}):n[t]=e:(a("next",0),a("throw",1),a("return",2))},o(n,t,e,r)}function i(n,t,e,r,o,i,a){try{var u=n[i](a),c=u.value}catch(n){return void e(n)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function u(n){i(a,r,o,u,c,"next",n)}function c(n){i(a,r,o,u,c,"throw",n)}u(void 0)})}}System.register(["./base-lib-legacy.js?v=1756369731","./index-legacy103.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./useMethods-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731"],function(n,o){"use strict";var i,u,c,l,f,s,p,m,d,y,v,b,h,g,w,_,j,O,S,k,x,P,D,T,H,R,C,q,E,F,G,N,M,V,z,A,B;return{setters:[function(n){i=n.k,u=n.r,c=n.ar,l=n.c,f=n.ay,s=n.p,p=n.a4,m=n.q,d=n.v,y=n.e,v=n.A,b=n.y,h=n.x,g=n.O,w=n.F,_=n.a_,j=n.Q,O=n.ao,S=n.an,k=n.a7,x=n.z,P=n.ap},function(n){D=n._},function(n){T=n.K,H=n.bY,R=n.l,C=n.L,q=n.o,E=n.bZ,F=n.M,G=n.ah,N=n.u,M=n.a6,V=n.j},function(n){z=n.a},function(n){A=n.u},function(n){B=n._}],execute:function(){var J=i({name:"",description:"暂无数据",isRefresh:!0}),K=i({loading:!1,list:[],total:0,tableHeight:"410px"}),W=u(!0);u([]);var L=u(""),Q=function(n,t,e,r){var o=n.data;t.value+="".concat(o),o.includes("bt_successful")&&(F.success("拉取成功"),e()),o.includes("bt_failed")&&(F.error("拉取失败"),e())},U=function(){var n=a(r().m(function n(t,e){return r().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,R({title:"".concat(t.is_pull?"更新":"拉取","镜像"),area:50,component:function(){return C(function(){return o.import("./pull-image-details-dialog-legacy.js?v=1756369731")},void 0,o.meta.url)},compData:{name:t.name,refresh:e}});case 1:return n.a(2)}},n)}));return function(t,e){return n.apply(this,arguments)}}(),Y=(n("p",function(){var n=a(r().m(function n(t,e){var i;return r().w(function(n){for(;;)switch(n.n){case 0:return i={model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:"docker官方库",image:"".concat(t.name,":").concat(t.tag),registry_mirrors:"noSpeed"==L.value?"":L.value},n.n=1,R({title:"拉取镜像",area:65,component:function(){return C(function(){return o.import("./pull-image-log-dialog-legacy.js?v=1756369731")},void 0,o.meta.url)},compData:{url:"/ws_model",params:i,onWSReceive:Q,onRefresh:function(){return e()}}});case 1:return n.a(2)}},n)}));return function(t,e){return n.apply(this,arguments)}}()),function(){var n=a(r().m(function n(t){return r().w(function(n){for(;;)switch(n.n){case 0:z({image:t.name});case 1:return n.a(2)}},n)}));return function(t){return n.apply(this,arguments)}}()),Z=function(){var n=a(r().m(function n(t,e){var o;return r().w(function(n){for(;;)switch(n.p=n.n){case 0:return o={id:t.id,name:t.name,force:"0"},n.p=1,n.n=2,q({type:"calc",title:"删除镜像【".concat(t.name,"】"),content:"您真的要删除镜像【".concat(t.name,"】吗？")});case 2:T({request:E({data:JSON.stringify(o)}),message:!0,success:e}),n.n=4;break;case 3:n.p=3,n.v;case 4:return n.a(2)}},n,null,[[1,3]])}));return function(t,e){return n.apply(this,arguments)}}(),I=function(n){return{data:K.list.slice((n.p-1)*n.limit,n.p*n.limit),total:K.total}},X=function(){var n=a(r().m(function n(t){var e;return r().w(function(n){for(;;)switch(n.n){case 0:if(0===K.list.length||J.isRefresh){n.n=1;break}return n.a(2,I(t));case 1:return J.isRefresh=!1,n.n=2,T({request:H({data:JSON.stringify({name:J.name})}),data:Array,loading:c(K,"loading")});case 2:return 0===(e=n.v).length&&(J.description="没有搜索到".concat(J.name,"相关的镜像")),K.list=e,K.total=e.length,n.a(2,I(t));case 3:return n.a(2)}},n)}));return function(t){return n.apply(this,arguments)}}(),$=function(n){J.description="暂无数据",J.name=J.name.replace(/\s+/g,"")},nn=n("s",null),tn=n("l",u("开始拉取镜像...\n")),en=function(t,e){n("s",nn=G({route:t.compData.url,onMessage:function(n,r){t.compData.onWSReceive(r,tn,on,e)}}))},rn=function(n){var r,o=function(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach(function(t){e(n,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}({},n.compData.params);null===(r=nn)||void 0===r||r.send(o)},on=function(t){nn&&(nn.socket.close(),n("s",nn=null)),t&&t()},an=(n("i",function(){var n=a(r().m(function n(t,e){return r().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,en(t,e);case 1:rn(t);case 2:return n.a(2)}},n)}));return function(t,e){return n.apply(this,arguments)}}()),n("u",function(n){on(n||!1),tn.value="开始拉取镜像...\n"}),{class:"container-dialog p-[2.4rem]"}),un={class:"flex items-center relative"},cn={class:"py-[1rem]"},ln=l({__name:"index",setup:function(n){var t=N().mainHeight,e=f("popupSetFooter",!1),r=u("1ms加速站搜索"),o=function(n){J.isRefresh=!0,n&&!isNaN(n)&&(R.value.p=n),H()},i=[{value:"1ms",text:"1ms加速站搜索"},{value:"dockerHub",text:"Docker Hub搜索"}],a=function(n){r.value=n.text,function(n){if(""===J.name)return F.error("请输入需要搜索的镜像名");var t=0===n?"https://1ms.run/search?query=":"https://hub.docker.com/search?type=image&q=";window.open(t+J.name,"_blank","noopener,noreferrer")}("Docker Hub搜索"==n.text?1:0)},c=M({request:function(n){return X(n)},columns:[{label:"镜像名",prop:"name",width:200},{label:"Start数",prop:"star_count",width:70},{label:"来源",width:60,render:function(n){return n.is_official?"官方":"非官方"}},{label:"描述/说明",prop:"description",showOverflowTooltip:!0},A([{onClick:Y,width:80,title:"创建容器"},{onClick:function(n){var t="https://1ms.run/r/"+(n.is_official?"library/":"");window.open("".concat(t+n.name),"_blank","noopener noreferrer")},title:"简介"},{title:"拉取",render:function(n){return y("span",{class:"cursor-pointer text-primary",onClick:function(){return U(n,o)}},[n.is_pull?["更新",y(B,null,null)]:"拉取"])}},{onClick:function(n){return Z(n,o)},isHide:function(n){return!n.is_pull},title:"删除"}])]}),l=c.BtTable,T=c.BtPage,H=c.refresh,R=c.param;return s(function(){!function(n,t,e){setTimeout(function(){if(t)K.tableHeight="410px";else{W.value=!1;var r=n.value-270;K.tableHeight="".concat(r,"px"),r>800&&(e.value.limit=20)}},0)}(t,e,R)}),p(function(){J.name="",J.description="暂无数据",K.list=[],K.total=0,K.loading=!1,K.tableHeight="410px",J.isRefresh=!0}),function(n,t){var e=V,r=P,u=O,c=S,f=D,s=k;return m(),d("div",an,[y(s,{ref:"searchFormRef",model:h(J),"label-position":"right",onSubmit:t[5]||(t[5]=j(function(){},["prevent"]))},{default:v(function(){return[b("div",un,[y(e,{modelValue:h(J).name,"onUpdate:modelValue":t[0]||(t[0]=function(n){return h(J).name=n}),class:"!w-[51rem]",onChangePassive:t[1]||(t[1]=function(n){return h($)("name")}),placeholder:"请输入需要搜索的镜像名",clearable:"",onClear:t[2]||(t[2]=function(n){return o(1)}),onKeyup:t[3]||(t[3]=g(function(n){return o(1)},["enter"]))},null,8,["modelValue"]),y(c,{onCommand:a,"split-button":"",class:"ml-8px",type:"primary"},{dropdown:v(function(){return[y(u,null,{default:v(function(){return[(m(),d(w,null,_(i,function(n){return y(r,{key:n.value,command:n},{default:v(function(){return[b("span",null,x(n.text),1)]}),_:2},1032,["command"])}),64))]}),_:1})]}),default:v(function(){return[b("span",{onClick:t[4]||(t[4]=j(function(n){return o(1)},["stop"]))},"搜索")]}),_:1})]),b("div",cn,[y(f,null,{content:v(function(){return[y(h(l),{"max-height":h(K).tableHeight},null,8,["max-height"])]}),"footer-right":v(function(){return[y(h(T))]}),_:1})])]}),_:1},8,["model"])])}}}),fn=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"}));n("a",fn)}}})}();
