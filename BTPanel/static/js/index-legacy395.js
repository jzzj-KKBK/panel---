!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){o(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function o(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var a=r.call(n,t||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function o(t,r,a,o){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return l(s,"_invoke",function(t,r,a){var o,u,l,i=0,s=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return o=n,u=0,l=e,f.n=t,c}};function p(t,r){for(u=t,l=r,n=0;!d&&i&&!a&&n<s.length;n++){var a,o=s[n],p=f.p,m=o[2];t>3?(a=m===r)&&(l=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=t<2&&p<o[1])?(u=0,f.v=r,f.n=o[1]):p<m&&(a=t<3||o[0]>r||r>m)&&(o[4]=t,o[5]=r,f.n=m,u=0))}if(a||t>1)return c;throw d=!0,r}return function(a,s,m){if(i>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,m),u=s,l=m;(n=u<2?e:l)||!d;){o||(u?u<3?(u>1&&(f.n=-1),p(u,l)):f.n=l:f.v=l);try{if(i=2,o){if(u||(a="next"),n=o[a]){if(!(n=n.call(o,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,u<2&&(u=0)}else 1===u&&(n=o.return)&&n.call(o),u<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),u=1);o=e}else if((n=(d=f.n<0)?l:t.call(r,f))!==c)break}catch(n){o=e,u=1,l=n}finally{i=1}}return{value:n,done:d}}}(t,a,o),!0),s}var c={};function i(){}function s(){}function d(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(l(n={},r,function(){return this}),n),p=d.prototype=i.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=d,l(p,"constructor",d),l(d,"constructor",s),s.displayName="GeneratorFunction",l(d,a,"GeneratorFunction"),l(p),l(p,a,"Generator"),l(p,r,function(){return this}),l(p,"toString",function(){return"[object Generator]"}),(u=function(){return{w:o,m:m}})()}function l(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}l=function(e,n,t,r){function o(n,t){l(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(o("next",0),o("throw",1),o("return",2))},l(e,n,t,r)}function c(e,n,t,r,a,o,u){try{var l=e[o](u),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var o=e.apply(n,t);function u(e){c(o,r,a,u,l,"next",e)}function l(e){c(o,r,a,u,l,"throw",e)}u(void 0)})}}System.register(["./index-legacy103.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./index-legacy123.js?v=1756369731","./column-legacy.js?v=1756369731","./ssl-legacy.js?v=1756369731","./useStore-legacy10.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731"],function(e,t){"use strict";var r,o,l,c,s,d,f,p,m,y,v,b,w,_,h,k,g,A,x,j,C,O,D,S,I,V,P,R,T,M,E,U,X,N,G,F,W,$,z,q;return{setters:[function(e){r=e._},function(e){o=e.o,l=e.b,c=e.a_,s=e.N,d=e.ab,f=e.J,p=e.j,m=e.j2,y=e.e},function(e){v=e.c,b=e.r,w=e.k,_=e.p,h=e.G,k=e.q,g=e.v,A=e.e,x=e.A,j=e.x,C=e.B,O=e.M,D=e.y,S=e.C,I=e.H,V=e.z,P=e.F,R=e.a_,T=e.D,M=e.aW,E=e.au,U=e.aj,X=e.aw,N=e.ai},function(e){G=e._},function(e){F=e._},function(e){W=e.u,$=e.B},function(e){z=e.S},function(e){q=e.g},null],execute:function(){var t={class:"px-1.6rem py-1rem"},L={key:0,class:"p-1rem"},B={class:"w-full hint-table"},H={key:1,class:"pl-[.8rem] text-[#777] leading-[2.4rem]"},J={class:"w-full hint-table"},K={key:1},Q={key:1},Y={key:1},Z={key:1},ee={key:0,class:"flex"},ne=["onClick"],te=["onClick"],re=v({__name:"index",props:{compData:{type:Object,default:function(){}}},setup:function(e){var y=l(),v=q().refs.isRefreshDomainList,re=e,ae=b(!0),oe=b(!1),ue=b(!1),le=b([]),ce=b([]),ie=b("name"),se=[{title:"A",key:"A"},{title:"TXT",key:"TXT"},{title:"CNAME",key:"CNAME"},{title:"MX",key:"MX"},{title:"CAA",key:"CAA"},{title:"AAAA",key:"AAAA"}],de=w({dns_id:"",domain_name:"",record_type:"A",fun_name:"get_dns_record",search:"",p:1,limit:10,total:0}),fe=w({dns_id:"",domain_name:"",record_type:"",fun_name:"delete_dns_record",RecordId:""}),pe=w({dns_id:"",domain_name:"",fun_name:"set_dns_record_status",status:1,RecordId:""}),me=b(!1),ye=b([]);W([{onClick:function(e){Ae(e)},title:"删除"}]);var ve=function(e){var n=Math.floor(e/3600),t=Math.floor(e%3600/60),r=e%60;return"".concat(n>0?n+"小时":"").concat(t>0?t+"分钟":"").concat(r>0?r+"秒":"")},be=function(){var e=i(u().m(function e(){var n,t,r,a,o;return u().w(function(e){for(;;)switch(e.n){case 0:if(!oe.value){e.n=1;break}return e.a(2,y.error("请先保存当前修改的数据，再进行其他操作！"));case 1:return me.value=!0,e.n=2,z(de);case 2:n=e.v,t=n.data,(r=c(t))("list")&&(a=t.list,s(a)&&(ye.value=a,le.value=d(a)),ae.value=!s(a)),r("info")&&(o=t.info.record_total,de.total=o),me.value=!1;case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),we=function(e){ie.value=e,ye.value=d(ye.value)},_e=function(e,n){var t,r=d(le.value),a=null==r||null===(t=r.find(function(e){return e.RecordId===ye.value[0].RecordId}))||void 0===t||null===(t=t[n])||void 0===t?void 0:t.split(".");ye.value[0][n]="2"==e?a?a[0]:"abc":e},he=function(e,n){oe.value=!1,ue.value=!1,ie.value="name",ce.value=[],ye.value=d(le.value)},ke=function(){var e=i(u().m(function e(n){var t,r,a;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.name){e.n=1;break}return y.error("主机记录不能为空"),e.a(2);case 1:if(n.value){e.n=2;break}return y.error("记录值不能为空"),e.a(2);case 2:return t=y.load("正在修改子域名，请稍候..."),0===(r={fun_name:"update_dns_record",dns_id:re.compData.row.dns_id,domain_name:n.name.indexOf(re.compData.row.domain)>-1?n.name:"".concat(n.name,".").concat(re.compData.row.domain),domain_dns_value:n.value,record_type:n.type,RecordId:n.RecordId,mx:n.mx,RecordLine:n.line,remark:n.remark}).RecordId&&(delete r.RecordId,r.fun_name="create_dns_record"),e.p=3,e.n=4,z(r);case 4:if(a=e.v,t&&t.close(),y.request(a),!a.status){e.n=6;break}return oe.value=!1,ue.value=!1,ie.value="name",ce.value=[],e.n=5,be();case 5:v.value=!0;case 6:e.n=8;break;case 7:e.p=7,e.v;case 8:return e.a(2)}},e,null,[[3,7]])}));return function(n){return e.apply(this,arguments)}}(),ge=function(){return ae.value?y.error("此域名配置的dns账号不正确"):oe.value?y.error("请先保存当前修改的数据，再进行其他操作！"):(oe.value=!0,ue.value=!0,ce.value=[0],void ye.value.unshift({RecordId:0,name:"",type:"A",line:"default",value:"",ttl:600,status:"启用",remark:"",mx:0}))},Ae=function(){var e=i(u().m(function e(n){var t,r;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!oe.value){e.n=1;break}return e.a(2,y.error("请先保存当前修改的数据，再进行其他操作！"));case 1:return fe.record_type=n.type,fe.domain_name=n.name,fe.RecordId=n.RecordId,e.n=2,o({title:"删除【".concat(n.name,"】"),content:"删除该子域名，是否继续操作？",icon:"warning"});case 2:return e.p=2,t=y.load("正在删除子域名，请稍候..."),e.n=3,z(fe);case 3:if(r=e.v,t&&t.close(),y.request(r),!r.status){e.n=5;break}return e.n=4,be();case 4:v.value=!0;case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:return e.a(2)}},e,null,[[2,6]])}));return function(n){return e.apply(this,arguments)}}(),xe=function(){var e=i(u().m(function e(n){var t,r;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,pe.RecordId=n.RecordId,pe.status="启用"===n.status?1:0,pe.domain_name=n.name.indexOf(re.compData.row.domain)>-1?n.name:"".concat(n.name,".").concat(re.compData.row.domain),t=y.load("正在修改状态，请稍候..."),e.n=1,z(pe);case 1:if(r=e.v,y.request(r),!r.status){e.n=2;break}return he(),e.n=2,be();case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,t&&t.close(),e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}));return function(n){return e.apply(this,arguments)}}();return _(function(){var e;null!==(e=re.compData.row)&&void 0!==e&&e.dns_id&&(de.dns_id=re.compData.row.dns_id,de.domain_name=re.compData.row.domain,fe.dns_id=re.compData.row.dns_id,pe.dns_id=re.compData.row.dns_id,be())}),function(o,u){var l=T,c=M,i=f,s=F,d=E,v=p,b=N,w=U,_=G,W=X,z=m,q=r,le=h("bt-loading");return k(),g("div",t,[A(q,null,{"header-left":x(function(){return[A(l,{type:"primary",onClick:ge,disabled:j(ae)},{default:x(function(){return n(u[16]||(u[16]=[C("添加",-1)]))}),_:1},8,["disabled"]),"WestDns"===e.compData.row.dns.dns_name?(k(),O(c,{key:0,type:"warning",class:"h-[100%] !ml-[1rem]",closable:!1,"show-icon":""},{title:x(function(){return n(u[17]||(u[17]=[D("span",{class:"text-[1.3rem]"},[D("span",null," 提示：WestDns 西部数码不支持修改解析记录的主机记录和记录类型")],-1)]))}),_:1})):S("",!0)]}),"header-right":x(function(){return[A(i,{modelValue:j(de).search,"onUpdate:modelValue":u[0]||(u[0]=function(e){return j(de).search=e}),placeholder:"请输入主机记录",onSearch:be,class:"!mr-[.8rem] !w-[23rem]"},null,8,["modelValue"]),A(s,{onRefresh:be,class:"!mr-[.8rem]"})]}),content:x(function(){return[I((k(),O(W,{class:"w-full sub-domain-table",data:j(ye),"row-key":"RecordId","expand-row-keys":j(ce),"max-height":550},{empty:x(function(){return[C(V(j(ae)?"此域名配置的dns账号不正确":"列表为空"),1)]}),default:x(function(){return[A(d,{type:"expand",width:"1","min-width":"1"},{default:x(function(){return[j(oe)?(k(),g("div",L,["name"===j(ie)?(k(),g(P,{key:0},[u[23]||(u[23]=D("div",{class:"text-[#777] pl-[.8rem]"},[C("要解析www.bt.cn，请填写www。主机记录就是域名前缀，"),D("span",{class:"text-orange font-bold"},"点击下列选项可自行填充"),C("：")],-1)),D("table",B,[D("tbody",null,[D("tr",{onClick:u[1]||(u[1]=function(e){return _e("www","name")})},n(u[18]||(u[18]=[D("th",null,"www",-1),D("td",{class:"text-[#777]"},"解析后的域名为www.bt.cn",-1)]))),D("tr",{onClick:u[2]||(u[2]=function(e){return _e("@","name")})},n(u[19]||(u[19]=[D("th",null,"@",-1),D("td",{class:"text-[#777]"},"直接解析主域名bt.cn",-1)]))),D("tr",{onClick:u[3]||(u[3]=function(e){return _e("*","name")})},n(u[20]||(u[20]=[D("th",null,"*",-1),D("td",{class:"text-[#777]"},"泛解析，匹配其他所有域名*.bt.cn",-1)]))),D("tr",{onClick:u[4]||(u[4]=function(e){return _e("mail","name")})},n(u[21]||(u[21]=[D("th",null,"mail",-1),D("td",{class:"text-[#777]"},"将域名解析为mail.bt.cn，通常用于解析邮箱服务器",-1)]))),D("tr",{onClick:u[5]||(u[5]=function(e){return _e("2","name")})},n(u[22]||(u[22]=[D("th",null,"二级域名",-1),D("td",{class:"text-[#777]"},"如：abc.bt.cn，填写abc",-1)])))])])],64)):(k(),g("div",H,[u[30]||(u[30]=D("div",null,"将域名指向云服务器，请选择「A」",-1)),u[31]||(u[31]=D("div",null,"将域名指向另一个域名，请选择「CNAME」",-1)),u[32]||(u[32]=D("div",null,"建立邮箱请选择「MX」，根据邮箱服务商提供的MX记录",-1)),D("table",J,[D("tbody",null,[D("tr",{onClick:u[6]||(u[6]=function(e){return _e("A","type")})},n(u[24]||(u[24]=[D("th",null,"A",-1),D("td",{class:"text-[#777]"},"将域名指向IPv4地址",-1)]))),D("tr",{onClick:u[7]||(u[7]=function(e){return _e("CNAME","type")})},n(u[25]||(u[25]=[D("th",null,"CNAME",-1),D("td",{class:"text-[#777]"},"将域名指向另外一个域名",-1)]))),D("tr",{onClick:u[8]||(u[8]=function(e){return _e("MX","type")})},n(u[26]||(u[26]=[D("th",null,"MX",-1),D("td",{class:"text-[#777]"},"如果需要设置邮箱，让邮箱能收到邮件，就需要添加MX记录。",-1)]))),D("tr",{onClick:u[9]||(u[9]=function(e){return _e("TXT","type")})},n(u[27]||(u[27]=[D("th",null,"TXT",-1),D("td",{class:"text-[#777]"},"设置文本记录",-1)]))),D("tr",{onClick:u[10]||(u[10]=function(e){return _e("CAA","type")})},n(u[28]||(u[28]=[D("th",null,"CAA",-1),D("td",{class:"text-[#777]"},"CA证书颁发机构授权校验",-1)]))),D("tr",{onClick:u[11]||(u[11]=function(e){return _e("AAAA","type")})},n(u[29]||(u[29]=[D("th",null,"AAAA",-1),D("td",{class:"text-[#777]"},"用来指定主机名（或域名）对应的IPv6地址（例如：ff06:0:0:0:0:0:0:c3）记录。",-1)])))])])]))])):S("",!0)]}),_:1}),A(d,{label:"主机记录",prop:"name"},{default:x(function(n){var t=n.row,r=n.$index;return[j(oe)&&0==r?(k(),O(v,{key:0,class:"record-name-input",disabled:"WestDns"===e.compData.row.dns.dns_name&&!j(ue),modelValue:t.name,"onUpdate:modelValue":function(e){return t.name=e},type:"text",size:"small",placeholder:"根据下方提示填写",title:"".concat(t.name,".").concat(re.compData.row.domain),onFocus:u[12]||(u[12]=function(e){return we("name")})},{append:x(function(){return[C(V(".".concat(e.compData.row.domain)),1)]}),_:2},1032,["disabled","modelValue","onUpdate:modelValue","title"])):(k(),g("span",K,V(t.name),1))]}),_:1}),A(d,{label:"记录类型",prop:"type",width:"100"},{default:x(function(n){var t=n.row,r=n.$index;return[j(oe)&&0==r?(k(),O(w,{key:0,onFocus:u[13]||(u[13]=function(e){return we("type")}),size:"small",disabled:"WestDns"===e.compData.row.dns.dns_name&&!j(ue),modelValue:t.type,"onUpdate:modelValue":function(e){return t.type=e},class:"!w-[8rem]",placeholder:"请选择",onChange:function(e){return function(e,n){n.type=e}(e,t)}},{default:x(function(){return[(k(),g(P,null,R(se,function(e){return A(b,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])}),64))]}),_:2},1032,["disabled","modelValue","onUpdate:modelValue","onChange"])):(k(),g("span",Q,V(t.type),1))]}),_:1}),A(d,{label:"解析请求来源",prop:"line",width:"100"},{default:x(function(e){var n=e.row;return[D("span",null,V(n.line),1)]}),_:1}),A(d,{label:"记录值",prop:"value"},{default:x(function(e){var n=e.row,t=e.$index;return[j(oe)&&0==t?(k(),O(v,{key:0,modelValue:n.value,"onUpdate:modelValue":function(e){return n.value=e},type:"text",placeholder:"必填",size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(k(),g("span",Y,V(n.value),1))]}),_:1}),A(d,{label:"TTL",prop:"ttl",width:"100"},{default:x(function(e){var n=e.row;return[D("span",null,V(ve(n.ttl)),1)]}),_:1}),A(d,{label:"状态",prop:"status",width:"80"},{default:x(function(e){var n=e.row;return[A(j($),{data:["暂停","启用"],modelValue:"启用"===n.status,onClick:function(e){return xe(n)}},null,8,["modelValue","onClick"])]}),_:1}),A(d,{label:"备注",prop:"remark",width:"120"},{default:x(function(n){var t=n.row,r=n.$index;return[j(oe)&&0==r?(k(),O(v,{key:0,disabled:"WestDns"===e.compData.row.dns.dns_name,modelValue:t.remark,"onUpdate:modelValue":function(e){return t.remark=e},type:"text",size:"small",placeholder:"请输入备注"},null,8,["disabled","modelValue","onUpdate:modelValue"])):(k(),g("span",Z,V(t.remark),1))]}),_:1}),A(d,{label:"操作",width:"140",align:"right"},{default:x(function(e){var t=e.row,r=e.$index;return[j(oe)&&0==r?(k(),g("div",ee,[A(l,{type:"primary",onClick:function(e){return ke(t)}},{default:x(function(){return n(u[33]||(u[33]=[C("保存",-1)]))}),_:2},1032,["onClick"]),A(l,{type:"default",onClick:function(e){return he()}},{default:x(function(){return n(u[34]||(u[34]=[C("取消",-1)]))}),_:2},1032,["onClick"])])):(k(),g(P,{key:1},[D("span",{class:"bt-link cursor-pointer",onClick:function(e){return function(e,n){if(oe.value)return y.error("请先保存当前修改的数据，再进行其他操作！");if(oe.value=!0,ce.value=[e.RecordId],0!==n){var t=e.name.replace(".".concat(re.compData.row.domain),""),r=ye.value[0];e.name.replace(".".concat(re.compData.row.domain),"")===e.name&&(t="@"),ye.value[0]=a(a({},e),{},{name:t}),ye.value[n]=r}else ye.value[0]=a(a({},e),{},{name:e.name.replace(".".concat(re.compData.row.domain),"")})}(t,r)}},"修改",8,ne),A(_),D("span",{class:"bt-link cursor-pointer",onClick:function(e){return Ae(t)}},"删除",8,te)],64))]}),_:1})]}),_:1},8,["data","expand-row-keys"])),[[le,j(me)],[le,"正在加载子域名列表，请稍后...","title"]])]}),"footer-right":x(function(){return[A(z,{page:j(de).p,"onUpdate:page":u[14]||(u[14]=function(e){return j(de).p=e}),row:j(de).limit,"onUpdate:row":u[15]||(u[15]=function(e){return j(de).limit=e}),total:j(de).total,onChange:be},null,8,["page","row","total"])]}),_:1})])}}});e("default",y(re,[["__scopeId","data-v-9cdfe372"]]))}}})}();
