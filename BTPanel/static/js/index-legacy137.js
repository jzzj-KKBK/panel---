!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof c?r:c,s=Object.create(o.prototype);return u(s,"_invoke",function(n,r,a){var l,o,u,c=0,s=a||[],f=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return l=t,o=0,u=e,p.n=n,i}};function v(n,r){for(o=n,u=r,t=0;!f&&c&&!a&&t<s.length;t++){var a,l=s[t],v=p.p,m=l[2];n>3?(a=m===r)&&(u=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=v&&((a=n<2&&v<l[1])?(o=0,p.v=r,p.n=l[1]):v<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,p.n=m,o=0))}if(a||n>1)return i;throw f=!0,r}return function(a,s,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,m),o=s,u=m;(t=o<2?e:u)||!f;){l||(o?o<3?(o>1&&(p.n=-1),v(o,u)):p.n=u:p.v=u);try{if(c=2,l){if(o||(a="next"),t=l[a]){if(!(t=t.call(l,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),o=1);l=e}else if((t=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(t){l=e,o=1,u=t}finally{c=1}}return{value:t,done:f}}}(n,a,l),!0),s}var i={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(u(t={},r,function(){return this}),t),v=f.prototype=c.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=f,u(v,"constructor",f),u(f,"constructor",s),s.displayName="GeneratorFunction",u(f,a,"GeneratorFunction"),u(v),u(v,a,"Generator"),u(v,r,function(){return this}),u(v,"toString",function(){return"[object Generator]"}),(o=function(){return{w:l,m:m}})()}function u(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,n,r){function l(t,n){u(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(l("next",0),l("throw",1),l("return",2))},u(e,t,n,r)}function i(e,t,n,r,a,l,o){try{var u=e[l](o),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var l=e.apply(t,n);function o(e){i(l,r,a,o,u,"next",e)}function u(e){i(l,r,a,o,u,"throw",e)}o(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./index-legacy140.js?v=1756369731","./index-legacy103.js?v=1756369731","./index-legacy112.js?v=1756369731","./index-legacy123.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./database-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./ace-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731"],function(e,n){"use strict";var r,u,i,s,f,p,v,m,d,h,y,b,g,w,_,k,j,x,O,S,q,P,C,T,D,A,E,F,G,I,U,V,z,L,M,B,H,J,K,N,R,W,Y,$,Q;return{setters:[function(e){r=e.ai,u=e.l,i=e.L,s=e.bU,f=e.K,p=e.aj,v=e.M,m=e.d,d=e.J,h=e.k,y=e.a0,b=e.o,g=e.e},function(e){w=e.B},function(e){_=e._},function(e){k=e._},function(e){j=e._},function(e){x=e.c,O=e.r,S=e.p,q=e.G,P=e.q,C=e.v,T=e.y,D=e.F,A=e.a_,E=e.J,F=e.x,G=e.e,I=e.z,U=e.A,V=e.B,z=e.C,L=e.M,M=e.H,B=e.D,H=e.av},function(e){J=e.getSqliteTableList,K=e.getSqliteKeys,N=e.getSqliteTableInfo,R=e.querySql,W=e.deleteTableData},function(e){Y=e.a,$=e.u,Q=e.c},null,null,null],execute:function(){var X={class:"flex w-full h-full"},Z={class:"man_l"},ee={class:"man_db"},te={class:"man_db_li"},ne={class:"man_db_li_left"},re=["title"],ae={class:"cursor-pointer ml-8px"},le={class:"man_t"},oe=["onClick"],ue=["onClick"],ie={class:"flex items-center"},ce={class:"inline-block max-w-[14rem] truncate"},se={class:"man_r"},fe={key:0,class:"flex items-center justify-center h-full"},pe=["onClick"],ve={class:"ul-item"},me={class:"flex-1 flex items-center"},de=["onClick"],he={key:1,class:"nq_con"},ye={class:"p-[1.5rem]"},be={class:"mt-[1rem]"},ge={key:0,class:"result_table table",border:"1"},we={key:1,class:"text-danger"},_e=x({__name:"index",props:{compData:{default:{}}},setup:function(e){var g,x=e,_e=O(),ke=O(),je=O(!0),xe=O(0),Oe=O(""),Se=O(!1),qe=O(!0),Pe=O({p:1,limit:10,total:0,search:"",data:[],path:"",table:"",emptyText:"暂无数据，您可以添加数据"}),Ce=O({}),Te=O([]),De=O([]),Ae={mode:"ace/mode/nginx",theme:"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},Ee=function(e){u({title:"更改数据【"+e.id+"】",component:function(){return i(function(){return n.import("./insert-data-legacy.js?v=1756369731")},void 0,n.meta.url)},area:48,compData:{keys:De.value,row:e,path:Pe.value.path,table:Pe.value.table,refresh:Be},showFooter:!0})},Fe=function(){var e=c(o().m(function e(t){var n;return o().w(function(e){for(;;)switch(e.n){case 0:return n=De.value.find(function(e){return 1===e.pk}).name,e.n=1,b({title:"删除表数据 [ "+t[n]+" ]",content:"删除选中表【"+Pe.value.table+"】的数据后，该条数据将彻底消失，是否继续操作？"});case 1:return e.n=2,f({loading:"正在删除表数据，请稍后...",request:W({path:Pe.value.path,table:Pe.value.table,where_data:t}),message:!0});case 2:Be();case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ge=O(),Ie=function(){u({title:"添加数据",component:function(){return i(function(){return n.import("./insert-data-legacy.js?v=1756369731")},void 0,n.meta.url)},area:48,compData:{keys:De.value,path:Pe.value.path,table:Pe.value.table,refresh:Ue},showFooter:!0})},Ue=function(){Be(),Ve(x.compData.path,!0)},Ve=function(){var e=c(o().m(function e(t,n){var r,u,i;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,Ce.value[t]&&!n){e.n=2;break}return e.n=1,J({path:t});case 1:r=e.v,u=r.data,Ce.value=a(a({},Ce.value),{},l({},t,u)),!n&&u.length>0&&ze({path:t,name:u[0].name}),e.n=3;break;case 2:(null===(i=Ce.value[t])||void 0===i?void 0:i.length)>0&&ze({path:t,name:Ce.value[t][0].name});case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t,n){return e.apply(this,arguments)}}(),ze=function(e){var t=e.name,n=e.path;if(je.value=!1,"sql"===t){var r=s(8);return qe.value=!1,Te.value.push({name:"新建查询",path:"nq_con_"+r,sql:"",status:0,queryPath:n}),void(Oe.value="nq_con_"+r)}qe.value=!0,Te.value.find(function(e){return e.path===n&&e.name===t})||Te.value.push({name:t,path:n}),Le(e)},Le=function(e){var t=e.name,n=e.path;je.value=!1,"新建查询"===t?Oe.value=n:(qe.value=!0,Me(e))},Me=function(){var e=c(o().m(function e(t){var n,r,a,l,u;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=t.path,r=t.name,e.n=1,K({path:n,table:r});case 1:a=e.v,l=a.data,De.value=l,u=[],l.forEach(function(e){return u.push({label:e.name,prop:e.name,showOverflowTooltip:!0})}),Ge.value=[Y({key:u[0].prop})].concat(u,[$([{onClick:Ee,title:"更改"},{onClick:Fe,title:"删除"}])]),Pe.value.path=n,Pe.value.table=r,Be(),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=c(o().m(function e(){var t,n;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Oe.value=Pe.value.table,e.n=1,f({loading:Se,request:N({path:Pe.value.path,table:Pe.value.table,p:Pe.value.p,search:Pe.value.search})});case 1:t=e.v,n=t.data,Pe.value.data=r(n.data)?[]:n.data,Pe.value.emptyText=r(n.data)?n.data:"暂无数据，您可以添加数据",Pe.value.total=p(n.page),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),He=function(){var e=c(o().m(function e(t){var n,r;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t.status=1,!t.sql){e.n=2;break}return e.n=1,R({path:t.queryPath,sql_shell:t.sql});case 1:n=e.v,r=n.data,t.result=r.status?r.list:r.msg,e.n=3;break;case 2:t.result="请输入sql语句查询";case 3:t.status=2,e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),Je=function(e){e.deltaY>0?ke.value.scrollLeft+=100:ke.value.scrollLeft-=100},Ke=function(){var e=c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ve(x.compData.path,!0);case 1:v.success("刷新成功");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Be();case 1:v.success("刷新成功");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Re=[{label:"删除数据",value:"delete",event:(g=c(o().m(function e(t,n,r,a){var l,u;return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t({title:"批量删除备份文件",content:"批量删除已选备份文件，是否继续操作？",column:[{prop:null===(l=Ge.value[1])||void 0===l?void 0:l.prop,label:null===(u=Ge.value[1])||void 0===u?void 0:u.label},Q()],onConfirm:function(){var e=c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n(function(e){return W({path:Pe.value.path,table:Pe.value.table,where_data:e})});case 1:return Ue(),e.a(2,!1)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,t,n,r){return g.apply(this,arguments)})}];return S(function(){var e=x.compData,t=e.list,n=e.path;xe.value=t.findIndex(function(e){return e.path===n})||0,Ve(n)}),function(e,n){var a=m,l=B,o=H,u=d,i=j,c=h,s=y,f=k,p=_,v=w,b=q("bt-loading");return P(),C("div",X,[T("div",Z,[T("ul",ee,[(P(!0),C(D,null,A(e.compData.list,function(r,o){return P(),C(D,null,[r.path===e.compData.path?(P(),C("li",{key:o,class:E(o===F(xe)?"active":"")},[T("div",te,[T("div",ne,[G(a,{src:"/database/database-icon.png",class:"w-[1.4rem] h-[1.4rem] mr-[4px] ml-[8px]"}),T("span",{title:r.name},I(r.name),9,re)]),T("div",ae,[G(l,{size:"small",onClick:Ke},{default:U(function(){return t(n[3]||(n[3]=[T("i",{class:"svgtofont-el-refresh-right mr-4px"},null,-1),V(" 刷新 ",-1)]))}),_:1})])]),T("ul",le,[T("li",{class:E(["new_query flex items-center",-1!==F(Oe).indexOf("nq_con_")?"active":""]),onClick:function(e){return ze({path:r.path,name:"sql"})}},[G(a,{src:"/database/select-icon.png",class:"w-[1.4rem] mr-[4px] align-text-bottom"}),n[4]||(n[4]=T("span",null,"新建查询",-1))],10,oe),(P(!0),C(D,null,A(F(Ce)[r.path],function(e,t){return P(),C("li",{class:E(["flex items-center",e.name===F(Oe)?"active":""]),key:t,onClick:function(t){return ze({path:r.path,name:e.name})}},[G(a,{src:"/database/table-icon.png",class:"w-[1.4rem] mr-[4px] align-text-bottom"}),T("span",ie,[T("span",ce,I(e.name),1),V(" "+I("（"+e.count+"）"),1)])],10,ue)}),128))])],2)):z("",!0)],64)}),256))])]),T("div",se,[F(je)?(P(),C("div",fe,[G(o,{description:"请点击左侧表查看数据"})])):(P(),C(D,{key:1},[T("div",{ref_key:"scrollDiv",ref:ke,class:"ul_scroll",onWheel:Je},[T("ul",null,[(P(!0),C(D,null,A(F(Te),function(e,t){return P(),C("li",{class:E(e.name===F(Oe)||e.path===F(Oe)?"active":""),key:t,onClick:function(t){return Le(e)}},[T("div",ve,[T("div",me,[G(a,{src:"新建查询"===e.name?"/database/select-icon.png":"/database/table-icon.png",class:"w-[1.4rem] h-[1.4rem] mr-[4px] align-middle text-[1.2rem]"},null,8,["src"]),T("span",null,I(e.name),1)]),T("i",{class:"svgtofont-el-close ml-[4px]",onClick:function(e){return function(e){Te.value.splice(e,1),Te.value.length?Le(Te.value[e]||Te.value[e-1]):(je.value=!0,qe.value=!1)}(t)}},null,8,de)])],10,pe)}),128))])],544),F(qe)?(P(),L(p,{key:0,class:"p-[1.2rem]"},{"header-left":U(function(){return[G(l,{type:"primary",onClick:Ie},{default:U(function(){return t(n[5]||(n[5]=[V("添加数据",-1)]))}),_:1})]}),"header-right":U(function(){return[G(u,{class:"mr-4px",modelValue:F(Pe).search,"onUpdate:modelValue":n[0]||(n[0]=function(e){return F(Pe).search=e}),onSearch:Be,placeholder:"搜索所有字段"},null,8,["modelValue"]),G(i,{onRefresh:Ne})]}),content:U(function(){return[M(G(c,{ref_key:"mangerTableRef",ref:_e,"max-height":480,column:F(Ge),data:F(Pe).data,description:F(Pe).emptyText},null,8,["column","data","description"]),[[b,F(Se)]])]}),"footer-left":U(function(){return[G(s,{"table-ref":F(_e),options:Re},null,8,["table-ref"])]}),"footer-right":U(function(){return[G(f,{layout:"prev, pager, next,  total, jumper",type:"default",page:F(Pe).p,"onUpdate:page":n[1]||(n[1]=function(e){return F(Pe).p=e}),row:F(Pe).limit,"onUpdate:row":n[2]||(n[2]=function(e){return F(Pe).limit=e}),onChange:Be,total:F(Pe).total},null,8,["page","row","total"])]}),_:1})):(P(),C("div",he,[(P(!0),C(D,null,A(F(Te),function(e,t){return P(),C(D,null,["新建查询"===e.name?(P(),C("div",{key:t,class:E(e.path===F(Oe)?"":"hidden")},[T("div",ye,[G(v,{modelValue:e.sql,"onUpdate:modelValue":function(t){return e.sql=t},class:"!h-[21rem]","editor-option":Ae},null,8,["modelValue","onUpdate:modelValue"]),G(l,{type:"default",class:"!mt-[1rem]",onClick:function(t){return He(e)},disabled:1===e.status},{default:U(function(){return[V(I(1===e.status?"正在查询...":"运行"),1)]}),_:2},1032,["onClick","disabled"])]),T("div",{class:E(["run_result p-[1.5rem]",e.status?"":"hidden"])},[n[6]||(n[6]=T("span",{class:"text-[1.4rem]"},"查询结果：",-1)),T("div",be,[F(r)(e.result)?(P(),C("div",we,I(e.result),1)):(P(),C("table",ge,[T("tbody",null,[(P(!0),C(D,null,A(e.result,function(e,t){return P(),C("tr",{key:t},[(P(!0),C(D,null,A(e,function(e,t){return P(),C("td",{key:t},I(e),1)}),128))])}),128))])]))])],2)],2)):z("",!0)],64)}),256))]))],64))])])}}});e("default",g(_e,[["__scopeId","data-v-ec2811e7"]]))}}})}();
