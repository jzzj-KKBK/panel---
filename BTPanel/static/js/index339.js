import{G as e,iL as a,iM as r}from"./utils-lib.js?v=1756369731";import{c as s,g as t,q as l,v as i,e as o,x as d}from"./base-lib.js?v=1756369731";import{h as u}from"./useController9.js?v=1756369731";import{b as n,k as m}from"./form-item.js?v=1756369731";import{u as p}from"./index61.js?v=1756369731";import{u as c}from"./useStore9.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./validator.js?v=1756369731";import"./index104.js?v=1756369731";import"./column.js?v=1756369731";import"./index103.js?v=1756369731";import"./index141.js?v=1756369731";import"./index124.js?v=1756369731";import"./index.vue_vue_type_style_index_0_scoped_b3c4124c_lang.js?v=1756369731";p();const{rowData:v}=c(),_=()=>{var e,a,r,s,t,l;try{return{...(null==(e=v.value)?void 0:e.id)?{id:null==(a=v.value)?void 0:a.id}:{},address:(null==(r=v.value)?void 0:r.address)||"",api_key:"",category_id:(null==(t=null==(s=v.value)?void 0:s.category_id)?void 0:t.toString())||"0",remarks:(null==(l=v.value)?void 0:l.remarks)||""}}catch(i){return{}}},y={class:"p-[2rem]"},g=s({__name:"index",setup(s,{expose:v}){const{isEdit:g}=p(),{rowData:j,nodeCategory:k}=c(),b=t(()=>k.value.filter(e=>"all"!==e.value&&Number(e.value)>=0)),{BtForm:f,submit:h}=e({data:_,options:e=>t(()=>{var s;return[n("节点名称","remarks",{attrs:{class:"!w-[32rem]",placeholder:"请输入节点名称"},rules:[{required:!0,message:"节点名称不能为空",trigger:["blur","change"]}]}),n("面板地址","address",{attrs:{class:"!w-[320px]",clearable:!0,placeholder:"例如:http://192.168.1.1:88 或 https://domain.com:88",onInput:r=>{if(e.value.address=e.value.address.trim(),a(e.value.address)){const a=new URL(e.value.address);e.value.address=a.origin}}},rules:[r()]}),n("API密钥","api_key",{attrs:{class:"!w-[32rem]",placeholder:g.value?"请输入API密钥,留空则沿用之前的密钥":"请输入API密钥"},rules:[{required:!g.value,message:"API密钥不能为空",trigger:["blur","change"]}]}),m("分类","category_id",b.value||[{label:"默认分类",value:"0"}],{attrs:{class:"!w-[32rem]",placeholder:"请选择分类",defaultId:null==(s=e.value)?void 0:s.category_id}}),{type:"help",options:[{content:"第一步：填写面板URL地址，示例：https://192.168.1.2:8888"},{content:"第二步：打开面板，转到【面板设置】页面，点击【API接口配置】"},{isHtml:!0,content:'<li style="color:red">第三步：配置【IP白名单】，输入您电脑的公网固定IP，如果没有固定IP，请直接填星号(*)</li>'},{content:"第四步：在【API接口配置】窗口中复制【接口密钥】"},{content:"第五步：回到节点管理窗口，粘贴到【API密钥】输入框"}]}]}),submit:async(e,a,r)=>{await a();const{address:s,category_id:t,api_key:l,remarks:i}=e.value;let o={address:s,api_key:l,category_id:"all"===t?0:t,remarks:i};return g.value&&(""===e.value.api_key&&(o.api_key=j.value.api_key),o.id=j.value.id),await u(o,g.value)}});return v({onConfirm:h}),(e,a)=>(l(),i("div",y,[o(d(f))]))}});export{g as default};
