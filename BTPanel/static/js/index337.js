import{c as e,g as a,p as l,a4 as s,H as t,x as r,q as u,v as o,e as i,ag as n,B as d,n as c,af as p,aj as m,ai as v,S as b,bq as f,i as x}from"./base-lib.js?v=1756369731";import{G as j,W as w}from"./utils-lib.js?v=1756369731";import{f as _,a as h,e as y,b as g,h as H,c as V,r as q,i as E,g as C,d as M,m as O}from"./index59.js?v=1756369731";import{o as S,h as U,k as z,b as B}from"./form-item.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./useMethod7.js?v=1756369731";import"./validator.js?v=1756369731";import"./index104.js?v=1756369731";import"./column.js?v=1756369731";import"./site.js?v=1756369731";import"./index103.js?v=1756369731";import"./useMethod6.js?v=1756369731";import"./firewall.js?v=1756369731";import"./useStore5.js?v=1756369731";import"./useMethod9.js?v=1756369731";const D={class:"py-[1rem] px-[3rem]"};const F="!w-[300px]",k=e({__name:"index",props:{compData:{type:Object,default:()=>({})}},setup(e,{expose:k}){const G=e,{isEdit:W,row:A}=G.compData,I=a(()=>0===_.value?[{content:'<span class="text-[#dc2626]">全部：捕获当前域名下，所有邮件（包括不存在的邮箱的邮件）</span>',isHtml:!0},{content:'<span class="text-[#dc2626]">不存在：捕获当前域名下，不存在的邮箱的邮件</span>',isHtml:!0},{content:'<span class="text-[#dc2626]">前缀：捕获当前域名下，以指定字符串的开头的邮箱（邮箱可以不存在）的邮件</span>',isHtml:!0},{content:'<span class="text-[#dc2626]">后缀：捕获当前域名下，邮箱地址@以前的部分以指定字符串的结尾的邮箱（邮箱可以不存在）的邮件</span>',isHtml:!0},{content:'<span class="text-[#dc2626]">包含：捕获当前域名下，邮箱地址@以前的部分包含指定字符串的邮箱（邮箱可以不存在）的邮件</span>',isHtml:!0}]:[{content:'<span class="text-[#dc2626]">转发示例：配置bt.cn转发到btmail.cn，则：a@bt.cn->a@btmail.cn、b@bt.cn->b@btmail.cn、...</span>',isHtml:!0}]),J=[{label:"前缀",value:"prefix"},{label:"后缀",value:"suffix"},{label:"包含",value:"contain"},{label:"全部",value:"all"},{label:"不存在",value:"none"}],K=e=>[U(" ",()=>i(p,{disabled:W,modelValue:e.value.type,"onUpdate:modelValue":a=>e.value.type=a,onChange:a=>{e.value.rule_str="",e.value.rule="all",c(()=>{P.value&&P.value.clearValidate(),P.value&&P.value.validateField("receiver")})}},{default:()=>[i(n,{value:"mail",size:"default"},{default:()=>[d("邮箱")]}),i(n,{class:"ml-[6rem]",value:"wildcard",size:"default"},{default:()=>[d("通配符")]})]}),"type"),z("域名","domain",M.value,{attrs:{class:F,disabled:W,onChange:a=>{e.value.rule_str="",C(a)}},rules:[{required:!0,message:"请选择域名"}]}),"mail"===e.value.type?z("邮箱","rule_str",O.value,{attrs:{class:F,disabled:!e.value.domain||W,placeholder:"请先选择域名，再选择邮箱"},rules:[{validator:(a,l,s)=>{if("mail"===e.value.type)l?s():s(new Error("请选择邮箱"));else{if("none"===e.value.rule||"all"===e.value.rule)return void s();l?s():s(new Error("请输入规则内容"))}}}]}):U("规则",()=>{let a;const l="none"===e.value.rule||"all"===e.value.rule;return i("div",{class:"flex items-center"},[i(m,{disabled:W,modelValue:e.value.rule,"onUpdate:modelValue":a=>e.value.rule=a,onChange:a=>{"none"!==a&&"all"!==a||(e.value.rule_str="",c(()=>{P.value&&P.value.clearValidate("rule_str")}))},placeholder:"选择规则",class:"!w-[100px]"},(s=a=J.map(e=>i(v,{label:e.label,value:e.value},null)),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!x(s)?a:{default:()=>[a]})),i(b,{modelValue:e.value.rule_str,"onUpdate:modelValue":a=>e.value.rule_str=a,disabled:l||W,placeholder:"输入规则",class:"!w-[190px] ml-[10px]"},null)]);var s},"rule_str",{rules:[{validator:(a,l,s)=>{"none"!==e.value.rule&&"all"!==e.value.rule?l?s():s(new Error("请输入规则内容")):s()}}]}),B("接收者","receiver",{attrs:{placeholder:"输入需要转发的邮箱",type:"textarea",rows:4,class:F},rules:[{required:!0,message:"请输入需要转发的邮箱",validator:(e,a,l)=>{a?l():l(new Error("请输入需要转发的邮箱"))}}]})],{BtForm:L,submit:N,ref:P}=j({data:()=>h.value,options:e=>a(()=>[...0===_.value?K(e):[z("域名","domain",M.value,{attrs:{class:F,disabled:W},rules:[{required:!0,message:"请选择域名"}]}),B("接收域名","receiver",{attrs:{placeholder:"输入需要接收的域名",class:F},rules:[{required:!0,message:"请输入需要接收的域名"}]})],S("状态","status",{attrs:{class:"!w-[50px]"}})]),submit:async(e,a)=>{let l;return await a(),l=W?await y(e.value,A.address):await g(e.value),l}});return l(async()=>{W?H(A):await V()}),s(()=>{q()}),k({onConfirm:async()=>await N()}),(e,a)=>{const l=w,s=f;return t((u(),o("div",D,[i(r(L)),i(l,{options:r(I)},null,8,["options"])])),[[s,r(E)]])}}});export{k as default};
