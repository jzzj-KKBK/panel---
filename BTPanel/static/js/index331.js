import{j as a,r as s,e as t,c as e,s as o,ay as l,g as r,n as p,q as u,v as n,x as d,y as c,A as i,z as m,M as v,B as _,C as x,au as f,aw as y,aQ as w,D as b}from"./base-lib.js?v=1756369731";import{A as h,iE as D,M as j,k as M,e as k}from"./utils-lib.js?v=1756369731";import{o as T}from"./index56.js?v=1756369731";import{o as C}from"./validator.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index103.js?v=1756369731";import"./index112.js?v=1756369731";import"./useMethod7.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";import"./useMethod9.js?v=1756369731";import"./header-nav-tools.vue_vue_type_script_setup_true_lang.js?v=1756369731";const X=a("MAIL_DOMAIN_DNS",()=>{const a=s(),e=s({}),o=s([{type:"TXT",host:"@",value:"v=spf1 a mx -all"},{type:"TXT",host:"default._domainkey",value:""},{type:"TXT",host:"_dmarc",value:""}]),l=({status:a})=>t("div",{class:["inline-flex items-center",a?"text-primary":"text-[#dc2626]"]},[t("span",{class:["glyphicon","glyphicon-".concat(a?"ok":"remove")]},null),t("span",{class:"ml-4px"},[a?"OK":"未设置"])]),r=s([{prop:"domain",label:"域名",width:120,showOverflowTooltip:!0},{prop:"mx_status",label:"MX记录",render:a=>t(l,{status:1===a.mx_status},null)},{prop:"a_status",label:"A记录",render:a=>t(l,{status:1===a.a_status},null)},{prop:"spf_status",label:"SPF记录",render:a=>t(l,{status:1===a.spf_status},null)},{prop:"dkim_status",label:"DKIM记录",render:a=>t(l,{status:1===a.dkim_status},null)},{prop:"dmarc_status",label:"DMARC记录",render:a=>t(l,{status:1===a.dmarc_status},null)}]);return{statusData:a,propsData:e,addTxtRecordData:o,statusColumns:r,onCopy:a=>{h({value:a,success:"复制成功",error:"复制失败"})},onVerify:async a=>{const{data:s}=await D({domain:e.value.row.domain});j.request(s),s.status&&(a(),e.value.onRefresh&&e.value.onRefresh())},init:s=>{e.value=s,a.value=[e.value.row],o.value[1].value=e.value.row.dkim_value,o.value[2].value=e.value.row.dmarc_value},onParseAllEnvent:async a=>{T(e.value.row.domain,e.value.row.mx_record,(s,t)=>{s.status&&(a&&a(),e.value.onRefresh&&e.value.onRefresh(),C(t,{title:"一键解析"}))})}}}),A={class:"p-20px"},R={class:"mr-4px max-w-220px! truncate"},g=["onClick"],I={class:"flex flex-center mt-24px justify-end"},E=k(e({__name:"index",props:{compData:{}},setup(a){const{propsData:s,addTxtRecordData:e,statusData:h}=o(X()),{init:D,statusColumns:j,onCopy:k,onVerify:T,onParseAllEnvent:C}=X(),E=a,O=l("popupClose"),P=r(()=>!(E.compData.row.mx_status&&E.compData.row.a_status&&E.compData.row.spf_status&&E.compData.row.dkim_status&&E.compData.row.dmarc_status)&&E.compData.row.dns_id);return p(()=>{D(E.compData)}),(a,o)=>{var l;const r=M,p=f,D=y,X=w,E=b;return u(),n("div",A,[t(r,{class:"mb-20px",data:d(h),column:d(j)},null,8,["data","column"]),o[4]||(o[4]=c("div",{class:"record-title"},"第一步：添加 MX 记录",-1)),o[5]||(o[5]=c("div",{class:"record-desc"},"登录域名服务商，添加记录类型为MX的记录，用于邮箱服务(解析MX记录之前要先解析A记录)",-1)),t(D,{class:"mb-30px",data:[{type:"MX",host:"@",value:null==(l=d(s).row)?void 0:l.mx_record,priority:"10"}]},{default:i(()=>[t(p,{prop:"type",label:"记录类型"}),t(p,{prop:"host",label:"主机记录"}),t(p,{prop:"value",label:"记录值"}),t(p,{prop:"priority",label:"MX优先级"})]),_:1},8,["data"]),o[6]||(o[6]=c("div",{class:"record-title"},"第二步：添加 TXT 记录",-1)),o[7]||(o[7]=c("div",{class:"record-desc"},"添加记录类型为TXT的记录，用于邮箱反垃圾(请直接复制下列参数)",-1)),t(D,{class:"mb-30px",data:d(e)},{default:i(()=>[t(p,{prop:"type",label:"记录类型"}),t(p,{prop:"host",label:"主机记录"}),t(p,{width:"280",prop:"value",label:"记录值"},{default:i(a=>[t(X,{content:a.row.value,"popper-class":"w-220px",effect:"dark",placement:"top-end"},{default:i(()=>[c("span",R,m(a.row.value),1)]),_:2},1032,["content"]),c("span",{class:"text-[#20a53a] cursor-pointer hover:text-[#1d9534]",onClick:s=>d(k)(a.row.value)}," (复制) ",8,g)]),_:1})]),_:1},8,["data"]),c("div",I,[d(P)?(u(),v(E,{key:0,onClick:o[0]||(o[0]=a=>d(C)(d(O)))},{default:i(()=>[...o[2]||(o[2]=[_("一键解析",-1)])]),_:1})):x("",!0),t(E,{type:"primary",onClick:o[1]||(o[1]=a=>d(T)(d(O)))},{default:i(()=>[...o[3]||(o[3]=[_(" 已设置，验证域名解析 ",-1)])]),_:1})])])}}}),[["__scopeId","data-v-00b11c68"]]);export{E as default};
