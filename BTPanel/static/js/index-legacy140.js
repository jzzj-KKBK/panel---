!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var u=null!=arguments[n]?arguments[n]:{};n%2?t(Object(u),!0).forEach(function(t){r(e,t,u[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))})}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var u=r.call(t,n||"default");if("object"!=e(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,u,a){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return o(s,"_invoke",function(n,r,u){var o,a,i,c=0,s=u||[],f=!1,v={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,a=0,i=e,v.n=n,l}};function p(n,r){for(a=n,i=r,t=0;!f&&c&&!u&&t<s.length;t++){var u,o=s[t],p=v.p,d=o[2];n>3?(u=d===r)&&(i=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=p&&((u=n<2&&p<o[1])?(a=0,v.v=r,v.n=o[1]):p<d&&(u=n<3||o[0]>r||r>d)&&(o[4]=n,o[5]=r,v.n=d,a=0))}if(u||n>1)return l;throw f=!0,r}return function(u,s,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,d),a=s,i=d;(t=a<2?e:i)||!f;){o||(a?a<3?(a>1&&(v.n=-1),p(a,i)):v.n=i:v.v=i);try{if(c=2,o){if(a||(u="next"),t=o[u]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(i=TypeError("The iterator does not provide a '"+u+"' method"),a=1);o=e}else if((t=(f=v.n<0)?i:n.call(r,v))!==l)break}catch(t){o=e,a=1,i=t}finally{c=1}}return{value:t,done:f}}}(n,u,a),!0),s}var l={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var v=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),p=f.prototype=c.prototype=Object.create(v);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,o(p,"constructor",f),o(f,"constructor",s),s.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,r,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:d}})()}function o(e,t,n,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?u?u(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function a(e,t,n,r,u,o,a){try{var i=e[o](a),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,u)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,u){var o=e.apply(t,n);function i(e){a(o,r,u,i,l,"next",e)}function l(e){a(o,r,u,i,l,"throw",e)}i(void 0)})}}System.register(["./ace-legacy.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731"],function(e,t){"use strict";var r,o,a,l,c,s,f,v,p,d,b,y,m;return{setters:[null,function(e){r=e.bS,o=e.bT,a=e.b},function(e){l=e.c,c=e.t,s=e.r,f=e.U,v=e.w,p=e.p,d=e.n,b=e.e,y=e.m,m=e.a5}],execute:function(){var t=a(),h=t.load,g=t.request;e("B",l({name:"BtAceEditor",props:{modelValue:{type:String,default:""},isZoom:{type:Boolean,default:!1},isScrollBottom:{type:Boolean,default:!1},filePath:{type:String,default:""},request:{type:[Object,Boolean],default:!1},encoding:{type:String,default:"utf-8"},autoSave:{type:Boolean,default:!1},editorOption:{type:Object,default:function(){return{}}}},emits:["update:modelValue","save"],setup:function(e,t){var l=t.attrs,w=t.emit,O=c(e),P=O.modelValue,S=O.editorOption,j=s("file"),q=s(),V=f(),k=s(!1),T={theme:"ace/theme/chrome",mode:"ace/mode/nginx",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},B=s(!1),C=a();v(function(){return P.value},function(t){if(V.value){if(k.value)return void(k.value=!1);try{var n;V.value.getValue()!==P.value&&(V.value.setValue(t||""),V.value.moveCursorTo(0,0)),e.isScrollBottom&&null!==(n=V.value.renderer)&&void 0!==n&&null!==(n=n.scrollBar)&&void 0!==n&&n.scrollHeight&&setTimeout(function(){V.value&&V.value.getSession().setScrollTop(V.value.renderer.scrollBar.scrollHeight)},50)}catch(r){}}}),v(function(){return e.filePath},function(t,n){t!==n&&V.value&&(E(),"model"!==j.value&&G({filePath:t,request:e.request}))}),v(function(){return e.request},function(t,n){t!==n&&V.value&&(E(),"request"===j.value&&G({filePath:e.filePath,request:t}))},{deep:!0});var E=function(){var t,n;""!==e.filePath?j.value="file":null!=e&&null!==(t=e.request)&&void 0!==t&&t.get&&null!=e&&null!==(n=e.request)&&void 0!==n&&n.set?j.value="request":j.value="model"},x=function(){var t=i(u().m(function t(){return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,d();case 1:!q.value||V.value&&V.value.container||z(!0)&&("model"!==j.value?G({filePath:e.filePath,request:e.request}):V.value&&(V.value.setValue(P.value||""),d(function(){V.value&&(V.value.focus(),V.value.moveCursorTo(0,0))})));case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),z=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(!q.value)return!1;if(V.value&&V.value.container&&V.value.container.parentNode)return!0;if(!t){var r=q.value.getBoundingClientRect();if(0===r.width||0===r.height)return!1}q.value.innerHTML="",window.ace.config.set("basePath","/static/editor/");var u=window.ace.edit(q.value,n(n({},m(T)),S.value));return u.commands.addCommand({name:"保存文件",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(){w("save",u.getValue()),e.autoSave&&_({filePath:e.filePath,request:e.request,encoding:e.encoding})},readOnly:!1}),u.getSession().on("change",function(){w("update:modelValue",u.getValue())}),V.value=u,!0}catch(o){return V.value=null,!1}},G=function(){var e=i(u().m(function e(t){var n,o,a,i,l,c,s,f;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.filePath,o=t.request,a=h("正在加载文件内容，请稍后..."),e.p=1,V.value){e.n=2;break}return e.a(2);case 2:if("file"!==j.value){e.n=4;break}return e.n=3,r({path:n});case 3:(i=e.v).status?(l=i.data,c=l&&l.data||"",V.value.setValue(c)):g(i),e.n=7;break;case 4:if("request"!==j.value){e.n=6;break}return e.n=5,o.get();case 5:s=e.v,f=s.data,V.value.setValue(f||""),e.n=7;break;case 6:k.value=!0,w("update:modelValue",V.value.getValue());case 7:d(function(){V.value&&(V.value.focus(),V.value.moveCursorTo(0,0))}),e.n=9;break;case 8:e.p=8,e.v;case 9:return e.p=9,a.close(),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=i(u().m(function e(t){var n,r,a,i,l,c,s;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.filePath,r=t.request,a=t.encoding,i=C.load("正在保存文件，请稍后..."),e.p=1,"file"!==j.value){e.n=3;break}return e.n=2,o({path:n,encoding:a,data:V.value.getValue()});case 2:l=e.v,C.request(l),e.n=6;break;case 3:if("request"!==j.value){e.n=5;break}return e.n=4,r.set({data:V.value.getValue(),encoding:a});case 4:c=e.v,C.request(c),e.n=6;break;case 5:w("save",V.value.getValue());case 6:e.n=8;break;case 7:e.p=7,s=e.v,C.error(s);case 8:return e.p=8,i.close(),e.f(8);case 9:return e.a(2)}},e,null,[[1,7,8,9]])}));return function(t){return e.apply(this,arguments)}}(),D=function(){B.value=!B.value};return p(i(u().m(function t(){return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,d();case 1:return E(),z(),t.n=2,d();case 2:"model"!==j.value?G({filePath:e.filePath,request:e.request}):V.value&&(V.value.setValue(P.value||""),d(function(){V.value&&(V.value.focus(),V.value.moveCursorTo(0,0))})),q.value&&window.ResizeObserver&&new ResizeObserver(function(e){e.forEach(function(e){var t=e.contentRect,n=t.width,r=t.height;!(n>0&&r>0)||V.value&&V.value.container?V.value&&n>0&&r>0&&V.value.resize():x()})}).observe(q.value);case 3:return t.a(2)}},t)}))),function(){return b("div",{class:"ace-editor-content h-full relative"},[b("div",y({class:"ace-editor "+(e.isZoom,""),style:"height:100%",ref:q},l),null),e.isZoom?b("div",{class:"absolute right-0 top-0 icon-zoom",title:e.isZoom?"全屏显示":"退出全屏",onClick:D},null):null])}}}))}}})}();
