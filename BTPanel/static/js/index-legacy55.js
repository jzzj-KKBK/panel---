!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,u,l,i=[],o=!0,c=!1;try{if(u=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=u.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,u=function(){};return{s:u,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function u(n,r,a,u){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return i(s,"_invoke",function(n,r,a){var u,l,i,c=0,s=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return u=t,l=0,i=e,d.n=n,o}};function p(n,r){for(l=n,i=r,t=0;!f&&c&&!a&&t<s.length;t++){var a,u=s[t],p=d.p,v=u[2];n>3?(a=v===r)&&(i=u[(l=u[4])?5:(l=3,3)],u[4]=u[5]=e):u[0]<=p&&((a=n<2&&p<u[1])?(l=0,d.v=r,d.n=u[1]):p<v&&(a=n<3||u[0]>r||r>v)&&(u[4]=n,u[5]=r,d.n=v,l=0))}if(a||n>1)return o;throw f=!0,r}return function(a,s,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,v),l=s,i=v;(t=l<2?e:i)||!f;){u||(l?l<3?(l>1&&(d.n=-1),p(l,i)):d.n=i:d.v=i);try{if(c=2,u){if(l||(a="next"),t=u[a]){if(!(t=t.call(u,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,l<2&&(l=0)}else 1===l&&(t=u.return)&&t.call(u),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);u=e}else if((t=(f=d.n<0)?i:n.call(r,d))!==o)break}catch(t){u=e,l=1,i=t}finally{c=1}}return{value:t,done:f}}}(n,a,u),!0),s}var o={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(i(t={},r,function(){return this}),t),p=f.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,i(p,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,r,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:u,m:v}})()}function i(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,n,r){function u(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},i(e,t,n,r)}function o(e,t,n,r,a,u,l){try{var i=e[u](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function l(e){o(u,r,a,l,i,"next",e)}function i(e){o(u,r,a,l,i,"throw",e)}l(void 0)})}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./useMethod-legacy7.js?v=1756369731","./header-nav-tools.vue_vue_type_script_setup_true_lang-legacy.js?v=1756369731","./useMethod-legacy8.js?v=1756369731","./validator-legacy.js?v=1756369731","./index-legacy103.js?v=1756369731","./column-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./form-item-legacy.js?v=1756369731"],function(a,u){"use strict";var i,o,s,v,m,h,y,b,g,_,w,x,k,C,j,V,E,T,D,S,O,B,R,M,A,U,H,P,L,q,I,$,z,F,N,W,G,J,K,Q,X,Y,Z,ee,te,ne,re,ae,ue,le,ie,oe,ce,se,fe,de,pe,ve,me,he,ye,be,ge,_e,we,xe,ke,Ce,je,Ve,Ee,Te,De,Se,Oe,Be,Re,Me,Ae,Ue,He,Pe,Le,qe,Ie,$e,ze,Fe,Ne,We,Ge,Je,Ke,Qe,Xe,Ye,Ze,et,tt,nt,rt,at,ut,lt,it,ot,ct,st,ft,dt,pt,vt,mt,ht,yt,bt,gt,_t,wt,xt,kt,Ct,jt,Vt,Et,Tt;return{setters:[function(e){i=e.d6,o=e.a3,s=e.R,v=e.d7,m=e.N,h=e.u,y=e.e,b=e.af,g=e.d8,_=e.c,w=e.d9,x=e.K,k=e.da,C=e.db,j=e.dc,V=e.l,E=e.dd,T=e.de,D=e.df,S=e.L,O=e.M,B=e.dg,R=e.o,M=e.dh,A=e.di,U=e.a6,H=e.dj,P=e.aj,L=e.dk,q=e.dl,I=e.dm,$=e.dn,z=e.G,F=e.dp,N=e.dq,W=e.dr,G=e.ds,J=e.dt,K=e.du,Q=e.dv,X=e.dw,Y=e.a8,Z=e.dx,ee=e.A,te=e.dy,ne=e.dz,re=e.dA,ae=e.dB,ue=e.dC,le=e.dD,ie=e.dE,oe=e.dF,ce=e.al},function(e){se=e.r,fe=e.bH,de=e.c,pe=e.W,ve=e.X,me=e.q,he=e.M,ye=e.A,be=e.B,ge=e.z,_e=e.v,we=e.F,xe=e.a_,ke=e.x,Ce=e.ai,je=e.aj,Ve=e.e,Ee=e.y,Te=e.ah,De=e.af,Se=e.b6,Oe=e.s,Be=e.P,Re=e.k,Me=e.b4,Ae=e.p,Ue=e.b8,He=e.b9,Pe=e.w,Le=e.n,qe=e.g,Ie=e.J,$e=e.L,ze=e.D,Fe=e.aM,Ne=e.S,We=e.a9,Ge=e.a7,Je=e.ar,Ke=e.bI,Qe=e.a4,Xe=e.K,Ye=e.H,Ze=e.I,et=e.d,tt=e.al,nt=e.ag,rt=e.R,at=e.j,ut=e.C,lt=e.m,it=e.ay,ot=e.a5},function(e){ct=e.u,st=e.o,ft=e.g},function(e){dt=e._},function(e){pt=e.a,vt=e.s,mt=e.e,ht=e.b,yt=e.t,bt=e.c,gt=e.d,_t=e.f,wt=e.m},function(e){xt=e.o},function(e){kt=e._},function(e){Ct=e.u,jt=e.a,Vt=e.c},function(e){Et=e._},function(e){Tt=e.b}],execute:function(){a({A:function(e,t){var n=qn.value.findIndex(function(t){return t==e}),r=qn.value.findIndex(function(e){return e==t});-1!==n&&-1!==r&&n<r&&(qn.value[n]=t,qn.value[r]=e);rr.$emit("makeDom")},B:function(e,t){var n=qn.value.findIndex(function(t){return t==e}),r=qn.value.findIndex(function(e){return e==t});-1!==n&&-1!==r&&n>r&&(qn.value[n]=t,qn.value[r]=e);rr.$emit("makeDom")},C:function(e){var t,n,r,a,u,l,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=0,s=!1,f=!1,d=!0;i=Number(i)||0,o&&(s=!!o.leading,r=(f="maxWait"in o)?Math.max(Number(o.maxWait)||0,i):void 0,d="trailing"in o?!!o.trailing:d);function p(r){var u=t,l=n;return t=n=void 0,c=r,a=e.apply(l,u)}function v(e,t){return setTimeout(e,t)}function m(e){var t=e-(l||0);return void 0===l||t>=i||t<0||f&&e-c>=(r||0)}function h(){var e=Date.now();if(m(e))return y(e);u=v(h,function(e){var t=e-c,n=i-(e-(l||0));return f?Math.min(n,(r||0)-t):n}(e))}function y(e){return u=void 0,d&&t?p(e):(t=n=void 0,a)}function b(){for(var e=Date.now(),r=m(e),o=arguments.length,d=new Array(o),y=0;y<o;y++)d[y]=arguments[y];if(t=d,n=this,l=e,r){if(void 0===u)return function(e){return c=e,u=v(h,i),s?p(e):a}(l);if(f)return u=v(h,i),p(l)}return void 0===u&&(u=v(h,i)),a}return b.cancel=function(){void 0!==u&&clearTimeout(u);c=0,t=l=n=u=void 0},b.flush=function(){return void 0===u?a:y(Date.now())},b.pending=function(){return void 0!==u},b},F:xr,G:function(e){var t=[];In.value[e].children.forEach(function(e){t.push(Number($n.value[e].width.split("%")[0]))});var n=100/(t.length+1),r=t.reduce(function(e,t){return e+t},0),a=(100-(r+n))/r;t.push(n);for(var u=0;u<t.length-1;u++)t[u]+=t[u]*a;xr(t,e),rr.$emit("makeDom")},H:function(e,t){var n=In.value[t].children.reduce(function(t,n){var r=Number($n.value[e].width.split("%")[0]);return f(f({},t),{},d({},n,r))},{});delete n[e];var r=Object.values(n),a=r.reduce(function(e,t){return e+t},0),u=(100-a)/a,l=(r=r.map(function(e){return parseFloat((e*(1+u)).toFixed(2))})).reduce(function(e,t){return e+t},0),i=100-l;0!==i&&(r[r.length-1]+=i);wr(e,t),xr(r,t),rr.$emit("makeDom")},J:function(){qn.value=[],In.value={},$n.value={},zn.value={},Fn.value={},Nn.value={},Wn.value={},Gn.value={}},K:function(e){if(!e)return;kr(e),Un(),rr.$emit("makeDom")},M:function(e,t){if("0"==e.key){var n=jr();!function(e,t){qn.value.splice(t,0,e),rr.$emit("makeDom")}(n,t),function(e){var t=jr();In.value[e]={type:Bn.Columns,name:"列",key:e,children:[t]},yr(t),function(e){Nn.value[e]=mr(er)}(e),rr.$emit("makeDom")}(n),gr(n,"columns")}rr.$emit("makeDom")},c:mr,f:function(e,t,n){var r=$n.value[e].children.findIndex(function(e){return e==t}),a=$n.value[e].children.findIndex(function(e){return e==n});-1!==r&&-1!==a&&r>a&&($n.value[e].children.splice(r,1),$n.value[e].children.splice(a,0,t));rr.$emit("makeDom")},g:jr,h:function(e,t,n){var r=$n.value[e].children.findIndex(function(e){return e==t}),a=$n.value[e].children.findIndex(function(e){return e==n});-1!==r&&-1!==a&&r<a&&($n.value[e].children.splice(a,1),$n.value[e].children.splice(r,0,n));rr.$emit("makeDom")},i:function(e,t,n){$n.value[e].children.push(t),br(t,n),rr.$emit("makeDom")},j:Er,m:function(e,t){var n=$n.value[t],r=zn.value[e],a=Wn.value[e];if(n&&r&&a){var u=mr(a),l=mr(r),i=jr(),o=n.children.findIndex(function(t){return t===e});-1!==o&&n.children.splice(o+1,0,i),l.key=i,zn.value[i]=l,Wn.value[i]=u}},s:_r,w:function(e,t,n,r){$n.value[e].children.splice(r,0,t),br(t,n),rr.$emit("makeDom")},z:function(e){Hn.value="",Pn.value="",In.value[e].children.forEach(function(t){wr(t,e)}),delete In.value[e],qn.value=qn.value.filter(function(t){return t!==e}),rr.$emit("makeDom")}});var Dt,St,Ot,Bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"getInstance",value:function(){return e.instance||(e.instance=fe()),e.instance}}],(n=null)&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}(),Rt=se(!1),Mt=se("value"),At=se({type:"today",data:(Dt=function(e){var t=new Date(e);t.setHours(0,0,0,0);var n=new Date(e);return n.setHours(23,59,59,999),{start:t,end:n}}(new Date),St=Dt.start,Ot=Dt.end,[St.getTime(),Ot.getTime()])});function Ut(){var e=Bt.getInstance();function t(){return f(f({},"value"!==Mt.value?{domain:Mt.value}:{}),{},{start_time:Math.floor(At.value.data[0]/1e3),end_time:Math.floor(At.value.data[1]/1e3)})}function n(){return(n=c(l().m(function n(){var r,a;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,Rt.value=!0,n.n=1,i(t());case 1:r=n.v,a=r.data,o(a)&&e.trigger(a);case 2:return n.p=2,Rt.value=!1,n.f(2);case 3:return n.a(2)}},n,null,[[0,,2,3]])}))).apply(this,arguments)}return{getRate:function(e){return e>=0?"".concat(e,"%"):"--"},getChartTime:function(e,t){var n=new Date;return"hourly"===e?(n.setMinutes(0),n.setSeconds(0),n.setHours(t)):"daily"===e&&(n=new Date(1e3*t)),s(n)},getOverview:function(){return n.apply(this,arguments)},onResult:e.on}}var Ht=de({__name:"domain-select",props:pe({all:{type:Boolean,default:!0},showTag:{type:Boolean,default:!0}},{value:{},valueModifiers:{}}),emits:["update:value"],setup:function(e){var t=e,n=ve(e,"value"),r=se([]),a=function(e){return t.showTag?"域名：".concat(e):e},u=function(){r.value.unshift({label:"全部",value:"value"})},i=ct(),o=i.loading,s=i.setLoading,f=function(){var e=c(l().m(function e(){var a,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,s(!0),e.n=1,v();case 1:a=e.v,i=a.data.data,m(i)&&(r.value=i.map(function(e){return{label:e,value:e}}),t.all?u():n.value=i[0]||"");case 2:return e.p=2,s(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}();return f(),function(e,t){var u=Ce,l=je;return me(),he(l,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.value=e}),loading:ke(o),filterable:!0},{label:ye(function(e){var t=e.label;e.value;return[be(ge(a(t)),1)]}),default:ye(function(){return[(me(!0),_e(we,null,xe(ke(r),function(e){return me(),he(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])}}}),Pt={class:"ml-8px"},Lt=de({__name:"date",props:{type:{},typeModifiers:{},value:{default:function(){return[]}},valueModifiers:{}},emits:["update:type","update:value"],setup:function(e){var t=ve(e,"type"),n=ve(e,"value");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=vt(e),n=mt(e);return[t.getTime(),n.getTime()]}var a=function(e){switch(e){case"today":n.value=r();break;case"yesterday":n.value=r(pt(new Date,-1));break;case"7day":n.value=function(){var e=new Date,t=mt(e);return[vt(pt(e,-6)).getTime(),t.getTime()]}()}},u=function(e){var t=new Date,n=pt(t,-30);return vt(n).getTime()>e||mt(t).getTime()<e},l=function(e){t.value="custom",n.value=[vt(e[0]).getTime(),mt(e[1]).getTime()]};return function(e,r){var i=Te,o=De,c=Se;return me(),_e(we,null,[Ve(o,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=function(e){return t.value=e}),onChange:a},{default:ye(function(){return[Ve(i,{label:"今日",value:"today"}),Ve(i,{label:"昨日",value:"yesterday"}),Ve(i,{label:"最近7天",value:"7day"})]}),_:1},8,["modelValue"]),Ee("div",Pt,[Ve(c,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=function(e){return n.value=e}),type:"daterange","disabled-date":u,onChange:l},null,8,["modelValue"])])],64)}}}),qt={class:"flex items-center justify-between"},It={class:"flex items-center gap-16px"},$t={class:"w-240px"},zt={class:"flex items-center"},Ft=de({__name:"index",setup:function(e){var t=h(),n=Ut().getOverview;Oe(t);var r=function(){n()},a=function(){n()};return function(e,t){return me(),_e("div",qt,[Ee("div",It,[Ee("div",$t,[Ve(Ht,{value:ke(Mt),"onUpdate:value":[t[0]||(t[0]=function(e){return Be(Mt)?Mt.value=e:null}),r]},null,8,["value"])]),Ve(dt)]),Ee("div",zt,[Ve(Lt,{type:ke(At).type,"onUpdate:type":t[1]||(t[1]=function(e){return ke(At).type=e}),value:ke(At).data,"onUpdate:value":[t[2]||(t[2]=function(e){return ke(At).data=e}),a]},null,8,["type","value"])])])}}}),Nt={class:"rate-box"},Wt={class:"rate-list"},Gt={class:"rate-text"},Jt={class:"rate-list"},Kt={class:"rate-text"},Qt=y(de({__name:"index",setup:function(e){var t=Ut(),n=t.onResult,r=t.getRate,a=Re({delivery:0,open:0,click:0,bounce:0});return n(function(e){a.delivery=e.dashboard.delivery_rate,a.open=e.dashboard.open_rate,a.click=e.dashboard.click_rate,a.bounce=e.dashboard.bounce_rate}),function(e,t){return me(),_e("div",Nt,[Ee("div",Wt,[t[0]||(t[0]=Ee("div",{class:"rate-title"},"送达率",-1)),Ee("div",Gt,ge("".concat(ke(a).delivery,"%")),1)]),Ee("div",Jt,[t[1]||(t[1]=Ee("div",{class:"rate-title"},"退信率",-1)),Ee("div",Kt,ge(ke(r)(ke(a).bounce)),1)])])}}}),[["__scopeId","data-v-25e48e14"]]),Xt={class:"total-list"},Yt={class:"total-item"},Zt={class:"total-value text-primary text-22px"},en={class:"total-item"},tn={class:"total-value text-17px"},nn={class:"total-item"},rn={class:"total-value text-17px"},an={class:"w-100% h-300px"},un=de({__name:"index",setup:function(e){var t=Ut(),n=t.onResult,r=t.getChartTime,a=t.getOverview,u=se(null),l=se({delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0}),i=b({options:{}}),o=i.BtECharts,c=i.getEChart,s=i.setOption,f=(i.setQuickOption,Me({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},legend:{top:0,itemGap:16,icon:"circle",itemWidth:10,itemHeight:10,data:["发件成功","发件失败"],textStyle:{lineHeight:12,padding:[0,0,-2,0],rich:{a:{verticalAlign:"middle"}}}},grid:{top:"16%",left:"2%",right:"2%",bottom:"4%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,"6%"],splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:"#ebeef5"}}},xAxis:d(),series:[{type:"bar",name:"发件成功",data:[]},{type:"bar",name:"发件失败",data:[]}],events:{click:function(e){if("bar"===e.componentSubType&&m(e.value)&&"daily"===e.value[2]){var t=new Date(e.value[0]);At.value.type="custom",At.value.data=[vt(t).getTime(),mt(t).getTime()],a()}}}}));function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HH:mm";return{type:"category",axisLabel:{formatter:function(t){return"HH:mm"===e?t.match(/\d{2}:\d{2}/)[0]:t.split(" ")[0]}}}}return Ae(function(){n(function(e){var t,n,a;e.send_mail_chart&&(l.value=e.send_mail_chart.dashboard,t=e.send_mail_chart,n=[],a=[],t.data.forEach(function(e){n.push([r(t.column_type,e.x),e.failed,t.column_type]),a.push([r(t.column_type,e.x),e.delivered,t.column_type])}),f.series=[{type:"bar",name:"发件失败",data:n,stack:"total",itemStyle:{color:"#1A519B"}},{type:"bar",name:"发件成功",data:a,stack:"total",itemStyle:{color:"#91CC75"}}],f.xAxis=d("hourly"===t.column_type?"HH:mm":"yyyy-MM-dd"),u.value=c(),s(f))})}),function(e,t){return me(),_e(we,null,[t[3]||(t[3]=Ee("div",{class:"mb-16px font-bold text-16px text-default"},"今日发送",-1)),Ee("div",Xt,[Ee("div",Yt,[t[0]||(t[0]=Ee("div",{class:"total-label"},"发件成功率",-1)),Ee("div",Zt,ge(ke(l).delivery_rate)+"%",1)]),Ee("div",en,[t[1]||(t[1]=Ee("div",{class:"total-label"},"发件成功",-1)),Ee("div",tn,ge(ke(l).delivered),1)]),Ee("div",nn,[t[2]||(t[2]=Ee("div",{class:"total-label"}," 发件失败 ",-1)),Ee("div",rn,ge(ke(l).failed),1)])]),Ee("div",an,[Ve(ke(o),{style:{height:"300px"}})])],64)}}}),ln=y(un,[["__scopeId","data-v-08d72c14"]]),on={class:"flex-center !h-370px"},cn=de({__name:"bounce",setup:function(e){var t=Ut(),n=t.onResult,r=t.getChartTime,a=Me({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},grid:{top:"16%",left:"2%",right:"2%",bottom:"2%",containLabel:!0},yAxis:{name:"%",type:"value",splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:"#ebeef5"}},max:function(e){var t=e.max;return t>100?100:t}},xAxis:u(),series:l()});function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HH:mm";return{type:"category",axisLabel:{formatter:function(t){return"HH:mm"===e?t.match(/\d{2}:\d{2}/)[0]:t.split(" ")[0]}}}}function l(){return[{name:"退信率",type:"line",data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],itemStyle:{color:"#20a53a"},smooth:!1,showSymbol:!1,sampling:"average"}]}var i=b({options:{}}),o=i.BtECharts,c=(i.getEChart,i.setOption);i.setQuickOption;return n(function(e){var t=e.bounce_rate_chart;if(t){var n=t.data.map(function(e){return[r(t.column_type,e.x),e.bounce_rate]});a.series=l(n),a.xAxis=u("hourly"===t.column_type?"HH:mm":"yyyy-MM-dd"),c(a)}}),function(e,t){return me(),_e(we,null,[t[0]||(t[0]=Ee("div",{class:"mb-16px font-bold text-16px text-default"},"退信率%",-1)),Ee("div",on,[Ve(ke(o),{style:{height:"370px"}})])],64)}}}),sn={class:"overview-card"},fn={class:"overview-card"},dn=y(de({__name:"index",setup:function(e){return(0,Ut().getOverview)(),function(e,t){var n=Ue,r=He;return me(),_e("div",null,[Ve(Ft),Ve(Qt),Ve(r,{gutter:16},{default:ye(function(){return[Ve(n,{span:12},{default:ye(function(){return[Ee("div",sn,[Ve(ln)])]}),_:1}),Ve(n,{span:12},{default:ye(function(){return[Ee("div",fn,[Ve(cn)])]}),_:1})]}),_:1})])}}}),[["__scopeId","data-v-0393543f"]]);var pn={class:"flex items-center"},vn={class:"w-260px"},mn={class:"ml-10px"},hn=de({__name:"template",props:{value:{},valueModifiers:{}},emits:["update:value"],setup:function(e,t){var n=t.expose,a=ve(e,"value"),u=se([]),i=ct(),o=i.loading,s=i.setLoading,f=function(){ht("template")},d=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,s(!0),e.n=1,g();case 1:t=e.v,n=t.data,m(n)&&n.length>0&&(u.value=n.map(function(e){return{label:e.name,value:e.id}}),a.value||(a.value=n[0].id));case 2:return e.p=2,s(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}();return d(),n({getList:d}),function(e,t){var n=Ce,l=je,i=_;return me(),_e("div",pn,[Ee("div",vn,[Ve(l,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.value=e}),loading:ke(o),filterable:!0},{default:ye(function(){return[(me(!0),_e(we,null,xe(ke(u),function(e){return me(),he(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])]),Ee("div",mn,[Ve(i,{onClick:f},{default:ye(function(){return r(t[1]||(t[1]=[be("创建",-1)]))}),_:1})])])}}}),yn={class:"w-170px mr-10px"},bn={class:"w-180px"},gn=de({__name:"sender",props:{value:{},valueModifiers:{}},emits:pe(["change"],["update:value"]),setup:function(e,t){var r=t.emit,a=se(null),u=ve(e,"value"),i=se([]),s=se([]),f=se([]),d=function(e){var t=f.value.find(function(t){return t.username===e});t&&r("change",t.full_name)},p=se(!1),h=se(!1),y=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,p.value=!0,e.n=1,v();case 1:t=e.v,n=t.data.data,m(n)&&(i.value=n.map(function(e){return{label:e,value:e}}),a.value=n[0]||null);case 2:return e.p=2,p.value=!1,e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,h.value=!0,e.n=1,w();case 1:t=e.v,n=t.data.data,m(n)&&n.length>0&&(f.value=n);case 2:return e.p=2,h.value=!1,e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}(),g=function(){s.value=f.value.filter(function(e){return e.domain===a.value}).map(function(e){return{data:e,label:e.username,value:e.username}})},_=function(){if(s.value[0]){var e=s.value[0].data;u.value="".concat(s.value[0].value),o(e)&&r("change",e.full_name)}else u.value=null,r("change","")},x=function(){g(),_()},k=function(){var e=c(l().m(function e(){var t,r,i,o;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,Promise.all([y(),b()]);case 1:if(g(),!u.value){e.n=9;break}t=n(f.value),e.p=2,t.s();case 3:if((r=t.n()).done){e.n=5;break}if((i=r.value).username!==u.value){e.n=4;break}return a.value=i.domain,e.a(3,5);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,o=e.v,t.e(o);case 7:return e.p=7,t.f(),e.f(7);case 8:e.n=10;break;case 9:_();case 10:return e.a(2)}},e,null,[[2,6,7,8]])}));return function(){return e.apply(this,arguments)}}();return k(),function(e,t){var n=Ce,r=je;return me(),_e(we,null,[Ee("div",yn,[Ve(r,{modelValue:ke(a),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Be(a)?a.value=e:null}),loading:ke(p),onChange:x},{default:ye(function(){return[(me(!0),_e(we,null,xe(ke(i),function(e){return me(),he(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])]),Ee("div",bn,[Ve(r,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.value=e}),loading:ke(h),onChange:d},{default:ye(function(){return[(me(!0),_e(we,null,xe(ke(s),function(e){return me(),he(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])])],64)}}}),_n={class:"flex"},wn={class:"ml-40px"},xn=de({__name:"import",props:pe({path:{default:""},accept:{default:function(){return[]}}},{value:{},valueModifiers:{}}),emits:pe(["change"],["update:value"]),setup:function(e,t){var n=t.emit,a=e,u=a.path,l=a.accept,i=ve(e,"value");Pe(i,function(e){o("change",e)});var o=n,c=function(){st({path:u,size:5,uploadData:{accept:l.map(function(e){return".".concat(e)}).join(","),multiple:!1,limit:1},refreshEvent:function(e,t){i.value=e[0].name,t()}})};return function(e,t){var n=ze;return me(),_e("div",null,[Ee("div",_n,[Ve(n,{type:"primary",onClick:c},{default:ye(function(){return r(t[0]||(t[0]=[be("导入",-1)]))}),_:1}),Ee("div",wn,[t[1]||(t[1]=be(" 文件名: ",-1)),Ee("span",{class:Ie(i.value?"text-primary":"text-[#dc2626]")},ge(i.value||"未选择任何文件"),3)])]),$e(e.$slots,"default")])}}}),kn={class:"p-20px"},Cn={class:"w-250px"},jn=de({__name:"type-create",props:{compData:{}},setup:function(e,t){var n=t.expose,a=e.compData,u=se(null),i=Re({mail_type:"",file:""}),o={mail_type:{required:!0,message:"请输入分组名称",trigger:["blur","input"]},file:{required:!0,message:"请上传文件",trigger:["blur","change"]}},s=function(){var e=c(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(n=u.value)||void 0===n?void 0:n.validate();case 1:x({loading:"正在导入...",message:!0,request:k(f({},i)),success:function(e){var n;e.status&&(null===(n=a.refresh)||void 0===n||n.call(a),t())}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return n({onConfirm:s}),function(e,t){var n=Ne,a=We,l=Ge,c=Fe("bt-tips");return me(),_e("div",kn,[Ve(l,{ref_key:"formRef",ref:u,model:ke(i),rules:o},{default:ye(function(){return[Ve(a,{label:"分组名称",prop:"mail_type"},{default:ye(function(){return[Ee("div",Cn,[Ve(n,{modelValue:ke(i).mail_type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return ke(i).mail_type=e}),placeholder:"请输入分组名称"},null,8,["modelValue"])])]}),_:1}),Ve(a,{label:"邮箱",prop:"file"},{default:ye(function(){return[Ve(xn,{value:ke(i).file,"onUpdate:value":t[1]||(t[1]=function(e){return ke(i).file=e}),path:"/www/server/panel/data/mail/in_bulk/recipient",accept:["txt","json"]},null,8,["value"])]}),_:1})]}),_:1},8,["model"]),Ve(c,{class:"mt-4px"},{default:ye(function(){return r(t[2]||(t[2]=[Ee("li",null," 文件类型: txt/json 每行一个邮箱 不超过5 MB ",-1)]))}),_:1})])}}}),Vn={class:"flex-1"},En={class:"flex items-center"},Tn={class:"w-260px"},Dn={class:"ml-10px"},Sn={class:"mt-8px"},On=de({__name:"type",props:{value:{},valueModifiers:{},name:{},nameModifiers:{}},emits:["update:value","update:name"],setup:function(e,t){var n=t.expose,a=ve(e,"value"),u=ve(e,"name"),i=se([]),s=se([]),f=se(0),d=ct(),p=d.loading,v=d.setLoading,h=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,v(!0),e.n=1,C({});case 1:t=e.v,n=t.data,m(n)&&(s.value=n,i.value=n.map(function(e){return{label:e.mail_type,value:e.id}}),a.value&&a.value.length>0&&y(a.value));case 2:return e.p=2,v(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=c(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return u.value=s.value.filter(function(e){return t.includes(e.id)}).map(function(e){return e.mail_type}),e.n=1,j({etypes:t.join(",")});case 1:n=e.v,r=n.data,o(r)&&(f.value=r.data);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(){V({title:"创建新的分组",area:48,showFooter:!0,compData:{refresh:h},component:jn})};return h(),n({getType:h}),function(e,t){var n=Ce,u=je,l=_;return me(),_e("div",Vn,[Ee("div",En,[Ee("div",Tn,[Ve(u,{class:"bt-multiple-select",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.value=e}),loading:ke(p),multiple:"",filterable:"",placeholder:"请选择分组",onChange:y},{default:ye(function(){return[(me(!0),_e(we,null,xe(ke(i),function(e){return me(),he(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])]),Ee("div",Dn,[Ve(l,{onClick:b},{default:ye(function(){return r(t[1]||(t[1]=[be("创建",-1)]))}),_:1})])]),Ee("div",Sn,[t[2]||(t[2]=be("发送邮件 (",-1)),Ee("b",null,ge(ke(f)),1),t[3]||(t[3]=be(" 个收件人)",-1))])])}}}),Bn=a("D",function(e){return e.Columns="columns",e.Button="button",e.Divider="divider",e.Header="header",e.Text="text",e.Image="image",e.Menu="menu",e.Html="html",e.commonComp="commonComp",e}(Bn||{}));a("d",["button","divider","header","text","image","menu","html","commonComp"]);function Rn(e){return"border"==e||"padding"==e||"borderRadius"==e}function Mn(e){if(null==e||"object"!==t(e))return e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var u=0,l=r;u<l.length;u++){var i=l[u];if(null!=i)for(var o in i){var c=e[o],s=i[o];void 0!==c?null===c||null===s||"object"!==t(c)||"object"!==t(s)||Array.isArray(c)||Array.isArray(s)||c instanceof Date||c instanceof RegExp||c instanceof Map||c instanceof Set||Mn(c,s):e[o]=mr(s)}}return e}var An={comp_type:{button:function(){return tr}}};function Un(){var t=Object.keys(An.comp_type);Object.entries(zn.value).forEach(function(n){var r=e(n,2)[1];t.includes(r.type)&&Object.entries(Wn.value).forEach(function(t){var n=e(t,2),a=n[0],u=n[1];if(a===r.key){var l=An.comp_type[r.type]();u.style=Mn(u.style,l)}})})}a("o",se(!1));var Hn=a("p",se("")),Pn=a("n",se(""));a("r",se(""));se("bottom");a("v",se(""));var Ln,qn=a("E",se([])),In=a("q",se({})),$n=a("a",se({})),zn=a("l",se({})),Fn=a("t",se({})),Nn=a("x",se({})),Wn=a("k",se({})),Gn=se({}),Jn=a("y",se({backgroundColor:"#ffffff",maxWidth:"500px"})),Kn=a("e",se()),Qn=a("L",qe(function(){return{version:1.5,columns_source:qn.value,column_map:In.value,cell_map:$n.value,cell_style_map:Fn.value,column_row_style_map:Nn.value,comp_style_map:Wn.value,compOptions:Gn.value,comp_map:zn.value,page_style:Jn.value}})),Xn=se(!0),Yn=a("I",se(c(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,!1)},e)})))),Zn=(a("b",se([{type:"columns",name:"行",icon:"el-semi-select",key:"0",children:[]},{type:"button",icon:"el-empty",name:"按钮",key:"0"},{type:"divider",name:"分割线",icon:"icon-drag",key:"0"},{type:"header",name:"标题",icon:"el-info-filled",key:"0"},{type:"text",name:"文本",icon:"file-text",key:"0"},{type:"image",name:"图片",icon:"el-folder-opened",key:"0"},{type:"menu",name:"菜单",icon:"menu-setting",key:"0"}])),{style:{backgroundColor:"transparent",padding:{more:!1,all:"0px",top:"",right:"",bottom:"",left:""},border:{more:!1,all:"0px",top:"",right:"",bottom:"",left:""}}}),er={style:{backgroundColor:"transparent",padding:{more:!1,all:"0px",top:"",right:"",bottom:"",left:""}}},tr={border:{more:!1,all:"",top:"",right:"",bottom:"",left:""},padding:{more:!0,all:"",top:"10px",left:"20px",right:"20px",bottom:"10px"},borderRadius:{more:!1,all:"4px",top:"",left:"",right:"",bottom:""},width:"auto",lineHeight:"120%",color:"#ffffff",display:"inline-block",backgroundColor:"#3AAEE0",FontWeight:"normal",fontSize:"14px",textAlign:"center",LetterSpacing:"0px"},nr={button:{style:tr,general:{textAlign:"center",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{href:"",target:"_blank"},content:"按钮"},divider:{style:{borderTop:"1px solid #bbbbbb",width:"100%",display:"inline-block",lineHeight:"1px",height:"0px",verticalAlign:"middle"},general:{textAlign:"center",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{}},header:{style:{position:"relative",display:"block",lineHeight:"140%",fontWeight:"normal",fontSize:"22px",letterSpacing:"0px",color:"#333333"},general:{textAlign:"left",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{},content:"标题"},text:{style:{fontSize:"14px",fontWeight:"normal",color:"#333",textAlign:"left",lineHeight:"140%",letterSpacing:"0px"},general:{padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{},content:"文本"},image:{style:{display:"inline-block",width:"100%"},general:{textAlign:"center",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{href:"",target:"_blank",src:"",alt:""}},menu:{style:{fontWeight:"normal",fontSize:"14px",letterSpacing:"0px",color:"#444444",linkColor:"#0068A5",padding:{more:!0,all:"",top:"5px",left:"15px",right:"15px",bottom:"5px"}},general:{textAlign:"center",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{layout:"horizontal"},links:[{id:jr(6),label:"菜单 1",href:""},{id:jr(6),label:"菜单 2",href:""}]}},rr=a("u",{events:{makeDom:[(Ln=null,function(){clearTimeout(Ln),Ln=setTimeout(function(){Kn.value=ir().outerHTML,ar()},300)})]},$emit:function(e,t){this.events[e]&&this.events[e].forEach(function(e){return e(t)})}});var ar=function(){var e=null;return function(){Xn.value&&(Xn.value=!1,clearTimeout(e),e=setTimeout(c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Yn.value();case 1:Xn.value=!0;case 2:return e.a(2)}},e)})),1e3))}}();function ur(){var e=function(){var e,t={};for(var n in zn.value){var r=document.createElement("div");or(r,Wn.value[n]);var a=null;switch(zn.value[n].type){case"button":cr(a=document.createElement("a"),Wn.value[n]);break;case"divider":sr(a=document.createElement("div"),Wn.value[n]);break;case"header":fr(a=document.createElement("div"),Wn.value[n]);break;case"text":dr(a=document.createElement("div"),Wn.value[n]);break;case"image":if(null!==(e=Wn.value[n].info)&&void 0!==e&&e.href){var u,l,i,o;(a=document.createElement("a")).href=null===(u=Wn.value[n].info)||void 0===u?void 0:u.href,a.target=null===(l=Wn.value[n].info)||void 0===l?void 0:l.target;var c=document.createElement("img");c.src=(null===(i=Wn.value[n].info)||void 0===i?void 0:i.src)||"",c.alt=(null===(o=Wn.value[n].info)||void 0===o?void 0:o.alt)||"",c.style.display="block",c.style.width="100%",a.appendChild(c)}else{var s,f;(a=document.createElement("img")).src=(null===(s=Wn.value[n].info)||void 0===s?void 0:s.src)||"",a.alt=(null===(f=Wn.value[n].info)||void 0===f?void 0:f.alt)||""}pr(a,Wn.value[n]);break;case"menu":vr(a=document.createElement("div"),Wn.value[n])}a&&r.appendChild(a),t[n]={dom:r,general:{},info:Wn.value[n].info}}return t}(),t={},n=function(){var n=document.createElement("td");n.style.width=$n.value[r].width,function(e,t){var n=Er(t);for(var r in n)e.style[r]=n[r]}(n,Fn.value[r]),$n.value[r].children.forEach(function(t){if(e[t])for(var r in n.appendChild(e[t].dom),e[t].general)n.style[r]=e[t].general[r]}),t[r]={dom:n}};for(var r in $n.value)n();return t}function lr(){var e=ur(),t={},n=function(){var n=document.createElement("tr"),a=document.createElement("td"),u=document.createElement("div");!function(e,t){var n=Er(t);for(var r in n)e.style[r]=n[r]}(u,Nn.value[r]);var l=document.createElement("table");l.style.width="100%";var i=document.createElement("tr");In.value[r].children.forEach(function(t){i.appendChild(e[t].dom)}),l.appendChild(i),u.appendChild(l),a.appendChild(u),n.appendChild(a),t[r]={dom:n}};for(var r in In.value)n();return t}function ir(){var e=lr(),t=document.createElement("table");t.setAttribute("width",Jn.value.maxWidth),t.style.margin="0 auto",t.style.backgroundColor=Jn.value.backgroundColor;var r,a=n(qn.value);try{for(a.s();!(r=a.n()).done;){var u=r.value;t.appendChild(e[u].dom)}}catch(l){a.e(l)}finally{a.f()}return t}function or(t,n){var r=Er(n,"general");r&&Object.entries(r).forEach(function(n){var r=e(n,2),a=r[0],u=r[1];t.style[a]=u})}function cr(e,t){var n=Er(t),r=Er(t,"general");for(var a in n)e.style[a]=n[a];e.innerText=t.content;var u=t.info;return u&&(e.href=u.href,e.target=u.target),{generalStyle:r}}function sr(e,t){var n=Er(t),r=Er(t,"general");for(var a in n)e.style[a]=n[a];return{generalStyle:r}}function fr(e,t){var n=Er(t),r=Er(t,"general");for(var a in n)e.style[a]=n[a];return e.innerText=t.content,{generalStyle:r}}function dr(e,t){var n=Er(t),r=Er(t,"general");for(var a in n)e.style[a]=n[a];return e.innerText=t.content,{generalStyle:r}}function pr(e,t){var n=Er(t);for(var r in n)e.style[r]=n[r]}function vr(e,t){var n=t.links,r=t.info;n.forEach(function(n){var a=document.createElement("a");!function(e,t){var n=Er(t);for(var r in n)e.style[r]=n[r]}(a,t),a.style.display="vertical"===(null==r?void 0:r.layout)?"block":"inline-block",a.href=n.href,a.target="_blank",a.innerText=n.label,e.appendChild(a)})}function mr(e){if(null==e||"object"!==t(e))return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e instanceof Map){var n=new Map;return e.forEach(function(e,t){n.set(mr(t),mr(e))}),n}if(e instanceof Set){var a=new Set;return e.forEach(function(e){a.add(mr(e))}),a}if(Array.isArray(e))return e.map(function(e){return mr(e)});var u=Object.create(Object.getPrototypeOf(e));return[].concat(r(Object.getOwnPropertyNames(e)),r(Object.getOwnPropertySymbols(e))).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);if(n){var r=f({},n);void 0!==n.value&&(r.value=mr(n.value)),Object.defineProperty(u,t,r)}}),u}function hr(e,t){In.value[e].children.push(t),yr(t),rr.$emit("makeDom")}function yr(e){$n.value[e]={width:"100%",key:e,children:[]},function(e){Fn.value[e]=mr(Zn)}(e),rr.$emit("makeDom")}function br(e,t){zn.value[e]={key:e,type:t},gr(e,t),rr.$emit("makeDom")}function gr(e,t){Wn.value[e]=mr(nr[t]),rr.$emit("makeDom")}function _r(e,t){!function(e){delete Wn.value[e],rr.$emit("makeDom")}(e),delete zn.value[e],$n.value[t].children=$n.value[t].children.filter(function(t){return t!==e}),rr.$emit("makeDom")}function wr(e,t){$n.value[e].children.forEach(function(t){_r(t,e)}),delete $n.value[e],In.value[t].children=In.value[t].children.filter(function(t){return t!==e}),rr.$emit("makeDom")}function xr(e,t){var n=In.value[t].children;if(n.length<e.length)for(var r=e.length-n.length,a=0;a<r;a++){var u=jr();hr(t,u)}else n.splice(e.length).forEach(function(e){wr(e,t)});n.forEach(function(t,n){$n.value[t].width=e[n]+"%"}),rr.$emit("makeDom")}function kr(e){var t=JSON.parse(e);Gn.value=t.compOptions,Fn.value=t.cell_style_map,Nn.value=t.column_row_style_map,In.value=t.column_map,zn.value=t.comp_map,$n.value=t.cell_map,Wn.value=t.comp_style_map,qn.value=t.columns_source,t.page_style&&(Jn.value=t.page_style)}function Cr(e){if(e)return 1.5!==JSON.parse(e).version?(kr(e),Un(),{content:ir().outerHTML,render:Qn.value}):null}function jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return Math.random().toString(16).slice(2,2+e)}function Vr(e,t){var n="",r="",a="",u="",l="";return"border"==t&&(n="border",r="borderTop",a="borderRight",u="borderBottom",l="borderLeft"),"padding"==t&&(n="padding",r="paddingTop",a="paddingRight",u="paddingBottom",l="paddingLeft"),"borderRadius"==t&&(n="borderRadius",r="borderTopLeftRadius",a="borderTopRightRadius",u="borderBottomRightRadius",l="borderBottomLeftRadius"),e.more?d(d(d(d({},r,e.top),a,e.right),u,e.bottom),l,e.left):d({},n,e.all)}function Er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style";if(e){var n={};for(var r in e[t])Rn(r)?Object.assign(n,Vr(e[t][r],r)):n[r]=e[t][r];return n}}var Tr=["innerHTML"],Dr=de({__name:"preview",props:{id:{}},setup:function(e){var t=Je(e,"id"),n=se(""),r=function(){var e=c(l().m(function e(){var r,a,u;return l().w(function(e){for(;;)switch(e.n){case 0:if(t.value){e.n=1;break}return e.a(2);case 1:return e.n=2,E({id:t.value});case 2:if(r=e.v,a=r.data,!o(a)){e.n=5;break}if(!(u=Cr(a.render))||1!==a.type){e.n=4;break}return n.value=u.content,e.n=3,T({id:t.value,type:a.type,temp_name:a.name,render:JSON.stringify(u.render),content:u.content},!1);case 3:e.n=5;break;case 4:n.value=a.content;case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return Pe(function(){return t.value},function(){r()}),r(),function(e,t){return me(),_e("div",{class:"flex-1 min-w-[520px] overflow-auto border-#ebebeb border-1 border-solid rounded-[4px] p-[12px]",innerHTML:ke(n)},null,8,Tr)}}}),Sr={class:"mb-12px font-bold text-15px text-default leading-28px"},Or={class:"flex flex-col w-550px"},Br={class:"form-card mb-16px pt-20px"},Rr={class:"w-360px"},Mr={class:"w-360px"},Ar={class:"w-[60px] ml-[24px]"},Ur={class:"form-card flex-1 py-[10px]"},Hr={class:"w-360px"},Pr={class:"flex w-360px"},Lr={class:"flex-1 mr-10px"},qr={class:"form-card flex flex-col items-center w-640px ml-16px pt-12px p-16px overflow-hidden"},Ir={class:"mb-12px"},$r={class:"min-w-260px text-[12px]"},zr={class:"min-w-260px text-[12px]"},Fr={class:"min-w-260px text-[12px]"},Nr={class:"mt-[16px]"},Wr=de({__name:"index",props:pe({row:{},isEdit:{type:Boolean,default:!1},refresh:{type:Function,default:function(){}}},{show:{type:Boolean},showModifiers:{}}),emits:["update:show"],setup:function(e){var t=e,n=t.refresh,a=ve(e,"show");h();var i,o,s,d,p,v=Ke("formRef"),m=Ke("containerRef"),y=(i=m,o=se(0),s=Oe(h()).mainHeight,Pe(function(){return s.value},function(e){Le(function(){if(i.value){var t=i.value.getBoundingClientRect().top;o.value=e-t-16-16-52}})},{immediate:!0}),{height:qe(function(){return 0===o.value?"auto":o.value+"px"})}).height,b=Re({task_name:D(12),addresser:null,full_name:"",subject:"",temp_id:yt.value,is_record:0,etypes:[],unsubscribe:1,threadsType:0,threads:1,start_time:null,pause:0,remark:"",mail_to:""}),g=se([]),_={full_name:{trigger:["blur","input"],validator:function(){return""!==b.full_name||new Error("请输入显示名称")}},subject:{trigger:["blur","input"],validator:function(){return""!==b.subject||new Error("请输入邮件主题")}},etypes:{trigger:"change",validator:function(){return 0!==b.etypes.length||new Error("请选择联系人")}},temp_id:{trigger:"change",validator:function(){return null!==b.temp_id||new Error("请选择邮件模板")}},start_time:{validator:function(){return 1!==b.pause||null!==b.start_time||new Error("请选择发送时间")}}},w=function(e){b.full_name=e||""},k=Ke("startTimeRef"),C=function(){Le(function(){var e;null===(e=k.value)||void 0===e||e.restoreValidation()})},j=function(){var e;null===(e=k.value)||void 0===e||e.validate()},E=function(){V({title:"退订设置",area:45,component:et(function(){return S(function(){return u.import("./unsubscribe-legacy.js?v=1756369731")},void 0,u.meta.url)})})},T=Ke("subjectRef"),U=Ke("mailToRef"),H=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:if(""!==b.subject){e.n=1;break}return null===(t=T.value)||void 0===t||t.focus(),O.error("请输入邮件主题"),e.a(2);case 1:if(""!==b.mail_to){e.n=2;break}return null===(n=U.value)||void 0===n||n.focus(),O.error("请输入测试邮箱"),e.a(2);case 2:if(null!==b.temp_id){e.n=3;break}return O.error("请选择邮件模板"),e.a(2);case 3:x({loading:"正在发送...",request:B({mail_from:b.addresser||"",subject:b.subject,mail_to:b.mail_to,temp_id:b.temp_id||0}),message:!0});case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),P=function(){return{task_name:b.task_name,addresser:b.addresser||"",full_name:b.full_name,subject:b.subject,temp_id:b.temp_id||0,is_record:b.is_record,unsubscribe:b.unsubscribe,threads:0===b.threadsType?0:b.threads,etypes:b.etypes.join(","),start_time:0===b.pause?Math.floor((new Date).getTime()/1e3):Math.floor((b.start_time||0)/1e3),remark:b.remark}},L=function(){b.subject||b.etypes.length>0?R({title:"提示",content:"确定放弃当前编辑吗？",onConfirm:function(){a.value=!1}}):a.value=!1},q=function(){var e=c(l().m(function e(){var r,u,i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(r=v.value)||void 0===r?void 0:r.validate();case 1:u=P(),i=t.isEdit,o=t.row,x({loading:"正在保存...",request:i&&o?M(f(f({},u),{},{id:o.id})):A(u),message:!0,success:function(e){e.status&&(a.value=!1,null==n||n())}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return Qe(function(){yt.value=null,bt.value=!1}),d=t.row,p=t.isEdit,d&&(b.task_name=p?d.task_name:"".concat(d.task_name,"_").concat(D(4)),b.addresser=d.addresser,b.full_name=d.full_name,b.subject=d.subject,b.is_record=d.is_record,b.unsubscribe=d.unsubscribe,b.threadsType=0===d.threads?0:1,b.threads=d.threads,b.etypes=d.etypes.split(",").map(function(e){return ft(e)}),1e3*d.start_time>(new Date).getTime()&&(b.pause=1,b.start_time=1e3*d.start_time),b.temp_id=d.temp_id,b.remark=d.remark),function(e,t){var n=We,a=Ne,u=tt,l=ze,i=nt,o=De,c=rt,s=Se,f=Ge;return me(),he(f,{ref_key:"formRef",ref:v,model:ke(b),rules:_,"label-width":"150px"},{default:ye(function(){return[Ee("div",Sr,ge(e.isEdit?"编辑发送任务":"添加发送任务"),1),Ee("div",{ref_key:"containerRef",ref:m,class:"flex min-h-654px",style:Xe({height:ke(y)})},[Ee("div",Or,[Ee("div",Br,[Ve(n,{label:"发件人",prop:"addresser"},{default:ye(function(){return[Ve(gn,{value:ke(b).addresser,"onUpdate:value":t[0]||(t[0]=function(e){return ke(b).addresser=e}),onChange:w},null,8,["value"])]}),_:1}),Ve(n,{label:"显示名称",prop:"full_name"},{default:ye(function(){return[Ee("div",Rr,[Ve(a,{modelValue:ke(b).full_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return ke(b).full_name=e}),placeholder:"请输入显示名称"},null,8,["modelValue"])])]}),_:1}),Ve(n,{label:"邮件主题",prop:"subject"},{default:ye(function(){return[Ee("div",Mr,[Ve(a,{ref_key:"subjectRef",ref:T,modelValue:ke(b).subject,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ke(b).subject=e}),placeholder:"请输入邮件主题"},null,8,["modelValue"])])]}),_:1}),Ve(n,{label:"收件人",prop:"etypes"},{default:ye(function(){return[Ve(On,{value:ke(b).etypes,"onUpdate:value":t[3]||(t[3]=function(e){return ke(b).etypes=e}),name:ke(g),"onUpdate:name":t[4]||(t[4]=function(e){return Be(g)?g.value=e:null})},null,8,["value","name"])]}),_:1}),Ve(n,{label:"邮件模板",prop:"temp_id"},{default:ye(function(){return[Ve(hn,{value:ke(b).temp_id,"onUpdate:value":t[5]||(t[5]=function(e){return ke(b).temp_id=e})},null,8,["value"])]}),_:1}),Ve(n,{label:"保存到发件箱"},{default:ye(function(){return[Ve(u,{modelValue:ke(b).is_record,"onUpdate:modelValue":t[6]||(t[6]=function(e){return ke(b).is_record=e}),"active-value":1,"inactive-value":0},null,8,["modelValue"])]}),_:1}),Ve(n,{label:"退订链接"},{default:ye(function(){return[Ve(u,{modelValue:ke(b).unsubscribe,"onUpdate:modelValue":t[7]||(t[7]=function(e){return ke(b).unsubscribe=e}),"active-value":1,"inactive-value":0},null,8,["modelValue"]),Ve(l,{class:"ml-16px",size:"small",onClick:E},{default:ye(function(){return r(t[14]||(t[14]=[be("设置",-1)]))}),_:1})]}),_:1}),Ve(n,{label:"线程数",prop:"threads"},{default:ye(function(){return[Ve(o,{modelValue:ke(b).threadsType,"onUpdate:modelValue":t[8]||(t[8]=function(e){return ke(b).threadsType=e})},{default:ye(function(){return[Ve(i,{label:0},{default:ye(function(){return r(t[15]||(t[15]=[be("自动",-1)]))}),_:1}),Ve(i,{label:1},{default:ye(function(){return r(t[16]||(t[16]=[be("自定义",-1)]))}),_:1})]}),_:1},8,["modelValue"]),Ye(Ee("div",Ar,[Ve(c,{class:"!w-[60px]",modelValue:ke(b).threads,"onUpdate:modelValue":t[9]||(t[9]=function(e){return ke(b).threads=e}),min:1,max:5,controls:!1,placeholder:"输入线程数"},null,8,["modelValue"])],512),[[Ze,1===ke(b).threadsType]])]}),_:1})]),Ee("div",Ur,[Ve(n,{ref_key:"startTimeRef",ref:k,label:"发送时间",prop:"start_time"},{default:ye(function(){return[Ve(o,{modelValue:ke(b).pause,"onUpdate:modelValue":t[11]||(t[11]=function(e){return ke(b).pause=e}),class:"flex items-center",onChange:C},{default:ye(function(){return[Ve(i,{label:0},{default:ye(function(){return r(t[17]||(t[17]=[be("立即发送",-1)]))}),_:1}),Ve(i,{label:1},{default:ye(function(){return[Ve(s,{modelValue:ke(b).start_time,"onUpdate:modelValue":t[10]||(t[10]=function(e){return ke(b).start_time=e}),type:"datetime",disabled:0===ke(b).pause,clearable:"",onChange:j},null,8,["modelValue","disabled"])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1},512),Ve(n,{label:"备注"},{default:ye(function(){return[Ee("div",Hr,[Ve(a,{modelValue:ke(b).remark,"onUpdate:modelValue":t[12]||(t[12]=function(e){return ke(b).remark=e}),placeholder:"请输入备注"},null,8,["modelValue"])])]}),_:1}),Ve(n,{label:"发送测试邮件"},{default:ye(function(){return[Ee("div",Pr,[Ee("div",Lr,[Ve(a,{ref_key:"mailToRef",ref:U,modelValue:ke(b).mail_to,"onUpdate:modelValue":t[13]||(t[13]=function(e){return ke(b).mail_to=e}),placeholder:"请输入邮箱"},null,8,["modelValue"])]),Ve(l,{onClick:H},{default:ye(function(){return r(t[18]||(t[18]=[be("发送测试邮件",-1)]))}),_:1})])]}),_:1})])]),Ee("div",qr,[Ee("div",Ir,[Ve(n,{label:"From: ","show-feedback":!1,class:"!mb-[0]","label-style":{fontWeight:"bold"}},{default:ye(function(){return[Ee("div",$r,ge(ke(b).addresser),1)]}),_:1}),Ve(n,{label:"To: ","show-feedback":!1,class:"!mb-[0]","label-style":{fontWeight:"bold"}},{default:ye(function(){return[Ee("div",zr,ge(ke(g).length>0?ke(g).join(", "):"--"),1)]}),_:1}),Ve(n,{label:"Subject: ","show-feedback":!1,class:"!mb-[0]","label-style":{fontWeight:"bold"}},{default:ye(function(){return[Ee("div",Fr,ge(ke(b).subject||"--"),1)]}),_:1})]),Ve(Dr,{id:ke(b).temp_id},null,8,["id"])])],4),Ee("div",Nr,[Ve(l,{onClick:L},{default:ye(function(){return r(t[19]||(t[19]=[be("取消",-1)]))}),_:1}),Ve(l,{type:"primary",onClick:q},{default:ye(function(){return r(t[20]||(t[20]=[be("确定",-1)]))}),_:1})])]}),_:1},8,["model"])}}}),Gr=y(Wr,[["__scopeId","data-v-ef0d129c"]]),Jr=at("MAIL_MARKET_TASK",function(){return{formModal:Re({row:null,isEdit:!1,title:""})}}),Kr=Oe(Jr()).formModal,Qr=function(e){Kr.value.row=e,Kr.value.isEdit=!1,bt.value=!0},Xr=de({__name:"index",setup:function(e){var t,n=h().mainHeight,a=se({isEdit:!1,title:"",row:void 0}),i=U({request:(t=c(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return n={p:t.p,size:t.limit},e.n=1,H(n);case 1:return r=e.v,a=r.data,e.a(2,{data:a.data||[],total:P(a.page)||0})}},e)})),function(e){return t.apply(this,arguments)}),columns:[{prop:"created",label:"时间",width:180,render:function(e){return s(e.created)}},{prop:"subject",label:"邮件主题",showOverflowTooltip:!0},{prop:"addresser",label:"发件人",width:160,showOverflowTooltip:!0},{prop:"recipient_count",label:"收件人",width:160},{prop:"success_count",label:"成功",width:90,render:function(e){return 2===e.task_process?e.recipient_count-e.count.error_count:"--"}},{prop:"error_count",label:"失败",width:90,render:function(e){return 2===e.task_process?Ve("a",{class:"bt-link !text-[#f00]",href:"javascript:;",onClick:function(){v(e)}},[e.count.error_count]):"--"}},{prop:"task_process",label:"状态",width:90,render:function(e){return 0===e.task_process?Ve("span",{class:"text-#fcb040"},[be(" 待处理 ")]):1===e.task_process?Ve("span",{class:"text-#fcb040"},[be(" 执行中 ")]):"完成"}},{prop:"remark",label:"备注",showOverflowTooltip:!0},Ct(function(e){return[{title:"编辑",onClick:function(){m(e)}},{title:"查看",onClick:function(){p(e)}},{title:e.task_process?"暂停":"发送",isHide:function(e){return 2===e.task_process},onClick:function(){b(e)}},{title:"删除",onClick:function(){y(e)}}]})]}),o=i.BtTable,f=i.BtPage,d=(i.BtRefresh,i.BtTableCategory,i.BtRecommendSearch,i.BtColumn,i.BtBatch,i.BtErrorMask,i.refresh),p=function(e){V({title:"查看【".concat(e.subject||"","】"),area:64,compData:{row:e,onAdd:Qr},component:function(){return S(function(){return u.import("./index-legacy325.js?v=1756369731").then(function(e){return e.i})},void 0,u.meta.url)}})},v=function(e){V({title:"错误日志【".concat(e.subject,"】"),area:70,compData:{row:e},component:function(){return S(function(){return u.import("./index-legacy326.js?v=1756369731")},void 0,u.meta.url)}})},m=function(e){a.value.row=e,a.value.isEdit=!0,bt.value=!0},y=function(){var e=c(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:R({title:"删除任务",content:"是否删除【".concat(t.subject,"】任务？"),onConfirm:function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:x({loading:"正在删除任务，请稍候...",message:!0,request:L({task_id:t.id}),success:function(){d()}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t;R({title:"更改任务状态【".concat(e.subject,"】"),content:e.task_process?"暂停任务后，可以继续发送任务！":"立即开始发送任务吗？",onConfirm:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:x({loading:"正在处理，请稍候...",message:!0,request:q({task_id:e.id,pause:e.task_process?1:0}),success:function(){d()}});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})};return Pe(bt,function(e){e||(a.value.row=void 0,a.value.isEdit=!1,a.value.title="")}),function(e,t){var u=ze,l=kt;return me(),_e("div",null,[Ye(Ve(l,null,{"header-left":ye(function(){return[Ve(u,{type:"primary",onClick:t[0]||(t[0]=function(e){return ke(Qr)()})},{default:ye(function(){return r(t[2]||(t[2]=[be(" 添加发送任务 ",-1)]))}),_:1}),Ve(dt,{class:"ml-16px"})]}),content:ye(function(){return[Ve(ke(o),{"min-height":ke(n)},null,8,["min-height"])]}),"footer-right":ye(function(){return[Ve(ke(f))]}),_:1},512),[[Ze,!ke(bt)]]),ke(bt)?(me(),he(Gr,{key:0,show:ke(bt),"onUpdate:show":t[1]||(t[1]=function(e){return Be(bt)?bt.value=e:null}),"is-edit":ke(a).isEdit,title:ke(a).title,row:ke(a).row,refresh:ke(d)},null,8,["show","is-edit","title","row","refresh"])):ut("",!0)])}}}),Yr=de({__name:"type-select",props:{value:{default:function(){return[]}},valueModifiers:{}},emits:["update:value"],setup:function(e,t){var n=t.expose,r=ve(e,"value"),a=se([]),u=ct(),i=u.loading,o=u.setLoading,s=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,o(!0),e.n=1,C({});case 1:t=e.v,n=t.data,m(n)&&(a.value=n.map(function(e){return{label:e.mail_type,value:e.id}}));case 2:return e.p=2,o(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}();return s(),Ae(function(){}),n({getType:s}),function(e,t){var n=Ce,u=je;return me(),he(u,lt(e.$attrs,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.value=e}),loading:ke(i)}),{default:ye(function(){return[(me(!0),_e(we,null,xe(ke(a),function(e){return me(),he(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},16,["modelValue","loading"])}}}),Zr={class:"px-[20px] pt-[24px] pb-[8px]"},ea={class:"w-300px"},ta={class:"w-300px"},na=de({__name:"index",props:{compData:{}},setup:function(e,t){var n=t.expose,r=e.compData,a=se(null),u=Re({etypes:[]}),i={etypes:{trigger:"change",validator:function(){return!!u.etypes.length||new Error("请选择邮件类型")}}},o=function(){return{etypes:u.etypes.join(","),recipients:r.row.recipient,active:r.row.active}},s=function(){var e=c(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:x({request:I(o()),loading:"更改中...",message:!0,success:function(){r.onRefresh(),t()}});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return Ae(function(){Le(function(){u.etypes=r.row.mail_type.map(function(e){return Number(Object.keys(e)[0])}).filter(function(e){return!Number.isNaN(e)})})}),n({onConfirm:s}),function(e,t){var n=Ne,l=We,o=Ge;return me(),_e("div",Zr,[Ve(o,{ref_key:"formRef",ref:a,model:ke(u),rules:i},{default:ye(function(){return[Ve(l,{label:"邮箱"},{default:ye(function(){return[Ee("div",ea,[Ve(n,{value:ke(r).row.recipient,"onUpdate:value":t[0]||(t[0]=function(e){return ke(r).row.recipient=e}),disabled:!0},null,8,["value"])])]}),_:1}),Ve(l,{label:"分组",prop:"etypes"},{default:ye(function(){return[Ee("div",ta,[Ve(Yr,{ref:"typeSelect",modelValue:ke(u).etypes,"onUpdate:modelValue":t[1]||(t[1]=function(e){return ke(u).etypes=e}),multiple:"",filterable:""},null,8,["modelValue"])])]}),_:1})]}),_:1},8,["model"])])}}}),ra={class:"flex items-center"},aa={class:"ml-40px"},ua=de({__name:"import",props:pe({path:{default:""},accept:{default:function(){return[]}}},{value:{},valueModifiers:{}}),emits:pe(["change"],["update:value"]),setup:function(e,t){var n=t.emit,a=e,u=a.path,l=a.accept,i=ve(e,"value");Pe(i,function(e){o("change",e)});var o=n,c=function(){st({path:u,size:5,uploadData:{accept:l.map(function(e){return".".concat(e)}).join(","),multiple:!1,limit:1},refreshEvent:function(e,t){i.value=e[0].name,t()}})};return function(e,t){var n=ze;return me(),_e("div",null,[Ee("div",ra,[Ve(n,{type:"primary",onClick:c},{default:ye(function(){return r(t[0]||(t[0]=[be("导入",-1)]))}),_:1}),Ee("div",aa,[t[1]||(t[1]=be(" 文件名: ",-1)),Ee("span",{class:Ie(i.value?"text-primary":"text-[#dc2626]")},ge(i.value||"未选择任何文件"),3)])]),$e(e.$slots,"default")])}}}),la={class:"p-20px"},ia={class:"w-260px"},oa=de({__name:"index",props:{compData:{}},setup:function(e,t){var n=t.expose,a=it("popupClose"),u=e.compData,i=se(null),o=Re({etypes:-1!==u.group&&void 0!==u.group?[u.group]:[],file:""}),s={etypes:{trigger:"change",validator:function(){return!!o.etypes.length||new Error("请选择邮件类型")}},file:{required:!0,message:"请上传文件",trigger:["blur","change"]}},f=function(){return{etypes:o.etypes.join(","),file:o.file,active:u.active}},d=function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(t=i.value)||void 0===t?void 0:t.validate();case 1:x({request:$(f()),loading:"导入中...",message:!0,success:function(){u.refresh(),null==a||a()}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return n({onConfirm:d}),function(e,t){var n=We,a=Ge,u=Fe("bt-tips");return me(),_e("div",la,[Ve(a,{ref_key:"formRef",ref:i,model:ke(o),rules:s},{default:ye(function(){return[Ve(n,{label:"分组",prop:"etypes"},{default:ye(function(){return[Ee("div",ia,[Ve(Yr,{ref:"typeSelect",class:"bt-multiple-select",value:ke(o).etypes,"onUpdate:value":t[0]||(t[0]=function(e){return ke(o).etypes=e}),multiple:"",filterable:""},null,8,["value"])])]}),_:1}),Ve(n,{label:"文件",prop:"file"},{default:ye(function(){return[Ve(ua,{value:ke(o).file,"onUpdate:value":t[1]||(t[1]=function(e){return ke(o).file=e}),path:"/www/server/panel/data/mail/in_bulk/recipient",accept:["txt","json"]},null,8,["value"])]}),_:1})]}),_:1},8,["model"]),Ve(u,{class:"mt-4px"},{default:ye(function(){return r(t[2]||(t[2]=[Ee("li",null," 文件类型: txt/json 每行一个邮箱 不超过5 MB ",-1)]))}),_:1})])}}}),ca=se([]),sa=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,C({});case 1:t=e.v,n=t.data,ca.value=m(n)?n:[];case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),fa={class:"p-20px"},da={class:"mt-12px"},pa=de({__name:"set",setup:function(e){var t,n=se(""),a=U({request:(t=c(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,sa();case 1:return e.a(2,{data:ca.value||[],total:ca.value.length||0})}},e)})),function(e){return t.apply(this,arguments)}),columns:[{prop:"mail_type",label:"分组名称"},Ct(function(e){return[{render:function(e){return Ve("span",{class:""},[Ve("span",{class:"bt-link ".concat(0===e.id?"!cursor-not-allowed !opacity-50":""),onClick:function(){0!==e.id&&s(e)}},[be("编辑")]),Ve(Et,null,null)])}},{render:function(e){return Ve("span",{class:"bt-link ".concat(0===e.id?"!cursor-not-allowed !opacity-50":""),onClick:function(){0!==e.id&&f(e)}},[be("删除")])}}]})]}),u=a.BtTable,i=a.refresh,o=function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:if(""!==(t=n.value.trim())){e.n=1;break}return O.error("请输入分组名称"),e.a(2);case 1:return e.n=2,W({mail_type:t});case 2:i(),n.value="";case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),s=function(e){d.id=e.id,d.mail_type=e.mail_type;var t,n=z({data:function(){return d},options:function(e){return qe(function(){return[Tt("分组名称","mail_type",{attrs:{placeholder:"请输入分组名称"},rules:[{required:!0,message:"请输入分组名称",trigger:"blur"}]})]})},submit:(t=c(l().m(function e(t,n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n();case 1:return e.a(2,x({request:F(ot(d)),loading:"编辑中...",message:!0,success:function(){i()}}))}},e)})),function(e,n){return t.apply(this,arguments)})}),r=n.BtForm,a=n.submit;V({title:"编辑分组",component:function(){return Ve(r,{class:"pt-[14px]"},null)},area:35,showFooter:!0,onConfirm:a})},f=function(e){var t;R({title:"删除分组【".concat(e.mail_type,"】"),content:"确定要删除该分组吗？",onConfirm:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:x({request:N({ids:"".concat(e.id)}),loading:"删除中...",message:!0,success:function(){i()}});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})};se(null);var d=Re({id:-1,mail_type:""});return function(e,t){var a=Ne,l=Ue,i=ze,c=He;return me(),_e("div",fa,[Ve(c,{gutter:10},{default:ye(function(){return[Ve(l,{span:20},{default:ye(function(){return[Ve(a,{modelValue:ke(n),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Be(n)?n.value=e:null}),placeholder:"请输入分组名称"},null,8,["modelValue"])]}),_:1}),Ve(l,{span:4},{default:ye(function(){return[Ve(i,{type:"primary",onClick:o},{default:ye(function(){return r(t[1]||(t[1]=[be("添加",-1)]))}),_:1})]}),_:1})]}),_:1}),Ee("div",da,[Ve(ke(u),{"max-height":300})])])}}}),va={class:"w-200px"},ma={class:"px-[12px] py-[8px]"},ha=de({__name:"index",props:{value:{default:function(){return-1}},valueModifiers:{}},emits:["update:value"],setup:function(e){var t=ve(e,"value"),n=qe(function(){var e=ca.value.map(function(e){return{label:e.mail_type,value:e.id}});return e.unshift({label:"全部",value:-1}),e}),a=function(e){return"分组: ".concat(e)},u=function(){V({title:"分组管理",area:36,component:pa})},i=ct(),o=i.loading,s=i.setLoading,f=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,s(!0),e.n=1,sa();case 1:return e.p=1,s(!1),e.f(1);case 2:return e.a(2)}},e,null,[[0,,1,2]])}));return function(){return e.apply(this,arguments)}}();return f(),Qe(function(){ca.value=[]}),function(e,l){var i=ze,c=Ce,s=je;return me(),_e("div",va,[Ve(s,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=function(e){return t.value=e}),loading:ke(o)},{label:ye(function(e){var t=e.label;e.value;return[be(ge(a(t)),1)]}),footer:ye(function(){return[Ee("div",ma,[Ve(i,{class:"!w-full",onClick:u},{default:ye(function(){return r(l[1]||(l[1]=[be("分组管理",-1)]))}),_:1})])]}),default:ye(function(){return[(me(!0),_e(we,null,xe(ke(n),function(e){return me(),he(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])])}}}),ya={class:"px-20px pt-24px pb-8px"},ba={class:"w-240px"},ga=de({__name:"batch",props:{compData:{}},setup:function(e,t){var n=t.expose,r=e.compData,a=Ke("formRef"),u=Re({type:null}),i={type:{trigger:"change",validator:function(){return null!==u.type||new Error("请选择邮件类型")}}},o=qe(function(){return ca.value.map(function(e){return{label:e.mail_type,value:e.id}})}),s=ct(),f=s.loading,d=s.setLoading,p=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,d(!0),e.n=1,sa();case 1:return e.p=1,d(!1),e.f(1);case 2:return e.a(2)}},e,null,[[0,,1,2]])}));return function(){return e.apply(this,arguments)}}();p();var v=function(){return{etypes:"".concat(u.type||0),recipients:r.rows.map(function(e){return e.recipient}).join(","),active:r.rows[0].active}},m=function(){var e=c(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(n=a.value)||void 0===n?void 0:n.validate();case 1:x({loading:"修改中...",message:!0,request:G(v()),success:function(){null==r||r.onRefresh(),t()}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return n({onConfirm:m}),function(e,t){var n=Ce,r=je,l=We,c=Ge;return me(),_e("div",ya,[Ve(c,{ref_key:"formRef",ref:a,model:ke(u),rules:i},{default:ye(function(){return[Ve(l,{label:"分组",prop:"type"},{default:ye(function(){return[Ee("div",ba,[Ve(r,{modelValue:ke(u).type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return ke(u).type=e}),loading:ke(f),multiple:"",filterable:""},{default:ye(function(){return[(me(!0),_e(we,null,xe(ke(o),function(e){return me(),he(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])])]}),_:1})]}),_:1},8,["model"])])}}}),_a=["show"],wa={class:"text-center fw-bold text-18px color-#666"},xa={class:"w-96% mx-auto"},ka=de({__name:"index",props:{active:{default:0}},setup:function(e){var t=Je(e,"active"),n=function(){return[{data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:["1月","2月","3月","4月","5月","6月"]}]},r=function(){return[{name:"Count",type:"line",data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0,0],itemStyle:{color:"#20a53a"},smooth:!0,showSymbol:!1,sampling:"average",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(32, 164, 58, 0.4)"},{offset:.7,color:"rgba(32, 164, 58, 0)"}]}}}]},a=Me({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},grid:{top:"16%",left:"2%",right:"2%",bottom:"4%",containLabel:!0},xAxis:n(),yAxis:{type:"value"},series:r()}),u=ct(),i=u.loading,o=u.setLoading,s=b({options:{}}),f=s.BtECharts,d=(s.getEChart,s.setOption),p=(s.setQuickOption,function(){var e=c(l().m(function e(){var u,i,c,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,o(!0),e.n=1,J({active:t.value});case 1:u=e.v,i=u.data.data,m(i)&&(c=i.map(function(e){return e.month}),s=i.map(function(e){return e.count}),a.xAxis=n(c),a.series=r(s)),d(a);case 2:return e.p=2,o(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}());return p(),Pe(function(){return t.value},function(){p()}),function(e,n){return me(),_e("div",{class:"mb-16px",show:ke(i)},[Ee("div",wa,ge(ke(t)?"订阅":"取消订阅")+" 趋势 ",1),Ee("div",xa,[Ve(ke(f),{style:{height:"200px"}})])],8,_a)}}}),Ca=de({__name:"index",setup:function(e){var t,n=Re({p:1,size:10,active:1,keyword:""}),a=function(){var e=c(l().m(function e(t,n,r,a){var u,i,o;return l().w(function(e){for(;;)switch(e.n){case 0:a.label,u=a.value,i={del:"删除",subscribe:"订阅",unsubscribe:"取消订阅"},o=function(){var e=c(l().m(function e(t){var n,r,a,i;return l().w(function(e){for(;;)switch(e.n){case 0:n=new Map([["subscribe",Q],["unsubscribe",Q],["del",X]]),r=n.get(u),i=u,e.n="subscribe"===i||"unsubscribe"===i?1:"del"===i?4:7;break;case 1:if(a="subscribe"===u?1:0,!r){e.n=3;break}return e.n=2,r({recipient:t.recipient,active:a});case 2:case 5:return e.a(2,e.v);case 3:case 6:return e.a(3,7);case 4:if(!r){e.n=6;break}return e.n=5,r({ids:t.id,active:t.active});case 7:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),R({title:"批量".concat(i[u]),content:"确定".concat(i[u],"选定项吗？"),onConfirm:function(){var e=c(l().m(function e(){var t,r;return l().w(function(e){for(;;)switch(e.n){case 0:return t=[],r=O.load("批量".concat(i[u],"中...")),e.n=1,n(function(){var e=c(l().m(function e(n){var a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,o(n);case 1:a=e.v,t.push({name:n.recipient,status:a.status,message:a.msg,msg:a.msg}),r.close();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:xt(t,{title:"".concat(i[u])}),m();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),u=Y([{label:"删除",value:"del",event:a},{label:"订阅",value:"subscribe",event:a},{label:"取消订阅",value:"unsubscribe",event:a},{label:"设置分组",value:"category",event:function(e,t,n,r){V({title:"设置分组",area:45,showFooter:!0,compData:{rows:n.value,onRefresh:m},component:ga})}}]),i=U({request:(t=c(l().m(function e(t){var r,a,u,i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return-1===(r={etype:gt.value,search:t.search,p:t.p,size:t.limit,active:n.active}).etype&&delete r.etype,e.n=1,K(r);case 1:return a=e.v,u=a.data,i=u.data,o=u.total,e.a(2,{data:i,total:o})}},e)})),function(e){return t.apply(this,arguments)}),columns:[jt(),{prop:"recipient",label:"邮箱",showOverflowTooltip:!0},{prop:"mail_type",label:"分组",render:function(e){return e.mail_type.map(function(e){return Object.values(e)[0]}).join(", ")}},{prop:"created",label:"添加时间",width:140,render:function(e){return s(e.created)}},Ct(function(e){return[{title:"更改列表",onClick:(r=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:V({title:"更改列表",area:50,showFooter:!0,compData:{row:e,onRefresh:function(){m()}},component:na});case 1:return t.a(2)}},t)})),function(){return r.apply(this,arguments)})},{title:e.active?"取消订阅":"订阅",onClick:(n=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:R({title:"".concat(e.active?"取消订阅":"订阅"," [").concat(e.recipient,"]"),content:"您确定要从此邮箱".concat(e.active?"取消订阅":"订阅","吗？"),onConfirm:function(){var t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:x({request:Q({recipient:e.recipient,active:0===e.active?1:0}),loading:"更改中...",message:!0,success:function(){m()}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)})),function(){return n.apply(this,arguments)})},{title:"删除",onClick:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:R({title:"删除 [".concat(e.recipient,"]"),content:"您确定要删除此".concat(e.active?"订阅":"取消订阅","邮件吗？"),onConfirm:function(){var t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:x({request:X({ids:e.id,active:e.active}),loading:"删除中...",message:!0,success:function(){m()}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})}];var t,n,r})],extension:[u]}),o=i.BtTable,f=i.BtPage,d=i.BtSearch,p=(i.BtRefresh,i.BtColumn,i.BtBatch),v=(i.BtTableCategory,i.BtErrorMask,i.tableRef),m=(i.classList,i.refresh),h=function(){V({title:"导入联系人",area:45,showFooter:!0,compData:{active:n.active,group:gt.value,refresh:function(){m()}},component:oa})},y=function(e){n.active=e,n.p=1,m()},b=function(){n.p=1,m()};return Qe(function(){gt.value=-1}),function(e,t){var a=ze,u=Te,l=De,i=kt;return me(),_e("div",null,[Ve(ka,{active:ke(n).active},null,8,["active"]),Ve(i,null,{"header-left":ye(function(){return[Ve(a,{type:"primary",onClick:h},{default:ye(function(){return r(t[3]||(t[3]=[be("导入",-1)]))}),_:1}),Ve(dt,{class:"ml-16px"})]}),"header-right":ye(function(){return[Ve(l,{modelValue:ke(n).active,"onUpdate:modelValue":t[0]||(t[0]=function(e){return ke(n).active=e}),onChange:y,class:"w-[120px] mr-[12px]"},{default:ye(function(){return[Ve(u,{label:"订阅",value:1}),Ve(u,{label:"取消订阅",value:0})]}),_:1},8,["modelValue"]),Ve(ha,{value:ke(gt),"onUpdate:value":[t[1]||(t[1]=function(e){return Be(gt)?gt.value=e:null}),ke(m)],class:"mr-[12px]"},null,8,["value","onUpdate:value"]),Ve(ke(d),{modelValue:ke(n).keyword,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ke(n).keyword=e}),class:"!w-[240px]",placeholder:"请输入邮箱",onSearch:b},null,8,["modelValue"])]}),content:ye(function(){return[Ve(ke(o),{ref_key:"tableRef",ref:v},null,512)]}),"footer-left":ye(function(){return[Ve(ke(p),{ref:"batchRef"},null,512)]}),"footer-right":ye(function(){return[Ve(ke(f),{ref:"pageRef"},null,512)]}),_:1})])}}}),ja={class:"p-[20px] pt-[24px] pb-[8px]"},Va={class:"w-[200px]"},Ea=de({__name:"form",props:{compData:{}},setup:function(e,t){var n=t.expose,r=it("popupClose"),a=e.compData,u=a.row,i=a.isEdit,o=a.refresh,s=se(null),d=Re({mail_type:""}),p={mail_type:{required:!0,trigger:"blur",message:"请输入分组名"}},v=function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(t=s.value)||void 0===t?void 0:t.validate();case 1:x({loading:"正在".concat(i?"编辑":"添加","分组"),message:!0,request:i&&u?F(f(f({},ot(d)),{},{id:u.id})):W(ot(d)),success:function(e){e.status&&(null==r||r(),null==o||o())}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return n({onConfirm:v}),function(e,t){var n=Ne,r=We,a=Ge;return me(),_e("div",ja,[Ve(a,{ref_key:"formRef",ref:s,model:ke(d),rules:p},{default:ye(function(){return[Ve(r,{label:"分组名",prop:"mail_type"},{default:ye(function(){return[Ee("div",Va,[Ve(n,{modelValue:ke(d).mail_type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return ke(d).mail_type=e}),placeholder:"请输入组名"},null,8,["modelValue"])])]}),_:1})]}),_:1},8,["model"])])}}}),Ta=de({__name:"index",setup:function(e,t){var n,a,u=t.expose,i=Re({show:!1,title:"",data:{isEdit:!1,row:null,refresh:function(){h()}}}),o=function(){i.data.row=null,i.data.isEdit=!1,i.title="添加分组",V({title:"添加分组",component:Ea,compData:i.data,area:40,showFooter:!0})},f=Y([{label:"删除",value:"delete",event:(n=c(l().m(function e(t,n,r,a){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t({title:"批量删除",content:"确定删除选定项吗？",column:[{label:"群组名称",prop:"mail_type"},Vt()],onConfirm:function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t=[],e.n=1,n(function(){var e=c(l().m(function e(n){var r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,te({ids:n.id});case 1:r=e.v,t.push({name:n.mail_type,status:r.status,message:r.msg,msg:r.msg});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:xt(t,{title:"删除"}),h();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,t,r,a){return n.apply(this,arguments)})}]),d=U({request:(a=c(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Z(t);case 1:return n=e.v,r=n.data,e.a(2,{data:r.data||[],total:r.total||0})}},e)})),function(e){return a.apply(this,arguments)}),columns:[jt(),{prop:"mail_type",label:"群组名称",render:function(e){return Ve("a",{class:"bt-link",href:"javascript:;",onClick:function(){_t(e.id)}},[e.mail_type])}},{prop:"subscribers",label:"订阅",align:"center"},{prop:"unsubscribers",label:"取消订阅",align:"center"},{prop:"created",label:"添加时间",render:function(e){return s(e.created)}},Ct(function(e){return[{title:"复制链接",isHide:function(e){return!0},onClick:function(){ee(e.subscribe_url)}},{title:"重命名",onClick:function(){!function(e){i.data.row=e,i.data.isEdit=!0,i.title="编辑分组",V({title:"编辑分组",component:Ea,compData:i.data,area:40,showFooter:!0})}(e)}},{title:"删除",onClick:function(){var t;e.subscribers||e.unsubscribers?O.error("请先修改或删除此类型下的取消订阅或订阅者，才能继续删除\t"):R({title:"删除",content:"确定删除【".concat(e.mail_type,"】分组吗？"),onConfirm:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:x({loading:"正在删除",message:!0,request:te({ids:e.id}),success:function(){h()}});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})}}]})],extension:[f]}),p=d.BtTable,v=d.BtPage,m=(d.BtRefresh,d.BtColumn,d.BtBatch),h=d.refresh,y=d.BtSearch;return u({init:h}),function(e,t){var n=ze,a=kt;return me(),_e("div",null,[Ve(a,null,{"header-left":ye(function(){return[Ve(n,{type:"primary",onClick:o},{default:ye(function(){return r(t[0]||(t[0]=[be("添加",-1)]))}),_:1}),Ve(dt,{class:"ml-16px"})]}),"header-right":ye(function(){return[Ve(ke(y),{class:"!w-[240px]",placeholder:"请输入名称",onSearch:ke(h)},null,8,["onSearch"])]}),content:ye(function(){return[Ve(ke(p))]}),"footer-left":ye(function(){return[Ve(ke(m))]}),"footer-right":ye(function(){return[Ve(ke(v))]}),_:1})])}}}),Da=de({__name:"index",setup:function(e,t){var n,a,u=t.expose,i=Re({p:1,size:10,status:"bounced",search:""}),o=Y([{label:"删除",value:"del",event:(n=c(l().m(function e(t,n,r,a){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t({title:"批量删除",content:"您确定要删除选定项吗？",column:[{label:"邮箱",prop:"recipient"},Vt()],onConfirm:function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t=[],e.n=1,n(function(){var e=c(l().m(function e(n){var r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,re({ids:n.id});case 1:r=e.v,t.push({name:n.recipient,status:r.status,msg:r.msg});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:xt(t,{title:"批量删除"}),h();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,t,r,a){return n.apply(this,arguments)})}]),f=U({request:(a=c(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ne(t);case 1:return n=e.v,r=n.data,e.a(2,{data:r.data||[],total:r.total||0})}},e)})),function(e){return a.apply(this,arguments)}),columns:[jt(),{prop:"recipient",label:"邮箱"},{prop:"task_name",label:"邮件主题"},{prop:"status",label:"类型"},{prop:"state",label:"状态",render:function(e){return e.state||e.count>=3?"无效":"观察"}},{prop:"created",label:"添加时间",render:function(e){return s(e.created)}},Ct(function(e){return[{title:"删除",onClick:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:R({title:"删除",content:"您确定要删除".concat(e.recipient,"吗？"),onConfirm:function(){var t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:x({loading:"正在删除，请稍候...",message:!0,request:re({ids:e.id}),success:function(){h()}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})}];var t})],extension:[o]}),d=f.BtTable,p=f.BtPage,v=(f.BtRefresh,f.BtColumn,f.BtBatch),h=f.refresh,y=f.BtSearch,b=se([]),g=function(){i.p=1,h()},_=function(){var e;R({title:"清空无效列表",content:"这将清除该类型下的所有数据，您确定要继续吗？",onConfirm:(e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ae({status:i.status});case 1:h();case 2:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})})},w=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ue();case 1:t=e.v,n=t.data.data,m(n)&&(b.value=n.map(function(e){return{label:e.status,value:e.status}}),b.value.length&&(i.status=b.value[0].value)),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,w();case 1:h();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return k(),u({init:k}),function(e,t){var n=ze,a=Ce,u=je,l=kt;return me(),_e("div",null,[Ve(l,null,{"header-left":ye(function(){return[Ve(n,{type:"primary",onClick:ke(h)},{default:ye(function(){return r(t[1]||(t[1]=[be("刷新",-1)]))}),_:1},8,["onClick"]),Ve(n,{onClick:_},{default:ye(function(){return r(t[2]||(t[2]=[be("清空",-1)]))}),_:1}),Ve(dt,{class:"ml-16px"})]}),"header-right":ye(function(){return[Ve(u,{class:"!w-[200px] mr-[10px]",modelValue:ke(i).status,"onUpdate:modelValue":t[0]||(t[0]=function(e){return ke(i).status=e}),onUpdate:g},{default:ye(function(){return[(me(!0),_e(we,null,xe(ke(b),function(e){return me(),he(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"]),Ve(ke(y),{class:"!w-[240px]",placeholder:"请输入名称",onSearch:ke(h)},null,8,["onSearch"])]}),content:ye(function(){return[Ve(ke(d))]}),"footer-left":ye(function(){return[Ve(ke(v))]}),"footer-right":ye(function(){return[Ve(ke(p))]}),_:1})])}}}),Sa=function(e){var t;t="task",wt.value=t,yt.value=e,Le(function(){bt.value=!0})},Oa={class:"mb-20px"},Ba={class:"w-320px"},Ra={class:"flex items-center"},Ma=de({__name:"form",props:pe({data:{default:null},refresh:{}},{show:f({type:Boolean},{default:!1}),showModifiers:{}}),emits:["update:show"],setup:function(e){var t=e,n=et(function(){return S(function(){return u.import("./index-legacy327.js?v=1756369731")},void 0,u.meta.url)}),a=Je(t,"data"),i=ve(e,"show"),s=Ke("editorRef"),f=se(1),d=se(""),p=function(){i.value=!1},v=se(!1),m=function(){var e=c(l().m(function e(){var t,n,r,u=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],!a.value){e.n=3;break}return e.p=1,t||(v.value=!0),e.n=2,T({id:a.value.id,type:f.value,temp_name:d.value,render:JSON.stringify(null===(n=s.value)||void 0===n?void 0:n.getEmailData()),content:(null===(r=s.value)||void 0===r?void 0:r.getEmailHTML())||""},t);case 2:return e.p=2,t||(v.value=!1),e.f(2);case 3:return e.a(2)}},e,null,[[1,,2,3]])}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m(!0);case 1:p(),t.refresh();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return v.value=!0,e.n=1,Le();case 1:setTimeout(c(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a.value){e.n=1;break}return e.a(2);case 1:return e.p=1,d.value=a.value.name,e.n=2,E({id:a.value.id});case 2:t=e.v,n=t.data,o(n)&&(null===(r=s.value)||void 0===r||r.setEmailData(n.render));case 3:return e.p=3,setTimeout(function(){v.value=!1},500),e.f(3);case 4:return e.a(2)}},e,null,[[1,,3,4]])})),500);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return Ae(function(){y()}),function(e,t){var a=We,u=Ne,l=Ge,i=ze;return me(),_e("div",null,[t[6]||(t[6]=Ee("div",{class:"mb-14px font-bold text-18px text-default leading-28px"},"邮件模板编辑",-1)),Ve(l,{"label-position":"left"},{default:ye(function(){return[ut("",!0),Ee("div",Oa,[Ve(ke(n),{ref_key:"editorRef",ref:s,save:m},null,512)]),Ve(a,{label:"模板名称","label-width":"50px"},{default:ye(function(){return[Ee("div",Ba,[Ve(u,{modelValue:ke(d),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Be(d)?d.value=e:null})},null,8,["modelValue"])])]}),_:1})]}),_:1}),Ee("div",Ra,[Ve(i,{onClick:p},{default:ye(function(){return r(t[4]||(t[4]=[be("返回",-1)]))}),_:1}),Ve(i,{type:"primary",loading:ke(v),disabled:ke(v),class:"ml-12px",onClick:h},{default:ye(function(){return r(t[5]||(t[5]=[be(" 保存 ",-1)]))}),_:1},8,["loading","disabled"])])])}}}),Aa=y(Ma,[["__scopeId","data-v-17a146e9"]]),Ua=["innerHTML"],Ha=de({__name:"preview",props:{compData:{}},setup:function(e){var t=Je(e.compData,"row"),n=se(""),r=function(){var e=c(l().m(function e(){var r,a,u;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E({id:t.value.id});case 1:if(r=e.v,a=r.data,!o(a)){e.n=4;break}if(!(u=Cr(a.render))||1!==a.type){e.n=3;break}return n.value=u.content,e.n=2,T({id:t.value.id,type:a.type,temp_name:a.name,render:JSON.stringify(u.render),content:u.content},!1);case 2:e.n=4;break;case 3:n.value=a.content;case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return r(),function(e,t){return me(),_e("div",{class:"min-h-600px overflow-auto",innerHTML:ke(n)},null,8,Ua)}}}),Pa={class:"relative"},La=de({__name:"index",setup:function(e){var t,n,a=se(!1),u=se(null),i=function(){var e=c(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return t="template_".concat(s(new Date,"yyyyMMddHHmmss")),e.n=1,oe({temp_name:t,type:1});case 1:n=e.v,r=n.data.data,h(),o(r)&&(u.value=r,a.value=!0);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),f=Y([{label:"删除",value:"delete",event:(t=c(l().m(function e(t,n,r,a){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t({title:"批量删除",content:"确定删除选定项吗？",column:[{label:"模板名称",prop:"name"},Vt()],onConfirm:function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:x({loading:"删除中...",message:!0,request:ie({id:r.value.map(function(e){return e.id})}),success:function(){h()}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,n,r,a){return t.apply(this,arguments)})}]),d=U({request:(n=c(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,le({p:t.p,size:t.limit});case 1:return n=e.v,r=n.data,e.a(2,{data:r.data||[],total:r.total||0})}},e)})),function(e){return n.apply(this,arguments)}),columns:[jt(),{prop:"name",label:"名称"},{prop:"created",label:"创建时间",render:function(e){return s(e.created)}},Ct(function(e){return[{title:"创建任务",onClick:function(){Sa(e.id)}},{title:"查看",onClick:function(){y(e)}},{title:"编辑",onClick:function(){b(e)}},{title:"删除",onClick:function(){g(e)}}]})],extension:[f]}),p=d.BtTable,v=d.BtPage,m=(d.BtRefresh,d.BtColumn,d.BtBatch),h=d.refresh,y=(d.BtSearch,function(e){V({title:"查看【".concat(e.name,"】"),area:80,compData:{row:e},component:Ha})}),b=function(e){u.value=e,a.value=!0},g=function(e){var t;R({title:"删除【".concat(e.name,"】"),content:"确定删除该模板吗？",onConfirm:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:x({loading:"删除中...",message:!0,request:ie({id:e.id}),success:function(){h()}});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})};return function(e,t){var n=ze,l=kt;return me(),_e("div",Pa,[Ye(Ve(l,null,{"header-left":ye(function(){return[Ve(n,{type:"primary",onClick:i},{default:ye(function(){return r(t[1]||(t[1]=[be("添加模板",-1)]))}),_:1}),Ve(dt,{class:"ml-16px"})]}),content:ye(function(){return[Ve(ke(p))]}),"footer-left":ye(function(){return[Ve(ke(m))]}),"footer-right":ye(function(){return[Ve(ke(v))]}),_:1},512),[[Ze,!ke(a)]]),ke(a)?(me(),he(Aa,{key:0,show:ke(a),"onUpdate:show":t[0]||(t[0]=function(e){return Be(a)?a.value=e:null}),data:ke(u),refresh:ke(h)},null,8,["show","data","refresh"])):ut("",!0)])}}}),qa=de({__name:"index",setup:function(e){var t=se([{label:"概览",name:"overview",lazy:!0,render:function(){return Ve(dn,null,null)}},{label:"发送任务",name:"task",lazy:!0,render:function(){return Ve(Xr,null,null)}},{label:"模板",name:"template",lazy:!0,render:function(){return Ve(La,null,null)}},{label:"订阅者",name:"contact",lazy:!0,render:function(){return Ve(Ca,null,null)}},{label:"群组",name:"mail",lazy:!0,render:function(){return Ve(Ta,null,null)}},{label:"无效列表",name:"invalid",lazy:!0,render:function(){return Ve(Da,null,null)}}]),n=function(e){bt.value=!1,yt.value=null};return function(e,r){var a=ce;return me(),_e("div",null,[Ve(a,{type:"card",options:ke(t),modelValue:ke(wt),"onUpdate:modelValue":r[0]||(r[0]=function(e){return Be(wt)?wt.value=e:null}),onChange:n},null,8,["options","modelValue"])])}}}),Ia=Object.freeze(Object.defineProperty({__proto__:null,default:qa},Symbol.toStringTag,{value:"Module"}));a("N",Ia)}}})}();
