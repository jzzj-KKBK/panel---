import{_ as a}from"./index116.js?v=1756369731";import{killScan as s}from"./site.js?v=1756369731";import{ba as e,M as t,o,K as l}from"./utils-lib.js?v=1756369731";import{c as n,ay as i,r as u,w as r,p as c,aD as m,q as p,v as f,e as v,x as d}from"./base-lib.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const _={class:"flex-wrap h-full"},w=n({__name:"scan-details",props:{compData:{default:()=>({})}},setup(n,{expose:w}){const x=i("popupSetFooter"),g=n,j=u("获取中..."),h=u(!0),D=u(),{path_info:b}=g.compData,y=async()=>{var a,s;try{j.value="获取中...";const o=await e({num:20,filename:b});if(j.value=o.msg||"扫描中...",-1!==(null==(a=o.msg)?void 0:a.indexOf("扫描结束")))return h.value=!1,t.success("扫描已结束"),x(!1),void q();-1===(null==(s=o.msg)?void 0:s.indexOf("扫描结束"))&&h.value&&(D.value=setTimeout(function(){y()},1500)),o.status||(t.request(o),h.value=!1)}catch(o){q()}},q=()=>{D.value&&clearTimeout(D.value)};return r(()=>g.compData,a=>{h.value=!0,y()}),c(()=>y()),m(()=>q()),w({onConfirm:async a=>{await o({icon:"warning-filled",title:"停止检测网站",width:"40rem",content:"当前正在进行检测网站，确定停止检测网站吗？"}),await l({loading:"正在停止检测，请稍后...",request:s({id:g.compData.id}),message:!0}),h.value=!1,q(),a()},onCancel:q}),(s,e)=>{const t=a;return p(),f("div",_,[v(t,{class:"h-full",title:"全屏查看",content:d(j)},null,8,["content"])])}}});export{w as default};
