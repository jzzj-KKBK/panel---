import{r as t,b4 as e,k as a,c as l,q as s,v as i,y as n,z as o,H as r,I as d,e as c,A as u,F as m,a_ as p,x as y,P as v,n as h,aj as f,M as x,ai as b,b5 as g,b6 as w,B as k,D,az as A,g as T,w as V,p as _,G as I,m as S,C,K as L,b7 as z,aQ as B,av as O,al as M,b8 as P,b9 as q}from"./base-lib.js?v=1756369731";import{_ as N}from"./index104.js?v=1756369731";import{ab as E,K as U,o as F,b as G,ac as j,ad as R,R as Y,a5 as W,v as J,e as H,l as Q,L as K,ae as Z,af as X,j as $}from"./utils-lib.js?v=1756369731";import{S as tt,G as et,a as at,b as lt,c as st,d as it}from"./control.js?v=1756369731";const nt=G(),ot=t("KB/s"),rt=t("KB/s"),dt=t("all"),ct=t(7),ut=t(!1),mt=t(0),pt=t(0),yt=e({day:0,echartsId:"",echartsParams:{},echartsOption:{},topData:{}}),vt=a({title:"CPU",active:!1,unitVisible:!1,...E(yt)}),ht=a({title:"内存",active:!1,unitVisible:!1,...E(yt)}),ft=a({title:"磁盘IO",active:!1,unitVisible:!0,...E(yt)}),xt=a({title:"网络IO：",active:!0,unitVisible:!0,selectVal:"",selectList:[{label:"全部",value:"all"}],...E(yt)}),bt=a({title:"平均负载",active:!1,unitVisible:!1,...E(yt)}),gt=t([]),wt={axisLine:{lineStyle:{color:"#666"}},splitLine:{lineStyle:{color:"#ddd"}},axisLabel:{formatter:t=>kt(t/1e3)},nameTextStyle:{color:"#666",fontSize:12,align:"left"},series:{type:"line",smooth:!0,symbol:"circle",showSymbol:!1},table:[{title:"PID",width:"40px",index:1},{title:"进程名",index:2},{title:"CPU占用",index:0,unit:"%"},{title:"启动用户",index:4}]},kt=t=>{const e=new Date(1e3*t),a=e.getMonth()+1,l=e.getDate(),s=e.getHours(),i=e.getMinutes();return"".concat(a.toString().padStart(2,"0"),"-").concat(l.toString().padStart(2,"0"),"\n").concat(s.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))},Dt=async t=>{let e=mt.value,a=ut.value?"1":"0";return e<1?(!0===t&&(ut.value=!ut.value),nt.error("保存天数不合法")):/^-?\d+$/.test(e+"")?void(await U({loading:"正在设置监控状态，请稍后...",request:tt({type:a,day:e}),message:!0,success:async t=>{await Gt(),t.status&&(ct.value=e)}})):nt.error("保存天数必须为整数")},At=({startTime:t,endTime:e})=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{bottom:80},xAxis:{type:"time",boundaryGap:["1%","0%"],minInterval:(e-t)/3*1e3,axisLine:wt.axisLine,axisLabel:wt.axisLabel},yAxis:{type:"value",boundaryGap:[0,"100%"],axisLine:wt.axisLine,splitLine:wt.splitLine},dataZoom:[{type:"inside",start:0,end:100,zoomLock:!0},{bottom:10,start:0,end:100,handleIcon:"path://M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],series:[{}]}),Tt=(t,e)=>{t.tooltip.padding=0,t.tooltip.backgroundColor="rgba(255,255,255,0.95)",t.tooltip.borderColor="#eee",e&&(t.tooltip.position=function(t,a,l,s,i){return((t,e)=>{var a;let l=e.size.contentSize[0],s=e.size.contentSize[1],i=window.innerWidth,n=window.innerHeight,o=null==(a=document.getElementById(t))?void 0:a.getBoundingClientRect(),r=e.pos[0]+(null==o?void 0:o.left),d=e.pos[1]+(null==o?void 0:o.top),c=0,u=0;return u=r+l+80<i?e.pos[0]+20:e.pos[0]-l-20,c=d+s+80<n?e.pos[1]+20:e.pos[1]-s-20,d-s<0&&(c=0-((null==o?void 0:o.top)||0)+10),[u,c]})(e,{pos:t,size:i})})},Vt=t=>{const e=t.time,a=t.legend;let l="",s="";void 0===t.data&&(t.data=[]),void 0===t.table&&(t.table=wt.table);for(var i=0;i<t.data.length;i++){const e=t.data[i];0===i&&(l+="<tr>"),s+="<tr>";for(var n=0;n<t.table.length;n++){const a=t.table[n];0===i&&(l+='<th style="width:'.concat(a.width||"auto",'">').concat(a.title,"</th>"));let o="",r=e[a.index];o="function"==typeof a.unit?a.unit(r):r+(a.unit||""),s+="<td >"+o+"</td>"}0===i&&(l+="</tr>"),s+="</tr>"}return'<div class="echarts-tooltip" style="width:'.concat(t.width||"40rem",'">\n\t\t\t<div class="formatter-header">\n\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t<span>日期：').concat(e,'</span>\n\t\t\t</div>\n\t\t\t<div class="formatter-body">\n\t\t\t\t').concat(a,'\n\t\t\t\t<div class="process-top5 ').concat(t.data.length?"":"hide",'">\n\t\t\t\t<div class="process-header"></div>\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t<tr>').concat(l,"</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>").concat(s,"</tbody>\n\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>")},_t=(t,e)=>({cpu:t=>(({startTime:t,endTime:e,yData:l,topData:s})=>{let i=a(At({startTime:t,endTime:e}));return i.tooltip.formatter=function(t){let e="";for(var a=0;a<t.length;a++){const l=t[a];e+='\n\t\t\t\t<div class="select-data">\n\t\t\t\t\t<span class="status" style="background-color: '.concat(l.color,'"></span>\n\t\t\t\t\t<span>').concat(l.seriesName,"：").concat(W(l.data[1])?l.data[1].toFixed(2):0,"%</span>\n\t\t\t\t</div>")}return Vt({time:t[0].axisValueLabel,data:s[t[0].axisValue],legend:e})},Tt(i),i.yAxis.name="百分比",i.yAxis.min=0,i.yAxis.max=100,i.series=[{name:"CPU",...wt.series,itemStyle:{color:"rgb(0, 153, 238)"},data:l}],i})(t),mem:t=>(({startTime:t,endTime:e,zData:l,topData:s,echartsId:i})=>{let n=a(At({startTime:t,endTime:e}));return n.tooltip.formatter=function(t){let e="";for(var a=0;a<t.length;a++){var l=t[a];e+='\n\t\t\t\t<div class="select-data">\n\t\t\t\t\t<span class="status" style="background-color: '.concat(l.color,'"></span>\n\t\t\t\t\t<span>').concat(l.seriesName,"：").concat(W(l.data[1])?l.data[1].toFixed(2):0,"%</span>\n\t\t\t\t</div>")}return Vt({time:t[0].axisValueLabel,data:s[t[0].axisValue],table:[{title:"PID",width:"40px",index:1},{title:"进程名",width:"50px",index:2},{title:"内存占用",index:0},{title:"启动用户",index:4}],legend:e})},n.tooltip.className="mem-tooltip",Tt(n,i),n.yAxis.name="百分比",n.yAxis.min=0,n.yAxis.max=100,n.series=[{name:"内存",...wt.series,itemStyle:{color:"rgb(0, 153, 238)"},data:l}],n})(t),disk:t=>(({unit:t,startTime:e,endTime:l,rData:s,wData:i,zData:n,yData:o,topData:r,echartsId:d})=>{let c=a(At({startTime:e,endTime:l}));const u=t||"";return c.tooltip.formatter=function(t){for(var e="",a=0;a<t.length;a++){var l=t[a],s="";"读写次数"===l.seriesName&&(s="次/s"),"读写延迟"===l.seriesName&&(s="ms"),"读取"!==l.seriesName&&"写入"!==l.seriesName||(s=u),e+='<div class="select-data"><span class="status" style="background-color: '+l.color+'"></span><span>'+l.seriesName+"："+(W(l.data[1])?l.data[1].toFixed(2):0)+" "+s+"</span></div>"}const i=t=>"number"!=typeof t?"--":J(t);return Vt({time:t[0].axisValueLabel,data:r[t[0].axisValue],width:"470px",table:[{title:"PID",width:"40px",index:3},{title:"进程名",width:"50px",index:4},{title:"磁盘占用",index:0,unit:i},{title:"读取",index:1,unit:i},{title:"写入",index:2,unit:i},{title:"启动用户",index:6}],legend:e})},Tt(c,d),c.legend={top:"18px",data:["读取","写入","读写次数","读写延迟"]},c.series=[{name:"读取",...wt.series,itemStyle:{color:"rgb(255, 70, 131)"},data:s},{name:"写入",...wt.series,itemStyle:{color:"rgba(46, 165, 186, .7)"},data:i},{name:"读写次数",...wt.series,itemStyle:{color:"rgba(30, 144, 255)"},data:o},{name:"读写延迟",...wt.series,itemStyle:{color:"rgba(255, 140, 0)"},data:n}],c})(t),network:t=>(({unit:t,startTime:e,endTime:l,yData:s,zData:i,echartsId:n})=>{var o=a(At({startTime:e,endTime:l}));return o.tooltip.formatter=function(e){var a=e[0].data[0];Y(a/1e3);for(var l="",s=0;s<e.length;s++){var i=e[s];l+='\n\t\t\t\t<div class="select-data">\n\t\t\t\t\t<span class="status" style="background-color: '.concat(i.color,'"></span>\n\t\t\t\t\t<span>').concat(i.seriesName,"：").concat(W(i.data[1])?i.data[1].toFixed(3):0," ").concat(t,"</span>\n\t\t\t\t</div>")}return Vt({width:"280px",time:e[0].axisValueLabel,legend:l})},Tt(o,n),o.legend={top:"18px",data:["上行","下行"]},o.series=[{name:"上行",...wt.series,itemStyle:{color:"rgb(255, 70, 131)"},data:s},{name:"下行",...wt.series,itemStyle:{color:"rgba(46, 165, 186, .7)"},data:i}],o})(t),load:t=>(({startTime:t,endTime:e,yData:l,zData:s,aData:i,bData:n,topData:o,echartsId:r})=>{var d=a(At({startTime:t,endTime:e})),c=(e-t)/3*1e3;return d.tooltip.formatter=function(t){for(var e="",a="",l=0;l<t.length;l++){var s=t[l];switch(s.seriesName){case"1分钟":case"5分钟":case"15分钟":e+='\n\t\t\t\t\t\t<div class="select-data">\n\t\t\t\t\t\t\t<span class="status" style="background-color: '.concat(s.color,'"></span>\n\t\t\t\t\t\t\t<span>').concat(s.seriesName,"：").concat(W(s.data[1])?s.data[1].toFixed(2):0,"%</span>\n\t\t\t\t\t\t</div>");break;case"资源使用率":a=W(s.data[1])?s.data[1].toFixed(2):"0"}}return Vt({time:t[0].axisValueLabel,data:o[t[0].axisValue],legend:'\n\t\t\t\t<div class="select-data">\n\t\t\t\t\t<span class="status"></span>\n\t\t\t\t\t<span>资源使用率：'.concat(a,'%</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="').concat("资源使用率"===t[0].seriesName?"hide":"",'">\n\t\t\t\t\t').concat(e,"\n\t\t\t\t</div>\n\t\t\t")})},Tt(d,r),d.legend={data:["1分钟","5分钟","15分钟"],right:"16%",top:"10px"},d.axisPointer={link:{xAxisIndex:"all"},lineStyle:{color:"#aaaa",width:1}},d.grid=[{left:"5%",bottom:80,right:"55%",width:"40%",height:"auto"},{bottom:80,left:"55%",width:"40%",height:"auto"}],d.xAxis=[{type:"time",boundaryGap:["1%","0%"],minInterval:c,axisLine:wt.axisLine,axisLabel:wt.axisLabel},{type:"time",gridIndex:1,boundaryGap:["1%","0%"],minInterval:c,axisLine:wt.axisLine,axisLabel:wt.axisLabel}],d.yAxis=[{scale:!0,name:"资源使用率",min:0,max:function(t){return t.max>=100?Math.ceil(t.max):t.max>=80?100:parseInt((t.max+10).toString().slice(0,1)+"0")},splitLine:{...wt.splitLine,show:!0},nameTextStyle:wt.nameTextStyle,axisLine:wt.axisLine},{scale:!0,name:"负载详情",gridIndex:1,splitLine:{...wt.splitLine,show:!0},nameTextStyle:wt.nameTextStyle,axisLine:wt.axisLine}],d.dataZoom[0].xAxisIndex=[0,1],d.dataZoom[1].type="slider",d.dataZoom[1].left="5%",d.dataZoom[1].right="5%",d.dataZoom[1].xAxisIndex=[0,1],d.series=[{name:"资源使用率",...wt.series,lineStyle:{itemStyle:{width:2,color:"rgb(255, 140, 0)"}},itemStyle:{color:"rgb(255, 140, 0)"},data:l},{xAxisIndex:1,yAxisIndex:1,name:"1分钟",...wt.series,lineStyle:{itemStyle:{width:2,color:"rgb(30, 144, 255)"}},itemStyle:{color:"rgb(30, 144, 255)"},data:s},{xAxisIndex:1,yAxisIndex:1,name:"5分钟",...wt.series,lineStyle:{itemStyle:{width:2,color:"rgb(0, 178, 45)"}},itemStyle:{color:"rgb(0, 178, 45)"},data:i},{xAxisIndex:1,yAxisIndex:1,name:"15分钟",type:"line",smooth:!0,symbol:"circle",showSymbol:!1,lineStyle:{itemStyle:{width:2,color:"rgb(147, 38, 255)"}},itemStyle:{color:"rgb(147, 38, 255)"},data:n}],d.textStyle={color:"#666",fontSize:12},d})(t)}[e](t)),It=(t,e)=>{const a={cpu:vt,mem:ht,disk:ft,network:xt,load:bt}[e];a.echartsOption=_t({...t,topData:a.topData,echartsId:a.echartsId},e)},St=()=>Y((new Date).getTime()/1e3,"yyyy/MM/dd"),Ct=t=>{const e=new Date(St()).getTime();return Y((e-24*t*3600*1e3)/1e3,"yyyy/MM/dd")},Lt=async(t,e,a)=>{const{b:l,e:s}=(t=>{let e=0,a=Math.floor((new Date).getTime()/1e3);return 0==t?e=new Date(St()+" 00:00:00").getTime()/1e3:1==t?(e=new Date(Ct(t)+" 00:00:00").getTime()/1e3,a=new Date(Ct(t)+" 23:59:59").getTime()/1e3):e=new Date(Ct(t-1)+" 00:00:00").getTime()/1e3,e=Math.floor(e),a=Math.floor(a),{b:e,e:a}})(t),i={cpu:vt,mem:ht,disk:ft,network:xt,load:bt}[a];await e(l,s),It(i.echartsParams,a)},zt=(t,e)=>{const a=e.split(" ")[0].split("/");parseInt(a[0],10),parseInt(a[1],10);const l=new Date,s=t.split(" "),i=s[0].split("/"),n=s[1].split(":"),o=parseInt(i[0],10),r=parseInt(i[1],10),d=parseInt(n[0],10),c=parseInt(n[1],10);let u=l.getFullYear();const m=l.getMonth()+1,p=l.getDate();(o>m||o===m&&r>p)&&(u-=1);return new Date(u,o-1,r,d,c).getTime()},Bt=t=>{if(void 0!==t&&t.length>0){let e;for(let a=0;a<t.length;a++)"number"!=typeof t[a].addtime&&(e=zt(t[a].addtime,t[t.length-1].addtime),t[a].addtime=e)}},Ot=(t,e)=>kt(t).slice(0,5)!==kt(e).slice(0,5),Mt=async(t,e,a,l)=>{try{let i=[];if(l||await(async(t,e)=>{await U({request:st({start:t,end:e}),data:[Array,gt]})})(t,e),i=gt.value,0===i.length)return void("CPU"===a?vt.echartsParams={startTime:0,endTime:0,yData:[]}:ht.echartsParams={startTime:0,endTime:0,zData:[]});if(Bt(i),Ot(i[i.length-1].addtime/1e3,t),"CPU"===a){let t=[];if(i.length>0){for(var s=0;s<i.length;s++){let e=i[s];t.push([e.addtime,e.pro]),void 0===vt.topData&&(vt.topData={}),vt.topData[e.addtime]=e.cpu_top}let e=i[0].addtime,a=i[i.length-1].addtime;vt.echartsParams={startTime:e,endTime:a,yData:t}}}else{let t=[];if(i.length>0){for(s=0;s<i.length;s++){let e=i[s];t.push([e.addtime,e.mem]),void 0===ht.topData&&(ht.topData={}),ht.topData[e.addtime]=e.memory_top.map(t=>(W(t[0])&&(t[0]=J(t[0])),t))}let e=i[0].addtime,a=i[i.length-1].addtime;ht.echartsParams={startTime:e,endTime:a,zData:t}}}}catch(i){}},Pt=async()=>{try{await F({type:"calc",title:"清空记录",width:"35rem",content:"您真的要清空所有监控记录吗？"}),U({request:tt({type:"del"}),message:!0,success:()=>{window.location.reload()}})}catch(t){}},qt=async(t,e,a)=>{const l=async(e,a)=>{const l={cpu:vt,mem:ht,disk:ft,network:xt,load:bt}[a];l.day=t,Array.isArray(t)?(await e(t[0],t[1]),It(l.echartsParams,a)):await Lt(l.day,e,a)};await j([[R("cpu"),async()=>await l((t,e)=>Mt(t,e,"CPU",a),"cpu")],[R("mem"),async()=>await l((t,e)=>Mt(t,e,"内存",a),"mem")],[R("disk"),async()=>await l(Nt,"disk")],[R("network"),async()=>await l(Et,"network")],[R("load"),async()=>await l(Ut,"load")]])(e)},Nt=async(t,e)=>{await U({request:et({start:t,end:e}),data:Array,success:e=>{if(0===e.length)return void(ft.echartsParams={unit:ot.value,startTime:0,endTime:0,rData:[],wData:[],zData:[],yData:[]});Bt(e),Ot(e[e.length-1].addtime/1e3,t);let a=[],l=[],s=[],i=[],n=1,o=ot.value;switch(o){case"MB/s":n=1024;break;case"GB/s":n=1048576;break;default:n=1}if(null==e||e.forEach(t=>{let e=(t.read_bytes/1024).toFixed(3),o=(t.write_bytes/1024).toFixed(3);a.push([t.addtime,e/n]),l.push([t.addtime,o/n]),i.push([t.addtime,t.read_count+t.write_count]),s.push([t.addtime,t.read_time+t.write_time]),void 0===ft.topData&&(ft.topData={}),ft.topData[t.addtime]=t.disk_top}),e.length>0){let t=e[0].addtime/1e3,n=e[e.length-1].addtime/1e3;ft.echartsParams={unit:o,startTime:t,endTime:n,rData:a,wData:l,zData:s,yData:i}}}})},Et=async(t,e)=>{await U({request:at({start:t,end:e}),data:Array,success:e=>{if(0===e.length)return void(xt.echartsParams={unit:rt.value,startTime:0,endTime:0,yData:[],zData:[]});1===xt.selectList.length&&Object.keys(e[0].down_packets).forEach(t=>{xt.selectList.push({title:t,value:t})}),Bt(e),Ot(e[e.length-1].addtime/1e3,t);let a=[],l=[],s=1,i=rt.value,n=dt.value||"";switch("all"===n&&(n=""),i){case"MB/s":s=1024;break;case"GB/s":s=1048576;break;default:s=1}if(null==e||e.forEach(t=>{"object"==typeof t.down_packets&&(void 0!==n&&""!=n?"object"==typeof t.down_packets?l.push([t.addtime,t.down_packets[n]/s]):l.push([t.addtime,0]):l.push([t.addtime,t.down/s]),void 0!==n&&""!=n?"object"==typeof t.up_packets?a.push([t.addtime,t.up_packets[n]/s]):a.push([t.addtime,0]):a.push([t.addtime,t.up/s]),t.up,t.down)}),e.length>0){let t=e[0].addtime/1e3,s=e[e.length-1].addtime/1e3;xt.echartsParams={unit:i,startTime:t,endTime:s,yData:a,zData:l}}}})},Ut=async(t,e)=>{await U({request:lt({start:t,end:e}),data:Array,success:e=>{if(0===e.length)return void(bt.echartsParams={startTime:0,endTime:0,yData:[],zData:[],aData:[],bData:[]});Bt(e),Ot(e[e.length-1].addtime/1e3,t);let a=[],l=[],s=[],i=[];if(void 0!==e&&(null==e||e.forEach(t=>{i.push([t.addtime,t.one]),s.push([t.addtime,t.pro]),a.push([t.addtime,t.five]),l.push([t.addtime,t.fifteen]),void 0===bt.topData&&(bt.topData={}),bt.topData[t.addtime]=t.cpu_top}),e.length>0)){let t=e[0].addtime/1e3,n=e[e.length-1].addtime/1e3;bt.echartsParams={startTime:t,endTime:n,yData:s,zData:i,aData:a,bData:l}}}})},Ft=t=>{dt.value="all"===t?"":t,Lt(xt.day,Et,"network")},Gt=async t=>{try{t&&"cpu"!==t||await qt(vt.day,"cpu");const e=[{condition:!t||"load"===t,day:bt.day,key:"load"},{condition:!t||"mem"===t,day:ht.day,key:"mem",notRequest:!t},{condition:!t||"network"===t,day:xt.day,key:"network"},{condition:!t||"disk"===t,day:ft.day,key:"disk"}].filter(t=>t.condition).map(t=>qt(t.day,t.key,null==t?void 0:t.notRequest));await Promise.allSettled(e),t&&nt.success("刷新成功")}catch(e){}},jt={class:"flex items-center"},Rt={class:"whitespace-nowrap"},Yt=H(l({__name:"card-title",props:{type:{default:"network"},title:{default:"网络IO"},active:{type:Boolean,default:!1},selectList:{}},emits:["cut-day-click"],setup(e,{emit:a}){const l=a,g=t(dt.value||"all"),w=t(),k=()=>{var t;null==(t=w.value)||t.focus(),l("cut-day-click"),h(()=>{document.querySelectorAll(".custom-day-picker").forEach(t=>{t.style.display="none"})})};return(t,e)=>{const a=b,l=f;return s(),i("div",jt,[n("span",Rt,o(t.title),1),r(c(l,{onClick:k,modelValue:y(g),"onUpdate:modelValue":e[0]||(e[0]=t=>v(g)?g.value=t:null),teleported:!1,ref_key:"selectRef",ref:w,style:{width:"8rem"},size:"small",class:"2xl:w-[10rem] <2xl:w-[6rem] lt-lg:w-[10rem] text-left",onChange:e[1]||(e[1]=t=>y(Ft)(y(g))),placeholder:"请选择"},{default:u(()=>[(s(!0),i(m,null,p(t.selectList,t=>(s(),x(a,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),[[d,t.active]])])}}}),[["__scopeId","data-v-ce2a758b"]]),Wt={class:"time flex relative"},Jt=H(l({__name:"card-day",props:{type:{default:"network"}},emits:["cut-day-click"],setup(e,{emit:l}){const n=l,r=t(""),d=t(1),h=t(),f=t([]),b=a({disabledDate:t=>{const e=new Date;e.setHours(23,59,59,999);const a=e.getTime(),l=new Date(e.getTime()-24*ct.value*3600*1e3);return t.getTime()<l.getTime()||t.getTime()>a},defaultTime:[new Date,new Date]}),A=t=>{if(!t){document.querySelectorAll(".custom-day-picker").forEach(t=>{t.style.display="none"})}};return(t,e)=>{const a=D,l=g,T=w;return s(),i("div",Wt,[c(l,{class:"control-btn"},{default:u(()=>{return[(s(!0),i(m,null,p((e=t.type,[{content:"昨天",active:!1,event:()=>{d.value=0,qt(1,e)}},{content:"今天",active:!0,event:()=>{d.value=1,qt(0,e)}},{content:"最近七天",active:!1,event:()=>{d.value=2,r.value="最近七天",qt(7,e)}},{content:"自定义时间",active:!1,event:()=>{d.value=3,h.value.focus(),n("cut-day-click");const t=document.querySelectorAll(".custom-day-picker"),e=[];t.forEach(t=>{e.push(t.style.zIndex)});const a=e.reduce((t,e,a,l)=>e>l[t]?a:t,0);t.forEach((t,e)=>{e!==a&&(t.style.display="none")})}}]),(t,e)=>(s(),x(a,{key:e,type:y(d)===e?"primary":"",onClick:t.event},{default:u(()=>[k(o(t.content),1)]),_:2},1032,["type","onClick"]))),128))];var e}),_:1}),c(T,{type:"daterange",modelValue:y(f),"onUpdate:modelValue":e[0]||(e[0]=t=>v(f)?f.value=t:null),"range-separator":"","start-placeholder":"开始日期","end-placeholder":"结束日期",teleported:!1,"show-after":100,ref_key:"player",ref:h,class:"!absolute -z-1 !w-[92px] !h-[30px] right-0","popper-class":"custom-day-picker","default-time":y(b).defaultTime,"disabled-date":y(b).disabledDate,format:"YYYY/MM/DD","value-format":"x",onChange:e[1]||(e[1]=e=>{return a=y(f),l=t.type,r.value="自定义时间",a[0]=new Date(a[0]).setHours(0,0,0,0),a[1]=new Date(a[1]).setHours(23,59,59,0),a=[Math.floor(a[0]/1e3),Math.floor(a[1]/1e3)],void qt(a,l);var a,l}),onVisibleChange:A},null,8,["modelValue","default-time","disabled-date"])])}}}),[["__scopeId","data-v-8b4556de"]]),Ht=()=>{ut.value=!0},Qt=async()=>{await Q({isAsync:!0,title:"网络IO总流量统计",area:[70,50],component:()=>K(()=>import("./network-day-dialog.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},Kt=t=>{document.fullscreenElement?h(async()=>{await Qt(),document.querySelector(".el-overlay")&&t.$el.appendChild(document.querySelector(".el-overlay"))}):Qt()},Zt=t([{label:"时间",prop:"time"},{label:"上行",prop:"total_up",render:t=>J(t.total_up)},{label:"下行",prop:"total_down",render:t=>J(t.total_down)}]),Xt=t(!1),$t=new Z,te=t(30),ee=t([]),ae=A(t=>{le(t)},500),le=async t=>{$t.removePending({method:"post",url:"/ajax?action=GetNetWorkIoByDay"}),U({request:it({day:t}),data:[Array,ee],loading:Xt})},se={class:"module-ui-header"},ie={class:"flex items-center"},ne={key:0,class:"flex items-center"},oe={class:"flex items-center ml-[1rem]"},re={class:"module-ui-body"},de={key:0,class:"show"},ce=l({__name:"index",props:{title:{default:"默认"},active:{type:Boolean,default:!1},compData:{default:()=>{}},controlValue:{type:Boolean,default:!1},type:{default:""},unitVisible:{type:Boolean,default:!1}},emits:["accept-echarts-id"],setup(e,{expose:a,emit:l}){const o=e,p=T(()=>Object.keys(o.compData).includes("series")&&void 0===o.compData.series[0].data),v=t(),f=t(),b=t(!1),g=t(),w=t("34rem"),{BtECharts:A,getEChart:M,setOption:P,setQuickOption:q}=X({options:{xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{boundaryGap:[0,"50%"],type:"value"},series:[{name:"成交",type:"line",smooth:!0,symbol:"none",stack:"a",data:[]}]}}),N=async t=>{var e;P(t),f.value=await M(),null==(e=f.value)||e.resize()};V(b,t=>{t?w.value=E():(w.value="34rem",h(()=>{var t;null==(t=f.value)||t.resize()}))});const E=()=>{let t=34;if(b.value){t=(window.screen.height-60)/10}return"".concat(t,"rem")},U=()=>{var t;b.value=!1,null==document||document.exitFullscreen(),null==(t=f.value)||t.resize()},F=()=>{b.value=!0,g.value.hide(),h(()=>{v.value.requestFullscreen&&(v.value.style.backgroundColor="#fff",v.value.requestFullscreen())})},G=()=>{let t=!!document.fullscreenElement;return null==t&&(t=!1),t},j=()=>{G()&&h(async()=>{document.querySelector(".el-select-dropdown.el-popper")&&h(()=>{v.value.$el.appendChild(document.querySelector(".el-select-dropdown.el-popper"))})})},R=(t,e)=>{try{h(()=>{N(t)}),((t,e)=>{switch(e){case"cpu":vt.echartsId=t;break;case"mem":ht.echartsId=t;break;case"disk":ft.echartsId=t;break;case"network":xt.echartsId=t;break;case"load":bt.echartsId=t}})(f.value.id,e)}catch(a){}};return V(()=>[o.compData,f.value],()=>{var t;try{N(o.compData),f.value&&(null==(t=f.value)||t.resize())}catch(e){}}),_(()=>{R(o.compData,o.type),window.addEventListener("fullscreenchange",()=>{G()||(b.value=!1,document.fullscreenElement&&document.exitFullscreen().catch(console.error))},{passive:!0})}),a({setConfig:P,echartRef:f}),(t,e)=>{const a=B,l=D,h=O,f=I("bt-loading");return s(),i("div",{class:"module-ui",ref_key:"chartModulesRef",ref:v},[n("div",se,[n("div",ie,[c(Yt,S({type:t.type,title:o.title,active:o.active},t.$attrs,{onCutDayClick:j}),null,16,["type","title","active"]),c(a,{ref_key:"tooltipFull",ref:g,effect:"dark",content:"全屏展示",placement:"top",trigger:"hover"},{default:u(()=>[y(b)||y(p)?C("",!0):(s(),i("i",{key:0,class:"full-icon svgtofont-el-fullscreen-expand hover:text-[#20a53a]",onClick:F}))]),_:1},512)]),y(p)?C("",!0):(s(),i("div",ne,["网络IO："===o.title?(s(),x(l,{key:0,class:"<2xl:hidden 2xl:inline-block",type:"default",onClick:e[0]||(e[0]=t=>y(Kt)(y(v)))},{default:u(()=>[...e[4]||(e[4]=[k("统计 ",-1)])]),_:1})):C("",!0),"网络IO："===o.title?(s(),x(a,{key:1,effect:"dark",content:"网络IO统计",placement:"top-start"},{default:u(()=>[n("i",{onClick:e[1]||(e[1]=t=>y(Kt)(y(v))),class:"cursor-pointer svgtofont-left-control hover:text-[#20a53a] <2xl:inline-block 2xl:hidden",title:"网络IO统计"})]),_:1})):C("",!0),n("div",oe,[c(Jt,{class:"mr-[1rem]",type:t.type,onCutDayClick:j},null,8,["type"]),c(a,{effect:"dark",content:"点击刷新数据",placement:"top-start"},{default:u(()=>[c(l,{type:"default",onClick:e[2]||(e[2]=t=>y(Gt)(o.type)),class:"<2xl:hidden 2xl:inline-block"},{default:u(()=>[...e[5]||(e[5]=[n("i",{class:"svgtofont-el-refresh text-[1.6rem]"},null,-1)])]),_:1})]),_:1}),y(b)?(s(),i("i",{key:0,title:"退出全屏",class:"mt-2px text-[1.8rem] svgtofont-el-close cursor-pointer ml-[.5rem] hover:text-[#20a53a]",onClick:U})):C("",!0)])]))]),n("div",re,[y(p)?(s(),i(m,{key:0},[o.controlValue||void 0!==o.compData.series[0].data?(s(),x(h,{key:1,class:"w-[100%]",description:"我们正在努力为您收集数据，请耐心等待1-2分钟后再尝试查看。"})):(s(),x(h,{key:0,class:"w-[100%]",description:"未开启监控，暂无数据"},{default:u(()=>[n("span",{class:"bt-link",onClick:e[3]||(e[3]=(...t)=>y(Ht)&&y(Ht)(...t))},"点击开启监控 ")]),_:1}))],64)):C("",!0),r((s(),i("div",{style:L([{height:y(w)},{position:"relative"}]),class:"percentage w-full"},[c(y(A),{class:"!h-full"}),o.unitVisible?(s(),i("div",de,[...e[6]||(e[6]=[z(' 单位： <div class="bt-crontab-select-button"><div class="bt-select-full only-one disk-unit"><div class="select-picker-search"><span class="picker-text-list">KB/s</span><span class="down-select-full"></span></div><div class="select-list-item" style="display:none;"><ul style="width:auto;max-height:auto;" class="active"><li data-attr="KB/s" class="active"><span class="select-name-full active">KB/s</span></li><li data-attr="MB/s"><span class="select-name-full">MB/s</span></li><li data-attr="GB/s" style="display:none;"><span class="select-name-full">GB/s</span></li></ul></div></div></div>',2)])])):C("",!0)],4)),[[d,!y(p)],[f,"{}"===JSON.stringify(o.compData)]])])],512)}}}),ue={class:"w-full flex justify-start items-center top_all"},me={class:"monitor"},pe={class:"flex items-center flex-row ml-8px"},ye={class:"mr-[3.125rem]"},ve=l({__name:"index",setup:t=>(_(async()=>{await(async()=>{U({request:tt({type:"-1"}),data:{status:[Boolean,ut],day:[Number,t=>(mt.value=t,ct.value=t)],size:[Number,pt]}})})(),Gt()}),(t,e)=>{const a=M,l=$,r=D,d=N,m=P,p=q;return s(),i("section",null,[c(p,{span:24,class:"module-ui !rounded-[1.6rem] !px-[1.6rem] !py-[1.2rem]"},{default:u(()=>[c(m,{span:24,class:"flex"},{default:u(()=>[n("div",ue,[n("div",me,[e[10]||(e[10]=n("span",{class:"mr-8px align-middle"},"开启监控",-1)),c(a,{modelValue:y(ut),"onUpdate:modelValue":e[0]||(e[0]=t=>v(ut)?ut.value=t:null),checked:"",onChange:e[1]||(e[1]=t=>y(Dt)(!0))},null,8,["modelValue"])]),n("div",pe,[e[12]||(e[12]=n("span",{class:"whitespace-nowrap"},"保存天数：",-1)),c(l,{width:"8.4rem",type:"number",modelValue:y(mt),"onUpdate:modelValue":e[2]||(e[2]=t=>v(mt)?mt.value=t:null)},null,8,["modelValue"]),c(r,{class:"ml-8px",onClick:e[3]||(e[3]=t=>y(Dt)()),type:""},{default:u(()=>[...e[11]||(e[11]=[k("更改",-1)])]),_:1})]),c(d,{style:{margin:"0 2rem",height:"2rem"}}),n("span",ye,"监控日志大小："+o(y(J)(y(pt))),1),c(r,{onClick:e[4]||(e[4]=t=>y(Pt)())},{default:u(()=>[...e[13]||(e[13]=[k("清空记录",-1)])]),_:1})])]),_:1})]),_:1}),c(p,{class:"mt-[1.2rem]"},{default:u(()=>[c(m,{span:24},{default:u(()=>[c(ce,{controlValue:y(ut),"onUpdate:controlValue":e[5]||(e[5]=t=>v(ut)?ut.value=t:null),title:y(bt).title,active:y(bt).active,compData:y(bt).echartsOption,unitVisible:y(bt).unitVisible,type:"load"},null,8,["controlValue","title","active","compData","unitVisible"])]),_:1})]),_:1}),c(p,{class:"mt-[1.2rem]",gutter:24,span:24},{default:u(()=>[c(m,{md:12,sm:24,span:12,xs:24},{default:u(()=>[c(ce,{ref:"cpuRef",controlValue:y(ut),"onUpdate:controlValue":e[6]||(e[6]=t=>v(ut)?ut.value=t:null),title:y(vt).title,active:y(vt).active,compData:y(vt).echartsOption,unitVisible:y(vt).unitVisible,type:"cpu"},null,8,["controlValue","title","active","compData","unitVisible"])]),_:1}),c(m,{md:12,sm:24,span:12,xs:24},{default:u(()=>[c(ce,{controlValue:y(ut),"onUpdate:controlValue":e[7]||(e[7]=t=>v(ut)?ut.value=t:null),title:y(ht).title,active:y(ht).active,compData:y(ht).echartsOption,unitVisible:y(ht).unitVisible,type:"mem"},null,8,["controlValue","title","active","compData","unitVisible"])]),_:1})]),_:1}),c(p,{class:"mt-[1.2rem]",gutter:24,span:24},{default:u(()=>[c(m,{md:24,sm:24,lg:12,span:12,xs:24},{default:u(()=>[c(ce,{controlValue:y(ut),"onUpdate:controlValue":e[8]||(e[8]=t=>v(ut)?ut.value=t:null),title:y(ft).title,active:y(ft).active,compData:y(ft).echartsOption,unitVisible:y(ft).unitVisible,type:"disk"},null,8,["controlValue","title","active","compData","unitVisible"])]),_:1}),c(m,{md:24,lg:12,sm:24,span:12,xs:24},{default:u(()=>[c(ce,{controlValue:y(ut),"onUpdate:controlValue":e[9]||(e[9]=t=>v(ut)?ut.value=t:null),title:y(xt).title,active:y(xt).active,compData:y(xt).echartsOption,unitVisible:y(xt).unitVisible,selectList:y(xt).selectList,type:"network"},null,8,["controlValue","title","active","compData","unitVisible","selectList"])]),_:1})]),_:1})])})}),he=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));export{ee as a,ae as c,te as d,le as g,he as i,Xt as l,Zt as t};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
