!function(){function e(a){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(a)}function a(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,l)}return t}function t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(a){l(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function l(a,t,l){return(t=function(a){var t=function(a,t){if("object"!=e(a)||!a)return a;var l=a[Symbol.toPrimitive];if(void 0!==l){var n=l.call(a,t||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(a)}(a,"string");return"symbol"==e(t)?t:t+""}(t))in a?Object.defineProperty(a,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[t]=l,a}function n(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return u(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,l=Array(a);t<a;t++)l[t]=e[t];return l}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,a,t="function"==typeof Symbol?Symbol:{},l=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function u(t,l,n,u){var r=l&&l.prototype instanceof s?l:s,c=Object.create(r.prototype);return o(c,"_invoke",function(t,l,n){var u,r,o,s=0,c=n||[],v=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(a,t){return u=a,r=0,o=e,p.n=t,i}};function d(t,l){for(r=t,o=l,a=0;!v&&s&&!n&&a<c.length;a++){var n,u=c[a],d=p.p,m=u[2];t>3?(n=m===l)&&(o=u[(r=u[4])?5:(r=3,3)],u[4]=u[5]=e):u[0]<=d&&((n=t<2&&d<u[1])?(r=0,p.v=l,p.n=u[1]):d<m&&(n=t<3||u[0]>l||l>m)&&(u[4]=t,u[5]=l,p.n=m,r=0))}if(n||t>1)return i;throw v=!0,l}return function(n,c,m){if(s>1)throw TypeError("Generator is already running");for(v&&1===c&&d(c,m),r=c,o=m;(a=r<2?e:o)||!v;){u||(r?r<3?(r>1&&(p.n=-1),d(r,o)):p.n=o:p.v=o);try{if(s=2,u){if(r||(n="next"),a=u[n]){if(!(a=a.call(u,o)))throw TypeError("iterator result is not an object");if(!a.done)return a;o=a.value,r<2&&(r=0)}else 1===r&&(a=u.return)&&a.call(u),r<2&&(o=TypeError("The iterator does not provide a '"+n+"' method"),r=1);u=e}else if((a=(v=p.n<0)?o:t.call(l,p))!==i)break}catch(a){u=e,r=1,o=a}finally{s=1}}return{value:a,done:v}}}(t,n,u),!0),c}var i={};function s(){}function c(){}function v(){}a=Object.getPrototypeOf;var p=[][l]?a(a([][l]())):(o(a={},l,function(){return this}),a),d=v.prototype=s.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,n,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=v,o(d,"constructor",v),o(v,"constructor",c),c.displayName="GeneratorFunction",o(v,n,"GeneratorFunction"),o(d),o(d,n,"Generator"),o(d,l,function(){return this}),o(d,"toString",function(){return"[object Generator]"}),(r=function(){return{w:u,m:m}})()}function o(e,a,t,l){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}o=function(e,a,t,l){function u(a,t){o(e,a,function(e){return this._invoke(a,t,e)})}a?n?n(e,a,{value:t,enumerable:!l,configurable:!l,writable:!l}):e[a]=t:(u("next",0),u("throw",1),u("return",2))},o(e,a,t,l)}function i(e,a,t,l,n,u,r){try{var o=e[u](r),i=o.value}catch(e){return void t(e)}o.done?a(i):Promise.resolve(i).then(l,n)}function s(e){return function(){var a=this,t=arguments;return new Promise(function(l,n){var u=e.apply(a,t);function r(e){i(u,l,n,r,o,"next",e)}function o(e){i(u,l,n,r,o,"throw",e)}r(void 0)})}}System.register(["./base-lib-legacy.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./form-item-legacy.js?v=1756369731","./useController-legacy3.js?v=1756369731","./validator-legacy.js?v=1756369731","./index-legacy14.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./column-legacy.js?v=1756369731","./index-legacy116.js?v=1756369731","./index-legacy103.js?v=1756369731","./index-legacy112.js?v=1756369731","./index-legacy123.js?v=1756369731","./index-legacy124.js?v=1756369731"],function(e,a){"use strict";var l,u,o,i,c,v,p,d,m,f,b,h,y,w,g,_,k,x,L,T,S,V,A,N,j,U,C,O,I,D,B,E,P,q,M,H,R,F,G,z,W,Q,$,K,J,X,Y,Z,ee,ae,te,le,ne,ue,re,oe,ie,se,ce,ve,pe,de,me,fe,be,he,ye,we,ge,_e,ke,xe,Le,Te,Se,Ve;return{setters:[function(e){l=e.r,u=e.s,o=e.g,i=e.e,c=e.bZ,v=e.c0,p=e.c,d=e.k,m=e.aG,f=e.p,b=e.q,h=e.v,y=e.A,w=e.y,g=e.x,_=e.F,k=e.a_,x=e.M,L=e.C,T=e.B,S=e.P,V=e.L,A=e.H,N=e.I,j=e.ai,U=e.aj,C=e.a9,O=e.T,I=e.ax,D=e.a7,B=e.z,E=e.t,P=e.a4,q=e.au,M=e.aw,H=e.D},function(e){R=e.l,F=e.L,G=e.ct,z=e.M,W=e.j,Q=e.ag,$=e.e,K=e.u,J=e.bU,X=e.p,Y=e.G},function(e){Z=e.k,ee=e.d,ae=e.c,te=e.g,le=e.f,ne=e.l,ue=e.m,re=e.h,oe=e.b,ie=e.i,se=e.j,ce=e.F},function(e){ve=e.F,pe=e.G,de=e.H,me=e.I,fe=e.J,be=e.K,he=e.L,ye=e.M,we=e.N,ge=e.O},function(e){_e=e.f,ke=e.aG,xe=e.aH,Le=e.l,Te=e.p},function(e){Se=e.C,Ve=e.g},null,null,null,null,null,null,null,null],execute:function(){var Ae=l([]),Ne=function(){var e=s(r().m(function e(t){return r().w(function(e){for(;;)switch(e.n){case 0:R({title:"选择脚本",area:40,component:function(){return F(function(){return a.import("./index-legacy419.js?v=1756369731")},void 0,a.meta.url)},compData:{value:t.value.sBody,onConfirm:function(e){t.value.sBody=e.scriptText,t.value.version=e.args}},showFooter:!0});case 1:return e.a(2)}},e)}));return function(a){return e.apply(this,arguments)}}(),je=function(){var e=s(r().m(function e(){var a,t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ve({all_user:!0});case 1:return a=e.v,t=a.data,e.a(2,t.map(function(e){return{label:e,value:e}})||[]);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=s(r().m(function e(){var a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,je();case 1:a=e.v,Ae.value=a,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();Ue();var Ce=u(Se()),Oe=Ce.rowData,Ie=Ce.typeInit,De=o(function(){return!!Oe.value.id}),Be=o(function(){return!Oe.value.id&&!Oe.value}),Ee=l([{label:"全部",value:"ALL"}]),Pe=function(e){_e({type:"dir",path:e.value.log_cut_path,change:function(a){e.value.log_cut_path=a}})},qe=function(){var e=s(r().m(function e(a){var t,l;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe({type:"sites"});case 1:t=e.v,l=t.data,Ee.value=[{label:"全部",value:"ALL"}].concat(l.data.map(function(e){return{label:e.name,value:e.name}}))||[],a.value.sName="ALL",e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),Me=function(){var e=s(r().m(function e(a){return r().w(function(e){for(;;)switch(e.n){case 0:Ie.value=!1,Be.value&&(a.value.name="切割日志[所有]",a.value.save=180,a.value.log_cut_path||(a.value.log_cut_path="/www/wwwlogs"),qe(a));case 1:return e.a(2)}},e)}));return function(a){return e.apply(this,arguments)}}(),He=u(Se()),Re=He.rowData,Fe=He.typeInit,Ge=l([{label:"全部",value:"ALL"}]),ze=o(function(){return!!Re.value.id}),We=o(function(){return!Re.value.id&&!Re.value});o(function(){return Re.value&&!Re.value.id});var Qe=function(){var e=s(r().m(function e(a){var t,l;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe({type:"sites"});case 1:t=e.v,l=t.data,Ge.value=[{label:"全部",value:"ALL"}].concat(l.data.map(function(e){return{label:e.name,value:e.name}}))||[],a.value.sName="ALL",e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),$e=function(e){!ze.value&&Qe(e),Fe.value=!1,We.value&&(e.value.name="木马查杀[全部]")},Ke=u(Se()),Je=Ke.rowData,Xe=Ke.typeInit,Ye=l([]),Ze=l([]);o(function(){return!!Je.value.id});var ea=o(function(){return!Je.value.id&&!Je.value}),aa=function(){var e=s(r().m(function e(a){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,de();case 1:t=e.v,Ye.value=Object.keys(t.data).map(function(e){return{value:e,label:e,children:t.data[e].map(function(e){return{value:e,label:e}})}}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),ta=function(e){try{Xe.value=!1,ea.value?(e.value.name="定期同步服务器时间[Asia/Shangehai]",e.value.sName="Asia/Shanghai",Ze.value=["Asia","Shanghai"]):Ze.value=e.value.sName.split("/"),aa(e)}catch(a){}},la=u(Se()).rowData;o(function(){return!!la.value.id});var na=o(function(){return!la.value.id&&!la.value}),ua=function(){var e=s(r().m(function e(t){var l,n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(G(t.value.urladdress)){e.n=1;break}return e.a(2,z.error("请输入正确的url地址"));case 1:return l=z.load("正在测试，请稍候..."),e.p=2,e.n=3,me({url:t.value.urladdress});case 3:n=e.v,R({title:"测试URL结果",area:59,component:function(){return F(function(){return a.import("./index-legacy420.js?v=1756369731")},void 0,a.meta.url)},compData:{result:n.data}}),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,l.close(),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(a){return e.apply(this,arguments)}}(),ra=l([{paramName:"",paramValue:""}]),oa=u(Se()).rowData;o(function(){return!!oa.value.id});var ia=o(function(){return!oa.value.id&&!oa.value}),sa=function(e){e.row.xh=e.rowIndex+1},ca=l(),va=function(e){var a,t;e.length>1&&(null===(a=ca.value)||void 0===a||a.clearSelection(),null===(t=ca.value)||void 0===t||t.toggleRowSelection(e.pop()))},pa=function(){ra.value.push({paramName:"",paramValue:""})},da=function(e,a){ra.value.splice(a,1)},ma=l([{label:"所有[所有网站]",value:"ALL"}]),fa=u(Se()),ba=fa.rowData,ha=fa.typeInit,ya=l(""),wa=l(""),ga=o(function(){return!!ba.value.id}),_a=o(function(){return!ba.value.id&&!ba.value}),ka=function(){var e=s(r().m(function e(a){var t,l;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe({type:"sites"});case 1:t=e.v,l=t.data,ma.value=[{label:"所有[所有网站]",value:"ALL"}].concat(l.data.map(function(e){return{label:e.name+"[".concat(e.ps,"]"),value:e.name}}))||[],_a.value&&(a.value.sName="ALL"),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),xa=function(e){wa.value="",ya.value="",ha.value=!1,!ga.value&&ka(e),_a.value&&(e.value.name="网站启停[所有]"),_a.value||(ya.value=e.value.special_time.split(",")[0],wa.value=e.value.special_time.split(",")[1],e.value.startTime=ya.value,e.value.stopTime=wa.value)},La=l(1),Ta=u(Se()),Sa=Ta.rowData,Va=Ta.typeInit,Aa=o(function(){return!!Sa.value.id}),Na=o(function(){return Sa.value&&!Sa.value.id}),ja=[{value:"all",label:"所有日志"},{value:"system_log",label:"系统日志"},{value:"panel_log",label:"面板日志"},{value:"www_log",label:"网站日志"},{value:"usranalyse_log",label:"堡塔防入侵日志"},{value:"mysql_log",label:"MySQL日志"},{value:"Recycle",label:"回收站日志"},{value:"mail_log",label:"邮件日志"},{value:"php_session",label:"PHP会话日志"},{value:"total_log",label:"网站统计报表日志"},{value:"user_config",label:"用户配置日志"}],Ua=function(e){_e({type:"dir",path:e.value.logText,change:function(a){e.value.logText=e.value.logText+(e.value.logText?"\n":"")+a,e.value.log_cut_path=e.value.logText.split("\n").filter(function(e){return""!==e}).join(","),e.value.name=Ca(e.value.logText,1)}})},Ca=function(e,a){var t=e.split("\n").filter(function(e){return""!==e});return t.length<=a?"日志清理[".concat(t.join(","),"]"):"日志清理[".concat(t.slice(0,a).join(","),"...等").concat(t.length,"项]")},Oa=function(e){Va.value=!1,Aa.value||Na.value||(La.value=1,e.value.radioType=1,e.value.name="日志清理"),(Aa.value||Na.value)&&(e.value.clearLogType=e.value.sName.split(","),e.value.radioType=""!==e.value.log_cut_path?2:1,La.value=e.value.radioType,e.value.logText=e.value.log_cut_path.split(",").join("\n"))},Ia={class:"flex items-center"},Da={class:"defineClass"},Ba={class:"flex items-center"},Ea={class:"flex items-center"},Pa={class:"flex items-center"},qa={class:"flex items-center"},Ma=p({__name:"alert-form-item",props:{isEdit:{type:Boolean,default:!1},showKeyword:{type:Boolean,default:!1},showNotice:{type:Boolean,default:!0},needAll:{type:Boolean,default:!1},showSecond:{type:Boolean,default:!1},labelWidth:{default:""},showStopWeb:{type:Boolean,default:!1},stopSite:{type:Boolean,default:!0}},emits:["crontab","siteWeb"],setup:function(e,a){var t=a.expose,r=a.emit,o=u(Se()).rowData,s=e,c=l("1"===o.value.stop_site||!1),v=r,p=l(),B=l(0),E=l(!1),P=l([{type:"day",text:"每天",showDay:!1,showHour:!0,showMinute:!0,showSecond:!1},{type:"day-n",text:"N天",showDay:!0,showHour:!0,showMinute:!0,showSecond:!1},{type:"hour",text:"每小时",showDay:!1,showHour:!1,showMinute:!0,showSecond:!1},{type:"hour-n",text:"N小时",showDay:!1,showHour:!0,showMinute:!0,showSecond:!1},{type:"minute-n",text:"N分钟",showDay:!1,showHour:!1,showMinute:!0,showSecond:!1},{type:"week",text:"每周",showDay:!1,showHour:!0,showMinute:!0,showSecond:!1},{type:"month",text:"每月",showDay:!0,showHour:!0,showMinute:!0,showSecond:!1},{type:"second-n",text:"N秒",showDay:!1,showHour:!1,showMinute:!1,showSecond:!0},{type:"sweek",text:"自定义",showDay:!1,showHour:!0,showMinute:!0,showSecond:!1}]),q=d({where1:[{validator:function(e,a,t){"day-n"===al.value.type||"month"===al.value.type?Number.parseInt(a)>31||Number.parseInt(a)<1||!Number.isInteger(parseFloat(a))?t(new Error("请输入1-31的整数")):""===a?t(new Error("请输入天数")):t():t()},trigger:["blur","change"]}],hour:[{validator:function(e,a,t){"minute-n"!==al.value.type&&"hour"!==al.value.type&&"second-n"!==al.value.type||t(),Number.parseInt(a)>23||Number.parseInt(a)<0||!Number.isInteger(parseFloat(a))?t(new Error("请输入0-23的整数")):""===a?t(new Error("请输入小时")):"hour-n"===al.value.type&&0===Number.parseInt(a)?t(new Error("小时不能为0")):t()},trigger:["blur","change"]}],minute:[{validator:function(e,a,t){Number.parseInt(a)>59||Number.parseInt(a)<0||!Number.isInteger(parseFloat(a))?t(new Error("请输入0-59的整数")):""===a?t(new Error("请输入分钟")):"minute-n"===al.value.type&&(Number.parseInt(a)<1||!/^[1-9]\d*$/.test(a))?t(new Error("请输入1-59的整数")):t()},trigger:["blur","change"]}],second:[{validator:function(e,a,t){"second-n"===al.value.type?!Number.isInteger(parseFloat(a))||Number.parseInt(a)>59||Number.parseInt(a)<1?t(new Error("请输入1-59的整数")):""===a?t(new Error("请输入秒")):t():t()},trigger:["blur","change"]}],timeSet:[{validator:function(e,a,t){"sweek"!==al.value.type||a.length?t():t(new Error("请选择时间"))},trigger:"change"}],specialHour:[{validator:function(e,a,t){"sweek"!==al.value.type||a.length?t():t(new Error("请选择小时"))},trigger:"change"}],specialMinute:[{validator:function(e,a,t){"sweek"!==al.value.type||a.length?t():t(new Error("请选择分钟"))},trigger:"change"}]}),M=function(e){tl.value.notice_channel=e},H=function(e){p.value.clearValidate()},R=function(e){tl.value.notice=e,1===e&&(tl.value.notice_channel="all")},F=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s.isEdit||(tl.value.notice=0,a&&pl()),al.value.type=e,B.value=P.value.findIndex(function(a){return a.type===e}),"minute-n"===al.value.type&&(al.value.where1=al.value.minute),"hour-n"===al.value.type&&(al.value.where1=al.value.hour),"second-n"===al.value.type?(tl.value.flock=!1,E.value=!0):E.value=!1,p.value&&p.value.clearValidate(),v("crontab","custom"==e)};m(function(){F(al.value.type)}),f(function(){F(al.value.type,!0)});var G=function(e){v("siteWeb",e)};return t({validate:function(){var e;return null===(e=p.value)||void 0===e?void 0:e.validate()},WebStopSite:c}),function(e,a){var t=j,l=U,u=C,r=W,o=O,s=I,v=Q,d=xe,m=D;return b(),h("div",null,[i(m,{ref_key:"alertFormRef",ref:p,rules:g(q),"label-width":e.labelWidth,inline:!0,model:g(al),class:"demo-form-inline"},{default:y(function(){return[i(u,{class:"!w-full"},{default:y(function(){return[i(u,{label:"执行周期"},{default:y(function(){var o,s,c,v;return[w("div",Ia,[i(u,{class:"el-form-item-item"},{default:y(function(){return[i(l,{onChange:a[0]||(a[0]=function(e){return F(g(al).type,!0)}),class:"!w-[8rem]",modelValue:g(al).type,"onUpdate:modelValue":a[1]||(a[1]=function(e){return g(al).type=e})},{default:y(function(){return[(b(!0),h(_,null,k(g(P),function(a,l){return b(),h(_,null,["second-n"!==a.type||e.showSecond?(b(),x(t,{key:l,label:a.text,value:a.type},null,8,["label","value"])):L("",!0)],64)}),256))]}),_:1},8,["modelValue"])]}),_:1}),"sweek"==g(al).type?(b(),h(_,{key:0},[i(u,{class:"el-form-item-item"},{default:y(function(){return[i(l,{class:"!w-[8rem]",modelValue:g(al).timeType,"onUpdate:modelValue":a[2]||(a[2]=function(e){return g(al).timeType=e}),onChange:H},{default:y(function(){return[i(t,{label:"每天",value:"sday"}),i(t,{label:"每周",value:"sweek"}),i(t,{label:"每月",value:"smonth"})]}),_:1},8,["modelValue"])]}),_:1}),"sweek"===g(al).timeType?(b(),x(u,{key:0,class:"el-form-item-item",prop:"timeSet"},{default:y(function(){return[i(l,{class:"!w-[16rem]",modelValue:g(al).timeSet,"onUpdate:modelValue":a[3]||(a[3]=function(e){return g(al).timeSet=e}),multiple:"","collapse-tags":""},{default:y(function(){return[i(t,{label:"周一",value:"1"}),i(t,{label:"周二",value:"2"}),i(t,{label:"周三",value:"3"}),i(t,{label:"周四",value:"4"}),i(t,{label:"周五",value:"5"}),i(t,{label:"周六",value:"6"}),i(t,{label:"周日",value:"7"})]}),_:1},8,["modelValue"])]}),_:1})):L("",!0),"smonth"===g(al).timeType?(b(),x(u,{key:1,class:"el-form-item-item",prop:"timeSet"},{default:y(function(){return[i(l,{class:"!w-[14rem] cycle-select",modelValue:g(al).timeSet,"onUpdate:modelValue":a[4]||(a[4]=function(e){return g(al).timeSet=e}),multiple:"","collapse-tags":"","collapse-tags-tooltip":""},{default:y(function(){return[(b(),h(_,null,k(30,function(e,a){return i(t,{key:e,label:e,value:"".concat(e)},null,8,["label","value"])}),64))]}),_:1},8,["modelValue"]),a[17]||(a[17]=w("span",{class:"el-input-group__append cycle-unit"},"号",-1))]}),_:1})):L("",!0),i(u,{class:"el-form-item-item",prop:"specialHour"},{default:y(function(){return[i(l,{class:"!w-[14rem] cycle-select",modelValue:g(al).specialHour,"onUpdate:modelValue":a[5]||(a[5]=function(e){return g(al).specialHour=e}),multiple:"","collapse-tags":""},{default:y(function(){return[(b(),h(_,null,k(24,function(e,a){return i(t,{key:a,label:a,value:a},null,8,["label","value"])}),64))]}),_:1},8,["modelValue"]),a[18]||(a[18]=w("span",{class:"el-input-group__append cycle-unit"},"点",-1))]}),_:1}),i(u,{class:"el-form-item-item",prop:"specialMinute"},{default:y(function(){return[i(l,{class:"!w-[14rem] cycle-select",modelValue:g(al).specialMinute,"onUpdate:modelValue":a[6]||(a[6]=function(e){return g(al).specialMinute=e}),multiple:"","collapse-tags":""},{default:y(function(){return[(b(),h(_,null,k(60,function(e,a){return b(),h(_,null,[a%5==0?(b(),x(t,{key:a,label:a,value:a},null,8,["label","value"])):L("",!0)],64)}),64))]}),_:1},8,["modelValue"]),a[19]||(a[19]=w("span",{class:"el-input-group__append cycle-unit"},"分",-1))]}),_:1})],64)):(b(),h(_,{key:1},["week"==g(al).type?(b(),x(u,{key:0,class:"el-form-item-item"},{default:y(function(){return[i(l,{class:"!w-[8rem]",modelValue:g(al).week,"onUpdate:modelValue":a[7]||(a[7]=function(e){return g(al).week=e})},{default:y(function(){return[i(t,{label:"周一",value:"1"}),i(t,{label:"周二",value:"2"}),i(t,{label:"周三",value:"3"}),i(t,{label:"周四",value:"4"}),i(t,{label:"周五",value:"5"}),i(t,{label:"周六",value:"6"}),i(t,{label:"周日",value:"7"})]}),_:1},8,["modelValue"])]}),_:1})):L("",!0),null!==(o=g(P)[g(B)])&&void 0!==o&&o.showDay?(b(),x(u,{key:1,class:"el-form-item-item",prop:"where1"},{default:y(function(){return[i(r,{modelValue:g(al).where1,"onUpdate:modelValue":a[8]||(a[8]=function(e){return g(al).where1=e}),min:1,width:"10rem",textType:"天",type:"number"},{append:y(function(){return n(a[20]||(a[20]=[T(" 天 ",-1)]))}),_:1},8,["modelValue"])]}),_:1})):L("",!0),null!==(s=g(P)[g(B)])&&void 0!==s&&s.showHour?(b(),x(u,{key:2,class:"el-form-item-item",prop:"hour"},{default:y(function(){return[i(r,{modelValue:g(al).hour,"onUpdate:modelValue":a[9]||(a[9]=function(e){return g(al).hour=e}),width:"10rem",textType:"小时",max:"23",min:"0",type:"number"},{append:y(function(){return n(a[21]||(a[21]=[T(" 小时 ",-1)]))}),_:1},8,["modelValue"])]}),_:1})):L("",!0),null!==(c=g(P)[g(B)])&&void 0!==c&&c.showMinute?(b(),x(u,{key:3,class:"el-form-item-item",prop:"minute"},{default:y(function(){var e;return[null!==(e=g(P)[g(B)])&&void 0!==e&&e.showMinute?(b(),x(r,{key:0,modelValue:g(al).minute,"onUpdate:modelValue":a[10]||(a[10]=function(e){return g(al).minute=e}),width:"10rem",max:"59",min:"0",type:"number"},{append:y(function(){return n(a[22]||(a[22]=[T(" 分钟 ",-1)]))}),_:1},8,["modelValue"])):L("",!0)]}),_:1})):L("",!0),null!==(v=g(P)[g(B)])&&void 0!==v&&v.showSecond?(b(),x(u,{key:4,class:"el-form-item-item",prop:"second"},{default:y(function(){var e;return[null!==(e=g(P)[g(B)])&&void 0!==e&&e.showSecond?(b(),x(r,{key:0,modelValue:g(al).second,"onUpdate:modelValue":a[11]||(a[11]=function(e){return g(al).second=e}),width:"10rem",max:"59",min:"0",type:"number"},{append:y(function(){return n(a[23]||(a[23]=[T(" 秒 ",-1)]))}),_:1},8,["modelValue"])):L("",!0)]}),_:1})):L("",!0)],64))])]}),_:1}),w("div",Da,[i(u,{label:" ",class:"!mt-0 defineClass"},{default:y(function(){return[w("div",Ba,[i(o,{modelValue:g(tl).flock,"onUpdate:modelValue":a[12]||(a[12]=function(e){return g(tl).flock=e}),disabled:g(E)},{default:y(function(){return n(a[24]||(a[24]=[T(" 开启进程锁",-1)]))}),_:1},8,["modelValue","disabled"]),i(s,{placement:"right-start",width:"440","popper-class":"white-tips-popover",trigger:"hover",content:""},{default:y(function(){return n(a[25]||(a[25]=[w("div",{class:"p-12x"},[w("span",{class:"text-[#666]"}," 在同一时间内只用一个进程在执行，若上一个进程未执行结束，下一次不执行 ")],-1),w("i",{slot:"reference",class:"el-icon-question text-warning ml-12x"},null,-1)]))}),_:1})])]}),_:1}),e.showStopWeb?(b(),x(u,{key:0,label:" ",class:"!mt-0 defineClass"},{default:y(function(){return[w("div",Ea,[i(o,{modelValue:g(c),"onUpdate:modelValue":a[13]||(a[13]=function(e){return S(c)?c.value=e:null}),onChange:G},{default:y(function(){return n(a[26]||(a[26]=[T(" 网站停用时是否停止备份",-1)]))}),_:1},8,["modelValue"]),i(s,{placement:"right-start",width:"220","popper-class":"white-tips-popover",trigger:"hover",content:""},{reference:y(function(){return n(a[27]||(a[27]=[w("i",{class:"svgtofont-el-question-filled text-warning ml-[12px]"},null,-1)]))}),default:y(function(){return[a[28]||(a[28]=w("span",{class:"text-[#666]"}," 该功能不支持反向代理和html项目 ",-1))]}),_:1})])]}),_:1})):L("",!0)])]}),_:1}),V(e.$slots,"center",{},void 0,!0),e.showNotice?(b(),x(u,{key:0,label:"备份提醒",prop:"notice",class:"!mt-1.6rem"},{default:y(function(){return[w("div",Pa,[i(v,{class:"!w-[20rem]",modelValue:g(tl).notice,"onUpdate:modelValue":a[14]||(a[14]=function(e){return g(tl).notice=e}),options:g($t),onChange:R},null,8,["modelValue","options"]),1===g(tl).notice?(b(),x(u,{key:0,label:"消息通道"},{default:y(function(){return[i(d,{modelValue:g(tl).notice_channel,"onUpdate:modelValue":a[15]||(a[15]=function(e){return g(tl).notice_channel=e}),"is-show-api":!1,multiple:!1,"all-alarm":!0,onChange:M,class:"!w-16rem"},null,8,["modelValue"])]}),_:1})):L("",!0),A(i(u,{label:"关键词匹配",class:"!mt-0"},{default:y(function(){return[w("div",qa,[i(s,{placement:"top-start",width:"290","popper-class":"white-tips-popover",trigger:"focus",content:""},{default:y(function(){return[a[29]||(a[29]=w("div",{class:"p-[12px]"},[w("div",null,[T("1、在shell程序中不要"),w("span",{class:"text-danger"},"中断"),T("执行如（exit等）")]),w("div",null,[T("2、输出"),w("span",{class:"text-danger"},"关键词"),T("（建议5位且程序中不会出现）")]),w("div",null,[T("3、匹配到关键词"),w("span",{class:"text-danger"},"发送告警")])],-1)),i(r,{slot:"reference",class:"mr-[4px]",modelValue:g(tl).keyword,"onUpdate:modelValue":a[16]||(a[16]=function(e){return g(tl).keyword=e}),disabled:e.isEdit,width:"16rem",placeholder:"请输入关键词",type:"text"},null,8,["modelValue","disabled"])]}),_:1})])]}),_:1},512),[[N,e.showKeyword&&1===g(tl).notice]])])]}),_:1})):L("",!0),V(e.$slots,"bottom",{},void 0,!0)]}),_:3},8,["rules","label-width","model"])])}}}),Ha=$(Ma,[["__scopeId","data-v-426db468"]]),Ra={class:"flex items-center"},Fa={class:"text-[1.2rem] text-[#666] flex items-center"},Ga=p({__name:"file-split-item",props:{rowData:{default:function(){}},isEnterprise:{type:Boolean,default:!1}},setup:function(e){var a=e,t=[{name:"不拆分",value:"0"},{name:"按文件大小拆分",value:"size"},{name:"按数量拆分",value:"num"}],u=l(a.rowData.split_type||"0"),r=l(Boolean(a.rowData.save_local)||!1),o=function(e){"num"==e?ll.value.split_value=5:"size"==e&&(ll.value.split_value=1024),ll.value.split_type=e},s=function(e){ll.value.save_local=Number(e)},c=function(e){ll.value.split_value=Number(e.target.value)};return function(e,a){var l=j,v=U,p=W,d=C,m=O;return b(),h("div",null,[e.isEnterprise?L("",!0):(b(),x(d,{key:0,label:"文件拆分",class:"!mb-[14px]"},{default:y(function(){return[w("div",Ra,[i(v,{modelValue:g(u),"onUpdate:modelValue":a[0]||(a[0]=function(e){return S(u)?u.value=e:null}),class:"mr-[4px] !w-[13rem]",onChange:o},{default:y(function(){return[(b(),h(_,null,k(t,function(e){return i(l,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])}),64))]}),_:1},8,["modelValue"]),"0"!==g(u)?(b(),h("div",{key:0,onInput:c,class:"text-[1.2rem] flex items-center"},[i(p,{modelValue:g(ll).split_value,"onUpdate:modelValue":a[1]||(a[1]=function(e){return g(ll).split_value=e}),type:"number",width:"14rem"},{append:y(function(){return[T(B("num"==g(u)?"个":"MB"),1)]}),_:1},8,["modelValue"])],32)):L("",!0),a[3]||(a[3]=w("span",{class:"text-[#666] text-[1.2rem] leading-8 ml-8x"},"*为避免文件过大导致上传失败，可以选择按大小或数量拆分。仅文件超过 5GB 时支持拆分，小文件请忽略 ",-1))])]}),_:1})),i(d,{label:"备份设置"},{default:y(function(){return[w("div",Fa,[i(m,{modelValue:g(r),"onUpdate:modelValue":a[2]||(a[2]=function(e){return S(r)?r.value=e:null}),class:"!mr-12x",onChange:s},{default:y(function(){return n(a[4]||(a[4]=[T(" 同时保留本地备份（和云存储保留份数一致） ",-1)]))}),_:1},8,["modelValue"])])]}),_:1})])}}}),za=K().panel,Wa=E(za.value).backupPath,Qa=u(Se()),$a=Qa.rowData,Ka=Qa.typeInit,Ja=o(function(){return!!$a.value.id}),Xa=o(function(){return!$a.value.id&&!$a.value}),Ya=l(Wa.value),Za=l([]),et=function(e){_e({type:"dir",path:e.value.sName,change:function(a){e.value.sName=a,e.value.name="备份目录[".concat(a,"]")}})},at=function(){var e=s(r().m(function e(a){var t,l,n,u,o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe({type:"sites"});case 1:n=e.v,u=n.data,Za.value=u.orderOpt.map(function(e){return{label:e.name,value:e.value,status:Boolean(e.status),disabled:"localhost"!==e.value&&!e.status,render:function(e){return i("div",{class:"flex items-center justify-between"},[i("span",null,[e.label]),i("span",{onClick:function(){Le({name:e.value})},class:"float-right cursor-pointer text-[1.2rem] text-danger ml-12px ".concat("localhost"!==e.value?"":"!hidden")},[e.status?"":"[未配置]"])])}}}),Za.value&&"localhost"===(null===(t=Za.value[0])||void 0===t?void 0:t.value)||null===(o=Za.value)||void 0===o||o.unshift({label:"服务器磁盘",value:"localhost"}),Xa.value&&(a.value.backupTo=null===(l=Za.value)||void 0===l?void 0:l[0].value),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),tt=function(e){Ka.value=!1,Xa.value&&(e.value.db_backup_path=Ya.value,e.value.save=3,e.value.sName="/www/wwwroot",e.value.name="备份目录[/www/wwwroot]",e.value.more="ALL"),at(e)},lt=K().panel,nt=E(lt.value).backupPath,ut=u(Se()),rt=ut.rowData,ot=ut.typeInit,it=l([]),st=l([{label:"所有[所有网站]",value:"ALL"}]),ct=o(function(){return!!rt.value.id}),vt=o(function(){return!rt.value.id&&!rt.value}),pt=function(){var e=s(r().m(function e(a){var t,l,n,u,o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe({type:"sites"});case 1:n=e.v,u=n.data,it.value=u.orderOpt.map(function(e){return{label:e.name,value:e.value,status:Boolean(e.status),disabled:"localhost"!==e.value&&!e.status,render:function(e){return i("div",{class:"flex items-center justify-between"},[i("span",null,[e.label]),i("span",{onClick:function(){Le({name:e.value})},class:"float-right cursor-pointer text-[1.2rem] text-danger ml-12px ".concat("localhost"!==e.value?"":"!hidden")},[e.status?"":"[未配置]"])])}}}),it.value&&"localhost"===(null===(t=it.value[0])||void 0===t?void 0:t.value)||null===(o=it.value)||void 0===o||o.unshift({label:"服务器磁盘",value:"localhost"}),vt.value&&(a.value.backupTo=null===(l=it.value)||void 0===l?void 0:l[0].value),st.value=[{label:"所有[所有网站]",value:"ALL"}].concat(u.data.map(function(e){return{label:e.name+"".concat(e.ps?"[".concat(e.ps,"]"):""),value:e.name}}))||[],vt.value&&(a.value.sName="ALL"),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),dt=function(e){try{return!("localhost"!==e.value.backupTo&&!ll.value.save_local)}catch(a){}},mt=function(e){ot.value=!1,vt.value&&(e.value.name="备份网站[ 所有 ]",e.value.save=3,e.value.db_backup_path=nt.value,e.value.more="ALL"),pt(e)},ft=function(e){_e({type:"dir",path:e.value.db_backup_path,change:function(a){e.value.db_backup_path=a}})},bt=K().panel,ht=E(bt.value).backupPath,yt=u(Se()),wt=yt.rowData,gt=yt.typeInit,_t=l([]),kt=l([{label:"所有[所有数据]",value:"ALL"}]),xt=l(!1),Lt=l([]),Tt=o(function(){return!!wt.value.id}),St=o(function(){return!wt.value.id&&!wt.value}),Vt=[{value:"mysql",label:"MySQL"},{value:"mongodb",label:"MongoDB"},{value:"redis",label:"Redis"},{value:"pgsql",label:"PgSQL"}],At=function(){var e=s(r().m(function e(a){var t,l,n,u,o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe({type:"sites"});case 1:n=e.v,u=n.data,_t.value=u.orderOpt.map(function(e){return{label:e.name,value:e.value,status:Boolean(e.status),disabled:"localhost"!==e.value&&!e.status,render:function(e){return i("div",{class:"flex items-center justify-between"},[i("span",null,[e.label]),i("span",{onClick:function(){Le({name:e.value})},class:"float-right text-[1.2rem] text-danger cursor-pointer ml-12px ".concat("localhost"!==e.value?"":"!hidden")},[e.status?"":"[未配置]"])])}}}),_t.value&&"localhost"===(null===(t=_t.value[0])||void 0===t?void 0:t.value)||null===(o=_t.value)||void 0===o||o.unshift({label:"服务器磁盘",value:"localhost"}),St.value&&(a.value.backupTo=null===(l=_t.value)||void 0===l?void 0:l[0].value),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),Nt=function(){var e=s(r().m(function e(a){return r().w(function(e){for(;;)switch(e.n){case 0:if(gt.value=!1,At(a),!St.value){e.n=2;break}return a.value.name="备份mysql数据库[ 所有 ]",a.value.db_type="mysql",a.value.backup_mode=0,a.value.sName="ALL",a.value.db_backup_path=ht.value,a.value.save=3,a.value.more="ALL",a.value.table_list="ALL",e.n=1,jt("mysql");case 1:a.value.table_list=Lt.value[0].value,e.n=3;break;case 2:""===a.value.table_list?a.value.table_list="ALL":a.value.table_list;case 3:return e.a(2)}},e)}));return function(a){return e.apply(this,arguments)}}(),jt=function(){var e=s(r().m(function e(a){var t,l,n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fe({db_type:a});case 1:n=e.v,kt.value=n.data.map(function(e){return{label:e.name+(e.ps?"[".concat(e.ps,"]"):""),value:e.name,table_list:e.table_list}}),Lt.value=null===(t=kt.value[0].table_list)||void 0===t?void 0:t.map(function(e){return{label:e.tb_name,value:""===e.value?"ALL":e.value}}),null===(l=kt.value)||void 0===l||l.unshift({label:"所有[所有数据]",value:"ALL"}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),Ut=function(e){_e({type:"dir",path:e.value.db_backup_path,change:function(a){e.value.db_backup_path=a}})},Ct=l([]),Ot=l([]),It=l([]),Dt=u(Se()),Bt=Dt.rowData,Et=Dt.typeInit,Pt=o(function(){return!!Bt.value.id}),qt=o(function(){return!Bt.value.id&&Bt.value}),Mt=o(function(){return!Bt.value.id&&!Bt.value}),Ht=function(){var e=s(r().m(function e(a){var t,l,n,u,o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe({type:"sites"});case 1:n=e.v,u=n.data,Ct.value=u.orderOpt.map(function(e){return{label:e.name,value:e.value,status:Boolean(e.status),disabled:"localhost"!==e.value&&!e.status,render:function(e){return i("div",{class:"flex items-center justify-between"},[i("span",null,[e.label]),i("span",{onClick:function(){Le({name:e.value})},class:"float-right cursor-pointer text-[1.2rem] text-danger ml-12px ".concat("localhost"!==e.value?"":"!hidden")},[e.status?"":"[未配置]"])])}}}),Ct.value&&"localhost"===(null===(t=Ct.value[0])||void 0===t?void 0:t.value)||null===(o=Ct.value)||void 0===o||o.unshift({label:"服务器磁盘",value:"localhost"}),Mt.value&&(a.value.backupTo=null===(l=Ct.value)||void 0===l?void 0:l[0].value),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),Rt=function(e){Et.value=!1,Mt.value?(e.value.name="[勿删]数据库增量备份[ --/-- ]",e.value.more="ALL"):(e.value.db_name=e.value.sName,e.value.tb_name=""===e.value.sBody?"ALL":e.value.sBody),Ht(e),Ft(e)},Ft=function(){var e=s(r().m(function e(a){var t,l,n,u,o,i,s;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,be();case 1:l=e.v,n=l.data,Ot.value=n.data.map(function(e){return{label:e.name,value:e.name,table_list:e.table_list}}),It.value=(null===(t=n.data[0].table_list)||void 0===t?void 0:t.map(function(e){return{label:e.tb_name,value:""===e.value?"ALL":e.value}}))||[{label:"所有",value:"ALL"}],Ot.value.length>0&&Mt.value?(a.value.db_name=null===(u=Ot.value[0])||void 0===u?void 0:u.value,a.value.tb_name=null===(o=It.value[0])||void 0===o?void 0:o.value,a.value.name="[勿删]数据库增量备份[ ".concat(Ot.value[0].label," - ").concat(null===(i=It.value[0])||void 0===i?void 0:i.label," ]")):Pt.value||Mt.value||(It.value=null===(s=Ot.value.find(function(e){return e.value===a.value.db_name}))||void 0===s||null===(s=s.table_list)||void 0===s?void 0:s.map(function(e){return{label:e.tb_name,value:""===e.value?"ALL":e.value}})),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(a){return e.apply(this,arguments)}}(),Gt=K().payment,zt=u(Se()),Wt=zt.rowData,Qt=(zt.typeInit,[{value:"toShell",label:"Shell脚本"},{value:"site",label:"备份网站"},{value:"database",label:"备份数据库"},{label:"数据库增量备份",value:"enterpriseBackup",render:function(e){return i("div",{class:"flex items-center"},[i("span",null,[T("数据库增量备份")]),i("i",{class:"svgtofont-icon-ltd ml-[0.4rem] text-[#A88E5F] text-[1.4rem]"},null)])}},{value:"logs",label:"网站日志切割"},{value:"path",label:"备份目录"},{value:"webshell",label:"木马查杀"},{value:"sync_time",label:"同步时间"},{value:"rememory",label:"释放内存"},{value:"toUrl",label:"访问URL-GET"},{value:"to_post",label:"访问URL-POST"},{value:"site_restart",label:"网站启停"},{value:"log_cleanup",label:"定时清理日志"}]),$t=[{label:"不接收任何消息通知",value:0},{label:"任务执行失败接收通知",value:1}],Kt=function(e){return["site","database","enterpriseBackup","path"].includes(e)},Jt=function(e){return!isNaN(Number(e))&&Number(e)<10?"0"+e:e},Xt=o(function(){var e,a,t,l,n,u="",r=al.value.type,o=(null===(e=al.value.hour)||void 0===e?void 0:e.toString())||"--",i=(null===(a=al.value.minute)||void 0===a?void 0:a.toString())||"--",s=(null===(t=al.value.where1)||void 0===t?void 0:t.toString())||"--",c=(null===(l=al.value.week)||void 0===l?void 0:l.toString())||"--",v=(null===(n=al.value.second)||void 0===n?void 0:n.toString())||"--";if(["day","day-n","hour","week","month","minute-n","hour-n","second-n"].includes(r)){var p="".concat(Jt(o),":").concat(Jt(i)," 执行一次");switch(r){case"day":u="每天的 ".concat(p);break;case"day-n":u="每隔 ".concat(s," 天的 ").concat(p);break;case"hour":u="每小时的第 ".concat(i," 分钟执行一次");break;case"week":u="每周 ".concat({1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"}[c]," 的 ").concat(p);break;case"month":u="每月 ".concat(s," 号 ").concat(p);break;case"minute-n":u="每小时的第0分钟开始，每隔 ".concat(i," 分钟执行一次");break;case"hour-n":u="每天0点开始，每隔 ".concat(o," 小时的第 ").concat(i," 分钟执行一次");break;case"second-n":u="每隔 ".concat(v," 秒执行一次")}}else u="";return u}),Yt=l(),Zt=function(e){var a="toShell"===e||"toUrl"===e||"to_post"===e;return re("",function(){return i(Ha,{ref:function(e){return Yt.value=e},showNotice:Kt(e),showKeyword:"toShell"===e,showStopWeb:"site"===e,showSecond:a,isEdit:!!Wt.value},{center:function(){return Xt.value?i("div",{class:"text-1.2rem ml-[10rem] mt-[1.6rem] leading-[1rem]",innerHTML:Xt.value},null):null},bottom:function(){return tl.value.notice&&["site","database","path"].includes(e)?i("div",{class:"text-1.2rem ml-10rem mt-1.2rem leading-[1rem]"},[T("检查到磁盘剩余空间小于备份文件的 5 倍或者小于 1GB 时会发送磁盘不足的提示")]):null}})})},el=function(e){return re("",function(){return i(Ga,{rowData:Wt.value,isEnterprise:"enterpriseBackup"===e},null)})},al=l({type:"day",week:"1",hour:"1",minute:"30",second:"5",where1:"1",timeSet:["1"],timeType:"sday",specialHour:[0],specialMinute:[0]}),tl=l({notice:0,notice_channel:"all",keyword:"",flock:!0}),ll=l({split_value:5,split_type:"0",save_local:0}),nl=function(e,a,t){var l=Number(a);l<0||0===l?t(new Error("请输入不为0的数字")):t()},ul=function(e){var a,t=e.value.sType;switch(t||(t="toShell"),t){case"toShell":return a=e,[Z("执行用户","user",Ae.value,{attrs:{class:"!w-[30rem]",placeholder:"默认使用root用户执行"}}),ee([ae("脚本内容","sBody",{attrs:{class:"w-[60rem]",rows:10,resize:"none",placeholder:"请输入脚本内容"},rules:[{required:!0,message:"请输入脚本内容",trigger:"blur"}]}),te("选择脚本",{attrs:{class:"!ml-4px",onClick:function(){return Ne(a)}}})]),le("温馨提示",[{content:"为了保证服务器的安全稳定，shell脚本中以下命令不可使用：shutdown, init 0, mkfs, passwd, chpasswd, --stdin, mkfs.ext, mke2fs"}])];case"logs":return function(e){return Ie.value&&Me(e),[ne("存储路径","log_cut_path",{attrs:{class:"w-[36rem]"},rules:[{required:!0,message:"请输入存储路径",trigger:"blur"}]},function(){return Pe(e)}),ee([Z("切割日志","sName",Ee.value,{attrs:{class:"!w-[16rem] mr-[8px]",disabled:De.value,onChange:function(a){e.value.name="切割日志["+("ALL"===a?"全部":a)+"]"}}}),ue("","save","份",{attrs:{class:"w-[14rem]"},rules:[{required:!0,message:"请输入不为0的正整数",trigger:"blur"}]}),le("温馨提示",[{content:"只切分项目的访问日志，如需对项目日志进行切分，请前往【网站-**项目-项目日志】进行配置"},{content:"日志切割后会在选择的目录下产生/history_backups文件夹，切割后的日志存储在这个文件夹中"}])])]}(e);case"webshell":return function(e){return Fe.value&&$e(e),[Z("查杀站点","sName",Ge.value,{attrs:{class:"!w-[300px]",disabled:ze.value,onChange:function(a){e.value.name="木马查杀["+("ALL"===a?"全部":a)+"]"}}}),ke("消息通道","urladdress",{attrs:{placeholder:"请选择消息通道",isShowApi:!1,isDefault:!0,isShowAll:!1,limit:["sms"],multiple:!1,class:"!w-[300px]"}})]}(e);case"sync_time":return function(e){return Xe.value&&ta(e),[re("时区选择",function(){return i(c,{class:"w-[32rem]",options:Ye.value,modelValue:Ze.value,props:{expandTrigger:"hover"},onChange:function(a){e.value.name="定期同步服务器时间[".concat(a[0],"/").concat(a[1],"]"),e.value.sName="".concat(a[0],"/").concat(a[1]),Ze.value=[a[0],a[1]],e.value.region=a[0],e.value.zone=a[1]}},null)}),le("温馨提示",[{content:"默认从NTP服务器同步时间，失败时将同步bt.cn的服务器时间。"}])]}(e);case"rememory":return!Wt.value&&(e.value.name="释放内存"),[le("温馨提示",[{content:"释放PHP、MYSQL、PURE-FTPD、APACHE、NGINX的内存占用,建议在每天半夜执行!"}])];case"toUrl":return function(e){return na.value&&(e.value.name="访问URL-[ http:// ]",e.value.urladdress="http://"),[ee([oe("URL地址","urladdress",{attrs:{placeholder:"请输入URL地址",class:"!w-[30rem]",onInput:function(a){e.value.name="访问URL-[ ".concat(a," ]")}},rules:[{required:!0,message:"请输入URL地址",trigger:"blur"}]}),te("测试URL",{attrs:{class:"!ml-4px",onClick:function(){return ua(e)}}})]),ae("User-Agent","user_agent",{attrs:{placeholder:"请输入User-Agent",class:"w-[60rem]"}})]}(e);case"to_post":return function(e){return ia.value&&(e.value.name="访问URL-POST[ http:// ]",e.value.urladdress="http://"),[oe("URL地址","urladdress",{attrs:{placeholder:"请输入URL地址",class:"!w-[30rem]",onInput:function(a){e.value.name="访问URL-POST[ ".concat(a," ]")}},rules:[{required:!0,message:"URL地址不可为空",trigger:["blur","input"]},{validator:function(e,a,t){"http://"===a||"https://"===a?t(new Error("输入内容不可为空")):t()},trigger:["blur","input"]}]}),ae("User-Agent","user_agent",{attrs:{placeholder:"请输入User-Agent",class:"w-[60rem]"}})]}(e);case"site_restart":return function(e){return ha.value&&xa(e),[Z("网站","sName",ma.value,{attrs:{class:"!w-[30rem]",disabled:ga.value,onChange:function(a){e.value.name="网站启停["+("ALL"===a?"所有":a)+"]"}}}),ee([re("开启时间",function(){return i(v,{"prefix-icon":"none",clearable:!0,placeholder:"请选择开启时间",class:"!w-22rem",modelValue:ya.value,"onUpdate:modelValue":function(e){return ya.value=e},onChange:function(a){ya.value=a,e.value.startTime=a,e.value.special_time="".concat(ya.value,",").concat(wa.value)},start:"00:00",step:"00:05",end:"23:59"},null)},"startTime",{rules:[{required:!0,message:"请选择开启时间",trigger:"change"}]}),re("停止时间",function(){return i(v,{"prefix-icon":"none",clearable:!0,placeholder:"请选择停止时间",class:"!w-22rem",modelValue:wa.value,"onUpdate:modelValue":function(e){return wa.value=e},onChange:function(a){wa.value=a,e.value.stopTime=a,e.value.special_time="".concat(ya.value,",").concat(wa.value)},start:"00:00",step:"00:05",end:"23:59"},null)},"stopTime",{rules:[{required:!0,message:"请选择停止时间",trigger:"change"}]})]),le("温馨提示",[{content:"执行周期为每天一次"}])]}(e);case"log_cleanup":return function(e){return Va.value&&Oa(e),[ie("清理类型","radioType",[{label:"选择类型",value:1},{label:"自定义路径",value:2}],{attrs:{disabled:Aa.value,onChange:function(a){La.value=a,e.value.radioType=a,e.value.clearLogType=[],e.value.sName="",e.value.name="日志清理",1===a&&(e.value.sName="user_config")}}}),1===La.value?Z(" ","clearLogType",ja,{attrs:{multiple:!0,disabled:Aa.value,class:"!w-[30rem]",placeholder:"请选择日志类型",onChange:function(a){e.value.clearLogType=a,e.value.sName=a.join(",");var t=a.map(function(e){var a;return null===(a=ja.find(function(a){return a.value===e}))||void 0===a?void 0:a.label});e.value.name=a.length<=2?"日志清理[".concat(t.join(","),"]"):"日志清理[".concat(t.slice(0,2).join(","),"...等").concat(t.length,"项]")}},rules:[{required:!0,message:"请选择日志类型",trigger:"change"}]}):ee([ae(" ","logText",{attrs:{class:"!w-[32rem]",disabled:Aa.value,placeholder:"请选择或输入自定义目录，一行一个",onInput:function(a){e.value.logText=a,e.value.log_cut_path=a.split("\n").filter(function(e){return""!==e}).join(","),e.value.name=Ca(a,2)}},rules:[{required:!0,message:"请输入自定义目录",trigger:"blur"}]}),te("添加目录",{attrs:{disabled:Aa.value,class:"!ml-8px",onClick:function(){return Ua(e)}}})]),le("温馨提示",[{content:"自定义选择的目录支持切割的日志类型有：.log、.txt、.out、.err、.log.1"}])]}(e);case"path":return function(e){return Ka.value&&tt(e),[ee([ne("备份目录","sName",{attrs:{disabled:Ja.value,placeholder:"请输入备份目录",class:"!w-[30rem]",onInput:function(a){e.value.name="备份目录[".concat(a,"]")}},rules:[{required:!0,message:"请输入备份目录",trigger:"blur"}]},function(){return!Ja.value&&et(e)}),Z("备份到","backupTo",Za.value,{labelAttrs:{class:"el-small-label ml-8px"},attrs:{class:"!w-[16rem]"}}),ue("保留最新","save","份",{labelAttrs:{class:"el-small-label ml-8px"},attrs:{class:"w-[14rem]"},rules:[{required:!0,message:"保留最新份数不可为空",trigger:"blur"},{validator:nl,trigger:"blur"}]})]),e.value.backupTo&&"localhost"!==e.value.backupTo?el(e.value.sType):null,ae("排除目录","sBody",{attrs:{rows:10,resize:"none",class:"w-[60rem]",placeholder:"每行一条规则,目录不能以/结尾，\n 示例：data/config.php \n static/upload \n *.log,"}})]}(e);case"site":return function(e){return ot.value&&mt(e),[ee([Z("备份网站","sName",st.value,{attrs:{placeholder:"请选择备份网站",class:"!w-[30rem]",disabled:ct.value,onChange:function(a){e.value.name="备份网站[ ".concat("ALL"===a?"所有":a," ]")}}}),Z("备份到","backupTo",it.value,{labelAttrs:{class:"el-small-label ml-8px"},attrs:{class:"!w-[16rem]"}}),ue("保留最新","save","份",{labelAttrs:{class:"el-small-label ml-8px"},attrs:{class:"w-[14rem]"},rules:[{required:!0,message:"保留最新份数不可为空",trigger:"blur"},{validator:nl,trigger:"blur"}]})]),e.value.backupTo&&"localhost"!==e.value.backupTo?el(e.value.sType):null,dt(e)&&ne("备份路径","db_backup_path",{attrs:{placeholder:"请输入备份路径",class:"!w-[30rem]"},rules:[{required:!0,message:"备份路径不可为空",trigger:"blur"}]},function(){return ft(e)}),ae("排除规则","sBody",{attrs:{rows:10,resize:"none",class:"w-[60rem]",placeholder:"每行一条规则,目录不能以/结尾，\n 示例：data/config.php \n static/upload \n *.log,"}})]}(e);case"database":return function(e){var a;return gt.value&&Nt(e),[ee([Z("数据库","db_type",Vt,{attrs:{class:"!w-[9rem]",disabled:Tt.value,onChange:function(a){jt(a),e.value.name="备份".concat(a,"数据库[ 所有 ]"),e.value.sName="ALL",e.value.table_list="ALL"}}}),Z("数据库","sName",kt.value,{labelAttrs:{class:"el-small-label ml-8px"},attrs:{class:"!w-[16rem]",disabled:Tt.value,onChange:function(a){var t;e.value.sName=a,"ALL"===a?e.value.name="备份".concat(e.value.db_type,"数据库[ 所有 ]"):(Lt.value=null===(t=kt.value.find(function(e){return e.value===a}))||void 0===t||null===(t=t.table_list)||void 0===t?void 0:t.map(function(e){return{label:e.tb_name,value:""===e.value?"ALL":e.value}}),e.value.name="备份".concat(e.value.db_type,"数据库[ ").concat(a," ]"))}}}),Z("","table_list",Lt.value,{attrs:{disabled:Tt.value,class:"!w-[16rem] ml-8px"+("ALL"!==e.value.sName&&null!==(a=Lt.value)&&void 0!==a&&a.length&&"mysql"===e.value.db_type?"":" !hidden"),onChange:function(a){e.value.name="备份".concat(e.value.db_type,"数据库[ ").concat(e.value.sName," - ").concat(a," ]")}}}),Z("备份到","backupTo",_t.value,{labelAttrs:{class:"el-small-label ml-8px"},attrs:{class:"!w-[12rem]"}}),ue("保留最新","save","份",{labelAttrs:{class:"el-small-label ml-8px"},attrs:{class:"w-[10rem]"},rules:[{required:!0,message:"保留最新份数不可为空",trigger:"blur"},{validator:nl,trigger:"blur"}]})]),e.value.backupTo&&"localhost"!==e.value.backupTo?el(e.value.sType):null,ne("备份路径","db_backup_path",{attrs:{class:"!w-[42rem]"},rules:[{required:!0,message:"备份路径不可为空",trigger:"blur"}]},function(){return Ut(e)}),re(" ",function(){return i("div",{class:"text-[1.2rem] text-[#666] flex items-center h-full"},[i(O,{class:"!mr-[12px]",modelValue:xt.value,"onUpdate:modelValue":function(e){return xt.value=e},onChange:function(){e.value.backup_mode=xt.value?1:0}},{default:function(){return[T("使用数据库对应账号备份")]}}),i("span",{class:"text-[#999] text-[1.2rem]"},[T(" *注意：目前只支持mysql数据库的本地数据库备份 ")])])}),le("温馨提示",[{content:"远程数据库不支持备份表"}])]}(e);case"enterpriseBackup":return function(e){return Et.value&&Rt(e),[ee([Z("备份数据库","db_name",Ot.value,{attrs:{class:"!w-[20rem] mr-8px",disabled:Pt.value,onChange:function(a){var t;e.value.tb_name="ALL",e.value.name="[勿删]数据库增量备份[ ".concat(a," - 所有 ]"),It.value=null===(t=Ot.value.find(function(e){return e.value===a}))||void 0===t?void 0:t.table_list.map(function(e){return{label:e.tb_name,value:""===e.value?"ALL":e.value}})}}}),It.value&&Z("","tb_name",It.value,{attrs:{disabled:Pt.value,class:"!w-[20rem]",onChange:function(a){var t,l=null===(t=Ot.value.find(function(a){return a.value===e.value.db_name}))||void 0===t?void 0:t.label;e.value.name="[勿删]数据库增量备份[ ".concat(l," - ").concat("ALL"===a?"所有":a," ]")}}}),Z("备份到","backupTo",Ct.value,{labelAttrs:{class:"el-small-label ml-8px"},attrs:{class:"!w-[16rem]"}})]),e.value.backupTo&&"localhost"!==e.value.backupTo?el(e.value.sType):null,(Mt.value||qt.value)&&se("压缩密码","zip_password",{attrs:{class:"w-[32rem]",placeholder:"请输入压缩密码"}},function(){e.value.zip_password=J(16)}),le("温馨提示",[{content:'<span class="text-[#ef0808]">注意：请牢记压缩密码，以免因压缩密码导致无法恢复和下载数据</span>',isHtml:!0},{content:"【使用提醒】当前数据库暂不支持SQLServer、MongoDB、Redis、PgSQL备份"}])]}(e);default:return function(){return[]}}},rl=function(){var e=Wt.value.special_time.split(","),a=[],t=[];e.forEach(function(e){a.push(parseInt(e.split(":")[0])||0),t.push(parseInt(e.split(":")[1])||0),a=Array.from(new Set(a)),t=Array.from(new Set(t))});var l=Wt.value.timeSet?Wt.value.timeSet.split(","):Wt.value.time_set?Wt.value.time_set.split(","):["1"];al.value={type:Wt.value.type,hour:Wt.value.where_hour,minute:Wt.value.where_minute,where1:Wt.value.where1,week:Wt.value.where1,timeType:Wt.value.timeType||Wt.value.time_type,timeSet:l,specialHour:a,specialMinute:t,second:Wt.value.second||"5"};var n=["notice","notice_channel","keyword","flock"];for(var u in tl.value)n.includes(u)&&(tl.value[u]=Wt.value[u],"flock"===u&&(tl.value[u]=1===Wt.value[u]));ll.value={split_value:Wt.value.split_value,split_type:Wt.value.split_type,save_local:Number(Wt.value.save_local)}},ol=function(e){var a,l=t(t({name:"",sType:"toShell",sBody:"",sName:"",backupTo:"",save:"",urladdress:"",save_local:0,notice:0,notice_channel:"",datab_name:e.db_name||"",tables_name:e.tb_name||"",keyword:"",flock:1,version:"",user:""},e),{},{stop_site:Number(null===(a=Yt.value)||void 0===a?void 0:a.WebStopSite)||0},al.value);if((l=Object.assign(l,tl.value)).flock=Number(tl.value.flock),"sweek"===l.type){l.where1="5",l.hour="1",l.minute="5",l.week="1";var n=[];l.specialHour.forEach(function(e){l.specialMinute.forEach(function(a){n.push((e<10?"0"+e:e)+":"+(a<10?"0"+a:a)),n=Array.from(new Set(n))})}),l.special_time=n.join(","),l.time_set=l.timeSet,l.time_type=l.timeType,delete l.timeSet,delete l.timeType}"site_restart"===e.sType&&(l.minute="5",l.where1="5",l.type="sweek"),"second-n"!==al.value.type&&delete l.second,"to_post"===e.sType&&(l.post_param=JSON.stringify(ra.value));return["database","enterpriseBackup","site","path"].includes(e.sType)&&!X(ll.value.split_value)&&(l=Object.assign(l,ll.value)),il(l)},il=function(e){return"log_cleanup"===e.sType?(1===e.radioType&&(e.log_cut_path=""),delete e.radioType,delete e.clearLogType,delete e.logText):"site_restart"===e.sType&&(delete e.startTime,delete e.stopTime),delete e.specialHour,delete e.specialMinute,delete e.echo,delete e.type_zh,delete e.type_name,delete e.sort,delete e.cycle,delete e.rname,e},sl=function(){var e=s(r().m(function e(a){var t,l,n,u;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if("ltd"===Gt.value.authType||"enterpriseBackup"!==a.sType){e.n=1;break}return Te({sourceId:53}),e.a(2,!1);case 1:if(t=z.load("正在提交，请稍候..."),e.p=2,l="enterpriseBackup"===a.sType,n=ol(a),!l){e.n=4;break}return e.n=3,cl(n);case 3:return e.a(2,e.v);case 4:if(!Wt.value.id){e.n=6;break}return e.n=5,he(n);case 5:u=e.v,e.n=8;break;case 6:return e.n=7,ye(n);case 7:u=e.v;case 8:return vl(u),z.request(u),u.status&&Ve(),e.a(2,u.status);case 9:e.n=11;break;case 10:e.p=10,e.v;case 11:return e.p=11,t.close(),e.f(11);case 12:return e.a(2)}},e,null,[[2,10,11,12]])}));return function(a){return e.apply(this,arguments)}}(),cl=function(){var e=s(r().m(function e(a){var t,l,n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t=Wt.value.id,"ALL"===a.tb_name&&(a.tb_name=""),t){e.n=2;break}return e.n=1,we(a);case 1:n=e.v,e.n=4;break;case 2:return e.n=3,ge(a);case 3:n=e.v;case 4:return l=n,z.request(l),Ve(),e.a(2,l.status);case 5:e.p=5,e.v;case 6:return e.a(2)}},e,null,[[0,5]])}));return function(a){return e.apply(this,arguments)}}(),vl=function(e){e.msg.includes("系统加固")&&R({title:"临时关闭系统加固",area:44,component:function(){return F(function(){return a.import("./index-legacy421.js?v=1756369731")},void 0,a.meta.url)},showFooter:!0})},pl=function(){Object.assign(al.value,{type:"day",week:"1",hour:"1",minute:"30",second:"5",where1:"1",timeSet:["1"],timeType:"sday",specialHour:[0],specialMinute:[0]}),Object.assign(tl.value,{notice:0,notice_channel:"",keyword:"",flock:!0})},dl={class:"p-2rem"},ml={class:"w-[60rem]"},fl=["onClick"],bl=p({__name:"index",setup:function(e,a){var l,c=a.expose,v=u(Se()),p=v.rowData,d=v.typeInit,m=o(function(){return["logs","webshell","site_restart","path","site","database","enterpriseBackup"].includes(A.value.sType)}),f=o(function(){return!["site_restart"].includes(A.value.sType)}),_=o(function(){return p.value&&p.value.id}),k=o(function(){return p.value&&!p.value.id}),S=Y({data:function(){return p.value?(rl(),"to_post"===p.value.sType&&(ra.value=JSON.parse(p.value.post_param)),t(t({},p.value),{},{sType:"mysql_increment_backup"===p.value.sType?"enterpriseBackup":p.value.sType,name:p.value.rname||p.value.name})):{sType:"toShell",name:""}},options:function(e){return o(function(){return[ee([Z("任务类型","sType",Qt,{attrs:{clearable:!1,class:"!w-[30rem]",disabled:_.value||k.value,onChange:function(){j(),d.value=!0,e.value.name=""}}}),ce(function(){return i(I,{placement:"top-start",width:"260","popper-class":"green-tips-popover",trigger:"hover"},{default:function(){return i("div",null,[i("span",{class:"text-[#fff]"},[T("任务类型包含以下部分：Shell脚本、备份网站、备份数据库、数据库增量备份、网站日志切割、自定义日志切割、释放内存、访问URL-GET、访问URL-POST、备份目录、木马查杀、同步时间")])])},reference:function(){return i("i",{class:"inline-block svgtofont-el-question-filled text-warning ml-[12px] mt-8px"},null)}})})]),oe("任务名称","name",{attrs:{placeholder:"请输入计划任务名称",disabled:m.value&&!_.value&&!k.value,class:"w-[30rem]"},rules:[{required:!0,message:"请输入计划任务名称",trigger:"blur"}]}),f.value?Zt(e.value.sType):null].concat(n(ul(e)),[{type:"slots",key:"custom"}])})},submit:(l=s(r().m(function e(a,t,l){var n;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t();case 1:return e.n=2,null===(n=Yt.value)||void 0===n?void 0:n.validate();case 2:return e.n=3,sl(a.value);case 3:return e.a(2,e.v)}},e)})),function(e,a,t){return l.apply(this,arguments)})}),V=S.BtForm,A=S.param,N=S.submit,j=S.clearValidate;return c({onConfirm:N}),P(function(){Se().$resetForm(),pl()}),function(e,a){var t=W,l=q,u=M,r=H,o=C;return b(),h("div",dl,[i(g(V),null,{custom:y(function(){return["to_post"===g(A).sType?(b(),x(o,{key:0,label:"参数配置"},{default:y(function(){return[w("div",ml,[i(u,{ref_key:"paramTableRef",ref:ca,class:"param-table",data:g(ra),"row-class-name":g(sa),"max-height":"200",onSelectionChange:g(va)},{default:y(function(){return[i(l,{label:"参数名",prop:"paramName",width:"240"},{default:y(function(e){var a=e.row;return[i(t,{modelValue:a.paramName,"onUpdate:modelValue":function(e){return a.paramName=e},type:"text",size:"small"},null,8,["modelValue","onUpdate:modelValue"])]}),_:1}),i(l,{label:"参数值",prop:"paramValue"},{default:y(function(e){var a=e.row;return[i(t,{modelValue:a.paramValue,"onUpdate:modelValue":function(e){return a.paramValue=e},type:"text",size:"small"},null,8,["modelValue","onUpdate:modelValue"])]}),_:1}),i(l,{label:"操作",align:"right",width:"70"},{default:y(function(e){var a=e.row,t=e.index;return[w("span",{class:"bt-link",onClick:function(e){return g(da)(a,t)}},"删除",8,fl)]}),_:1})]}),_:1},8,["data","row-class-name","onSelectionChange"]),i(r,{type:"primary",size:"small",class:"!mt-[1rem]",onClick:g(pa)},{default:y(function(){return n(a[0]||(a[0]=[w("i",{class:"svgtofont-el-plus text-white font-bold mr-[0.4rem]"},null,-1),T("添加参数 ",-1)]))}),_:1},8,["onClick"])])]}),_:1})):L("",!0)]}),_:1})])}}});e("default",$(bl,[["__scopeId","data-v-3de9b748"]]))}}})}();
