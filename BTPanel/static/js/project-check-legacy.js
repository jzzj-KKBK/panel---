!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function a(e,o,c,i){var a=o&&o.prototype instanceof l?o:l,f=Object.create(a.prototype);return t(f,"_invoke",function(e,t,o){var c,i,a,l=0,f=o||[],p=!1,s={p:0,n:0,v:r,a:d,f:d.bind(r,4),d:function(e,t){return c=e,i=0,a=r,s.n=t,u}};function d(e,t){for(i=e,a=t,n=0;!p&&l&&!o&&n<f.length;n++){var o,c=f[n],d=s.p,m=c[2];e>3?(o=m===t)&&(a=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=r):c[0]<=d&&((o=e<2&&d<c[1])?(i=0,s.v=t,s.n=c[1]):d<m&&(o=e<3||c[0]>t||t>m)&&(c[4]=e,c[5]=t,s.n=m,i=0))}if(o||e>1)return u;throw p=!0,t}return function(o,f,m){if(l>1)throw TypeError("Generator is already running");for(p&&1===f&&d(f,m),i=f,a=m;(n=i<2?r:a)||!p;){c||(i?i<3?(i>1&&(s.n=-1),d(i,a)):s.n=a:s.v=a);try{if(l=2,c){if(i||(o="next"),n=c[o]){if(!(n=n.call(c,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,i<2&&(i=0)}else 1===i&&(n=c.return)&&n.call(c),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=r}else if((n=(p=s.n<0)?a:e.call(t,s))!==u)break}catch(n){c=r,i=1,a=n}finally{l=1}}return{value:n,done:p}}}(e,c,i),!0),f}var u={};function l(){}function f(){}function p(){}n=Object.getPrototypeOf;var s=[][c]?n(n([][c]())):(t(n={},c,function(){return this}),n),d=p.prototype=l.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,t(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=p,t(d,"constructor",p),t(p,"constructor",f),f.displayName="GeneratorFunction",t(p,i,"GeneratorFunction"),t(d),t(d,i,"Generator"),t(d,c,function(){return this}),t(d,"toString",function(){return"[object Generator]"}),(e=function(){return{w:a,m:m}})()}function t(e,r,n,o){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}t=function(e,r,n,o){function i(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?c?c(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n:(i("next",0),i("throw",1),i("return",2))},t(e,r,n,o)}function r(e,t,r,n,o,c,i){try{var a=e[c](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}System.register(["./base-lib-legacy.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./site-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731"],function(t,n){"use strict";var o,c,i,a,u,l,f,p,s,d,m,v,h,_,b,y,k,w,g,j,O,x,V,E,P,S,T;return{setters:[function(e){o=e.c,c=e.r,i=e.k,a=e.g,u=e.p,l=e.q,f=e.v,p=e.e,s=e.A,d=e.x,m=e.F,v=e.a_,h=e.H,_=e.I,b=e.y,y=e.B,k=e.z,w=e.aj,g=e.a9,j=e.a7,O=e.ai},function(e){x=e.T,V=e.K,E=e.j,P=e.b,S=e.e},function(e){T=e.groupProjectConfig},null],execute:function(){var n={class:"p-[2rem]"},D={class:"flex items-center mt-[1.6rem] ml-[3rem]"},G={class:"mt-[1.6rem] leading-8 text-[1.2rem] list-disc ml-[2rem]"},F=o({__name:"project-check",props:{compData:{default:{}}},setup:function(t,o){var S=o.expose,F=t,q=P(),N=c(),U=c(!1),A=i({check:"a;;",port:"",wait_time:180}),C={check:{required:!0,message:"请输入检测策略",trigger:"blur"},port:[{validator:function(e,t,r){t.split(",").filter(function(e){return""!==e}).some(function(e){return!x(e)})&&"port"==A.check?r(new Error("请输入正确的端口")):r()}}],wait_time:[{validator:function(e,t,r){t<=0&&"active"==A.check||""==t&&"active"==A.check?r(new Error("请输入正确的进程存活时长")):r()}}]},H=[{value:"all",label:"任意端口监听"},{value:"port",label:"指定端口监听"},{value:"active",label:"进程存活时长"}],I=a(function(){switch(A.check){case"all":return"任意端口监听策略，执行启动后,项目进程直到出现任意一个端口监听后, 才认定为启动成功,最大默认等待3分钟";case"port":return"指定端口监听策略，执行启动后，项目进程直到监听【".concat(A.port,"】端口后，才认定为启动成功,最大默认等待3分钟");case"active":return"进程存活时长，解释:启动该项目后，在【".concat(A.wait_time,"】秒内自动退出则认定为启动成功");default:return""}}),z=function(){var t,n=(t=e().m(function t(r){return e().w(function(e){for(;;)switch(e.n){case 0:if("active"!=A.check){e.n=1;break}if(!(A.wait_time<=0||""==A.wait_time)){e.n=1;break}return e.a(2,q.error("请输入正确的进程存活时长"));case 1:return e.n=2,N.value.validate();case 2:V({loading:U,request:T({group_id:F.compData.group_id,project_id:F.compData.id,check_info:JSON.stringify({type:"all"==A.check?"port":A.check,port:"port"==A.check?A.port.split(","):[],wait_time:"active"==A.check?A.wait_time:180})}),success:function(e){e.status&&(F.compData.refreshEvent&&F.compData.refreshEvent(),r&&r())}});case 3:return e.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(o,c){var i=t.apply(e,n);function a(e){r(i,o,c,a,u,"next",e)}function u(e){r(i,o,c,a,u,"throw",e)}a(void 0)})});return function(e){return n.apply(this,arguments)}}();return u(function(){var e,t,r,n,o;e=F.compData,A.check=(null===(t=e.check_info)||void 0===t?void 0:t.type)||"all","port"===A.check&&0==(null===(r=e.check_info)||void 0===r?void 0:r.port.length)&&(A.check="all"),A.port=(null===(n=e.check_info)||void 0===n?void 0:n.port.join(","))||"",A.wait_time=Number((null===(o=e.check_info)||void 0===o?void 0:o.wait_time)||180)}),S({onConfirm:z}),function(e,t){var r=O,o=w,c=g,i=E,a=j;return l(),f("div",n,[p(a,{ref_key:"javaAddFormRef",ref:N,model:d(A),disabled:d(U),"label-width":"9rem",rules:C},{default:s(function(){return[p(c,{label:"检测策略",prop:"check"},{default:s(function(){return[p(o,{modelValue:d(A).check,"onUpdate:modelValue":t[0]||(t[0]=function(e){return d(A).check=e}),class:"!w-[22rem]",placeholder:"请选择"},{default:s(function(){return[(l(),f(m,null,v(H,function(e){return p(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),64))]}),_:1},8,["modelValue"])]}),_:1}),h(p(c,{label:"端口",prop:"port"},{default:s(function(){return[p(i,{modelValue:d(A).port,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d(A).port=e}),placeholder:"多个用,分隔",width:"22rem"},null,8,["modelValue"])]}),_:1},512),[[_,"port"==d(A).check]]),h(b("div",D,[t[3]||(t[3]=y(" 启动该项目后，在 ",-1)),p(i,{modelValue:d(A).wait_time,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d(A).wait_time=e}),type:"number",width:"8rem",class:"!mx-[1rem]"},null,8,["modelValue"]),t[4]||(t[4]=y(" 秒内自动退出则认定为启动成功 ",-1))],512),[[_,"active"==d(A).check]])]}),_:1},8,["model","disabled"]),b("ul",G,[b("li",null,"当前效果："+k(d(I)),1),t[5]||(t[5]=b("li",null," 检查策略：主要是为了确认当前项目是否启动成功，保证顺序启动时，能在合适的情况下中断后续操作 ",-1)),t[6]||(t[6]=b("li",null,"任意端口监听策略（默认）：启动后，进程出现监听任意端口视为启动成功（最大等待3分钟）",-1)),t[7]||(t[7]=b("li",null," 指定端口监听策略：启动后，进程出现监听了您指定的所有端口后，视为启动成功（最大等待3分钟） ",-1)),t[8]||(t[8]=b("li",null,"进程存活时长：启动后，进程在指定时长内未退出，则视为启动成功",-1))])])}}});t("default",S(F,[["__scopeId","data-v-e00f7f0c"]]))}}})}();
