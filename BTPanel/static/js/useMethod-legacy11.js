!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(e){r(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function r(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",c=n.toStringTag||"@@toStringTag";function i(n,r,o,c){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return a(l,"_invoke",function(n,r,o){var a,c,i,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,i=t,p.n=n,u}};function d(n,r){for(c=n,i=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,v=a[2];n>3?(o=v===r)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,p.n=v,c=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,v),c=l,i=v;(e=c<2?t:i)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,i)):p.n=i:p.v=i);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?i:n.call(r,p))!==u)break}catch(e){a=t,c=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,o,c),!0),l}var u={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),d=f.prototype=s.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,c,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=f,a(d,"constructor",f),a(f,"constructor",l),l.displayName="GeneratorFunction",a(f,c,"GeneratorFunction"),a(d),a(d,c,"Generator"),a(d,r,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(o=function(){return{w:i,m:v}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){function c(e,n){a(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},a(t,e,n,r)}function c(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){c(a,r,o,i,u,"next",t)}function u(t){c(a,r,o,i,u,"throw",t)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./ssl-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./site-legacy.js?v=1756369731","./useStore-legacy12.js?v=1756369731","./useController-legacy13.js?v=1756369731","./useStore-legacy11.js?v=1756369731","./useMethod-legacy10.js?v=1756369731"],function(t,e){"use strict";var a,c,u,s,l,f,p,d,v,y,g,m,h,b,w,j,x,O;return{setters:[function(t){a=t.l,c=t.L,u=t.o,s=t.K,l=t.a3,f=t.b},function(t){p=t.s,d=t.n},function(t){v=t.j,y=t.k},function(t){g=t.e},function(t){m=t.reissueCertOrder,h=t.renewalCert,b=t.getVerifyResult},function(t){w=t.u},function(t){j=t.b},function(t){x=t.u},function(t){O=t.a}],execute:function(){var _=w(),S=_.orderInfo,P=_.certVerifyInfo,k=f(),T=p(x()),C=T.activeTabs,E=T.sslIsRefresh,M=T.testIsRefresh,D=T.encryptIsRefresh,N=T.otherIsRefresh,R=(t("f",function(t){return a({isAsync:!0,title:"【".concat(t.title,"】自动续签配置"),area:50,compData:t,component:function(){return c(function(){return e.import("./index-legacy381.js?v=1756369731")},void 0,e.meta.url)},showFooter:!0,confirmText:"保存配置",onCancel:t.cancel})}),t("g",function(){var t=i(o().m(function t(e){var n,r,a,c,i;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=e.crontab_id,t.p=1,e.crontab_id=-1,t.n=2,u({title:"删除【".concat(e.title,"】自动续签"),content:"删除该证书自动续签，是否继续操作？",icon:"warning",width:45});case 2:return n=k.load("正在删除证书自动续签，请稍候..."),t.n=3,v({crontab_id:r});case 3:a=t.v,k.request(a),a.status&&(null===(c=(i={ssl:function(){return E.value=!0},test:function(){return M.value=!0},encrypt:function(){return D.value=!0},other:function(){return N.value=!0}})[C.value])||void 0===c||c.call(i)),t.n=5;break;case 4:t.p=4,t.v&&d(function(){e.crontab_id=r});case 5:return t.p=5,n&&n.close(),t.f(5);case 6:return t.a(2)}},t,null,[[1,4,5,6]])}));return function(e){return t.apply(this,arguments)}}()),t("b",function(t){S.value=t,a({isAsync:!0,title:"完善商业证书资料",area:64,component:function(){return c(function(){return e.import("./index-legacy382.js?v=1756369731")},void 0,e.meta.url)},compData:{orderInfo:t,refreshEvent:function(){var t,e={ssl:function(){return E.value=!0},test:function(){return M.value=!0},encrypt:function(){return D.value=!0},other:function(){return N.value=!0}};null===(t=e[C.value])||void 0===t||t.call(e)}}})}),function(){var t=i(o().m(function t(e,r,a){var c;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,s({loading:"正在验证商用证书，请稍后...",request:b({oid:e,cert_ssl_type:r,pid:a})});case 1:if((c=t.v).status){t.n=2;break}return k.request(c),t.a(2,{status:!1,msg:"验证商用证书失败"});case 2:return t.a(2,{data:n(n({oid:e},c.data),{},{isCNAME:c.data.data.dcvList[0].dcvMethod.indexOf("CNAME_")>-1}),status:!0,msg:"验证商用证书成功"});case 3:return t.p=3,t.v,t.a(2,{status:!1,msg:"验证商用证书失败"})}},t,null,[[0,3]])}));return function(e,n,r){return t.apply(this,arguments)}}()),A=function(t){return P.value=t,a({title:"验证域名-"+(t.isCNAME?"DNS验证":"文件验证"),area:64,component:function(){return c(function(){return e.import("./index-legacy383.js?v=1756369731")},void 0,e.meta.url)},compData:t})},F=(t("c",function(){var t=i(o().m(function t(e,r,a){var c,i;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,R(e,r,a);case 1:c=t.v,i=c.data,c.status&&A(n(n({},i),{},{cert_ssl_type:r,pid:a}));case 2:return t.a(2)}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()),t("r",function(){var t=i(o().m(function t(e){var r,a,c,i,f;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,u({title:"商业证书续签",content:"当前证书订单需要重新生成新订单，需要手动续签，和重新部署证书，是否继续操作？"});case 1:return a={pdata:JSON.stringify({oid:e})},t.n=2,s({loading:"正在续签商业证书，可能等待时间较长，请稍后...",request:m(a),data:Object});case 2:c=t.v,l(c)&&c.hasOwnProperty("order_info")?(i=c.order_info,j({oid:c.oid,wxcode:c.wxcode,alicode:c.alicode,orderInfo:i,productInfo:n(n({},i),{},{productName:i.title,totalPrice:c.data.price,isRenew:!0})})):k.request(c),null===(r=(f={ssl:function(){return E.value=!0},test:function(){return M.value=!0},encrypt:function(){return D.value=!0},other:function(){return N.value=!0}})[C.value])||void 0===r||r.call(f);case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),t("i",function(){var t=i(o().m(function t(e){var n,r,a,c,i,u,s,f,p,d,v,y,g,m,b,w;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,F();case 1:return n=t.v,t.n=2,h({index:e.index});case 2:if(r=t.v,!1!==(a=r.data).status||!a.hasOwnProperty("err")||!l(a.err)){t.n=3;break}return i="",u=a.msg,void 0===(null===(c=a.err)||void 0===c?void 0:c.challenges)?i+="\n\t\t\t\t<p><span>响应状态：</span>".concat(a.err.status,"</p>\n\t\t\t\t<p><span>错误类型：</span>").concat(a.err.type,'</p>\n\t\t\t\t<p><span>错误来源：</span><a class="bt-link" href=\'https://letsencrypt.org/\' rel="noreferrer noopener">Let\'s Encrypt官网</a></p>\n\t\t\t\t<div class="flex flex-col">\n\t\t\t\t\t错误代码：\n\t\t\t\t\t<pre class="!text-white !bg-[#333] !inline-block !ml-[4px]">\n\t\t\t\t\t\t').concat(a.err.detail,"\n\t\t\t\t\t</pre>\n\t\t\t\t</div>"):(null!==(s=a.err)&&void 0!==s&&s.challenges[1]||null===(f=a.err)||void 0===f||!f.challenges[0]||(a.err.challenges[1]=a.err.challenges[0]),"invalid"===a.err.status&&(y=a.err.identifier.value,g=a.err.challenges[1],null==g?void 0:g.error.detail,i+="\n\t\t\t\t\t\t<p><span>验证域名：</span>".concat(y,"</p>\n\t\t\t\t\t"),m="http://".concat(y,"/.well-known/acme-challenge/").concat(null===(p=a.err)||void 0===p?void 0:p.challenges[0].token),i+='\n\t\t\t\t\t\t<p><span>验证URL：</span><a class="bt-link" href=\''.concat(m,"' target='_blank' rel=\"noreferrer noopener\">点击查看</a></p>\n\t\t\t\t\t\t<p><span>验证内容：</span>").concat(null===(d=a.err)||void 0===d?void 0:d.challenges[0].token,'</p>\n\t\t\t\t\t\t<div class="flex flex-col">\n\t\t\t\t\t\t\t错误代码：\n\t\t\t\t\t\t\t<pre class="!text-white !bg-[#333] !inline-block !ml-[4px]">\n\t\t\t\t\t\t\t\t').concat(null===(v=a.err)||void 0===v?void 0:v.challenges[0].error.detail,"\n\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"),i+="<p><span>验证结果：</span> <a style='color:red;'>验证失败</a></p>")),k.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,icon:"x",message:'\n\t\t\t\t\t<div class="flex items-center justify-center mt-[.8rem] mb-2rem">\n\t\t\t\t\t\t<i class="svgtofont-el-circle-close-filled mr-[.8rem] text-[#F56C6C] !text-[3rem]"></i>\n\t\t\t\t\t\t<a style="color: red; font-size:16px">\n\t\t\t\t\t\t\t'.concat(u,'\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="p-[2rem] border border-1 border-color-[#dedede] !rounded-[4px] !mb-[12px] !leading-[26px] bg-[#f8f8f8]">\n\t\t\t\t\t\t').concat(i,"\n\t\t\t\t\t</div>\n\t\t\t\t"),showClose:!0,duration:0}),n._props.onCancel(),t.a(2);case 3:k.msg({dangerouslyUseHTMLString:!0,message:a.msg,type:a.status?"success":"error",duration:a.status?2e3:0,showClose:!a.status}),a.status&&(null===(b=(w={ssl:function(){return E.value=!0},test:function(){return M.value=!0},encrypt:function(){return D.value=!0},other:function(){return N.value=!0}})[C.value])||void 0===b||b.call(w)),n._props.onCancel(),t.n=5;break;case 4:t.p=4,t.v;case 5:return t.a(2)}},t,null,[[0,4]])}));return function(e){return t.apply(this,arguments)}}()),t("l",function(){return a({isAsync:!0,area:[50,25],showFooter:!1,component:function(){return c(function(){return e.import("./index-legacy384.js?v=1756369731")},void 0,e.meta.url)}})})),L=(t("o",function(){g({title:"SSL证书需求反馈收集",type:28,isNoRate:!0,softName:"1",isCard:!1,id:993})}),t("a",function(t){a({isAsync:!0,title:"【".concat(t.title,"】部署证书"),area:45,component:function(){return c(function(){return e.import("./index-legacy385.js?v=1756369731")},void 0,e.meta.url)},compData:{row:t},showFooter:!0})}),t("d",function(){var t=i(o().m(function t(e){var n,r;return o().w(function(t){for(;;)switch(t.n){case 0:if("1"!==e.type){t.n=1;break}window.open("/ssl?action=download_cert&oid=".concat(e.oid),"_blank","noopener,noreferrer"),t.n=3;break;case 1:if("3"!==e.type){t.n=3;break}return n={ssl_id:e.id,ssl_hash:e.hash,index:e.index},e.order_status?(delete n.ssl_id,delete n.ssl_hash):delete n.index,t.n=2,y(n);case 2:(r=t.v).status?window.open(r.msg,"_blank","noopener,noreferrer"):k.error(r.msg);case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),t("v",function(t){"3"!==t.type?function(t){a({isAsync:!0,title:"【".concat(t.title,"】验证域名"),area:45,component:function(){return c(function(){return e.import("./index-legacy387.js?v=1756369731")},void 0,e.meta.url)},compData:{row:t},showFooter:!0})}(t):function(t){a({isAsync:!0,title:"手动".concat("dns"===t.auth_type?"解析TXT记录":"创建验证文件"),area:70,component:function(){return c(function(){return e.import("./index-legacy386.js?v=1756369731")},void 0,e.meta.url)},compData:{row:t},showFooter:!1})}(t)}),t("u",function(){return a({isAsync:!0,title:"上传证书",area:80,component:function(){return c(function(){return e.import("./index-legacy388.js?v=1756369731")},void 0,e.meta.url)},showFooter:!0})}),t("C",{OTHER:"other",TEST:"test",SSL:"ssl",ENCRYPT:"encrypt"})),I=r(r(r(r({},L.OTHER,{validate:function(t){return t.endDay>0},errorMessage:"选择的证书中没有可设置告警的证书！只有未过期的证书才能设置告警。",warningMessage:function(t,e){return"已过滤掉 ".concat(t," 个已过期的证书，只对 ").concat(e," 个未过期的证书设置告警。")}}),L.TEST,{validate:function(t){return"COMPLETED"===t.stateCode&&""!==t.authDomain&&t.endDay>0},errorMessage:"选择的证书中没有可设置告警的证书！只有订单完成、有认证域名且未过期的证书才能设置告警。",warningMessage:function(t,e){return"已过滤掉 ".concat(t," 个不符合条件的证书，只对 ").concat(e," 个符合条件的证书设置告警。")}}),L.SSL,{validate:function(t){return t.endDay>0},errorMessage:"选择的证书中没有可设置告警的证书！只有未过期的证书才能设置告警。",warningMessage:function(t,e){return"已过滤掉 ".concat(t," 个已过期的证书，只对 ").concat(e," 个未过期的证书设置告警。")}}),L.ENCRYPT,{validate:function(t){return"valid"===t.order_status},errorMessage:"选择的证书中没有可设置告警的证书！只有订单状态为有效的证书才能设置告警。",warningMessage:function(t,e){return"已过滤掉 ".concat(t," 个订单状态无效的证书，只对 ").concat(e," 个有效证书设置告警。")}});t("e",function(t,e){var n=I[e];return!!n&&n.validate(t)}),t("h",function(t,e){var n=I[e];if(!n)return k.error("不支持的证书类型: ".concat(e)),!1;var r=t.filter(n.validate),o=r.length,a=t.length-o;return 0===o?(k.error(n.errorMessage),!1):(a>0&&k.warn(n.warningMessage(a,o)),O({title:"证书",data:r,cancel:function(){},isMulti:!0}),!0)})}}})}();
