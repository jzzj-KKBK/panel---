!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function l(t,o,u,a){var l=o&&o.prototype instanceof c?o:c,f=Object.create(l.prototype);return r(f,"_invoke",function(t,r,o){var u,a,l,c=0,f=o||[],s=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return u=n,a=0,l=e,d.n=t,i}};function m(t,r){for(a=t,l=r,n=0;!s&&c&&!o&&n<f.length;n++){var o,u=f[n],m=d.p,p=u[2];t>3?(o=p===r)&&(l=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=e):u[0]<=m&&((o=t<2&&m<u[1])?(a=0,d.v=r,d.n=u[1]):m<p&&(o=t<3||u[0]>r||r>p)&&(u[4]=t,u[5]=r,d.n=p,a=0))}if(o||t>1)return i;throw s=!0,r}return function(o,f,p){if(c>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,p),a=f,l=p;(n=a<2?e:l)||!s;){u||(a?a<3?(a>1&&(d.n=-1),m(a,l)):d.n=l:d.v=l);try{if(c=2,u){if(a||(o="next"),n=u[o]){if(!(n=n.call(u,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,a<2&&(a=0)}else 1===a&&(n=u.return)&&n.call(u),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=e}else if((n=(s=d.n<0)?l:t.call(r,d))!==i)break}catch(n){u=e,a=1,l=n}finally{c=1}}return{value:n,done:s}}}(t,u,a),!0),f}var i={};function c(){}function f(){}function s(){}n=Object.getPrototypeOf;var d=[][u]?n(n([][u]())):(r(n={},u,function(){return this}),n),m=s.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,r(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return f.prototype=s,r(m,"constructor",s),r(s,"constructor",f),f.displayName="GeneratorFunction",r(s,a,"GeneratorFunction"),r(m),r(m,a,"Generator"),r(m,u,function(){return this}),r(m,"toString",function(){return"[object Generator]"}),(t=function(){return{w:l,m:p}})()}function r(e,n,t,o){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}r=function(e,n,t,o){function a(n,t){r(e,n,function(e){return this._invoke(n,t,e)})}n?u?u(e,n,{value:t,enumerable:!o,configurable:!o,writable:!o}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},r(e,n,t,o)}function o(e,n,t,r,o,u,a){try{var l=e[u](a),i=l.value}catch(e){return void t(e)}l.done?n(i):Promise.resolve(i).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise(function(r,u){var a=e.apply(n,t);function l(e){o(a,r,u,l,i,"next",e)}function i(e){o(a,r,u,l,i,"throw",e)}l(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./index-legacy116.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731"],function(n,r){"use strict";var o,a,l,i,c,f,s,d,m,p,v,y,b,g,_,h,w,j,k,x,S,O,V,A,T,C,P,E,G,U;return{setters:[function(e){o=e.ay,a=e.K,l=e.c7,i=e.M,c=e.ah,f=e.gD,s=e.ag,d=e.al,m=e.e},function(e){p=e.r,v=e.k,y=e.c,b=e.p,g=e.a4,_=e.q,h=e.v,w=e.e,j=e.A,k=e.x,x=e.Q,S=e.O,O=e.B,V=e.y,A=e.P,T=e.a9,C=e.D,P=e.S,E=e.a7,G=e.aA},function(e){U=e._},null],execute:function(){var r=o().refs.isRefreshTableList,F=null,I=p(!1),q=p(""),K=p("common"),M=v({name:"",image:"",cmd:""}),R={model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:"",image:""},z=function(){q.value=""},D=function(e,n){try{var t=n.data;if(q.value+="".concat(t),t.includes("bt_successful")||t.includes("bt_failed")){var o,u={status:t.includes("bt_successful"),msg:t.includes("bt_successful")?"拉取成功":"拉取失败"};i.request(u),u.status&&(r.value=!0),null===(o=F)||void 0===o||o.close(),I.value=!1}}catch(a){}},B=function(){var e,n;null===(e=F)||void 0===e||e.close(),q.value="",null===(n=F=c({route:"/ws_model",onMessage:D}))||void 0===n||n.send(R)},H={image:[{validator:function(e,n,t){""===n?t(new Error("请输入镜像名")):t()},trigger:["blur"]}]},L=function(){r.value=!0},N=p([]),Q=function(){var e=u(t().m(function e(){var n;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,""!==M.cmd){e.n=1;break}return i.error("请输入命令"),e.a(2);case 1:return I.value=!0,R.name="",R.url="",R.image="",R.def_name="get_cmd_log",e.n=2,f({cmd:M.cmd},"image");case 2:(n=e.v).status?B():(i.error(n.msg),I.value=!1),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),$=function(){var e=u(t().m(function e(n){return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"cmd"!==K.value){e.n=1;break}return Q(),e.a(2);case 1:if(""!==M.name){e.n=2;break}return i.error("请选择仓库名"),e.a(2);case 2:return I.value=!0,e.n=3,n.value.validate(function(){var e=u(t().m(function e(n){return t().w(function(e){for(;;)switch(e.n){case 0:n?(R.name=N.value.find(function(e){return e.url==M.name}).name,R.url=N.value.find(function(e){return e.url==M.name}).url,R.image=M.image,R.def_name="pull_from_some_registry",B()):I.value=!1;case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}());case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=u(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:a({request:l(),data:Array,success:function(e){var n;e.forEach(function(e){N.value.push({value:e.url,label:"".concat(e.name).concat("docker.io"===e.url?"":"(".concat(e.url,")")),url:e.url,name:e.name})}),M.name=null===(n=N.value[0])||void 0===n?void 0:n.value}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),W={class:"flex flex-col p-[1.6rem] lib-box"},X={class:"rounded-default bg-[#333] h-[45.6rem]"},Y={class:"rounded-default bg-[#333] h-[45.6rem]"};n("default",m(y({__name:"index",setup:function(n,t){var r=t.expose,o=p(),u=function(){$(o)};return b(function(){J()}),g(function(){var e;null===(e=F)||void 0===e||e.close(),F=null,N.value=[],M.name="",M.image="",M.cmd="",z()}),r({onConfirm:u,onCancel:L}),function(n,t){var r=s,a=T,l=C,i=P,c=U,f=E,m=G,p=d;return _(),h("div",W,[w(p,{modelValue:k(K),"onUpdate:modelValue":t[5]||(t[5]=function(e){return A(K)?K.value=e:null}),type:"card",onChange:k(z)},{default:j(function(){return[w(m,{name:"common",label:"常规拉取"},{default:j(function(){return[w(f,{ref_key:"cmdFormRef",ref:o,size:"default",model:k(M),rules:k(H),disabled:k(I),class:"relative w-full","label-position":"right",onSubmit:t[2]||(t[2]=x(function(){},["prevent"]))},{default:j(function(){return[w(a,{prop:"name",label:"仓库名"},{default:j(function(){return[w(r,{modelValue:k(M).name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return k(M).name=e}),options:k(N),class:"!w-[32rem]"},null,8,["modelValue","options"])]}),_:1}),w(a,{prop:"image",label:"镜像名"},{default:j(function(){return[w(i,{class:"!w-[32rem]",modelValue:k(M).image,"onUpdate:modelValue":t[1]||(t[1]=function(e){return k(M).image=e}),onKeydown:S(u,["enter"]),placeholder:"请输入镜像名，按回车拉取,如:image:v1"},{append:j(function(){return[w(l,{type:"default",onClick:u},{default:j(function(){return e(t[6]||(t[6]=[O("拉取",-1)]))}),_:1})]}),_:1},8,["modelValue"])]}),_:1}),t[7]||(t[7]=V("div",{class:"resultTitle px-[.2rem] py-[.4rem] mt-[1.6rem]"},"拉取结果：",-1)),V("div",X,[w(c,{class:"h-[45.6rem] !rounded-none",content:k(q)},null,8,["content"])])]}),_:1},8,["model","rules","disabled"])]}),_:1}),w(m,{name:"cmd",label:"命令拉取"},{default:j(function(){return[w(f,{ref:"cmdRef",size:"large",model:k(M),rules:k(H),disabled:k(I),class:"relative w-full","label-position":"right",onSubmit:t[4]||(t[4]=x(function(){},["prevent"]))},{default:j(function(){return[w(a,{prop:"cmd"},{default:j(function(){return[w(i,{autofocus:"",modelValue:k(M).cmd,"onUpdate:modelValue":t[3]||(t[3]=function(e){return k(M).cmd=e}),onKeyup:S(u,["enter"]),placeholder:"请输入需要执行的命令,docker pull redis:latest，按回车执行"},{append:j(function(){return[w(l,{type:"default",onClick:u},{default:j(function(){return e(t[8]||(t[8]=[O("执行命令",-1)]))}),_:1})]}),_:1},8,["modelValue"])]}),_:1}),t[9]||(t[9]=V("div",{class:"resultTitle px-[.2rem] py-[.4rem] mt-[1.6rem]"},"拉取结果：",-1)),V("div",Y,[w(c,{class:"h-[45.6rem] !rounded-none",content:k(q)},null,8,["content"])])]}),_:1},8,["model","rules","disabled"])]}),_:1})]}),_:1},8,["modelValue","onChange"])])}}}),[["__scopeId","data-v-f6707562"]]))}}})}();
