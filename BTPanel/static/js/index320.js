import{c as e,s as t,t as a,g as s,ay as l,r as n,p as r,aD as o,G as i,H as p,x as d,q as m,v as u,F as c,y as x,e as f,K as v,z as b,J as g,A as y,B as h,C as w,P as k,I as _,aQ as j,al as V,S as C,ax as I,a9 as P,a7 as U,D as H,bq as q}from"./base-lib.js?v=1756369731";import{u as E,gn as z,M,d as B,c as D,e as S}from"./utils-lib.js?v=1756369731";import{H as F}from"./store3.js?v=1756369731";import{H as L}from"./store4.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./validator.js?v=1756369731";import"./index104.js?v=1756369731";import"./column.js?v=1756369731";const N={class:"absolute top-15px left-15px text-white text-[1.4rem]"},R={class:"absolute top-15px left-15px text-white text-[1.4rem]"},T={class:"text-[1.5rem] mt-8 flex justify-between mb-16px mx-34px update-text"},A={class:""},G={key:0,class:"text-primary"},J={class:""},K={class:"text-[2.1rem] flex mt-3rem pb-8 font-bold items-center justify-center text-[#565656] bg-linear"},O={class:"px-32px py-[1.6rem] text-[1.4rem] flex items-center justify-between update-text bg-[white]"},Q={class:"flex items-center"},W={key:0,class:"text-primary"},$={key:0,class:"rounded-md update-content"},X=["innerHTML"],Y={key:1},Z={class:"flex flex-col justify-center leading-10 text-[1.2rem] text-medium"},ee={class:"mt-0.6rem flex items-center"},te={key:2},ae={class:"pt-[1rem] pb-[3rem] pl-[3.1rem] pr-[3rem]"},se={class:"mt-[1rem]"},le={class:"my-[1rem] flex items-center"},ne={class:"flex flex-col items-center p-[2rem]"},re={key:3,class:"flex align-middle justify-center pb-10"},oe=S(e({__name:"index",setup(e,{expose:S}){const oe=L(),{getUpdateInfoNew:ie}=oe,{panelInfo:pe}=t(oe),{upgrade:de,currentInfo:me}=a(pe.value),ue=F(),{panelInfo:ce,formPhone:xe,loading:fe,grayscale:ve,panelVersion:be,betaInfo:ge,officialInfo:ye,isBeta:he,update:we,isNPSShow:ke,questions:_e,form:je,rules:Ve}=t(ue),Ce=s(()=>0!==de.value),{mainHeight:Ie,mainWidth:Pe}=E(),Ue=s(()=>ce.value.isBeta?"测试版":"正式版"),He=l("popupClose",()=>{}),qe=n(!1);return r(async()=>{await ue.getUpdatePushInfo()}),o(()=>{ue.$reset()}),S({onOpen:async()=>{if(!me.value){qe.value=!0;const e=await ie();qe.value=!1,(null==e?void 0:e.msg)&&(M.request(e),He())}}}),(e,t)=>{var a,s,l;const n=B,r=D,o=j,E=V,M=C,S=I,F=P,L=U,oe=H,ie=i("bt-loading"),pe=q;return p((m(),u("div",{class:g((d(Ce)?"update-back ":"")+"flex relative w-[100%] flex-col h-[100%] rounded-[.2rem] update-version-view")},[d(Ce)?(m(),u(c,{key:0},[x("div",{class:"w-[150px] fixed right-30px",style:v("top:".concat(d(Ie)/2-280,"px;right:").concat(d(Pe)/2-81,"px"))},[f(n,{src:"/update/update_rocket.svg",alt:"rocket img"})],4),x("div",N,[x("span",null,b("".concat(d(z)).concat(d(Ue),"本更新")),1)])],64)):(m(),u(c,{key:1},[t[10]||(t[10]=x("div",{class:"w-full absolute h-140px absolute-image rounded-[2px] title-new-img"},null,-1)),x("div",R,[x("span",null,"宝塔"+b(d(z))+"面板",1)])],64)),p((m(),u("div",{class:g(d(Ce)?"relative mt-52 rounded-[2px]":"relative mt-25 bg-linear rounded-[2px]")},[d(Ce)?(m(),u(c,{key:0},[t[13]||(t[13]=x("div",{class:"text-[2.1rem] flex font-bold items-center justify-center text-[#565656]"},[x("span",null,"发现新的正式版本！")],-1)),x("div",T,[x("div",A,[t[12]||(t[12]=x("span",null,"最新版本: ",-1)),x("span",null,[f(r,{href:"https://www.bt.cn/bbs/forum-36-1.html"},{default:y(()=>{var e;return[h(b(d(z))+"-"+b(null==(e=d(me))?void 0:e.version),1)]}),_:1})]),d(ve)<1?(m(),u("span",G,[f(o,{class:"item",effect:"dark",content:"提示：当前是正式版尝鲜阶段，为了验证新版本的稳定性和兼容性，确保全面推出之前，新功能能正常运行。",placement:"top"},{default:y(()=>[...t[11]||(t[11]=[x("span",null,[h("（尝鲜版"),x("i",{class:"svgtofont-el-question-filled"}),h("）")],-1)])]),_:1})])):w("",!0)]),x("div",J,[x("span",null,"更新时间："+b(null==(a=d(me))?void 0:a.uptime),1)])])],64)):(m(),u(c,{key:1},[x("div",K,[f(n,{src:"/update/update_icon.svg",alt:"icon",class:"h-12 mr-2 mt-1"}),t[14]||(t[14]=x("span",{class:"leading-10"},"当前已经是最新版本",-1))]),x("div",O,[x("span",Q,[t[16]||(t[16]=h(" 当前版本： ",-1)),f(r,{class:"bt-link text-[12px]",href:"https://www.bt.cn/bbs/forum-36-1.html",textContent:b(d(z)+d(Ue)+d(be))},null,8,["textContent"]),d(ve)<1?(m(),u("span",W,[f(o,{class:"item",effect:"dark",content:"提示：当前是正式版尝鲜阶段，为了验证新版本的稳定性和兼容性，确保全面推出之前，新功能能正常运行。",placement:"top"},{default:y(()=>[...t[15]||(t[15]=[x("span",null,[h("（尝鲜版"),x("i",{class:"svgtofont-el-question-filled"}),h("）")],-1)])]),_:1})])):w("",!0)]),x("span",null,"当前发布时间："+b(null==(s=d(me))?void 0:s.uptime),1)])],64)),x("div",{class:g(d(Ce)?"mb-[3rem] mt-4 px-16px py-22px mx-34px bg-[rgba(33,165,59,0.04)] rounded-[2px]":"mb-[2.2rem] mt-2 px-16px py-14px mx-32px border-1 border-[#EEEFEC] bg-[rgb(247,252,248)] rounded-[2px]")},[d(Ce)?(m(),u("div",$,[x("div",{class:"leading-10 mr-2 text-[1.2rem] text-medium overflow-auto",innerHTML:(null==(l=d(me))?void 0:l.updateMsg)||"获取中"},null,8,X)])):w("",!0),d(Ce)?(m(),u("hr",Y)):w("",!0),x("div",Z,[x("div",ee,[t[17]||(t[17]=x("span",{class:"mr-2"},"有更新时提醒我:",-1)),f(E,{class:"mr-4",modelValue:d(we).updatePush,"onUpdate:modelValue":t[0]||(t[0]=e=>d(we).updatePush=e),onChange:d(ue).openUpdateReminder,"active-color":"#13ce66"},null,8,["modelValue","onChange"]),x("span",{class:"bt-link",onClick:t[1]||(t[1]=e=>d(ue).updateReminderDialog(d(we).updatePush)),textContent:"提醒方式"})])])],2),d(Ce)?w("",!0):(m(),u("div",te,[x("div",{class:g(["nps_survey_banner flex items-center justify-center",d(ke)?"":"mb-[2rem]"])},[x("span",{class:"text-[14px] font-bold inline-block cursor-pointer text-[#20a53a] mr-[.4rem]",onClick:t[2]||(t[2]=e=>ke.value=!d(ke)),style:{"vertical-align":"4px"}}," 点击此处"+b(d(ke)?"折叠":"展开")+"需求反馈 ",1),x("i",{class:g(["cursor-pointer text-[14px]",d(ke)?"svgtofont-el-arrow-up":"svgtofont-el-arrow-down"]),onClick:t[3]||(t[3]=e=>ke.value=!d(ke))},null,2)],2),p(x("div",ae,[f(S,{placement:"top-start",width:"400","popper-class":"tips bg-[#20a53a] text-white text-[1.2rem] w-[40.6rem] !p-12px leading-[20px]",trigger:"focus",content:"如果您在使用过程中遇到任何问题或功能不完善，请将您的问题或需求详细描述给我们，我们将尽力为您解决或完善。"},{reference:y(()=>[f(M,{type:"textarea",rows:5,modelValue:d(_e),"onUpdate:modelValue":t[4]||(t[4]=e=>k(_e)?_e.value=e:null),placeholder:"如果您在使用过程中遇到任何问题或功能不完善，请将您的问题或需求详细描述给我们，我们将尽力为您解决或完善。"},null,8,["modelValue"])]),_:1}),x("div",se,[x("div",le,[t[18]||(t[18]=x("span",{class:"text-[1.3rem] text-[#666]"},"是否愿意接受回访：",-1)),f(E,{size:"small",modelValue:d(je).status,"onUpdate:modelValue":t[5]||(t[5]=e=>d(je).status=e)},null,8,["modelValue"])]),f(L,{ref_key:"formPhone",ref:xe,"label-position":"top",model:d(je),rules:d(Ve)},{default:y(()=>[p(f(F,{label:"",prop:"phone"},{default:y(()=>[f(M,{modelValue:d(je).phone,"onUpdate:modelValue":t[6]||(t[6]=e=>d(je).phone=e),placeholder:"请留下手机号码或邮箱"},null,8,["modelValue"])]),_:1},512),[[_,d(je).status]])]),_:1},8,["model","rules"])]),t[20]||(t[20]=x("div",{class:"mt-[.4rem] text-[1.2rem] text-primary leading-[3rem]"},"我们特别重视您的需求反馈，我们会每周进行需求评审，希望能更好的帮到您",-1)),x("div",ne,[f(oe,{type:"primary",class:"w-[12.5rem]",size:"large",onClick:t[7]||(t[7]=e=>d(ue).submit(d(He)))},{default:y(()=>[...t[19]||(t[19]=[h("提交反馈",-1)])]),_:1})])],512),[[_,d(ke)]])])),d(Ce)?(m(),u("div",re,[f(oe,{type:"default",class:"ignore-renew text-[1.3rem] border-none h-38px mr-50px w-50 bg-[#f0f0f0]",size:"default",style:{color:"#999"},round:"",onClick:t[8]||(t[8]=e=>d(ue).ignoreUpdatEVersion(d(me).version,d(He)))},{default:y(()=>[...t[21]||(t[21]=[h("忽略本次更新",-1)])]),_:1}),f(oe,{class:"border-none text-[1.3rem] w-50 h-38px",type:"primary",round:"",onClick:t[9]||(t[9]=e=>d(ue).updateVersion())},{default:y(()=>[...t[22]||(t[22]=[h("立即更新",-1)])]),_:1})])):w("",!0)],2)),[[ie,d(fe)],[ie,"正在加载更新信息，请稍后...","title"]])],2)),[[pe,d(qe)]])}}}),[["__scopeId","data-v-ef539f87"]]);export{oe as default};
