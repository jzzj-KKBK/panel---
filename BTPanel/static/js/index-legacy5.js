!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function t(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?n(Object(u),!0).forEach(function(n){r(e,n,u[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):n(Object(u)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(u,n))})}return e}function r(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var u=r.call(n,t||"default");if("object"!=e(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return a(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",u=t.toStringTag||"@@toStringTag";function a(t,r,u,a){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return o(s,"_invoke",function(t,r,u){var a,l,o,c=0,s=u||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return a=n,l=0,o=e,d.n=t,i}};function p(t,r){for(l=t,o=r,n=0;!f&&c&&!u&&n<s.length;n++){var u,a=s[n],p=d.p,m=a[2];t>3?(u=m===r)&&(o=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((u=t<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(u=t<3||a[0]>r||r>m)&&(a[4]=t,a[5]=r,d.n=m,l=0))}if(u||t>1)return i;throw f=!0,r}return function(u,s,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,m),l=s,o=m;(n=l<2?e:o)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,o)):d.n=o:d.v=o);try{if(c=2,a){if(l||(u="next"),n=a[u]){if(!(n=n.call(a,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,l<2&&(l=0)}else 1===l&&(n=a.return)&&n.call(a),l<2&&(o=TypeError("The iterator does not provide a '"+u+"' method"),l=1);a=e}else if((n=(f=d.n<0)?o:t.call(r,d))!==i)break}catch(n){a=e,l=1,o=n}finally{c=1}}return{value:n,done:f}}}(t,u,a),!0),s}var i={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var d=[][r]?n(n([][r]())):(o(n={},r,function(){return this}),n),p=f.prototype=c.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,u,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,o(p,"constructor",f),o(f,"constructor",s),s.displayName="GeneratorFunction",o(f,u,"GeneratorFunction"),o(p),o(p,u,"Generator"),o(p,r,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:m}})()}function o(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}o=function(e,n,t,r){function a(n,t){o(e,n,function(e){return this._invoke(n,t,e)})}n?u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},o(e,n,t,r)}function i(e,n,t,r,u,a,l){try{var o=e[a](l),i=o.value}catch(e){return void t(e)}o.done?n(i):Promise.resolve(i).then(r,u)}function c(e){return function(){var n=this,t=arguments;return new Promise(function(r,u){var a=e.apply(n,t);function l(e){i(a,r,u,l,o,"next",e)}function o(e){i(a,r,u,l,o,"throw",e)}l(void 0)})}}System.register(["./useStore-legacy.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./config-legacy.js?v=1756369731","./index-legacy111.js?v=1756369731","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1756369731","./useMethod-legacy.js?v=1756369731","./index-legacy103.js?v=1756369731","./index-legacy112.js?v=1756369731","./column-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./index-legacy102.js?v=1756369731"],function(e,n){"use strict";var r,a,o,i,s,f,d,p,m,v,y,h,b,w,g,_,x,V,k,C,A,U,j,S,O,P,q,T,I,E,F,B,z,D,M,N,G,H,L,R,$,J,K,Q,W,X,Y,Z,ee,ne,te,re,ue,ae,le,oe,ie,ce,se,fe,de,pe,me,ve,ye,he,be,we,ge,_e,xe,Ve,ke,Ce,Ae,Ue,je,Se,Oe,Pe,qe,Te,Ie;return{setters:[function(e){r=e.g},function(e){a=e.K,o=e.P,i=e.h,s=e.l,f=e.L,d=e.M,p=e.c,m=e.j,v=e.Q,y=e.e,h=e.R,b=e.A,w=e.o,g=e.S,_=e.k},function(e){x=e.c,V=e.r,k=e.k,C=e.p,A=e.q,U=e.v,j=e.e,S=e.A,O=e.x,P=e.P,q=e.B,T=e.y,I=e.al,E=e.D,F=e.a9,B=e.a7,z=e.M,D=e.z,M=e.w,N=e.G,G=e.H,H=e.F,L=e.C,R=e.I,$=e.T,J=e.U,K=e.a_,Q=e.aj,W=e.ai,X=e.Q,Y=e.a$,Z=e.ah,ee=e.af,ne=e.g},function(e){te=e._},function(e){re=e.t,ue=e.u,ae=e.v,le=e.w,oe=e.x,ie=e.y,ce=e.z,se=e.A,fe=e.B,de=e.C,pe=e.D,me=e.E,ve=e.F,ye=e.G,he=e.H,be=e.I,we=e.J,ge=e.K,_e=e.L,xe=e.M,Ve=e.N,ke=e.O,Ce=e.P},function(e){Ae=e.C},function(e){Ue=e.a,je=e._,Se=e.P,Oe=e.S},function(e){Pe=e.o},function(e){qe=e._},function(e){Te=e._},function(e){Ie=e.u},null,null,null],execute:function(){var Ee={class:"p-16px"},Fe=x({__name:"index",setup:function(e){var n=V([]),t=V(null),r=V(!1),s=V(!1),f=k({type:[],options:"",id:""}),d=null,p={type:[{required:!0,validator:function(e,n,t){0===f.type.length?t(new Error("请选择告警方式")):t()},trigger:["blur","change"]}]},m=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:if(!n){e.n=1;break}s.value=!0,e.n=2;break;case 1:return e.n=2,a({loading:"正在保存信息配置，请稍后...",request:re({task_id:f.id,status:n?1:0}),message:!0,success:function(e){e.status||(r.value=!n)}});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),v=function(){s.value=!1,b()},y=function(){var e=c(l().m(function e(){var n,u,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.value.validate();case 1:return n={},u={send_interval:0,time_range:[0,86399]},o={day_num:0,total:0},n=d?{task_data:d.task_data,sender:f.type,time_rule:u,number_rule:o}:{task_data:{tid:"6",type:"panel_safe_push",title:"面板安全告警",status:r.value,count:0,interval:600,project:"",help:600},sender:f.type,time_rule:u,number_rule:o},e.n=2,a({loading:"正在保存信息配置，请稍后...",request:ue({task_data:JSON.stringify(n),template_id:"6"}),message:!0});case 2:return e.n=3,h();case 3:b(),s.value=!1;case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({request:o(),data:{data:[Array,n]}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),b=function(){var e,t=null===(e=n.value)||void 0===e?void 0:e.find(function(e){return"panel_safe_push"===e.keyword});t?(f.type=t.sender,r.value=t.status,f.id=t.id,d=t):(f.type=[],r.value=!1,d=null)};return C(c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,h();case 1:b();case 2:return e.a(2)}},e)}))),function(e,n){var a=I,l=E,o=F,c=te,d=B,h=i;return A(),U("div",null,[j(O(Ae),{label:"面板安全告警"},{value:S(function(){return[j(a,{modelValue:O(r),"onUpdate:modelValue":n[0]||(n[0]=function(e){return P(r)?r.value=e:null}),onChange:m},null,8,["modelValue"]),j(l,{size:"small",class:"!ml-12px",onClick:n[1]||(n[1]=function(e){return s.value=!0})},{default:S(function(){return u(n[6]||(n[6]=[q("提醒方式",-1)]))}),_:1})]}),desc:S(function(){return u(n[7]||(n[7]=[T("span",null,"告警内容包含：面板用户变更、面板日志删除、面板开启开发者、面板开启API",-1)]))}),_:1}),j(h,{title:"面板安全告警",modelValue:O(s),"onUpdate:modelValue":n[4]||(n[4]=function(e){return P(s)?s.value=e:null}),showFooter:"",area:[48],onConfirm:n[5]||(n[5]=function(e){return y()}),onCancel:v,confirmText:"保存配置"},{default:S(function(){return[T("div",Ee,[j(d,{ref_key:"ruleFormRef",ref:t,"label-width":"10rem",rules:p,model:O(f)},{default:S(function(){return[j(o,{label:"安全提醒"},{default:S(function(){return[j(a,{modelValue:O(r),"onUpdate:modelValue":n[2]||(n[2]=function(e){return P(r)?r.value=e:null})},null,8,["modelValue"])]}),_:1}),j(o,{label:"告警方式",prop:"type"},{default:S(function(){return[j(c,{class:"!w-[30rem]",modelValue:O(f).type,"onUpdate:modelValue":n[3]||(n[3]=function(e){return O(f).type=e}),limit:["sms"]},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])])]}),_:1},8,["modelValue"])])}}}),Be=x({__name:"index",setup:function(e){var o=r().getCertListData,i=V({}),d=V("配置一个域名来访问面板"),p=!1,m=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:if(!n){e.n=1;break}v(),e.n=2;break;case 1:return e.n=2,a({loading:"正在删除面板生成的域名，请稍候...",request:ae(),message:!0,success:o});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),v=function(){s({title:"免端口访问配置",component:function(){return f(function(){return n.import("./no-port-config-legacy.js?v=1756369731")},void 0,n.meta.url)},compData:t(t({},i.value),{},{refresh:y}),area:80,onCancel:function(){i.value.proxy_stats=p}})},y=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({request:le(),success:function(e){var n=e.data;i.value={addr:(null==n?void 0:n.addr)||"",cert:(null==n?void 0:n.cert)||"",key:(null==n?void 0:n.key)||"",proxy_stats:(null==n?void 0:n.proxy_stats)||!1,domain:(null==n?void 0:n.domain)||"",use_ssl:(null==n?void 0:n.use_ssl)||!1},p=(null==n?void 0:n.proxy_stats)||!1}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return C(function(){return y()}),function(e,n){var t=I,r=E;return A(),z(O(Ae),{label:"免端口访问"},{value:S(function(){return[j(t,{modelValue:O(i).proxy_stats,"onUpdate:modelValue":n[0]||(n[0]=function(e){return O(i).proxy_stats=e}),onChange:n[1]||(n[1]=function(e){return m(O(i).proxy_stats)})},null,8,["modelValue"]),j(r,{size:"small",class:"!ml-12px",onClick:n[2]||(n[2]=function(e){return v()})},{default:S(function(){return u(n[3]||(n[3]=[q(" 免端口访问配置 ",-1)]))}),_:1})]}),desc:S(function(){return[T("span",null,D(O(d)),1)]}),_:1})}}}),ze={class:"p-[24px]"},De=x({__name:"index",setup:function(e){var n=r().refs.safeConfig;V(!1);var a=V(!1);V(!1);var o=k({basic_user:"",basic_pwd:"",open:!0}),s=function(){var e=c(l().m(function e(t){var r,u;return l().w(function(e){for(;;)switch(e.n){case 0:if(!t){e.n=1;break}Pe({content:['<span class="text-danger">必须要用到且了解此功能才决定自己是否要开启!!<span>',"开启后，以任何方式访问面板，将先要求输入BasicAuth用户名和密码","开启后，能有效防止面板被扫描发现，但并不能代替面板本身的帐号密码","请牢记BasicAuth密码，一但忘记将无法访问面板","如忘记密码，可在SSH通过bt命令来关闭BasicAuth验证"],isShowAppCode:!1,checkTip:'我已了解详情,并愿意承担风险！<a class="bt-link" href="https://www.bt.cn/bbs/thread-34374-1-1.html" target="_blank" rel="noreferrer noopener">什么是BasicAuth认证？</a>',onConfirm:function(){return a.value=!0},onCancel:function(){return n.value.basicAuth=!1}}),e.n=3;break;case 1:return e.n=2,oe({open:"False",basic_user:"",basic_pwd:""});case 2:r=e.v,u=r.data,d.request(u),u.status&&setTimeout(function(){return window.location.reload()},1e3);case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=c(l().m(function e(){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,oe(t(t({},o),{},{open:o.open?"True":"False"}));case 1:n=e.v,r=n.data,d.request(r),r.status&&(a.value=!1,window.location.reload()),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return function(e,t){var r=I,l=p,c=F,d=m,v=E,y=B,h=i;return A(),U("div",null,[j(O(Ae),{label:"BasicAuth认证"},{value:S(function(){return[j(r,{modelValue:O(n).basicAuth,"onUpdate:modelValue":t[0]||(t[0]=function(e){return O(n).basicAuth=e}),onChange:t[1]||(t[1]=function(e){return s(O(n).basicAuth)})},null,8,["modelValue"])]}),desc:S(function(){return[t[10]||(t[10]=T("span",null,"为面板增加一道基于BasicAuth的认证服务，有效防止面板被扫描，",-1)),j(l,{href:"https://www.bt.cn/bbs/thread-34374-1-1.html"},{default:S(function(){return u(t[9]||(t[9]=[q("了解详情",-1)]))}),_:1})]}),_:1}),j(h,{title:"配置BasicAuth认证",modelValue:O(a),"onUpdate:modelValue":t[7]||(t[7]=function(e){return P(a)?a.value=e:null}),area:50,onCancel:t[8]||(t[8]=function(e){return n.value.basicAuth=!n.value.basicAuth,void o.open})},{default:S(function(){return[T("div",ze,[j(y,{modelValue:O(o),"onUpdate:modelValue":t[6]||(t[6]=function(e){return P(o)?o.value=e:null})},{default:S(function(){return[j(c,{label:"服务状态"},{default:S(function(){return[j(r,{modelValue:O(o).open,"onUpdate:modelValue":t[2]||(t[2]=function(e){return O(o).open=e})},null,8,["modelValue"])]}),_:1}),j(c,{label:"用户名"},{default:S(function(){return[j(d,{class:"!w-[28.8rem]",modelValue:O(o).basic_user,"onUpdate:modelValue":t[3]||(t[3]=function(e){return O(o).basic_user=e}),placeholder:"请设置用户名"},null,8,["modelValue"])]}),_:1}),j(c,{label:"密码"},{default:S(function(){return[j(d,{class:"!w-[28.8rem]",modelValue:O(o).basic_pwd,"onUpdate:modelValue":t[4]||(t[4]=function(e){return O(o).basic_pwd=e}),placeholder:"请输入密码"},null,8,["modelValue"])]}),_:1}),j(c,{label:" "},{default:S(function(){return[j(v,{type:"primary",onClick:t[5]||(t[5]=function(e){return f()})},{default:S(function(){return u(t[11]||(t[11]=[q("保存",-1)]))}),_:1})]}),_:1})]}),_:1},8,["modelValue"]),t[12]||(t[12]=T("ul",{class:"pl-[32px] list-disc help leading-8"},[T("li",null,"注意：请不要在这里使用您的常用密码，这可能导致密码泄漏!"),T("li",null,"开启后，以任何方式访问面板，将先要求输入BasicAuth用户名和密码"),T("li",null,"开启后，能有效防止面板被扫描发现，但并不能代替面板本身的帐号密码"),T("li",null,"请牢记BasicAuth密码，一但忘记将无法访问面板"),T("li",null,"如忘记密码，可在SSH通过bt命令来关闭BasicAuth验证")],-1))])]}),_:1},8,["modelValue"])])}}}),Me=x({__name:"index",setup:function(e){var t=r().refs.safeConfig;V(!1);var o=function(){Pe({content:['<span class="text-danger">必须要用到且了解此功能才决定自己是否要开启!!<span>','<span class="text-danger">如果无法验证，命令行输入"bt 24" 取消动态口令认证<span>',"服务器的时间与网络时间需一致，否则无法验证。","开启服务后，请立即绑定，以免出现面板不能访问。","请先下载宝塔APP或(谷歌认证器)，并完成安装和初始化。",'基于google Authenticator 开发,如遇到问题请<a class="btlink" href="https://www.bt.cn/bbs/forum.php?mod=viewthread&tid=105839" rel="noreferrer noopener">查看详情</a>'],isShowAppCode:!0,onConfirm:function(){return m(1)}})},i=function(){t.value.checkTwoStep?d():o()},d=function(){s({title:"动态口令配置",component:function(){return f(function(){return n.import("./dyname-pwd-config-legacy.js?v=1756369731")},void 0,n.meta.url)},area:55})},m=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:"正在设置动态口令配置，请稍候...",request:ie({act:n}),message:!0,success:function(){n&&d()}});case 1:e.v.status&&(t.value.checkTwoStep=Boolean(n));case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=c(l().m(function e(){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ce();case 1:n=e.v,r=n.data,t.value.checkTwoStep=r.status;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return C(function(){v()}),function(e,n){var r=I,a=E,l=p;return A(),U("div",null,[j(O(Ae),{label:"动态口令认证"},{value:S(function(){return[j(r,{modelValue:O(t).checkTwoStep,"onUpdate:modelValue":n[0]||(n[0]=function(e){return O(t).checkTwoStep=e}),onChange:n[1]||(n[1]=function(e){return n=O(t).checkTwoStep,t.value.checkTwoStep=!n,void(n?o():m(Number(n)));var n})},null,8,["modelValue"]),j(a,{size:"small",class:"!ml-12px",onClick:i},{default:S(function(){return u(n[2]||(n[2]=[q("动态口令配置",-1)]))}),_:1})]}),desc:S(function(){return[n[4]||(n[4]=T("span",null,"(Google Authenticator，谷歌身份认证)为面板提供动态口令的登录的验证，",-1)),j(l,{href:"https://www.bt.cn/bbs/forum.php?mod=viewthread&tid=105839"},{default:S(function(){return u(n[3]||(n[3]=[q("了解详情",-1)]))}),_:1})]}),_:1})])}}}),Ne={class:"p-[2rem]"},Ge={class:"flex mt-12px"},He={class:"flex-1 mr-20px relative"},Le={class:"placeholder"},Re={class:"flex-1 relative"},$e={class:"placeholder"},Je={key:1,class:"help-list !pl-20px mt-12px !bg-[#fff] !py-0"},Ke={class:"text-[1.2rem] flex items-center"},Qe=x({__name:"index",setup:function(e){var n=r().refs.safeConfig,t=V(!1),o=V(!1),s=V(!1),f=k({loading:!1,title:"正在获取证书信息，请稍候..."}),y=V({crl:"",cert:""}),h=function(){var e=c(l().m(function e(){var r,u;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return f.title="正在获取证书信息，请稍候...",f.loading=!0,t.value=!0,e.p=1,e.n=2,se();case 2:r=e.v,u=r.data,n.value.sslVerify=u.status,y.value.crl=u.crl,y.value.cert=u.ca,e.n=4;break;case 3:e.p=3,e.v,t.value=!1;case 4:return e.p=4,f.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=c(l().m(function e(r){var u,a,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.value.panelSSl){e.n=1;break}return d.error("请先开启面板SSL证书后重试"),n.value.sslVerify=!1,e.a(2);case 1:return e.n=2,se();case 2:if(u=e.v,a=u.data,y.value.crl=a.crl,y.value.cert=a.ca,o.value=!0,!r){e.n=3;break}t.value=!0,e.n=5;break;case 3:return e.n=4,fe({status:0});case 4:i=e.v,i.data.status&&window.location.reload();case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:return e.a(2)}},e,null,[[0,6]])}));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=c(l().m(function e(){var n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,y.value.crl){e.n=1;break}return d.error("注销列表(crl)不能为空"),e.a(2,!1);case 1:if(y.value.cert){e.n=2;break}return d.error("证书(cert)不能为空"),e.a(2,!1);case 2:if(!o.value||s.value){e.n=3;break}return d.error("请勾选并同意承担风险"),e.a(2,!1);case 3:return f.title="正在保存，请稍候...",f.loading=!0,e.n=4,a({request:fe({crl:y.value.crl,cert:y.value.cert,status:o.value?1:0}),message:!0});case 4:return n=e.v,e.n=5,v();case 5:return n.status&&window.location.reload(),e.a(2,n.status);case 6:e.p=6,e.v;case 7:return e.p=7,f.loading=!1,e.f(7);case 8:return e.a(2)}},e,null,[[0,6,7,8]])}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=c(l().m(function e(){var t,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,se();case 1:t=e.v,r=t.data,y.value.crl=r.crl,y.value.cert=r.ca,n.value.sslVerify=r.status;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return M(t,function(e,n){!e&&(y.value.crl="",y.value.cert="")}),C(function(){g()}),function(e,r){var a=I,l=E,c=p,d=m,v=$,g=i,_=N("bt-loading");return A(),U("div",null,[j(O(Ae),{label:"访问设备验证"},{value:S(function(){return[j(a,{modelValue:O(n).sslVerify,"onUpdate:modelValue":r[0]||(r[0]=function(e){return O(n).sslVerify=e}),onChange:r[1]||(r[1]=function(e){return b(O(n).sslVerify)})},null,8,["modelValue"]),j(l,{size:"small",class:"!ml-12px",onClick:h},{default:S(function(){return u(r[7]||(r[7]=[q("访问设备验证配置",-1)]))}),_:1})]}),desc:S(function(){return[r[9]||(r[9]=T("span",null," 基于SSL证书双向验证，开启后电脑需要安装此证书，否则将无法访问，属于极高安全级别的访问限制方式，类似银行账号U盘密钥登录。 ",-1)),j(c,{href:"https://www.bt.cn/bbs/thread-77863-1-1.html"},{default:S(function(){return u(r[8]||(r[8]=[q("了解详情",-1)]))}),_:1})]}),_:1}),j(g,{title:"自定义证书",modelValue:O(t),"onUpdate:modelValue":r[5]||(r[5]=function(e){return P(t)?t.value=e:null}),area:70,showFooter:"",onConfirm:w,onCancel:r[6]||(r[6]=function(e){return o.value&&(n.value.sslVerify=!n.value.sslVerify),void(o.value=!1)})},{default:S(function(){return[G((A(),U("div",Ne,[O(o)?(A(),U(H,{key:0},[r[10]||(r[10]=T("div",{class:"flex items-center"},[T("i",{class:"svgtofont-el-warning-filled text-[#E6A23C] !text-[4rem] pr-4"}),T("p",{class:"text-[2.1rem]"},"风险操作！此功能不懂请勿开启！")],-1)),r[11]||(r[11]=T("ul",{class:"help-list"},[T("li",{class:"text-danger"},"必须要用到且了解此功能才决定自己是否要开启！"),T("li",null,"开启后电脑需要安装此证书，否则将无法访问，属于【极高安全级别】的限制，类似银行账号U盘密钥登录。"),T("li",null,"注销列表(crl)和证书(cert)可通过企业版插件[堡塔限制访问型证书->双向认证->服务器证书]获取。"),T("li",null,"开启之前请先下载好对应的[客户端证书]，否则将无法访问面板。"),T("li",null,"开启访问设备验证后，未授权的用户访问将会出现400错误。"),T("li",null,"开启后导致面板不能访问，命令行：bt 29 关闭访问设备验证。")],-1))],64)):L("",!0),T("div",Ge,[T("div",He,[r[12]||(r[12]=T("div",{class:"text-[1.2rem] mb-8px"},"注销列表(crl)",-1)),j(d,{class:"text-[1.2rem]",type:"textarea",modelValue:O(y).crl,"onUpdate:modelValue":r[2]||(r[2]=function(e){return O(y).crl=e}),rows:13,size:"small"},null,8,["modelValue"]),G(T("span",Le,"请粘贴您的注销列表（crl）",512),[[R,""===O(y).crl]])]),T("div",Re,[r[13]||(r[13]=T("div",{class:"text-[1.2rem] mb-8px"},"证书(cert)",-1)),j(d,{type:"textarea",modelValue:O(y).cert,"onUpdate:modelValue":r[3]||(r[3]=function(e){return O(y).cert=e}),rows:13,size:"small"},null,8,["modelValue"]),G(T("span",$e,"请粘贴您的证书(cert)",512),[[R,""===O(y).cert]])])]),O(o)?(A(),z(v,{key:2,modelValue:O(s),"onUpdate:modelValue":r[4]||(r[4]=function(e){return P(s)?s.value=e:null}),class:"mt-12px px-16px"},{default:S(function(){return[T("div",Ke,[r[16]||(r[16]=q(" 已了经解详情,并愿意承担风险！ ",-1)),j(c,{href:"https://www.bt.cn/bbs/thread-77863-1-1.html",target:"_blank"},{default:S(function(){return u(r[15]||(r[15]=[q(" 了解详情 ",-1)]))}),_:1})])]}),_:1},8,["modelValue"])):(A(),U("ul",Je,u(r[14]||(r[14]=[T("li",null,"粘贴您的注销列表(crl)以及证书(cert)，然后保存即可。",-1),T("li",null,"注销列表(crl)和证书(cert)可通过企业版插件[堡塔限制访问型证书->双向认证->服务器证书]获取。",-1)]))))])),[[_,O(f).loading],[_,O(f).title,"title"]])]}),_:1},8,["modelValue"])])}}}),We=y(Qe,[["__scopeId","data-v-1066aea4"]]),Xe=x({__name:"index",setup:function(e){var n=r().refs.safeConfig,t=V(!1),o=V(!1),s=function(e){e?t.value=!0:o.value=!0},f=function(e){var r=e?t:o;r.value&&(n.value.pawComplexity=!n.value.pawComplexity,r.value=!1)},d=function(e){var n=e?t:o;n.value&&(n.value=!1,m())},p=function(){var e=c(l().m(function e(){var t,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe();case 1:t=e.v,r=t.data,n.value.pawComplexity=r.password_safe,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:"正在设置密码复杂度，请稍候...",request:de(),message:!0,success:p});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return function(e,r){var a=I,l=i;return A(),U("div",null,[j(O(Ae),{label:"密码复杂度验证"},{value:S(function(){return[j(a,{modelValue:O(n).pawComplexity,"onUpdate:modelValue":r[0]||(r[0]=function(e){return O(n).pawComplexity=e}),onChange:s},null,8,["modelValue"])]}),desc:S(function(){return u(r[7]||(r[7]=[T("span",null,"为面板密码提供复杂度验证方式，复杂度验证规则：",-1),T("span",{class:"text-danger"},"密码必须满足密码长度大于8位且大写字母、小写字母、数字、特殊字符至少3项组合",-1)]))}),_:1}),j(l,{title:"开启 密码复杂度验证",modelValue:O(t),"onUpdate:modelValue":r[1]||(r[1]=function(e){return P(t)?t.value=e:null}),area:36,"show-footer":!0,onConfirm:r[2]||(r[2]=function(e){return d(!0)}),onCancel:r[3]||(r[3]=function(e){return f(!0)})},{default:S(function(){return u(r[8]||(r[8]=[T("div",{class:"p-[2rem] flex"},[T("i",{class:"svgtofont-el-warning-filled text-[#E6A23C] !text-[4rem] pr-4"}),T("p",{class:"text-[1.4rem] leading-8"},[q(" 开启密码复杂度验证后，将会对密码进行复杂度判断，规则： "),T("span",{class:"text-danger"},"密码必须满足密码长度大于8位且大写字母、小写字母、数字、特殊字符至少3项组合"),q(" ，继续操作！ ")])],-1)]))}),_:1},8,["modelValue"]),j(l,{title:"关闭 密码复杂度验证",modelValue:O(o),"onUpdate:modelValue":r[4]||(r[4]=function(e){return P(o)?o.value=e:null}),area:[36,"auto"],"show-footer":!0,onConfirm:r[5]||(r[5]=function(e){return d(!1)}),onCancel:r[6]||(r[6]=function(e){return f(!1)})},{default:S(function(){return u(r[9]||(r[9]=[T("div",{class:"p-[2rem] flex"},[T("i",{class:"svgtofont-el-warning-filled text-[#E6A23C] !text-[4rem] pr-4"}),T("p",{class:"text-[1.4rem] leading-8"},"关闭密码复杂度后，密码登录将不再验证密码复杂度，这将会导致面板安全性下降，继续操作！")],-1)]))}),_:1},8,["modelValue"])])}}}),Ye={class:"w-[26rem]"},Ze=x({__name:"index",setup:function(e){var n=r(),t=n.refs.safeConfig,a=n.saveConfig,o=function(){var e=c(l().m(function e(){var n,r,u,o;return l().w(function(e){for(;;)switch(e.n){case 0:if(n=/^((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}$/,r=t.value.limitip.split(",").join("-").split("-"),u=!0,r.length)for(o=0;o<r.length;o++)0==n.test(r[o])&&(u=!1);if(u||!(t.value.limitip.length>0)){e.n=1;break}return e.a(2,d.error("请输入正确的ip地址"));case 1:a("正在保存授权IP，请稍候...");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return function(e,n){var r=m,a=E;return A(),z(O(Ae),{label:"授权IP"},{value:S(function(){return[T("div",Ye,[j(r,{modelValue:O(t).limitip,"onUpdate:modelValue":n[0]||(n[0]=function(e){return O(t).limitip=e}),placeholder:"示例: 1.1.1.1,2.2.2.1-2.2.2.2"},null,8,["modelValue"])]),j(a,{type:"primary",class:"!ml-12px",onClick:n[1]||(n[1]=function(e){return o()})},{default:S(function(){return u(n[2]||(n[2]=[q("保存",-1)]))}),_:1})]}),desc:S(function(){return u(n[3]||(n[3]=[T("span",null,"设置访问授权IP，多个IP地址，请使用“,”分割，",-1),T("span",{class:"text-danger"},"注意：一旦设置授权IP，只有指定IP的电脑能访问面板",-1)]))}),_:1})}}}),en={class:"p-[2rem]"},nn=x({__name:"index",setup:function(e){var n,t=r().refs.safeConfig,o=J([{key:403,title:"403-拒绝访问"},{key:404,title:"404-页面不存在"},{key:416,title:"416-无效的请求"},{key:408,title:"408-客户端超时"},{key:400,title:"400-客户端请求错误"},{key:401,title:"401-未授权访问"}]),s=V(!1),f=V(404),d=V(null===(n=o.value.find(function(e){return e.key===t.value.statusCode}))||void 0===n?void 0:n.title),p=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return n?Number(n):n+="",e.n=1,a({loading:"正在设置未认证响应状态，请稍候...",request:me({status_code:n}),message:!0});case 1:o.value.forEach(function(e){e.key==f.value&&(t.value.statusCode=e.key,d.value=e.title)});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}();return M(function(){return t.value.statusCode},function(e){o.value.forEach(function(e){e.key===t.value.statusCode&&(d.value=e.title)})}),function(e,n){var r=m,a=E,l=W,c=Q,v=F,y=B,h=i;return A(),U("div",null,[j(O(Ae),{label:"未认证响应状态"},{value:S(function(){return[j(r,{modelValue:O(d),"onUpdate:modelValue":n[0]||(n[0]=function(e){return P(d)?d.value=e:null}),disabled:"",class:"!w-[26rem]"},null,8,["modelValue"]),j(a,{type:"primary",class:"!ml-12px",onClick:n[1]||(n[1]=function(e){return s.value=!0,void o.value.forEach(function(e){e.key==t.value.statusCode&&(f.value=e.key)})})},{default:S(function(){return u(n[5]||(n[5]=[q("设置",-1)]))}),_:1})]}),desc:S(function(){return u(n[6]||(n[6]=[T("span",null,"陌生IP在未登录且未正确输入安全入口时的响应，可用于隐藏面板特征",-1)]))}),_:1}),j(h,{title:"设置未认证时的响应状态",modelValue:O(s),"onUpdate:modelValue":n[3]||(n[3]=function(e){return P(s)?s.value=e:null}),area:42,"show-footer":"",onConfirm:n[4]||(n[4]=function(e){return s.value=!1,void p(f.value)})},{default:S(function(){return[T("div",en,[j(y,{class:"my-[12px] flex justify-center","label-position":"right"},{default:S(function(){return[j(v,{label:"响应状态"},{default:S(function(){return[j(c,{modelValue:O(f),"onUpdate:modelValue":n[2]||(n[2]=function(e){return P(f)?f.value=e:null}),placeholder:"请选择",class:"!w-[20rem]"},{default:S(function(){return[(A(!0),U(H,null,K(O(o),function(e){return A(),z(l,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1})]}),_:1}),n[7]||(n[7]=T("ul",{class:"px-[16px] py-[2px] list-disc"},[T("li",{class:"h-[2.4rem] text-danger"},"用于未登录且未正确输入安全入口时的响应,用于隐藏面板特征")],-1))])]}),_:1},8,["modelValue"])])}}}),tn=y(nn,[["__scopeId","data-v-548f910f"]]),rn={class:"w-[26rem]"},un={class:"p-[2rem]"},an=x({__name:"index",setup:function(e){var n=r().refs.safeConfig,t=V(),o=V({day:0}),s=V(""),f=V(!1),d=0,p=k({day:[{validator:function(e,n,t){Number.parseInt(n)<0||!Number.isInteger(parseFloat(n))?t(new Error("请输入大于等于0的整数")):t()},trigger:["input","change"]}]});M(function(){return f.value},function(e){e&&(o.value.day=d)});var v=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.value.validate();case 1:f.value=!1,b(o.value.day),y();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=c(l().m(function e(){var t,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe();case 1:t=e.v,(r=t.data).expire?s.value=h(r.expire_time,"yyyy/MM/dd HH:mm:ss")+" （剩余"+r.expire_day+"天过期）":s.value="未设置",o.value.day=r.expire,d=r.expire,n.value.pawComplexity=r.password_safe,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:"正在设置密码过期时间，请稍候...",request:ve({expire:n}),message:!0});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}();return C(function(){y()}),function(e,n){var r=m,a=E,l=F,c=B,d=i;return A(),U("div",null,[j(O(Ae),{label:"密码过期时间"},{value:S(function(){return[T("div",rn,[j(r,{modelValue:O(s),"onUpdate:modelValue":n[0]||(n[0]=function(e){return P(s)?s.value=e:null}),disabled:""},null,8,["modelValue"])]),j(a,{type:"primary",class:"!ml-12px",onClick:n[1]||(n[1]=function(e){return f.value=!0})},{default:S(function(){return u(n[6]||(n[6]=[q("设置",-1)]))}),_:1})]}),desc:S(function(){return u(n[7]||(n[7]=[T("span",null,"为面板密码设置过期时间，过期后需要重新设置密码",-1)]))}),_:1}),j(d,{title:"设置密码过期时间",modelValue:O(f),"onUpdate:modelValue":n[4]||(n[4]=function(e){return P(f)?f.value=e:null}),area:40,"show-footer":!0,onConfirm:n[5]||(n[5]=function(e){return v()})},{default:S(function(){return[T("div",un,[j(c,{ref_key:"pwdFormRef",ref:t,rules:O(p),model:O(o),class:"my-[12px] flex justify-center","label-position":"left",onSubmit:n[3]||(n[3]=X(function(){},["prevent"]))},{default:S(function(){return[j(l,{label:"密码过期时间",prop:"day"},{default:S(function(){return[j(r,{modelValue:O(o).day,"onUpdate:modelValue":n[2]||(n[2]=function(e){return O(o).day=e}),"text-type":"天",type:"number",min:"0",class:"!w-[16rem]"},{append:S(function(){return u(n[8]||(n[8]=[q(" 天 ",-1)]))}),_:1},8,["modelValue"])]}),_:1})]}),_:1},8,["rules","model"]),n[9]||(n[9]=T("ul",{class:"px-[1.6rem] py-[.2rem] list-disc"},[T("li",{class:"h-[2.4rem] text-danger"},"面板密码过期时间设置，过期后需要重新设置密码"),T("li",{class:"h-[2.4rem]"},"密码过期时间为“0天”，则关闭密码过期时间功能")],-1))])]}),_:1},8,["modelValue"])])}}}),ln={class:"p-[2rem] flex"},on={class:"p-[2rem]"},cn=x({__name:"index",setup:function(e){var n=V(!1),t=V([]),r=V(!1),o=V(0),s=k({p:1,rows:10}),f=V(!1),d=V(!1),p=V([]),v=V(!1),y=V(),x=V({checkboxValue:"3小时",day:1}),I=V(""),D=V(),M=V(),H=V(!1),R={day:[{validator:function(e,n,t){(n<=0||n%1!=0)&&"自定义"===x.value.checkboxValue?t(new Error("自定义时间为大于0的整数！")):t()},trigger:["blur","change","input"]}]},$=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,n.value=!0)},e)}));return function(){return e.apply(this,arguments)}}(),J=[{label:"登录IP",render:function(e){return e.login_addr||"未登录"}},{label:"状态",width:90,render:function(e,n){switch(e.state){case-1:return j("span",{class:"text-[brown]"},[q("已过期")]);case 0:return j("span",{class:"text-primary"},[q("待使用")]);case 1:return"已使用"}}},{label:"登录时间",render:function(e){return 0==e.login_time?"未登录":h(e.addtime,"yyyy/MM/dd HH:mm:ss")}},{label:"过期时间",render:function(e){return h(e.expire)}},{label:"操作",width:120,align:"right",render:function(e){return j("div",{class:"flex items-center justify-end"},[j("div",{class:"1"==e.state?"":"hidden"},[j("span",{class:"bt-link",onClick:function(){return X(e.id,e.login_addr)}},[q("操作日志")]),j(Y,{direction:"vertical"},null)]),j("span",{class:"bt-link",onClick:function(){return W(e.id)}},[q("删除")])])}}],K=[{label:"操作类型",prop:"type"},{label:"操作时间",prop:"addtime"},{label:"日志",prop:"log",width:350}],Q=function(){var e=c(l().m(function e(){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y.value.validate();case 1:return H.value=!1,e.n=2,te();case 2:null!=(n=e.v)&&n.status&&(v.value=!0);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return D.value=n,e.n=1,w({title:"删除授权",content:"删除授权记录，是否继续？",icon:"warning-filled"});case 1:return e.n=2,a({loading:"正在删除临时授权，请稍候...",request:ye({id:n}),message:!0});case 2:ue();case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),X=function(e,n){f.value=!0,D.value=e,M.value=n,ne()},ne=function(){return re(D.value)},te=function(){var e=c(l().m(function e(){var n,t,r,u,o,i,c;return l().w(function(e){for(;;)switch(e.n){case 0:return n=x.value,t=n.checkboxValue,r=n.day,u="自定义"===t?24*r:t.replaceAll("小时",""),o=Math.floor(Date.now()/1e3),u=60*parseInt(u)*60+o,e.n=1,a({loading:"正在创建临时授权链接，请稍候...",request:he({expire_time:u}),message:!0,data:{token:String,expire:Number,status:Boolean}});case 1:return i=e.v,ue(),c=window.location.protocol+"//"+window.location.host+"/login?",I.value="".concat(c,"tmp_token=").concat(i.token),e.a(2,i)}},e)}));return function(){return e.apply(this,arguments)}}(),re=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:d,request:be({id:n}),data:[Array,p]});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ue=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:r,request:we(s),data:{data:[Array,t],page:g(o)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return C(function(){ue()}),function(e,a){var l=E,c=_,h=Te,w=qe,g=i,V=Z,k=ee,C=F,D=m,W=B,X=N("bt-loading");return A(),U("div",null,[j(O(Ae),{label:"临时访问授权"},{value:S(function(){return[j(l,{type:"primary",onClick:a[0]||(a[0]=function(e){return $()})},{default:S(function(){return u(a[13]||(a[13]=[q("临时访问授权管理",-1)]))}),_:1})]}),desc:S(function(){return u(a[14]||(a[14]=[T("span",null,"为非管理员临时提供面板访问权限",-1)]))}),_:1}),j(g,{title:"临时授权管理",modelValue:O(n),"onUpdate:modelValue":a[4]||(a[4]=function(e){return P(n)?n.value=e:null}),area:70},{default:S(function(){return[j(w,{class:"p-6"},{"header-left":S(function(){return[j(l,{type:"primary",onClick:a[1]||(a[1]=function(e){return H.value=!0})},{default:S(function(){return u(a[15]||(a[15]=[q("创建临时授权 ",-1)]))}),_:1})]}),content:S(function(){return[G(j(c,{ref:"tempAuthTable",data:O(t),column:J,"max-height":380},null,8,["data"]),[[X,O(r)]])]}),"footer-right":S(function(){return[j(h,{page:O(s).p,"onUpdate:page":a[2]||(a[2]=function(e){return O(s).p=e}),row:O(s).rows,"onUpdate:row":a[3]||(a[3]=function(e){return O(s).rows=e}),total:O(o),onChange:ue},null,8,["page","row","total"])]}),_:1})]}),_:1},8,["modelValue"]),j(g,{title:"风险提示",modelValue:O(H),"onUpdate:modelValue":a[7]||(a[7]=function(e){return P(H)?H.value=e:null}),area:54,"show-footer":!0,onConfirm:a[8]||(a[8]=function(e){return Q()})},{default:S(function(){return[T("div",ln,[a[19]||(a[19]=T("i",{class:"svgtofont-el-warning-filled text-[#E6A23C] !text-[4rem] pr-4"},null,-1)),T("div",null,[a[17]||(a[17]=T("p",{class:"text-[1.4rem] leading-10 text-danger"},"注意1：滥用临时授权可能导致安全风险。",-1)),a[18]||(a[18]=T("p",{class:"text-[1.4rem] leading-10 text-danger"},"注意2：请勿在公共场合发布临时授权连接",-1)),j(W,{ref_key:"authFormRef",ref:y,rules:R,model:O(x),"label-position":"left",class:"my-[1rem]"},{default:S(function(){return[j(C,{label:"授权时间"},{default:S(function(){return[j(k,{modelValue:O(x).checkboxValue,"onUpdate:modelValue":a[5]||(a[5]=function(e){return O(x).checkboxValue=e})},{default:S(function(){return[j(V,{label:"3小时"}),j(V,{label:"6小时"}),j(V,{label:"9小时"}),j(V,{label:"12小时"}),j(V,{label:"自定义"})]}),_:1},8,["modelValue"])]}),_:1}),"自定义"===O(x).checkboxValue?(A(),z(C,{key:0,label:"自定义时间",prop:"day"},{default:S(function(){return[j(D,{modelValue:O(x).day,"onUpdate:modelValue":a[6]||(a[6]=function(e){return O(x).day=e}),width:"16rem",textType:"天",min:"1",type:"number"},{append:S(function(){return u(a[16]||(a[16]=[q("天",-1)]))}),_:1},8,["modelValue"])]}),_:1})):L("",!0)]}),_:1},8,["model"])])])]}),_:1},8,["modelValue"]),j(g,{title:"创建临时授权",modelValue:O(v),"onUpdate:modelValue":a[11]||(a[11]=function(e){return P(v)?v.value=e:null}),area:57},{default:S(function(){return[T("div",on,[a[21]||(a[21]=T("div",null,"临时授权地址",-1)),j(D,{class:"my-5",type:"textarea",rows:2,modelValue:O(I),"onUpdate:modelValue":a[9]||(a[9]=function(e){return P(I)?I.value=e:null})},null,8,["modelValue"]),j(l,{type:"primary",class:"copy",onClick:a[10]||(a[10]=function(e){return n=O(I),b({value:n});var n})},{default:S(function(){return u(a[20]||(a[20]=[q("复制地址",-1)]))}),_:1}),a[22]||(a[22]=T("ul",{class:"ml-6 mt-8 list-disc"},[T("li",{class:"text-medium h-[2.4rem]"},"临时授权生成后1小时内使用有效，为一次性授权，使用后立即失效"),T("li",{class:"text-medium h-[2.4rem]"},"使用临时授权登录面板后1小时内拥有面板所有权限，请勿在公共场合发布临时授权连接"),T("li",{class:"text-medium h-[2.4rem]"},"授权连接信息仅在此处显示一次，若在使用前忘记，请重新生成")],-1))])]}),_:1},8,["modelValue"]),j(g,{title:"查看操作日志【".concat(O(M),"】"),modelValue:O(f),"onUpdate:modelValue":a[12]||(a[12]=function(e){return P(f)?f.value=e:null}),area:70},{default:S(function(){return[j(w,{class:"p-6"},{"header-left":S(function(){return[j(l,{onClick:ne,type:"primary"},{default:S(function(){return u(a[23]||(a[23]=[q("刷新日志",-1)]))}),_:1})]}),content:S(function(){return[G(j(c,{ref:"tempAuthLogTable","max-height":380,data:O(p),column:K},null,8,["data"]),[[X,O(d)],[X,"正在获取日志，请稍候...","title"]])]}),_:1})]}),_:1},8,["title","modelValue"])])}}}),sn=x({__name:"index",setup:function(e){var t=V({}),r=ne(function(){var e;return"true"==(null===(e=t.value)||void 0===e?void 0:e.limit_area_status)}),o=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:s({title:"设置地区登录限制",component:function(){return f(function(){return n.import("./area-config-legacy.js?v=1756369731")},void 0,n.meta.url)},compData:{limitArea:t.value,onRefresh:d},showFooter:!0,area:70});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),i=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,w({title:"".concat(n?"开启":"关闭","地区登录限制"),content:"".concat(n?"开启后，将会对面板登录地区进行限制":"关闭后，设置的地区登录将失效","，是否继续操作？"),icon:"warning-filled"});case 1:return e.n=2,a({loading:"正在设置，请稍候...",request:ge({limit_area_status:n}),message:!0,success:d});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=c(l().m(function e(){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({request:_e(),data:{limit_area:Object,limit_area_status:String,limit_type:String}});case 1:n=e.v,t.value=n;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return C(c(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,d())},e)}))),function(e,n){var t=I,a=E;return A(),z(O(Ae),{label:"地区登录限制"},{value:S(function(){return[j(t,{modelValue:O(r),"onUpdate:modelValue":n[0]||(n[0]=function(e){return P(r)?r.value=e:null}),onChange:i},null,8,["modelValue"]),j(a,{type:"default",size:"small",class:"!ml-12px",disabled:e.loading,onClick:o},{default:S(function(){return u(n[1]||(n[1]=[q("设置地区登录限制",-1)]))}),_:1},8,["disabled"])]}),desc:S(function(){return u(n[2]||(n[2]=[T("span",null,"设置面板地区登录策略",-1)]))}),_:1})}}}),fn={class:"px-[2rem]"},dn={class:"p-[2rem]"},pn=x({__name:"index",setup:function(e){var n=r().refs.safeConfig,t=V(!1),o=V(!1),s=V([]),f=V(!1),p=V(),v=V(!1),y=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:"正在设置，请稍候...",request:xe({status:n?1:0}),message:!0,success:function(e){e.status||"请先添加ua后再开启！"!==e.msg||(t.value=!0)}});case 1:h();case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({request:Ve(),success:function(e){var t=e.data,r=t.msg||t,u=r.status,a=r.ua_list;n.value.uaAstrict=1===Number(u),s.value=a}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=c(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:"正在删除，请稍候...",request:Ce({id:n.id}),message:!0});case 1:h();case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:if(p.value){e.n=1;break}return e.a(2,d.error("请输入User-Agent"));case 1:return e.n=2,a({loading:"正在设置，请稍候...",request:v.value?xe({new_name:p.value,id:v.value}):ke({ua_list:p.value}),message:!0});case 2:h(),v.value=!1,p.value="",f.value=!1;case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),g=[{label:"User-Agent",prop:"name"},Ie([{onClick:function(e){v.value=e.id,p.value=e.name,f.value=!0},title:"编辑"},{onClick:function(e){return b(e)},title:"删除"}])];return C(function(){return h()}),function(e,r){var a=I,l=E,c=_,d=qe,h=i,b=m,x=F,V=B,k=N("bt-loading");return A(),U("div",null,[j(O(Ae),{label:"User-Agent限制"},{value:S(function(){return[j(a,{modelValue:O(n).uaAstrict,"onUpdate:modelValue":r[0]||(r[0]=function(e){return O(n).uaAstrict=e}),onChange:r[1]||(r[1]=function(e){return y(O(n).uaAstrict)})},null,8,["modelValue"]),j(l,{size:"small",class:"!ml-12px",onClick:r[2]||(r[2]=function(e){return t.value=!0})},{default:S(function(){return u(r[7]||(r[7]=[q("User-Agent限制配置",-1)]))}),_:1})]}),desc:S(function(){return u(r[8]||(r[8]=[T("span",null,"设置限制访问User-Agent",-1)]))}),_:1}),j(h,{modelValue:O(t),"onUpdate:modelValue":r[4]||(r[4]=function(e){return P(t)?t.value=e:null}),area:70,title:"User-Agent限制配置"},{default:S(function(){return[T("div",fn,[j(d,{class:"py-20px"},{"header-left":S(function(){return[j(l,{onClick:r[3]||(r[3]=function(e){return f.value=!0}),type:"primary"},{default:S(function(){return u(r[9]||(r[9]=[q("添加User-Agent",-1)]))}),_:1})]}),content:S(function(){return[G(j(c,{ref:"uaTable",column:g,data:O(s),description:"User-Agent列表为空","max-height":400},null,8,["data"]),[[k,O(o)],[k,"正在加载User-Agent列表，请稍后...","title"]])]}),_:1})])]}),_:1},8,["modelValue"]),j(h,{modelValue:O(f),"onUpdate:modelValue":r[6]||(r[6]=function(e){return P(f)?f.value=e:null}),area:50,title:(O(v)?"编辑":"添加")+"User-Agent",showFooter:"",onConfirm:w},{default:S(function(){return[T("div",dn,[j(V,{ref:"uaFormRef",model:O(p),"label-position":"left"},{default:S(function(){return[j(x,{label:"User-Agent",prop:"name"},{default:S(function(){return[j(b,{modelValue:O(p),"onUpdate:modelValue":r[5]||(r[5]=function(e){return P(p)?p.value=e:null}),type:"textarea",width:"32rem",rows:4},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])])]}),_:1},8,["modelValue","title"])])}}});e("default",x({__name:"index",setup:function(e){return r(),function(e,n){return A(),U("div",null,[j(Fe),j(Ue),j(Be),j(De),j(Me),j(We),j(Xe),j(je),j(Ze),j(Se),j(Oe),j(tn),j(an),j(cn),j(sn),j(pn)])}}}))}}})}();
