!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function i(n,o,u,a){var i=o&&o.prototype instanceof l?o:l,s=Object.create(i.prototype);return r(s,"_invoke",function(n,r,o){var u,a,i,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return u=t,a=0,i=e,p.n=n,c}};function d(n,r){for(a=n,i=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,u=s[t],d=p.p,m=u[2];n>3?(o=m===r)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=e):u[0]<=d&&((o=n<2&&d<u[1])?(a=0,p.v=r,p.n=u[1]):d<m&&(o=n<3||u[0]>r||r>m)&&(u[4]=n,u[5]=r,p.n=m,a=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),a=s,i=m;(t=a<2?e:i)||!f;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(l=2,u){if(a||(o="next"),t=u[o]){if(!(t=t.call(u,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,a<2&&(a=0)}else 1===a&&(t=u.return)&&t.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=e}else if((t=(f=p.n<0)?i:n.call(r,p))!==c)break}catch(t){u=e,a=1,i=t}finally{l=1}}return{value:t,done:f}}}(n,u,a),!0),s}var c={};function l(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][u]?t(t([][u]())):(r(t={},u,function(){return this}),t),d=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,r(d,"constructor",f),r(f,"constructor",s),s.displayName="GeneratorFunction",r(f,a,"GeneratorFunction"),r(d),r(d,a,"Generator"),r(d,u,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:m}})()}function r(e,t,n,o){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}r=function(e,t,n,o){function a(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?u?u(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},r(e,t,n,o)}function o(e,t,n,r,o,u,a){try{var i=e[u](a),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,u){var a=e.apply(t,n);function i(e){o(a,r,u,i,c,"next",e)}function c(e){o(a,r,u,i,c,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./api-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731"],function(t,r){"use strict";var o,a,i,c,l,s,f,p,d,m,v,y,h,g,b,w,_,k,j,x,S,O,A,E,I;return{setters:[function(e){o=e.L},function(e){a=e.m,i=e.n,c=e.g,l=e.s,s=e.o},function(e){f=e.c,p=e.x,d=e.r,m=e.k,v=e.p,y=e.G,h=e.q,g=e.v,b=e.e,w=e.A,_=e.H,k=e.M,j=e.F,x=e.a_,S=e.C,O=e.B,A=e.y,E=e.P,I=e.z},null],execute:function(){var D={key:0,class:"mr-1rem"},F={class:"inline-block w-full flex items-center justify-between"},P=["title"],C={class:"truncate max-w-[12rem]"},G={key:0,class:"h-4rem flex items-center justify-center text-lighter"},T={key:1,class:"h-4rem flex items-center justify-center text-lighter text-12px"};t("default",f({__name:"cosfs-mount",props:{dependencies:{default:function(){return{}}}},setup:function(t){var f=t,V=p(f.dependencies.components),B=V.BtDialog,N=V.BtInputIcon,M=V.BtSvgIcon,q=V.ElDropdown,L=V.ElDropdownItem,U=V.ElDropdownMenu,z=V.ElForm,H=V.ElButton,$=V.ElFormItem,R=p(f.dependencies.hooks),J=R.useAxios,K=R.useMessage,Q=R.useDialog,W=p(f.dependencies.dialog).fileSelectionDialog,X=p(f.dependencies.custom).getDiskList,Y=K(),Z=d(!1),ee=d(!1),te=d([]),ne=d(!1),re=d(!1),oe=d(),ue=m({region:"",bucket_name:"",path:""}),ae=m({path:[{required:!0,message:"请选择文件目录",trigger:"blur"}]}),ie=function(){W({type:"dir",change:function(e){ue.path=e}})},ce=function(){Q({isAsync:!0,component:function(){return o(function(){return r.import("./config-legacy5.js?v=1756369731")},void 0,r.meta.url)},title:!1,area:[48],compData:{dependencies:f.dependencies}})},le=function(e){var t=te.value[e],n=t.Name,r=t.Location;ue.region=r,ue.bucket_name=n,ue.path="/www/cosfs/".concat(n.replace(/([-][^-]+)$/,"")),re.value=!0},se=function(){var e=u(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,oe.value.validate();case 1:return t=Y.load("正在挂载，请稍后..."),e.n=2,a(ue);case 2:r=e.v,Y.request(r),r.status&&(re.value=!1,fe(),X()),t.close(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=u(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,ee.value=!0,e.n=1,i();case 1:(t=e.v).status&&(te.value=t.data.list),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,ee.value=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=u(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,s({sName:"cosfs"});case 1:(t=e.v).data.setup&&fe(),Z.value=t.data.setup,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),de=function(){var e=u(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c();case 1:t=e.v,!1===(null==(r=t.data)?void 0:r.status)&&null!=r&&r.msg&&(ne.value=!0),r&&pe(),Z.value=!!r,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return v(function(){l(J),de()}),function(t,n){var r=y("bt-loading"),o=y("trim");return p(Z)?(h(),g("div",D,[b(p(q),{placement:"bottom-start",onCommand:le},{dropdown:w(function(){return[_((h(),k(p(U),{class:"w-20rem"},{default:w(function(){return[p(ne)?(h(),g("div",T,[n[4]||(n[4]=O("未关联腾讯云API密钥",-1)),A("a",{class:"bt-link cursor-pointer ml-4px",onClick:ce},">>关联密钥")])):(h(),g(j,{key:0},[(h(!0),g(j,null,x(p(te),function(e,t){return h(),k(p(L),{key:t,command:t},{default:w(function(){return[A("div",F,[A("div",{class:"flex items-center",title:e.Name.split("-")[0]},[b(p(M),{name:"file-hdd",size:"1.4",class:"mr-4px"}),A("div",C,I(e.Name.split("-")[0]),1)],8,P),n[3]||(n[3]=A("div",{class:"text-primary"},"挂载",-1))])]}),_:2},1032,["command"])}),128)),p(te).length?S("",!0):(h(),g("div",G,"暂无未挂载存储桶"))],64))]}),_:1})),[[r,p(ee)]])]}),default:w(function(){return[b(p(H),null,{default:w(function(){return e(n[2]||(n[2]=[O("腾讯云COSFS挂载工具",-1),A("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)]))}),_:1})]}),_:1}),b(p(B),{title:"【".concat(p(ue).bucket_name,"】本地挂载"),modelValue:p(re),"onUpdate:modelValue":n[1]||(n[1]=function(e){return E(re)?re.value=e:null}),"show-footer":!0,area:[50],"confirm-text":"挂载",onConfirm:se},{default:w(function(){return[b(p(z),{ref_key:"mountFromRef",ref:oe,class:"p-2rem",model:p(ue),rules:p(ae)},{default:w(function(){return[b(p($),{label:"挂载地址",prop:"path"},{default:w(function(){return[_(b(p(N),{modelValue:p(ue).path,"onUpdate:modelValue":n[0]||(n[0]=function(e){return p(ue).path=e}),name:"path",icon:"el-folder-opened",width:"32rem",placeholder:"请选择文件目录",onIconClick:ie},null,8,["modelValue"]),[[o]])]}),_:1})]}),_:1},8,["model","rules"])]}),_:1},8,["title","modelValue"])])):S("",!0)}}}))}}})}();
