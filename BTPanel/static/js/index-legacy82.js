!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.toStringTag||"@@toStringTag";function i(t,a,u,l){var i=a&&a.prototype instanceof o?a:o,c=Object.create(i.prototype);return r(c,"_invoke",function(t,r,a){var u,l,i,o=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return u=n,l=0,i=e,d.n=t,s}};function p(t,r){for(l=t,i=r,n=0;!f&&o&&!a&&n<c.length;n++){var a,u=c[n],p=d.p,m=u[2];t>3?(a=m===r)&&(i=u[(l=u[4])?5:(l=3,3)],u[4]=u[5]=e):u[0]<=p&&((a=t<2&&p<u[1])?(l=0,d.v=r,d.n=u[1]):p<m&&(a=t<3||u[0]>r||r>m)&&(u[4]=t,u[5]=r,d.n=m,l=0))}if(a||t>1)return s;throw f=!0,r}return function(a,c,m){if(o>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,m),l=c,i=m;(n=l<2?e:i)||!f;){u||(l?l<3?(l>1&&(d.n=-1),p(l,i)):d.n=i:d.v=i);try{if(o=2,u){if(l||(a="next"),n=u[a]){if(!(n=n.call(u,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,l<2&&(l=0)}else 1===l&&(n=u.return)&&n.call(u),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);u=e}else if((n=(f=d.n<0)?i:t.call(r,d))!==s)break}catch(n){u=e,l=1,i=n}finally{o=1}}return{value:n,done:f}}}(t,u,l),!0),c}var s={};function o(){}function c(){}function f(){}n=Object.getPrototypeOf;var d=[][u]?n(n([][u]())):(r(n={},u,function(){return this}),n),p=f.prototype=o.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,l,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=f,r(p,"constructor",f),r(f,"constructor",c),c.displayName="GeneratorFunction",r(f,l,"GeneratorFunction"),r(p),r(p,l,"Generator"),r(p,u,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:m}})()}function r(e,n,t,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}r=function(e,n,t,a){function l(n,t){r(e,n,function(e){return this._invoke(n,t,e)})}n?u?u(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[n]=t:(l("next",0),l("throw",1),l("return",2))},r(e,n,t,a)}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach(function(n){l(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function l(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var a=r.call(n,t||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function i(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=s(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){i=!0,u=e},f:function(){try{l||null==t.return||t.return()}finally{if(i)throw u}}}}function s(e,n){if(e){if("string"==typeof e)return o(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,n):void 0}}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function c(e,n,t,r,a,u,l){try{var i=e[u](l),s=i.value}catch(e){return void t(e)}i.done?n(s):Promise.resolve(s).then(r,a)}function f(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function l(e){c(u,r,a,l,i,"next",e)}function i(e){c(u,r,a,l,i,"throw",e)}l(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./useStore-legacy10.js?v=1756369731","./index-legacy103.js?v=1756369731","./index-legacy145.js?v=1756369731","./ssl-legacy.js?v=1756369731","./useMethod-legacy10.js?v=1756369731","./useStore-legacy11.js?v=1756369731","./useMethod-legacy11.js?v=1756369731","./useController-legacy13.js?v=1756369731","./validator-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./index-legacy141.js?v=1756369731","./index-legacy104.js?v=1756369731","./index.vue_vue_type_style_index_0_scoped_b3c4124c_lang-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./site-legacy.js?v=1756369731","./useStore-legacy12.js?v=1756369731","./useStore-legacy4.js?v=1756369731","./useController-legacy6.js?v=1756369731","./useController-legacy5.js?v=1756369731","./useMethod-legacy5.js?v=1756369731","./useController-legacy4.js?v=1756369731","./index-legacy124.js?v=1756369731"],function(e,r){"use strict";var a,l,s,o,c,d,p,m,v,h,y,g,b,x,_,w,k,C,D,j,S,E,T,O,N,B,P,R,A,M,I,L,V,q,U,H,F,G,z,J,W,X,Y,$,K,Q,Z,ee,ne,te,re,ae,ue,le,ie,se,oe,ce,fe,de,pe,me,ve,he,ye,ge,be,xe,_e,we,ke,Ce,De,je,Se,Ee,Te,Oe,Ne,Be,Pe,Re,Ae,Me,Ie,Le,Ve,qe,Ue,He,Fe,Ge;return{setters:[function(e){a=e.N,l=e.K,s=e.b,o=e.u,c=e.l,d=e.L,p=e.c,m=e.M,v=e.a6,h=e.p,y=e.a_,g=e.aj,b=e.a7,x=e.cu,_=e.a8,w=e.d,k=e.h,C=e.al},function(e){D=e.c,j=e.s,S=e.k,E=e.r,T=e.g,O=e.w,N=e.q,B=e.v,P=e.y,R=e.z,A=e.x,M=e.e,I=e.A,L=e.B,V=e.C,q=e.T,U=e.D,H=e.t,F=e.U,G=e.ax,z=e.aB,J=e.an,W=e.ap,X=e.ao,Y=e.a$,$=e.p,K=e.b,Q=e.P,Z=e.i,ee=e.aE,ne=e.aQ,te=e.al,re=e.n,ae=e.aW},function(e){ue=e.g},function(e){le=e._},function(e){ie=e._},function(e){se=e.d,oe=e.b,ce=e.r,fe=e.g,de=e.a,pe=e.c,me=e.e,ve=e.f,he=e.h,ye=e.u,ge=e.i},function(e){be=e.r,xe=e.s,_e=e.a},function(e){we=e.u},function(e){ke=e.h,Ce=e.d,De=e.a,je=e.c,Se=e.r,Ee=e.b,Te=e.C,Oe=e.o,Ne=e.v,Be=e.e,Pe=e.f,Re=e.g,Ae=e.i,Me=e.u},function(e){Ie=e.C,Le=e.a},function(e){Ve=e.b,qe=e.j},function(e){Ue=e.c,He=e.a},function(e){Fe=e.u},function(e){Ge=e._},null,null,null,null,null,null,null,null,null,null],execute:function(){var ze,Je,We={class:"p-[2rem] w-[480px]"},Xe={class:"flex items-center"},Ye={class:"text-[1.4rem] ml-[.8rem] leading-10"},$e={key:0,class:"flex items-center ml-[4.8rem] mt-[1.2rem]"},Ke={class:"bg-[#f6f8f8] footer-btn flex items-center justify-end p-[1.2rem] w-full"},Qe=D({__name:"index",props:{compData:{},isMulti:{type:Boolean},delType:{}},emits:["cancel"],setup:function(e,r){var o=r.expose,c=r.emit,d=j(we()),p=d.activeTabs,m=d.sslIsRefresh,v=d.testIsRefresh,h=d.encryptIsRefresh,y=d.otherIsRefresh,g=s(),b=e,x=c,_=S({addend1:Math.round(9*Math.random()+1),addend2:Math.round(9*Math.random()+1),sum:void 0,cloud:!1,local:!0}),w=E(null),k=E(!1),C=T(function(){return k.value?w.value.filter(function(e){return e.use_site.length>0}).map(function(e){return e.use_site}).flat():null===(e=w.value)||void 0===e?void 0:e.use_site;var e}),D=function(){var e=f(t().m(function e(){var n,r,s,o,c,f,d,D,j,S,E,T,O,N,B,P,R,A,M,I,L,V,q;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=g.load("正在".concat(k.value?"批量":"","删除证书，请稍候...")),e.p=1,r={ssl:function(){return m.value=!0},test:function(){return v.value=!0},encrypt:function(){return h.value=!0},other:function(){return y.value=!0}},!k.value){e.n=17;break}if(o=[],"ssl"!==b.delType){e.n=13;break}c=i(w.value),e.p=2,c.s();case 3:if((f=c.n()).done){e.n=9;break}if(d=f.value,e.p=4,!(d.endDay>=0)){e.n=5;break}return o.push({name:d.title||(null===(j=d.domainName)||void 0===j?void 0:j.join(","))||"未知证书",status:!1,msg:"证书未过期，无法删除"}),e.a(3,8);case 5:return e.n=6,se(d.oid);case 6:S=e.v,E=S.data,o.push({name:d.title||(null===(D=d.domainName)||void 0===D?void 0:D.join(","))||"未知证书",status:E.status,msg:E.msg}),e.n=8;break;case 7:e.p=7,V=e.v,o.push({name:d.title||(null===(T=d.domainName)||void 0===T?void 0:T.join(","))||"未知证书",status:!1,msg:(null==V?void 0:V.message)||"删除失败"});case 8:e.n=3;break;case 9:e.n=11;break;case 10:e.p=10,q=e.v,c.e(q);case 11:return e.p=11,c.f(),e.f(11);case 12:e.n=15;break;case 13:if(O=[],N=[],w.value.forEach(function(e){void 0!==e.hash&&null!==e.hash?N.push(e.hash):void 0!==e.index&&null!==e.index?O.push(e.index):o.push({name:e.title,status:!1,msg:"不支持删除"})}),!O.length&&!N.length){e.n=15;break}return B={ssl_hash:N.join(","),index:O.join(","),local:1,cloud:_.cloud?1:0},C.value.length&&(B.force=!0),e.n=14,oe(B);case 14:P=e.v,R=P.data,a(R.finish_list)&&R.finish_list.forEach(function(e){o.push({name:e.name,status:e.status,msg:e.status?"删除成功":e.msg})});case 15:return x("cancel"),e.n=16,be({resultData:o,resultTitle:"删除"});case 16:null===(s=r[p.value])||void 0===s||s.call(r),e.n=20;break;case 17:if("ssl"!==b.delType){e.n=18;break}A=w.value.oid,l({request:se(A),loading:"正在删除证书，请稍候...",message:!0,success:function(){var e;x("cancel"),null===(e=r[p.value])||void 0===e||e.call(r)}}),e.n=20;break;case 18:return M={ssl_id:w.value.id,ssl_hash:w.value.hash,index:w.value.index},w.value.order_status?(delete M.ssl_id,delete M.ssl_hash):delete M.index,C.value.length&&(M.force=1),e.n=19,ce(u(u({},M),{},{local:1,cloud:_.cloud?1:0}));case 19:I=e.v,a(I.data.finish_list)&&g.request(I.data.finish_list[0]),I.status&&(x("cancel"),null===(L=r[p.value])||void 0===L||L.call(r));case 20:e.n=22;break;case 21:e.p=21,e.v;case 22:return e.p=22,n&&n.close(),_.addend1=Math.round(9*Math.random()+1),_.addend2=Math.round(9*Math.random()+1),_.sum=void 0,e.f(22);case 23:return e.a(2)}},e,null,[[4,7],[2,10,11,12],[1,21,22,23]])}));return function(){return e.apply(this,arguments)}}(),H=function(){x("cancel"),_.addend1=Math.round(9*Math.random()+1),_.addend2=Math.round(9*Math.random()+1),_.sum=void 0};return O(function(){return b.compData},function(e){w.value=e},{deep:!0,immediate:!0}),O(function(){return b.isMulti},function(e){k.value=e},{deep:!0,immediate:!0}),o({handleCancel:H}),function(e,t){var r=q,a=U;return N(),B("div",null,[P("div",We,[P("div",Xe,[t[1]||(t[1]=P("span",{class:"!text-warning !text-[4rem] svgtofont-el-warning-filled"},null,-1)),P("span",Ye,R("".concat(A(k)?"批量删除":"删除该","证书，是否继续操作？")),1)]),"other"===e.delType?(N(),B("div",$e,[M(r,{modelValue:A(_).cloud,"onUpdate:modelValue":t[0]||(t[0]=function(e){return A(_).cloud=e})},{default:I(function(){return[L(R("".concat(A(k)?"批量":"","同步删除云端证书")),1)]}),_:1},8,["modelValue"])])):V("",!0)]),P("div",Ke,[M(a,{type:"default",onClick:H},{default:I(function(){return n(t[2]||(t[2]=[L("取消",-1)]))}),_:1}),M(a,{type:"danger",onClick:D},{default:I(function(){return n(t[3]||(t[3]=[L("删除",-1)]))}),_:1})])])}}}),Ze=ue(),en=Ze.refs,nn=(en.tabActive,en.typeList),tn=(Ze.router,o().payment),rn=H(tn.value).bindUser,an=[{content:"申请证书",dropdownClass:"bg-white",splitButton:!0,active:!0,event:function(){if(!rn.value)return Ve(),!1;yn()}}],un=F([]),ln=Fe({key:"type",name:"证书分组",options:function(){return[{label:"全部分组",value:"all"}]},event:{get:(ze=f(t().m(function e(){var r;return t().w(function(e){for(;;)switch(e.n){case 0:return r=[],e.n=1,l({request:fe(),data:Array,success:function(e){r=[{label:"全部分组",value:"all"}].concat(n(e.map(function(e){return{label:e.name,value:String(e.group_id)}})))}});case 1:return nn.value=r,e.a(2,r)}},e)})),function(){return ze.apply(this,arguments)}),add:function(e){return de({name:e.name,group_id:Date.now()})},delete:function(e){return pe({group_id:e.id})}},ignore:["0"],field:"name",showEdit:!1}),sn=E(!1),on=E(!1),cn=E(null),fn=E(null),dn=function(e,n){on.value=n,cn.value=e,sn.value=!0},pn=function(){sn.value=!1},mn=function(){var e=f(t().m(function e(n,a,u,l){var i,s,o,p,m;return t().w(function(e){for(;;)switch(e.n){case 0:return i=l.label,s=l.value,o=[],p=[],u.value.forEach(function(e){void 0!==e.hash&&null!==e.hash?p.push(e.hash):void 0!==e.index&&null!==e.index&&o.push(e.index)}),m=function(){var e=f(t().m(function e(){var n;return t().w(function(e){for(;;)switch(e.n){case 0:n=s,e.n="delete"===n?1:3;break;case 1:return e.n=2,dn(u.value,!0);case 2:return e.a(2,e.v);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),e.n=1,c({title:"批量".concat(i,"证书"),area:46,component:function(){return d(function(){return r.import("./index-legacy118.js?v=1756369731")},void 0,r.meta.url)},compData:{resultTitle:"批量".concat(i,"证书"),resultData:u.value,resultColumn:[{label:"名称",prop:"title"},Ue()],autoTitle:"批量".concat(i,"证书")},showFooter:!0,onConfirm:function(){var e=f(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m();case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(n,t,r,a){return e.apply(this,arguments)}}(),vn=[{label:"批量分组",value:"group",event:function(e,n,t,r){return xe(t.value,"certificate")}},{label:"批量设置告警",value:"alarm",event:function(e,n,t,r){ke(t.value,Te.SSL)}},{label:"批量下载",value:"download",event:(Je=f(t().m(function e(n,r,a,u,l){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,hn(a.value);case 1:l&&l();case 2:return e.a(2)}},e)})),function(e,n,t,r,a){return Je.apply(this,arguments)})},{label:"删除",value:"delete",event:mn}],hn=function(){var e=f(t().m(function e(n){var r,a,u,l,i,s,o,c,f,d;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=null,a=[],u=[],l=function(e){a.push(e)},e.p=1,r=m.load("正在批量下载证书，请稍候..."),n.forEach(function(e){l(e)}),!(a.length>0)){e.n=4;break}if(i=a.filter(function(e){return void 0!==e.oid&&null!==e.oid&&e.download_status}),s=i.map(function(e){return e.oid}).join(","),o={oid:s},s){e.n=2;break}return r.close&&r.close(),m.error("选择的证书中没有可下载的证书！"),e.a(2);case 2:return e.n=3,me(o);case 3:c=e.v,f=c.data,c.status&&(f.url&&window.open(f.url,"_blank","noopener,noreferrer"),(null===(d=f.finish_list)||void 0===d?void 0:d.length)>0&&f.finish_list.forEach(function(e){var t=JSON.parse(e.cert.info);u.push({name:n.find(function(e){return e.id==t.issuer}).domainName.join(","),oid:t.issuer,status:e.status})}));case 4:be({resultData:u,resultTitle:"下载",resultColumn:[{label:"名称",prop:"name"},{label:"订单编号",prop:"oid"},{label:"结果",render:function(e){var n="",t="";return e.status?(n="下载成功",t="text-primary"):(n="下载失败",t="text-danger"),z("span",{class:t},n)}}]}),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.p=6,r&&r.close(),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(n){return e.apply(this,arguments)}}(),yn=function(){c({isAsync:!0,title:"购买商业证书",area:[79],component:function(){return d(function(){return r.import("./index-legacy380.js?v=1756369731")},void 0,r.meta.url)}})},gn=function(e){var n=function(e,n){return M("span",{class:"bt-link",onClick:n},[e])},t=n("人工服务",function(){return qe()}),a=n("详情",function(){return function(e){c({title:"多年期证书详情",area:52,compData:e,component:function(){return d(function(){return r.import("./mulit-cert-detail-legacy.js?v=1756369731")},void 0,r.meta.url)}})}(e)}),u=n("下载",function(){return Ce(e)}),l=n("部署",function(){return De(e)}),i=n("验证",function(){return je(e.oid,e.cert_ssl_type,e.pid)}),s=n("续签",function(){return Se(e.oid)}),o=n("完善资料",function(){return Ee(e)}),f=e.orderStatus,p=[];switch(e.years&&e.years>1&&[5,15].includes(Number(f))&&p.push(a),Number(f)){case 0:e.install&&p.push(t),p.push(o);break;case 3:case 11:e.install&&p.push(t),p.push(i);break;case 5:p.push(l),p.push(u);break;case 7:p.push(s)}var m=[];return p.map(function(e,n){m.push(e),n<p.length-1&&m.push(M(Ge,null,null))}),m},bn={class:"flex items-center"},xn={class:"flex items-center ml-[12px]"},_n={class:"flex items-center"};var wn=D({__name:"index",setup:function(e,r){var a,l=r.expose,i=ue().refs,s=i.tabActive,c=i.expiringCertificateCount,d=i.expiredCertificateCount,m=j(we()),C=m.sslSearchType,D=m.sslIsRefresh,S=o().mainHeight,E=_(vn),T=v({request:(a=f(t().m(function e(n){var r,a,u,l;return t().w(function(e){for(;;)switch(e.n){case 0:return"-1"===(r={p:n.p,group_id:h(n.type)||"all"===n.type?"-1":n.type,search:n.search,limit:n.limit,status_id:C.value,cert_type:"1"}).group_id&&delete r.group_id,"-1"===r.status_id&&delete r.status_id,""===r.search&&delete r.search,e.n=1,ve(r);case 1:return a=e.v,u=a.data,un.value=u.data,(l=y(u))("will_num")&&(c.value=(null==u?void 0:u.will_num)||0),l("end_num")&&(d.value=(null==u?void 0:u.end_num)||0),e.a(2,{data:u.data,total:g(u.page),other:{search_history:u.search_history}})}},e)})),function(e){return a.apply(this,arguments)}),columns:[He(),{label:"认证域名",render:function(e){var n;return(null===(n=e.domainName)||void 0===n?void 0:n.join(", "))||"--"}},{label:"证书类型",prop:"title",showOverflowTooltip:!0,width:180},{label:"部署网站",isCustom:!0,render:function(e){var n;return(null===(n=e.use_site)||void 0===n?void 0:n.join(", "))||"--"}},{label:"分组",prop:"group_name",width:100,showOverflowTooltip:!0,isCustom:!1},{label:"到期时间",isCustom:!0,render:function(e){var n,t,r,a=function(e,n){return M("span",{class:e<=10?"text-danger":n},[e>0?"剩余".concat(e,"天"):"已过期"])},u=(r=e.endDay)<=0||r<=7?"text-danger":r<=15?"text-orange":"text-[#20a53a]";return"1"===e.type?e.endDate?a(e.endDay,e.endDay<=30?"text-orange":u):M("span",null,[L("--")]):"2"===e.type?null!=e&&e.endDay&&0!==(null==e?void 0:e.endDay)?a(e.endDay,e.endDay<=30?"text-orange":u):M("span",null,[L("--")]):M("span",{class:null!==(n=e.domainName)&&void 0!==n&&n.length?u:"text-[#333]"},[null!==(t=e.domainName)&&void 0!==t&&t.length?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--"])}},{label:"订单状态",isCustom:!0,renderHeader:function(){var e=[{title:"全部",key:"-1"},{title:"验证中",key:"0"},{title:"未到期/订单完成",key:"1"},{title:"即将到期",key:"2"},{title:"已到期",key:"3"}];return z("div",{class:"flex items-center flex-nowrap"},["",z(J,{onCommand:function(e){C.value=e,ee()}},{default:function(){return z("span",{class:"text-[1.2rem] flex items-center"},[[M("span",{class:"status-header-text"},[L("订单状态"),"-1"===C.value?"(全部)":"(".concat(e.find(function(e){return e.key===C.value}).title,")")])],z("i",{class:"svgtofont-el-arrow-down "})])},dropdown:function(){var n,t;return M(X,null,"function"==typeof(t=n=e.map(function(e){return M(W,{command:e.key},{default:function(){return[e.title]}})}))||"[object Object]"===Object.prototype.toString.call(t)&&!Z(t)?n:{default:function(){return[n]}})}})])},render:function(e){if(e.cert_ssl_type)return function(e){var n=M(G,{placement:"bottom-end",width:"400","popper-class":"white-theme",trigger:"click"},{default:function(){return M("div",{class:"bus-ssl-popover"},[M("div",{class:"ssl-popover-item"},[M("span",{class:"ssl-popover-title"},[L("自行排查")]),M("p",null,[L("以图文的形式，一步步教您验证并部署商业SSL")]),M(p,{href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},{default:function(){return[L("如何验证商用证书?")]}})]),M("div",{class:"ssl-popover-item"},[M("span",{class:"ssl-popover-title"},[L("购买人工")]),M("p",null,[L("不会部署?人工客服帮你全程部署，不成功可退款")]),M(U,{size:"small",type:"primary",onClick:function(){return qe()}},{default:function(){return[L("购买人工")]}})])])},reference:function(){return M("span",{class:"bt-link"},[L("排查方法?")])}}),t=e.orderStatus,r=[];switch(Number(t)){case-1:r.push(M("span",{class:"text-danger"},[L("已取消")]));break;case 0:e.install||r.push(n),r.push(M("span",{class:"text-warning"},[L("待完善资料")]));break;case 1:r.push(M("span",{class:"text-warning"},[L("待审核")]));break;case 2:r.push(M("span",{class:"text-warning"},[L("正在提交CA")]));break;case 3:r.push(M("span",{class:"text-warning"},[L("待域名验证")]));break;case 4:r.push(M("span",{class:"text-warning"},[L("签发中")]));break;case 5:r.push(M("span",{class:"text-success"},[L("已签发")]));break;case 6:r.push(M("span",{class:"text-warning"},[L("取消确认")]));break;case 7:r.push(M("span",{class:"text-warning"},[L("待续费")]));break;case 8:r.push(M("span",{class:"text-warning"},[L("待吊销确认")]));break;case 9:r.push(M("span",{class:"text-warning"},[L("待重颁发")]));break;case 10:r.push(M("span",{class:"text-warning"},[L("重颁发中")]));break;case 11:r.push(M("span",{class:"text-warning"},[L("吊销中")]));break;case 12:r.push(M("span",{class:"text-danger"},[L("已吊销")]));break;default:r.push(M("span",{class:"text-warning"},[L("待完善资料")]))}var a=[];return r.map(function(e,n){a.push(e),n<r.length-1&&a.push(M(Ge,null,null))}),a}(e);if("1"===e.type){var n=[],t=function(e,n){return M("span",{class:e},[n])},r=e.domainName&&e.domainName.length>0;if(""!=e.certId||r)if(""==e.certId&&0!==e.domainName.length)n.push(t("text-[#e6a23c]","待提交"));else if(1===e.status)switch(e.orderStatus){case"COMPLETE":n.push(t("text-[#20a53a]","订单完成"));break;case"REISSUED":n.push(t("text-[#20a53a]","已重签"));break;case"PENDING":n.push((u="orange",l="验证中",M(G,{trigger:"hover",placement:"left","popper-class":"popover-default",width:"300",enterable:!1,"open-delay":100,"close-delay":0},{default:function(){return M("div",{class:"flex items-center p-[2px] whitespace-nowrap"},[L("1、如填写错误，联系人工可重置订单"),M("br",null,null),L("2、如验证方式选择错误，联系人工修改验证方式")])},reference:function(){return M("div",{style:"color: ".concat(u,";")},[l])}})));break;case"CANCELLED":n.push(t("text-[#909399]","已取消"));break;case"FAILED":n.push(t("text-[#f56c6c]","申请失败"));break;case"EXPIRED":n.push(t("text-[#f56c6c]","已过期"));break;default:n.push(t("text-[#e6a23c]","待验证"))}else switch(e.status){case 0:n.push(t("text-[#e6a23c]","未支付"));break;case-1:n.push(t("text-[#909399]","已取消"))}else n.push(M("span",{class:"cursor-pointer bt-warn",onClick:function(){return Ee(e)}},[L("待完善资料")]));var a=[];return n.map(function(e,t){a.push(e),t<n.length-1&&a.push(M(Y,{direction:"vertical"},null))}),a}return[];var u,l}},{label:"操作",align:"right",fixed:"right",width:280,render:function(e){if(e.cert_ssl_type)return gn(e);var n=function(e,n){return M("span",{class:"bt-link",onClick:n},[e])},t=n("人工服务",function(){return qe()}),r=n("下载",function(){return Ce(e)}),a=n("部署",function(){return De(e)}),l=n("验证",function(){return je(e.oid,e.cert_ssl_type,e.pid)}),i=n("续签",function(){return Se(e.oid)}),s=n("删除",function(){return dn(e,!1)}),o=n("到期告警",function(){return _e(u(u({},e),{},{cancel:function(){}}))}),c=[];if(e.endDay<=0||c.push(o),e.renew&&c.push(M("span",{class:"cursor-pointer bt-link",onClick:function(){return Se(e.oid)}},[L("续签")])),""==e.certId)e.install&&c.push(t),c.push(n("完善资料",function(){return Ee(e)}));else if(1===e.status){switch(e.orderStatus){case"COMPLETE":1===e.ssl_state?c.push(M("span",null,[L("已部署")])):c.push(a),e.endDay<30&&c.push(i);break;case"PENDING":default:e.install&&c.push(t),c.push(l);break;case"CANCELLED":c.push(M("span",null,[L("无操作")]));break;case"FAILED":c.push(M("span",{class:"cursor-pointer bt-danger"},[L("申请失败")]));break;case"EXPIRED":c.push(a);case"REISSUED":}e.download_status&&c.push(r),e.endDay&&e.endDay<=0&&c.push(s)}else c.push(M("span",null,[L("无操作")]));var f=[];return c.map(function(e,n){f.push(e),n<c.length-1&&f.push(M(Y,{direction:"vertical"},null))}),c=f}}],extension:[ln,E,b(D),x("search",{name:"ssl",key:"get_cert_list",list:[],showRecommend:!1})]}),O=T.BtTable,R=T.BtPage,V=(T.BtRefresh,T.BtTableCategory),q=T.BtRecommendSearch,H=T.BtColumn,F=T.BtBatch,ee=(T.BtErrorMask,T.refresh);return $(function(){s.value=K().name}),l({init:ee}),function(e,t){var r=ie,a=w,u=p,l=k,i=le;return N(),B("div",null,[M(i,null,{"header-left":I(function(){return[P("div",bn,[M(r,{options:A(an)},null,8,["options"]),M(Ie,{placement:"right"},{default:I(function(){return[P("div",xn,[M(a,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=P("span",{class:"bt-link"},"售前客服",-1))])]}),_:1}),M(u,{class:"ml-[12px] flex items-center",onClick:A(Oe)},{default:I(function(){return n(t[3]||(t[3]=[P("div",{class:"flex items-center"},[P("span",{class:"svgtofont-desired text-[1.6rem]"}),P("span",null,"需求反馈")],-1)]))}),_:1},8,["onClick"])])]}),"header-right":I(function(){return[P("div",_n,[M(A(V),{class:"!w-[140px] mr-[10px]"}),M(A(q),{type:"ssl-certificate",placeholder:"请输入证书名称",class:"!w-[270px] mr-[10px]"}),M(A(H))])]}),content:I(function(){return[M(A(O),{"min-height":A(S)},null,8,["min-height"])]}),"footer-left":I(function(){return[M(A(F))]}),"footer-right":I(function(){return[M(A(R))]}),popup:I(function(){return[M(l,{title:"证书删除确认",modelValue:A(sn),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Q(sn)?sn.value=e:null}),area:["auto"],onCancel:t[1]||(t[1]=function(e){return A(fn).handleCancel()})},{default:I(function(){return[M(Qe,{ref_key:"delRef",ref:fn,delType:"ssl",isMulti:A(on),compData:A(cn),onCancel:A(pn)},null,8,["isMulti","compData","onCancel"])]}),_:1},8,["modelValue"])]}),_:1})])}}}),kn={class:"flex items-center"},Cn={class:"flex items-center ml-[12px]"},Dn={class:"flex items-center"};var jn=D({__name:"index",setup:function(e,a){var i=a.expose,s=ue().refs,m=s.tabActive,k=s.expiringCertificateCount,C=s.expiredCertificateCount,D=s.typeList,S=j(we()),E=S.testSearchType,T=S.testIsRefresh,O=o(),R=O.mainHeight,V=O.payment,q=H(V.value).bindUser;ee();var U,G,Q=[{content:"申请证书",dropdownClass:"bg-white",splitButton:!0,active:!0,event:function(){if(!q.value)return Ve(),!1;c({isAsync:!0,title:"申请免费宝塔SSL证书",area:60,component:function(){return d(function(){return r.import("./apply-bt-ssl-legacy.js?v=1756369731")},void 0,r.meta.url)}})}}],ne=F([]),te=Fe({key:"type",name:"证书分组",options:function(){return[{label:"全部分组",value:"all"}]},event:{get:(U=f(t().m(function e(){var r;return t().w(function(e){for(;;)switch(e.n){case 0:return r=[],e.n=1,l({request:fe(),data:Array,success:function(e){r=[{label:"全部分组",value:"all"}].concat(n(e.map(function(e){return{label:e.name,value:String(e.group_id)}})))}});case 1:return D.value=r,e.a(2,r)}},e)})),function(){return U.apply(this,arguments)}),add:function(e){return de({name:e.name,group_id:Date.now()})},delete:function(e){return pe({group_id:e.id})}},ignore:["0"],field:"name",showEdit:!1}),re=_([{label:"批量分组",value:"group",event:function(e,n,t,r){return xe(t.value,"certificate")}},{label:"批量设置告警",value:"alarm",event:function(e,n,t,r){ke(t.value,Te.TEST)}}]),ae=v({request:(G=f(t().m(function e(n){var r,a,u,l;return t().w(function(e){for(;;)switch(e.n){case 0:return"-1"===(r={p:n.p,group_id:h(n.type)||"all"===n.type?"-1":n.type,search:n.search,limit:n.limit,status_id:E.value,cert_type:"2"}).group_id&&delete r.group_id,"-1"===r.status_id&&delete r.status_id,""===r.search&&delete r.search,e.n=1,ve(r);case 1:return a=e.v,u=a.data,ne.value=u.data,(l=y(u))("will_num")&&(k.value=(null==u?void 0:u.will_num)||0),l("end_num")&&(C.value=(null==u?void 0:u.end_num)||0),e.a(2,{data:u.data,total:g(u.page),other:{search_history:u.search_history}})}},e)})),function(e){return G.apply(this,arguments)}),columns:[He(),{label:"认证域名",render:function(e){var n;return(null===(n=e.domainName)||void 0===n?void 0:n.join(", "))||"--"}},{label:"部署网站",isCustom:!0,render:function(e){var n;return(null===(n=e.use_site)||void 0===n?void 0:n.join(", "))||"--"}},{label:"分组",prop:"group_name",width:100,showOverflowTooltip:!0,isCustom:!1},{label:"到期时间",isCustom:!0,render:function(e){var n,t,r,a=function(e,n){return M("span",{class:e<=10?"text-danger":n},[e>0?"剩余".concat(e,"天"):"已过期"])},u=(r=e.endDay)<=0||r<=7?"text-danger":r<=15?"text-orange":"text-[#20a53a]";return"1"===e.type?e.endDate?a(e.endDay,e.endDay<=30?"text-orange":u):M("span",null,[L("--")]):"2"===e.type?null!=e&&e.endDay&&0!==(null==e?void 0:e.endDay)?a(e.endDay,e.endDay<=30?"text-orange":u):M("span",null,[L("--")]):M("span",{class:null!==(n=e.domainName)&&void 0!==n&&n.length?u:"text-[#333]"},[null!==(t=e.domainName)&&void 0!==t&&t.length?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--"])}},{label:"订单状态",isCustom:!0,renderHeader:function(){var e=[{title:"全部",key:"-1"},{title:"验证中",key:"0"},{title:"未到期/订单完成",key:"1"},{title:"即将到期",key:"2"},{title:"已到期",key:"3"}];return z("div",{class:"flex items-center flex-nowrap"},["",z(J,{onCommand:function(e){E.value=e,ge()}},{default:function(){return z("span",{class:"text-[1.2rem] flex items-center"},[[M("span",{class:"status-header-text"},[L("订单状态"),"-1"===E.value?"(全部)":"(".concat(e.find(function(e){return e.key===E.value}).title,")")])],z("i",{class:"svgtofont-el-arrow-down "})])},dropdown:function(){var n,t;return M(X,null,"function"==typeof(t=n=e.map(function(e){return M(W,{command:e.key},{default:function(){return[e.title]}})}))||"[object Object]"===Object.prototype.toString.call(t)&&!Z(t)?n:{default:function(){return[n]}})}})])},render:function(e){switch(e.stateName){case"待验证":return M("span",{class:"text-[#e6a23c]"},[e.stateName]);case"已过期":return M("span",{class:"text-danger"},[e.stateName]);case"验证中":return M("span",{class:"text-[#fc6d26]"},[e.stateName]);case"审核已终止":return M("span",{class:"text-[#909399]"},[e.stateName]);default:return M("span",{class:"text-[#20a53a]"},[e.stateName])}}},{label:"操作",align:"right",fixed:"right",width:200,render:function(e){var n=[];return"审核已终止"===e.stateName?M("span",null,[L("--")]):(n=[M("span",{class:"cursor-pointer bt-link",onClick:function(){return De(e)}},[L("部署")])],"WF_DOMAIN_APPROVAL"===e.stateCode&&""!==e.authDomain?n=[M("span",{class:"cursor-pointer bt-link",onClick:function(){return Ne(e)}},[L("验证域名")]),M(Y,{direction:"vertical"},null),M("span",{class:"bt-link",onClick:function(){return Le(e)}},[L("修改域名")])]:"WF_DOMAIN_APPROVAL"===e.stateCode&&""===e.authDomain?n=[M("span",{class:"bt-link",onClick:function(){return Le(e)}},[L("填写域名")])]:Be(e,Te.TEST)&&n.push(M(Y,{direction:"vertical"},null),M("span",{class:"cursor-pointer bt-link",onClick:function(){return _e(u(u({},e),{},{cancel:function(){}}))}},[L("到期告警")])),n)}}],extension:[te,re,b(T),x("search",{name:"ssl",key:"get_cert_list",list:[],showRecommend:!1})]}),se=ae.BtTable,oe=ae.BtPage,ce=(ae.BtRefresh,ae.BtTableCategory),me=ae.BtRecommendSearch,he=ae.BtColumn,ye=ae.BtBatch,ge=(ae.BtErrorMask,ae.refresh);return $(function(){m.value=K().name}),i({init:ge}),function(e,t){var r=ie,a=w,u=p,l=le;return N(),B("div",null,[M(l,null,{"header-left":I(function(){return[P("div",kn,[M(r,{options:Q}),M(Ie,{placement:"right"},{default:I(function(){return[P("div",Cn,[M(a,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[0]||(t[0]=P("span",{class:"bt-link"},"售前客服",-1))])]}),_:1}),M(u,{class:"ml-[12px] flex items-center",onClick:A(Oe)},{default:I(function(){return n(t[1]||(t[1]=[P("div",{class:"flex items-center"},[P("span",{class:"svgtofont-desired text-[1.6rem]"}),P("span",null,"需求反馈")],-1)]))}),_:1},8,["onClick"])])]}),"header-right":I(function(){return[P("div",Dn,[M(A(ce),{class:"!w-[140px] mr-[10px]"}),M(A(me),{type:"ssl-certificate",placeholder:"请输入证书名称",class:"!w-[270px] mr-[10px]"}),M(A(he))])]}),content:I(function(){return[M(A(se),{"min-height":A(R)},null,8,["min-height"])]}),"footer-left":I(function(){return[M(A(ye))]}),"footer-right":I(function(){return[M(A(oe))]}),_:1})])}}}),Sn=j(we()).encryptIsRefresh,En=E(!1),Tn=E(!1),On=E(null),Nn=E(null),Bn=function(e,n){Tn.value=n,On.value=e,En.value=!0},Pn=function(){var e=f(t().m(function e(n,u,i,s){var o,p,m,v,h;return t().w(function(e){for(;;)switch(e.n){case 0:return o=s.label,p=s.value,m=[],v=[],i.value.forEach(function(e){void 0!==e.hash&&null!==e.hash?v.push(e.hash):void 0!==e.index&&null!==e.index&&m.push(e.index)}),h=function(){var e=f(t().m(function e(){var n;return t().w(function(e){for(;;)switch(e.n){case 0:n=p,e.n="download"===n?1:"delete"===n?3:5;break;case 1:return e.n=2,me({ssl_hash:v.join(","),index:m.join(",")});case 2:case 4:return e.a(2,e.v);case 3:return e.n=4,Bn(i.value,!0);case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),e.n=1,c({title:"批量".concat(o,"证书"),area:46,component:function(){return d(function(){return r.import("./index-legacy118.js?v=1756369731")},void 0,r.meta.url)},compData:{resultTitle:"批量".concat(o,"证书"),resultData:i.value,resultColumn:[{label:"名称",prop:"title"},Ue()],autoTitle:"批量".concat(o,"证书")},showFooter:!0,onConfirm:function(){var e=f(t().m(function e(){var n,r,u;return t().w(function(e){for(;;)switch(e.n){case 0:if("delete"!==p){e.n=2;break}return e.n=1,h();case 1:return e.a(2);case 2:return n=l,e.n=3,h();case 3:r=e.v,u="正在批量".concat(o,"证书"),n({request:r,loading:u,success:function(e){var n=e.data;if(e.status){var t,r=[],u=[];if("download"===p)n.url&&window.open(n.url,"_blank","noopener,noreferrer"),(null===(t=n.finish_list)||void 0===t?void 0:t.length)>0&&n.finish_list.forEach(function(e){var n=JSON.parse(e.cert.info);r.push({name:n.issuer,status:e.status})}),u=[{label:"名称",prop:"name"},{label:"结果",render:function(e){var n="",t="";return e.status?(t="text-primary",n="下载成功"):(t="text-danger",n="下载失败"),z("span",{class:t},n)}}];else a(n.finish_list)&&(n.finish_list.forEach(function(e){r.push({name:e.name,status:e.status,msg:e.status?"删除成功":e.msg})}),u=[{label:"名称",prop:"name"},{label:"结果",render:function(e){var n=e.msg,t="";return t=e.status?"text-primary":"text-danger",z("span",{class:t},n)}}],Sn.value=!0);be({resultTitle:"批量".concat(o,"证书"),resultData:r,resultColumn:u})}}});case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(n,t,r,a){return e.apply(this,arguments)}}(),Rn=function(){var e=f(t().m(function e(n){var a,u;return t().w(function(e){for(;;)switch(e.n){case 0:return a=l,e.n=1,he(n.crontab_id);case 1:u=e.v,a({request:u,loading:"正在获取异常日志",success:function(e){var t=e.msg;c({title:"续签异常/失败日志",area:66,component:function(){return d(function(){return r.import("./exception-log-legacy.js?v=1756369731")},void 0,r.meta.url)},compData:{reason:n.crontab_data.error_msg,logContent:t||"暂无异常日志"}})}});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),An={class:"flex items-center"},Mn={class:"flex items-center ml-[12px]"},In={class:"flex items-center"};var Ln=D({__name:"index",setup:function(e,a){var i=a.expose,s=ue().refs,m=s.tabActive,C=s.expiringCertificateCount,D=s.expiredCertificateCount,S=s.typeList,E=j(we()),T=E.encryptIsRefresh,O=E.encryptSearchType,R=o().mainHeight;ee();var V,q,U=[{content:"申请证书",dropdownClass:"bg-white",splitButton:!0,active:!0,event:function(){c({isAsync:!0,title:"申请Let's Encrypt证书",area:64,component:function(){return d(function(){return r.import("./apply-lest-ssl-legacy.js?v=1756369731")},void 0,r.meta.url)}})}}],H=F([]),ae=function(){En.value=!1},se=Fe({key:"type",name:"证书分组",options:function(){return[{label:"全部分组",value:"all"}]},event:{get:(V=f(t().m(function e(){var r;return t().w(function(e){for(;;)switch(e.n){case 0:return r=[],e.n=1,l({request:fe(),data:Array,success:function(e){r=[{label:"全部分组",value:"all"}].concat(n(e.map(function(e){return{label:e.name,value:String(e.group_id)}})))}});case 1:return S.value=r,e.a(2,r)}},e)})),function(){return V.apply(this,arguments)}),add:function(e){return de({name:e.name,group_id:Date.now()})},delete:function(e){return pe({group_id:e.id})}},ignore:["0"],field:"name",showEdit:!1}),oe=_([{label:"批量分组",value:"group",event:function(e,n,t,r){return xe(t.value,"certificate")}},{label:"批量设置告警",value:"alarm",event:function(e,n,t,r){ke(t.value,Te.ENCRYPT)}},{label:"下载",value:"download",event:Pn},{label:"删除",value:"delete",event:Pn}]),ce=v({request:(q=f(t().m(function e(n){var r,a,u,l;return t().w(function(e){for(;;)switch(e.n){case 0:return"-1"===(r={p:n.p,group_id:h(n.type)||"all"===n.type?"-1":n.type,search:n.search,limit:n.limit,status_id:O.value,cert_type:"3"}).group_id&&delete r.group_id,"-1"===r.status_id&&delete r.status_id,""===r.search&&delete r.search,e.n=1,ve(r);case 1:return a=e.v,u=a.data,H.value=u.data,(l=y(u))("will_num")&&(C.value=(null==u?void 0:u.will_num)||0),l("end_num")&&(D.value=(null==u?void 0:u.end_num)||0),e.a(2,{data:u.data,total:g(u.page),other:{search_history:u.search_history}})}},e)})),function(e){return q.apply(this,arguments)}),columns:[He(),{label:"认证域名",render:function(e){var n;return(null===(n=e.domainName)||void 0===n?void 0:n.join(", "))||"--"}},{label:"部署网站",isCustom:!0,render:function(e){var n;return(null===(n=e.use_site)||void 0===n?void 0:n.join(", "))||"--"}},{label:"分组",prop:"group_name",width:100,showOverflowTooltip:!0,isCustom:!1},{label:"到期时间",isCustom:!0,render:function(e){var n,t,r,a=function(e,n){return M("span",{class:e<=10?"text-danger":n},[e>0?"剩余".concat(e,"天"):"已过期"])},u=(r=e.endDay)<=0||r<=7?"text-danger":r<=15?"text-orange":"text-[#20a53a]";return"1"===e.type?e.endDate?a(e.endDay,e.endDay<=30?"text-orange":u):M("span",null,[L("--")]):"2"===e.type?null!=e&&e.endDay&&0!==(null==e?void 0:e.endDay)?a(e.endDay,e.endDay<=30?"text-orange":u):M("span",null,[L("--")]):M("span",{class:null!==(n=e.domainName)&&void 0!==n&&n.length?u:"text-[#333]"},[null!==(t=e.domainName)&&void 0!==t&&t.length?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--"])}},{label:"验证方式",isCustom:!0,prop:"auth_type",render:function(e,n){return M("span",null,["dns"===e.auth_type?"DNS验证":"文件验证"])}},{label:"订单状态",isCustom:!0,renderHeader:function(){var e=[{title:"全部",key:"-1"},{title:"验证中",key:"0"},{title:"未到期/订单完成",key:"1"},{title:"即将到期",key:"2"},{title:"已到期",key:"3"}];return z("div",{class:"flex items-center flex-nowrap"},["",z(J,{onCommand:function(e){O.value=e,Se()}},{default:function(){return z("span",{class:"text-[1.2rem] flex items-center"},[[M("span",{class:"status-header-text"},[L("订单状态"),"-1"===O.value?"(全部)":"(".concat(e.find(function(e){return e.key===O.value}).title,")")])],z("i",{class:"svgtofont-el-arrow-down "})])},dropdown:function(){var n,t;return M(X,null,"function"==typeof(t=n=e.map(function(e){return M(W,{command:e.key},{default:function(){return[e.title]}})}))||"[object Object]"===Object.prototype.toString.call(t)&&!Z(t)?n:{default:function(){return[n]}})}})])},render:function(e){var n;if(null==e||!e.order_status||""===(null==e?void 0:e.order_status))return M("span",{class:"text-[#20a53a]"},[L("订单完成")]);switch(e.order_status){case"pending":return null!==(n=e.domainName)&&void 0!==n&&n.length&&e.endDay>0?M("span",{class:"text-[#e6a23c]"},[L("待验证")]):M("span",null,[L("--")]);case"invalid":return M(ne,{content:"验证失败，请尝试删除此订单后重新申请",placement:"top"},{default:function(){return[M("span",{class:"text-[#e6a23c]"},[e.order_status_nm])]}});default:return M("span",{class:"text-[#20a53a]"},[L("订单完成")])}}},{label:"自动续签",renderHeader:function(){return M("div",{class:"flex items-center"},[M("span",null,[L("自动续签")]),M(G,{placement:"top-start",width:"200",trigger:"hover",content:"只支持let's Encrypt证书订单续签"},{reference:function(){return M("span",{class:" ml-[4px] bt-ico-ask"},[L("?")])}})])},isCustom:!1,render:function(e){var n=!("3"!==e.type||!e.order_status||-1===e.crontab_id),t="3"!==e.type||"valid"!==e.order_status;return M("span",{class:"flex items-center"},[M(te,{size:"small",modelValue:n,"onUpdate:modelValue":function(e){return n=e},disabled:t,onChange:function(n){n?(e.crontab_id=1,Pe(u(u({},e),{},{cancel:function(){re(function(){e.crontab_id=-1})}}))):Re(e)}},null),e.crontab_data&&-1===Number(e.crontab_data.status)&&M("span",{class:"bt-link !text-danger ml-[4px]",onClick:function(){return Rn(e)}},[L("异常")])])}},{label:"操作",align:"right",fixed:"right",width:280,render:function(e){var n,t=[];"valid"===e.order_status&&(t.push(M("span",{class:"cursor-pointer bt-link",onClick:function(){Ae(e)}},[L("续签")])),Be(e,Te.ENCRYPT)&&t.push(M("span",{class:"cursor-pointer bt-link",onClick:function(){return _e(u(u({},e),{},{cancel:function(){}}))}},[L("到期告警")]))),"pending"!==e.order_status&&"invalid"!==e.order_status?(t.push(M("span",{class:"cursor-pointer bt-link",onClick:function(){return De(e)}},[L("部署")])),t.push(M("span",{class:"cursor-pointer bt-link",onClick:function(){return Ce(e)}},[L("下载")]))):null!==(n=e.domainName)&&void 0!==n&&n.length&&e.endDay>0&&e.order_status&&"invalid"!==e.order_status&&t.push(M("span",{class:"cursor-pointer bt-link",onClick:function(){return Ne(e)}},[L("验证")])),t.push(M("span",{class:"cursor-pointer bt-link",onClick:function(){return Bn(e,!1)}},[L("删除")]));var r=[];return t.map(function(e,n){r.push(e),n<t.length-1&&r.push(M(Y,{direction:"vertical"},null))}),t=r}}],extension:[se,oe,b(T),x("search",{name:"ssl",key:"get_cert_list",list:[],showRecommend:!1})]}),me=ce.BtTable,he=ce.BtPage,ye=(ce.BtRefresh,ce.BtTableCategory),ge=ce.BtRecommendSearch,be=ce.BtColumn,je=ce.BtBatch,Se=(ce.BtErrorMask,ce.refresh);return $(function(){m.value=K().name}),i({init:Se}),function(e,t){var r=ie,a=w,u=p,l=k,i=le;return N(),B("div",null,[M(i,null,{"header-left":I(function(){return[P("div",An,[M(r,{options:U}),M(Ie,{placement:"right"},{default:I(function(){return[P("div",Mn,[M(a,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=P("span",{class:"bt-link"},"联系客服",-1))])]}),_:1}),M(u,{class:"ml-[12px] flex items-center",onClick:A(Oe)},{default:I(function(){return n(t[3]||(t[3]=[P("div",{class:"flex items-center"},[P("span",{class:"svgtofont-desired text-[1.6rem]"}),P("span",null,"需求反馈")],-1)]))}),_:1},8,["onClick"])])]}),"header-right":I(function(){return[P("div",In,[M(A(ye),{class:"!w-[140px] mr-[10px]"}),M(A(ge),{type:"ssl-certificate",placeholder:"请输入证书名称",class:"!w-[270px] mr-[10px]"}),M(A(be))])]}),content:I(function(){return[M(A(me),{"min-height":A(R)},null,8,["min-height"])]}),"footer-left":I(function(){return[M(A(je))]}),"footer-right":I(function(){return[M(A(he))]}),popup:I(function(){return[M(l,{title:"证书删除确认",modelValue:A(En),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Q(En)?En.value=e:null}),area:["auto"],onCancel:t[1]||(t[1]=function(e){return A(Nn).handleCancel()})},{default:I(function(){return[M(Qe,{ref_key:"delRef",ref:Nn,delType:"encrypt",isMulti:A(Tn),compData:A(On),onCancel:ae},null,8,["isMulti","compData"])]}),_:1},8,["modelValue"])]}),_:1})])}}}),Vn=j(we()).otherIsRefresh,qn=E(!1),Un=E(!1),Hn=E(null),Fn=E(null),Gn=function(e,n){Un.value=n,Hn.value=e,qn.value=!0},zn=function(){var e=f(t().m(function e(n,u,i,s){var o,p,v,h,y,g;return t().w(function(e){for(;;)switch(e.n){case 0:return o=s.label,p=s.value,v=[],h=[],y=[],i.value.forEach(function(e){void 0!==e.hash&&null!==e.hash?h.push(e.hash):void 0!==e.index&&null!==e.index?v.push(e.index):void 0!==e.oid&&null!==e.oid&&y.push(e.oid)}),g=function(){var e=f(t().m(function e(){var n;return t().w(function(e){for(;;)switch(e.n){case 0:n=p,e.n="download"===n?1:"delete"===n?3:5;break;case 1:return e.n=2,me({ssl_hash:h.join(","),index:v.join(","),oid:y.join(",")});case 2:case 4:return e.a(2,e.v);case 3:return e.n=4,Gn(i.value,!0);case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),e.n=1,c({title:"批量".concat(o,"证书"),area:46,component:function(){return d(function(){return r.import("./index-legacy118.js?v=1756369731")},void 0,r.meta.url)},compData:{resultTitle:"批量".concat(o,"证书"),resultData:i.value,resultColumn:[{label:"名称",prop:"title"},Ue()],autoTitle:"批量".concat(o,"证书")},showFooter:!0,onConfirm:function(){var e=f(t().m(function e(){var n,r,u;return t().w(function(e){for(;;)switch(e.n){case 0:if("delete"!==p){e.n=2;break}return e.n=1,g();case 1:return e.a(2);case 2:return n=m.load("正在批量".concat(o,"证书")),r=l,e.n=3,g();case 3:u=e.v,r({request:u,success:function(e){var t=e.data;if(e.status){var r=[],u=[];"download"===p?(t.url&&window.open(t.url,"_blank","noopener,noreferrer"),a(t.finish_list)&&t.finish_list.forEach(function(e){var n=JSON.parse(e.cert.info);r.push({name:n.issuer,status:e.status})}),u=[{label:"名称",prop:"name"},{label:"结果",render:function(e){var n="",t="";return e.status?(t="text-primary",n="下载成功"):(t="text-danger",n="下载失败"),z("span",{class:t},n)}}]):a(t.finish_list)&&(t.finish_list.forEach(function(e){r.push({name:e.name,status:e.status,msg:e.status?"删除成功":e.msg})}),u=[{label:"名称",prop:"name"},{label:"结果",render:function(e){var n=e.msg,t="";return t=e.status?"text-primary":"text-danger",z("span",{class:t},n)}}],Vn.value=!0),be({resultTitle:"".concat(o,"证书"),resultData:r,resultColumn:u}),n&&n.close()}}});case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(n,t,r,a){return e.apply(this,arguments)}}(),Jn=function(){var e=f(t().m(function e(n){var r;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=m.load("正在上传云端证书，请稍候..."),e.n=1,ye({ssl_id:n.id,ssl_hash:n.hash});case 1:Vn.value=!0,r&&r.close(),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,r&&r.close(),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(n){return e.apply(this,arguments)}}(),Wn=function(){l({request:ge(),loading:"正在从云端同步证书，请稍后...",message:!0,success:function(e){e.status&&(Vn.value=!0)}})},Xn=function(){var e=f(t().m(function e(n){var r,a;return t().w(function(e){for(;;)switch(e.n){case 0:return r=l,e.n=1,ce({ssl_id:n.id,ssl_hash:n.hash,local:!1,cloud:!0});case 1:a=e.v,r({loading:"正在从云端删除证书，请稍后...",message:!0,request:a,success:function(e){e.status&&(Vn.value=!0)}});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Yn={class:"flex items-center"},$n={class:"flex items-center ml-[12px]"},Kn={class:"flex items-center"},Qn=D({__name:"index",setup:function(e,r){var a,i,s=r.expose,c=ue().refs,d=c.tabActive,m=c.certificateParams,C=c.expiringCertificateCount,D=c.expiredCertificateCount,S=c.typeList,E=j(we()).otherIsRefresh,T=o().mainHeight,O=[{content:"上传证书",dropdownClass:"bg-white",splitButton:!0,active:!0,event:function(){Me()}},{content:"从云端同步",dropdownClass:"bg-white",splitButton:!0,event:function(){Wn()}}],R=F([]),V=function(){qn.value=!1},q=Fe({key:"type",name:"证书分组",options:function(){return[{label:"全部分组",value:"all"}]},event:{get:(a=f(t().m(function e(){var r;return t().w(function(e){for(;;)switch(e.n){case 0:return r=[],e.n=1,l({request:fe(),data:Array,success:function(e){r=[{label:"全部分组",value:"all"}].concat(n(e.map(function(e){return{label:e.name,value:String(e.group_id)}})))}});case 1:return S.value=r,e.a(2,r)}},e)})),function(){return a.apply(this,arguments)}),add:function(e){return de({name:e.name,group_id:Date.now()})},delete:function(e){return pe({group_id:e.id})}},ignore:["0"],field:"name",showEdit:!1}),U=_([{label:"批量分组",value:"group",event:function(e,n,t,r){return xe(t.value,"certificate")}},{label:"批量设置告警",value:"alarm",event:function(e,n,t,r){ke(t.value,Te.OTHER)}},{label:"下载",value:"download",event:zn},{label:"删除",value:"delete",event:zn}]),H=v({request:(i=f(t().m(function e(n){var r,a,u,l;return t().w(function(e){for(;;)switch(e.n){case 0:return"-1"===(r={p:n.p,group_id:h(n.type)||"all"===n.type?"-1":n.type,search:n.search,limit:n.limit,status_id:m.value.status_id,cert_type:"4"}).group_id&&delete r.group_id,"-1"===r.status_id&&delete r.status_id,""===r.search&&delete r.search,e.n=1,ve(r);case 1:return a=e.v,u=a.data,R.value=u.data,(l=y(u))("will_num")&&(C.value=(null==u?void 0:u.will_num)||0),l("end_num")&&(D.value=(null==u?void 0:u.end_num)||0),e.a(2,{data:u.data,total:g(u.page),other:{search_history:u.search_history}})}},e)})),function(e){return i.apply(this,arguments)}),columns:[He(),{label:"认证域名",render:function(e){var n;return(null===(n=e.domainName)||void 0===n?void 0:n.join(", "))||"--"}},{label:"证书类型",prop:"title",showOverflowTooltip:!0,width:180},{label:"部署网站",isCustom:!0,render:function(e){var n;return(null===(n=e.use_site)||void 0===n?void 0:n.join(", "))||"--"}},{label:"分组",prop:"group_name",width:100,showOverflowTooltip:!0,isCustom:!1},{label:"到期时间",isCustom:!0,render:function(e){var n,t,r,a=function(e,n){return M("span",{class:e<=10?"text-danger":n},[e>0?"剩余".concat(e,"天"):"已过期"])},u=(r=e.endDay)<=0||r<=7?"text-danger":r<=15?"text-orange":"text-[#20a53a]";return"1"===e.type?e.endDate?a(e.endDay,e.endDay<=30?"text-orange":u):M("span",null,[L("--")]):"2"===e.type?null!=e&&e.endDay&&0!==(null==e?void 0:e.endDay)?a(e.endDay,e.endDay<=30?"text-orange":u):M("span",null,[L("--")]):M("span",{class:null!==(n=e.domainName)&&void 0!==n&&n.length?u:"text-[#333]"},[null!==(t=e.domainName)&&void 0!==t&&t.length?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--"])}},{label:"操作",align:"right",fixed:"right",width:280,render:function(e){var n=function(e,n){return M("span",{class:"cursor-pointer bt-link",onClick:n},[e])},t=[];return e.endDay>0&&(t.push(n("部署",function(){return De(e)})),t.push(n("下载",function(){return Ce(e)})),-1===e.cloud_id?t.push(n("上传云端",function(){return Jn(e)})):t.push(n("从云端删除",function(){return Xn(e)})),Be(e,Te.OTHER)&&t.push(n("到期告警",function(){return _e(u(u({},e),{},{cancel:function(){}}))}))),t.push(n("删除",function(){return Gn(e,!1)})),t.map(function(e,n){return M("div",null,[e,n<t.length-1&&M(Y,{direction:"vertical"},null)])})}}],extension:[q,U,b(E),x("search",{name:"ssl",key:"get_cert_list",list:[],showRecommend:!1})]}),G=H.BtTable,z=H.BtPage,J=(H.BtRefresh,H.BtTableCategory),W=H.BtRecommendSearch,X=H.BtColumn,Z=H.BtBatch,ee=(H.BtErrorMask,H.refresh);return $(function(){d.value=K().name}),s({init:ee}),function(e,t){var r=ie,a=w,u=p,l=k,i=le;return N(),B("div",null,[M(i,null,{"header-left":I(function(){return[P("div",Yn,[M(r,{options:O}),M(Ie,{placement:"right"},{default:I(function(){return[P("div",$n,[M(a,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=P("span",{class:"bt-link"},"联系客服",-1))])]}),_:1}),M(u,{class:"ml-[12px] flex items-center",onClick:A(Oe)},{default:I(function(){return n(t[3]||(t[3]=[P("div",{class:"flex items-center"},[P("span",{class:"svgtofont-desired text-[1.6rem]"}),P("span",null,"需求反馈")],-1)]))}),_:1},8,["onClick"])])]}),"header-right":I(function(){return[P("div",Kn,[M(A(J),{class:"!w-[140px] mr-[10px]"}),M(A(W),{type:"ssl-certificate",placeholder:"请输入证书名称",class:"!w-[270px] mr-[10px]"}),M(A(X))])]}),content:I(function(){return[M(A(G),{"min-height":A(T)},null,8,["min-height"])]}),"footer-left":I(function(){return[M(A(Z))]}),"footer-right":I(function(){return[M(A(z))]}),popup:I(function(){return[M(l,{title:"证书删除确认",modelValue:A(qn),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Q(qn)?qn.value=e:null}),area:["auto"],onCancel:t[1]||(t[1]=function(e){return A(Fn).handleCancel()})},{default:I(function(){return[M(Qe,{ref_key:"delRef",ref:Fn,delType:"other",isMulti:A(Un),compData:A(Hn),onCancel:V},null,8,["isMulti","compData"])]}),_:1},8,["modelValue"])]}),_:1})])}}}),Zn={class:"text-[1.3rem]"};e("default",D({__name:"index",setup:function(e){var n=j(we()).activeTabs,t=ue().refs,r=t.expiringCertificateCount,a=t.expiredCertificateCount,u=E([{label:"商用SSL",name:"ssl",render:function(){return M(wn,null,null)}},{label:"测试证书",name:"test",lazy:!0,render:function(){return M(jn,null,null)}},{label:"Let's Encrypt",name:"encrypt",lazy:!0,render:function(){return M(Ln,null,null)}},{label:"其他证书",name:"other",lazy:!0,render:function(){return M(Qn,null,null)}}]);return function(e,t){var l=ae,i=C;return N(),B("div",null,[M(l,{type:"warning",class:"!mb-[1.2rem] !p-[1.2rem]",closable:!1,"show-icon":""},{title:I(function(){return[P("span",Zn,[P("span",null," 提示：即将到期证书 "+R(A(r))+" 个，已过期证书 "+R(A(a))+" 个",1)])]}),_:1}),M(i,{type:"card",modelValue:A(n),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Q(n)?n.value=e:null}),options:A(u)},null,8,["modelValue","options"])])}}}))}}})}();
