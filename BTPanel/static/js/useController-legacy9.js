!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,u=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw u}}}}function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var i=r&&r.prototype instanceof c?r:c,l=Object.create(i.prototype);return s(l,"_invoke",function(n,r,a){var o,c,i,s=0,l=a||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,c=0,i=t,p.n=n,u}};function d(n,r){for(c=n,i=r,e=0;!f&&s&&!a&&e<l.length;e++){var a,o=l[e],d=p.p,v=o[2];n>3?(a=v===r)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(c=0,p.v=r,p.n=o[1]):d<v&&(a=n<3||o[0]>r||r>v)&&(o[4]=n,o[5]=r,p.n=v,c=0))}if(a||n>1)return u;throw f=!0,r}return function(a,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,v),c=l,i=v;(e=c<2?t:i)||!f;){o||(c?c<3?(c>1&&(p.n=-1),d(c,i)):p.n=i:p.v=i);try{if(s=2,o){if(c||(a="next"),e=o[a]){if(!(e=e.call(o,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=t}else if((e=(f=p.n<0)?i:n.call(r,p))!==u)break}catch(e){o=t,c=1,i=e}finally{s=1}}return{value:e,done:f}}}(n,a,o),!0),l}var u={};function c(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),d=f.prototype=c.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=f,s(d,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,a,"GeneratorFunction"),s(d),s(d,a,"Generator"),s(d,r,function(){return this}),s(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:v}})()}function s(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}s=function(t,e,n,r){function o(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},s(t,e,n,r)}function l(t,e,n,r,a,o,u){try{var c=t[o](u),i=c.value}catch(t){return void n(t)}c.done?e(i):Promise.resolve(i).then(r,a)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function u(t){l(o,r,a,u,c,"next",t)}function c(t){l(o,r,a,u,c,"throw",t)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./useStore-legacy9.js?v=1756369731"],function(t,r){"use strict";var a,o,c,s,l,p,d,v,y,m,b,g,h,w,j,O,S,_,k,P,A;return{setters:[function(t){a=t.eD,o=t.aj,c=t.I,s=t.K,l=t.eE,p=t.eF,d=t.eG,v=t.o,y=t.eH,m=t.eI,b=t.eJ,g=t.eK,h=t.b,w=t.eL},function(t){j=t.r,O=t.e},function(t){S=t.c,_=t.h,k=t.i},function(t){P=t.c},function(t){A=t.u}],execute:function(){j(!1);t("h",function(){var t=f(i().m(function t(e,n,r){var a;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,s({loading:"正在".concat(n?"修改":"添加","节点，请稍后..."),request:n?l(e):p(e),data:{status:Boolean},message:!0,success:function(t){N.value=[],T.value=!0,r&&r(t)}});case 1:return a=t.v,t.a(2,a.status);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}));return function(e,n,r){return t.apply(this,arguments)}}());var r=A(),T=r.isRefreshNodeList,E=(r.rowData,r.nodeCategory),N=r.nodeStatus,q=r.forcedFlushes,x=(t("a",function(t){return{label:"状态",isCustom:!0,render:function(t){return O("span",{class:"node_state state_"+t.data.status},[["在线","","离线","异常","重启中..."][t.data.status]])}}}),{});t("g",function(){var t=f(i().m(function t(e){var n,r,c,s,l,f,p;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return e.category_id||0===e.category_id||delete e.category_id,n=JSON.stringify(e),r=Date.now(),t.p=1,t.n=2,a(u({},e));case 2:return c=t.v,s=c.data,l=s.data,f=s.page,p=s.error,x[n]={data:{data:l,total:o(f),other:{error:p}},timestamp:r},t.a(2,x[n].data);case 3:if(t.p=3,!("canceled"===t.v.message&&x[n]&&r-x[n].timestamp<100)){t.n=4;break}return t.a(2,x[n].data);case 4:return t.a(2,{data:[],total:0});case 5:return t.p=5,delete e.refresh,q.value=0,t.f(5);case 6:return t.a(2)}},t,null,[[1,3,5,6]])}));return function(e){return t.apply(this,arguments)}}()),t("d",function(){var t=f(i().m(function t(e){return i().w(function(t){for(;;)switch(t.n){case 0:s({request:d({address:e.address,api_key:e.api_key}),loading:"正在前往访问节点，请稍后...",success:function(t){t.data.status&&window.open("".concat(t.data.msg.target_panel_url),"_blank")}});case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),t("e",function(){var t=f(i().m(function t(e){return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,v({icon:"warning-filled",title:"删除节点【".concat(e.address,"】"),content:"删除节点后，将失去该节点的访问权限，是否继续操作？"});case 1:return t.n=2,s({loading:"正在删除节点，请稍后...",request:y({ids:e.id}),message:!0,success:function(t){N.value=[],T.value=!0}});case 2:t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}()),t("c",f(i().m(function t(){var e;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,e=[],t.n=1,s({request:m(),data:{msg:Array},success:function(t){var r=t.msg;e=[{label:"全部分类",value:"all"},{label:"默认分类",value:"0"}].concat(n(r.map(function(t){return{label:t.name,value:String(t.id)}}))),E.value=e}});case 1:return t.a(2,e||[]);case 2:return t.p=2,t.v,t.a(2,[])}},t,null,[[0,2]])}))),t("s",function(){var t=f(i().m(function t(e,n,r,a){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,S({name:"节点分类",options:r.value.filter(function(t){return"all"!==t.value}),selectList:e.value,request:function(){var t=f(i().m(function t(r,o){var u,c,l,f;return i().w(function(t){for(;;)switch(t.n){case 0:return u=e.value.map(function(t){return t.id}),c=a.enable,l=a.exclude,f=_(e.value,l,c,{params:{category_id:Number(r.id),ids:JSON.stringify(u)}}),t.n=1,s({loading:"正在批量设置节点分类，请稍后...",request:g(f),message:!0});case 1:n(),N.value=[],T.value=!0,o();case 2:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)}));return function(e,n,r,a){return t.apply(this,arguments)}}()),t("f",function(){var t=f(i().m(function t(n,r,a,o,u,c){var s,l,p,d,v,y,m,g,j,O,S;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(s=o.label,l=o.value,p=c.enable,d=c.exclude,v=new Map([["delete","批量删除已选的节点，删除后将失去该节点的访问和操作权限"],["panel","批量重启已选的节点面板"],["server","批量重启已选的节点服务器"]]),y=function(){var t=f(i().m(function t(){var e,n,r,o,u,c;return i().w(function(t){for(;;)switch(t.n){case 0:e=new Map([["delete",w]]),n=e.get(l),c=l,t.n="start"===c||"stop"===c?1:"delete"===c?4:7;break;case 1:if(r="start"===l?1:0,o=_(a.value,d,p,{params:{status:r}}),!n){t.n=3;break}return t.n=2,n(o);case 2:case 5:return t.a(2,t.v);case 3:case 6:return t.a(3,7);case 4:if(u=_(a.value,d,p,{params:{ids:JSON.stringify(a.value.map(function(t){return t.id}))}}),!n){t.n=6;break}return t.n=5,n(u);case 7:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),m=function(){var t=f(i().m(function t(e,n){var r;return i().w(function(t){for(;;)switch(t.n){case 0:return r=e.id,t.n=1,b(r,n);case 1:return t.a(2,t.v)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),"panel"!==l&&"server"!==l){t.n=7;break}g=e(a.value),t.p=1,g.s();case 2:if((j=g.n()).done){t.n=4;break}if("local"!==(O=j.value).api_key||"local"!==O.app_key){t.n=3;break}return h().error("本机节点无法操作"),t.a(2);case 3:t.n=2;break;case 4:t.n=6;break;case 5:t.p=5,S=t.v,g.e(S);case 6:return t.p=6,g.f(),t.f(6);case 7:return t.n=8,n({title:"批量".concat(s),content:"".concat(v.get(l),"，是否继续操作！"),column:[{label:"地址",prop:"address"},P()],onConfirm:function(){var t=f(i().m(function t(){var e,n,a,o;return i().w(function(t){for(;;)switch(t.n){case 0:if("panel"!==l&&"server"!==l){t.n=2;break}return t.n=1,r(function(t){return m(t,l)});case 1:return T.value=!0,t.a(2);case 2:return t.n=3,y();case 3:n=t.v,N.value=[],T.value=!0,a=k(n.data),a.data,o=a.msg,u&&u(),null!=n&&n.status||null!=n&&null!==(e=n.data)&&void 0!==e&&e.status?h().success(o||"操作成功！"):h().error(o||"操作失败，请重试");case 4:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 8:return t.a(2)}},t,null,[[1,5,6,7]])}));return function(e,n,r,a,o,u){return t.apply(this,arguments)}}()),t("b",function(){return{isCustom:!0,label:"CPU/内存",render:function(t){var e,n;return 4==(null==t||null===(e=t.data)||void 0===e?void 0:e.status)?"--":2==(null==t||null===(n=t.data)||void 0===n?void 0:n.status)?"-- / --":"".concat(t.data.cpu_usage,"核 (").concat(t.data.cpu,"%) / ").concat(t.data.memNewTotal," (").concat(t.data.memory,"%)")}}}),t("u",function(){x={},c(["/mod/node/node/get_category_list","/panel/public/get_soft_status","/mod/node/node/get_node_list"])}),t("r",function(){var t=f(i().m(function t(e,n){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,v({icon:"warning-filled",title:"重启".concat("panel"===n?"面板":"服务器"),content:"即将重启节点【".concat(e.remarks,"】").concat("panel"===n?"面板":"服务器","，是否继续操作？")});case 1:return t.n=2,s({request:b(e.id,n),loading:"正在重启".concat("panel"===n?"面板":"服务器","，请稍后..."),message:!0,success:function(){T.value=!0}});case 2:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}())}}})}();
