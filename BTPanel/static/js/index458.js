import{K as a,k as e}from"./utils-lib.js?v=1756369731";import{c as t,r as s,aB as l,p as n,G as r,q as i,v as m,y as o,e as u,x as c,P as d,C as p,F as f,a_ as y,H as b,al as v,z as _}from"./base-lib.js?v=1756369731";import{aX as x,aY as g,aZ as j,a_ as q}from"./firewall.js?v=1756369731";import{u as h}from"./column.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";const w={class:"p-[2rem]"},D={key:0,class:"flex items-center mb-[2rem]"},k={class:"flex items-center justify-center mb-[1.2rem] bg-[#fafafa] border-1 border-[#ddd] py-[1.2rem]"},P={class:"text-[1.2rem]"},S={class:"font-bold text-[1.8rem] mt-[.8rem]"},A=t({__name:"index",props:{compData:{default:()=>({})}},setup(t){const A=t,C=s(!1),I=s(),V=s(!1),z=s([{title:"封锁的IP总数",value:"total_banned",num:0},{title:"连接失败总数",value:"total_failed",num:0},{title:"当前封锁IP数",value:"currently_banned",num:0},{title:"当前连接失败次数",value:"currently_failed",num:0}]),B=async e=>{C.value=!e,await a({loading:"正在设置防扫描开关，请稍候...",request:x({status:e?1:0}),message:!0}),C.value=e},F=async()=>{"AntiScan"==A.compData.type&&(async()=>{try{const{data:e}=await a({loading:"正在获取防扫描开关状态，请稍候...",request:q()});C.value=Boolean(e.status)}catch(e){}})(),(async()=>{const e=await a({loading:V,request:A.compData.requestFn()});z.value.forEach(a=>{a.num=Number(e.data[a.value])||0}),I.value=e.data.banned_ip_list})()},H=[{label:"IP",prop:"ip",render:a=>l("span",a)},h([{onClick:e=>(async e=>{const t="AntiScan"===A.compData.type;await a({loading:"正在解封,请稍后...",request:t?g({data:JSON.stringify({ip:e})}):j({ip:e}),message:!0}),F()})(e),title:"删除"}])];return n(F),(a,t)=>{const s=v,l=e,n=r("bt-loading");return i(),m("div",w,["AntiScan"==a.compData.type?(i(),m("div",D,[t[1]||(t[1]=o("span",{class:"mr-[.8rem]"},"防扫描开关",-1)),u(s,{modelValue:c(C),"onUpdate:modelValue":t[0]||(t[0]=a=>d(C)?C.value=a:null),size:"small",onChange:B},null,8,["modelValue"])])):p("",!0),o("div",k,[(i(!0),m(f,null,y(c(z),(a,e)=>(i(),m("div",{key:e,class:"flex flex-col items-center mx-[.4rem] p-[.8rem]"},[o("span",P,_(a.title),1),o("span",S,_(a.num||0),1)]))),128))]),b(u(l,{ref:"antiTable",column:H,data:c(I),"max-height":220},null,8,["data"]),[[n,c(V)],[n,"正在加载中，请稍后...","title"]])])}}});export{A as default};
