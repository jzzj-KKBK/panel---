!function(){function n(n){return function(n){if(Array.isArray(n))return t(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(n){if("string"==typeof n)return t(n,e);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(n,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,t,u="function"==typeof Symbol?Symbol:{},o=u.iterator||"@@iterator",a=u.toStringTag||"@@toStringTag";function i(e,u,o,a){var i=u&&u.prototype instanceof c?u:c,f=Object.create(i.prototype);return r(f,"_invoke",function(e,r,u){var o,a,i,c=0,f=u||[],s=!1,d={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(t,e){return o=t,a=0,i=n,d.n=e,l}};function p(e,r){for(a=e,i=r,t=0;!s&&c&&!u&&t<f.length;t++){var u,o=f[t],p=d.p,v=o[2];e>3?(u=v===r)&&(i=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=n):o[0]<=p&&((u=e<2&&p<o[1])?(a=0,d.v=r,d.n=o[1]):p<v&&(u=e<3||o[0]>r||r>v)&&(o[4]=e,o[5]=r,d.n=v,a=0))}if(u||e>1)return l;throw s=!0,r}return function(u,f,v){if(c>1)throw TypeError("Generator is already running");for(s&&1===f&&p(f,v),a=f,i=v;(t=a<2?n:i)||!s;){o||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(c=2,o){if(a||(u="next"),t=o[u]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(i=TypeError("The iterator does not provide a '"+u+"' method"),a=1);o=n}else if((t=(s=d.n<0)?i:e.call(r,d))!==l)break}catch(t){o=n,a=1,i=t}finally{c=1}}return{value:t,done:s}}}(e,o,a),!0),f}var l={};function c(){}function f(){}function s(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(r(t={},o,function(){return this}),t),p=s.prototype=c.prototype=Object.create(d);function v(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,s):(n.__proto__=s,r(n,a,"GeneratorFunction")),n.prototype=Object.create(p),n}return f.prototype=s,r(p,"constructor",s),r(s,"constructor",f),f.displayName="GeneratorFunction",r(s,a,"GeneratorFunction"),r(p),r(p,a,"Generator"),r(p,o,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:v}})()}function r(n,t,e,u){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}r=function(n,t,e,u){function a(t,e){r(n,t,function(n){return this._invoke(t,e,n)})}t?o?o(n,t,{value:e,enumerable:!u,configurable:!u,writable:!u}):n[t]=e:(a("next",0),a("throw",1),a("return",2))},r(n,t,e,u)}function u(n,t,e,r,u,o,a){try{var i=n[o](a),l=i.value}catch(n){return void e(n)}i.done?t(l):Promise.resolve(l).then(r,u)}function o(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function i(n){u(a,r,o,i,l,"next",n)}function l(n){u(a,r,o,i,l,"throw",n)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./index-legacy103.js?v=1756369731","./index-legacy112.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./index-legacy130.js?v=1756369731","./database-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./useStore-legacy2.js?v=1756369731","./useMethod-legacy4.js?v=1756369731","./validator-legacy.js?v=1756369731","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1756369731","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./index.vue_vue_type_style_index_0_scoped_b3c4124c_lang-legacy.js?v=1756369731"],function(t,r){"use strict";var u,a,i,l,c,f,s,d,p,v,y,g,m,h,b,_,w,j,x,S,k,C,O,V,A,T,U,G,M,P,q,F,J,D,E,L,N,H,I,R,z,B,K,$,Q,W,X,Y,Z,nn,tn,en,rn,un,on,an,ln,cn,fn,sn,dn,pn;return{setters:[function(n){u=n.K,a=n.at,i=n.h,l=n.c,c=n.J,f=n.k,s=n.a0,d=n.S,p=n.l,v=n.L},function(n){y=n._},function(n){g=n._},function(n){m=n.c,h=n.r,b=n.q,_=n.v,w=n.e,j=n.A,x=n.B,S=n.y,k=n.x,C=n.P,O=n.D,V=n.al,A=n.k,T=n.U,U=n.g,G=n.w,M=n.p,P=n.G,q=n.M,F=n.C,J=n.J,D=n.F,E=n.a_,L=n.H,N=n.ai,H=n.aj,I=n.z},function(n){R=n._},function(n){z=n.setAuthStatus,B=n.getModulesCloudServer,K=n.getMongodbConfig,$=n.getModulesList},function(n){Q=n.a,W=n.f,X=n.g,Y=n.u},function(n){Z=n.g},function(n){nn=n.o,tn=n.e,en=n.a,rn=n.d,un=n.f,on=n.i,an=n.l,ln=n.g,cn=n.h,fn=n.j},function(n){sn=n.e},function(n){dn=n._},function(n){pn=n._},null,null,null],execute:function(){var vn={class:"p-20px"},yn={class:"flex items-center"},gn=m({__name:"index",setup:function(t){var r=Z().refs.safetyStatus,l=h(!1),c=function(){var n=o(e().m(function n(){var t;return e().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,u({loading:"正在设置安全状态，请稍候...",request:z({data:JSON.stringify({status:r.value?"1":"0"})}),message:!0,success:function(n){n.status||(r.value=!r.value)}});case 1:n.n=3;break;case 2:n.p=2,t=n.v,a(t,"changeSafety");case 3:return n.a(2)}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}();return function(t,e){var u=O,o=V,a=i;return b(),_("div",null,[w(u,{type:"default",onClick:e[0]||(e[0]=function(n){return l.value=!0})},{default:j(function(){return n(e[3]||(e[3]=[x("安全认证",-1)]))}),_:1}),w(a,{title:"安全认证",modelValue:k(l),"onUpdate:modelValue":e[2]||(e[2]=function(n){return C(l)?l.value=n:null}),area:40},{default:j(function(){return[S("div",vn,[S("div",yn,[e[4]||(e[4]=S("span",{class:"mr-8px"},"安全认证：",-1)),w(o,{modelValue:k(r),"onUpdate:modelValue":e[1]||(e[1]=function(n){return C(r)?r.value=n:null}),width:36,onChange:c},null,8,["modelValue"])]),e[5]||(e[5]=S("ul",{class:"mt-8px leading-8 text-[1.2rem] list-disc ml-20px"},[S("li",null,"安全认证：开启后访问数据需要使用帐号和密码")],-1))])]}),_:1},8,["modelValue"])])}}}),mn={class:"flex items-center"},hn={class:"w-[20rem] truncate inline-block"};t("default",m({__name:"index",setup:function(t){var a=Z(),i=a.refs,m=i.isRefreshTable,V=i.isLoading,z=i.safetyStatus,vn=i.envStatus,yn=i.isHaveServer,bn=a.resetRefresh,_n=a.refreshTableList,wn=A({total:0,page:1,row:10}),jn=h([]),xn=T([]),Sn=h(null),kn=h("all"),Cn=h(""),On=h(""),Vn=h([]),An=rn(),Tn=U(function(){return!vn.value.setup&&!yn.value}),Un=function(){return[Q()].concat(n(un(on)),[W({event:function(n,t){return an(n,t)}}),ln(Vn.value,"mongodb"),X({table:"databases"}),Y([{onClick:function(n){return function(n){p({title:"【".concat(n.name,"】权限配置"),area:53,compData:n,showFooter:!0,component:function(){return v(function(){return r.import("./index-legacy132.js?v=1756369731")},void 0,r.meta.url)}})}(n)},title:"权限"},{onClick:function(n){return cn(n)},title:"工具"},{onClick:function(n){return on(n)},title:"改密"},{onClick:function(n){return fn(n)},title:"删除"}])])},Gn=function(){var n=o(e().m(function n(){return e().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,u({request:B({data:JSON.stringify({type:"mongodb"})},"mongodb"),data:[Array,Vn]});case 1:return Vn.value.length||(yn.value=!1),n.a(2,Vn.value)}},n)}));return function(){return n.apply(this,arguments)}}(),Mn=function(){var n=o(e().m(function n(){var t;return e().w(function(n){for(;;)switch(n.n){case 0:return""===(t={p:wn.page,limit:wn.row,tables:"databases",search:Cn.value,sid:"all"===kn.value?"":kn.value}).sid&&delete t.sid,n.n=1,u({loading:V,request:$({data:JSON.stringify(t)},"mongodb"),data:{data:[Array,jn],page:d(wn)}});case 1:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Pn=function(){var n=o(e().m(function n(){var t;return e().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,u({request:K(),data:{root:[String,On],authorization:[String,function(n){return{status:"enabled"===n||!1}}]}});case 1:t=n.v,z.value=t.status;case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),qn=function(){var n=o(e().m(function n(){return e().w(function(n){for(;;)switch(n.n){case 0:return Mn(),!Tn.value&&Pn(),n.n=1,Gn();case 1:xn.value=Un();case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}();return G(function(){return m.value},function(){var n=o(e().m(function n(t){return e().w(function(n){for(;;)switch(n.n){case 0:if(!t){n.n=1;break}return n.n=1,Mn();case 1:bn();case 2:return n.a(2)}},n)}));return function(t){return n.apply(this,arguments)}}()),M(function(){return qn()}),function(t,e){var r=R,u=O,o=l,a=N,i=H,d=c,p=f,v=s,m=g,h=y,A=P("bt-loading");return b(),_("div",null,[k(Tn)?(b(),q(r,{key:0},{content:j(function(){return[w(pn,{type:"MongoDB"})]}),_:1})):F("",!0),w(h,null,{"header-left":j(function(){return[S("div",mn,[w(u,{type:"primary",onClick:e[0]||(e[0]=function(n){return k(nn)(Gn)})},{default:j(function(){return n(e[7]||(e[7]=[x("添加数据库",-1)]))}),_:1}),k(z)?(b(),q(u,{key:0,onClick:e[1]||(e[1]=function(n){return k(tn)(k(On),function(){return Pn()})})},{default:j(function(){return n(e[8]||(e[8]=[x("root密码",-1)]))}),_:1})):F("",!0),w(u,{onClick:k(en)},{default:j(function(){return n(e[9]||(e[9]=[x("远程数据库",-1)]))}),_:1},8,["onClick"]),w(gn,{class:"mx-[10px]"}),w(dn,{"comp-data":k(Vn)},null,8,["comp-data"]),w(o,{onClick:e[2]||(e[2]=function(n){return k(sn)({name:"数据库",type:12})}),icon:"desired",class:"ml-[12px]",iconClass:"text-1.6rem"},{default:j(function(){return n(e[10]||(e[10]=[x("需求反馈",-1)]))}),_:1})])]}),"header-right":j(function(){return[w(i,{modelValue:k(kn),"onUpdate:modelValue":e[3]||(e[3]=function(n){return C(kn)?kn.value=n:null}),onChange:k(_n),class:J(["!w-[14rem] mr-[8px]",{"custom-types-bg-green":"all"!==k(kn)}])},{default:j(function(){return[w(a,{label:"全部",value:"all"}),(b(!0),_(D,null,E(k(Vn),function(n,t){return b(),q(a,{key:t,label:"".concat("all"!==k(kn)?"已选：":"").concat(n.ps),value:n.id},{default:j(function(){return[S("span",hn,I(n.ps),1)]}),_:2},1032,["label","value"])}),128))]}),_:1},8,["modelValue","onChange","class"]),w(d,{class:"w-[26rem]",modelValue:k(Cn),"onUpdate:modelValue":e[4]||(e[4]=function(n){return C(Cn)?Cn.value=n:null}),onSearch:k(_n),placeholder:"请输入数据库名称/备注"},null,8,["modelValue","onSearch"])]}),content:j(function(){return[L(w(p,{ref_key:"mongoDbTableRef",ref:Sn,column:k(xn),data:k(jn)},null,8,["column","data"]),[[A,k(V)]])]}),"footer-left":j(function(){return[w(v,{options:k(An),"table-ref":k(Sn)},null,8,["options","table-ref"])]}),"footer-right":j(function(){return[w(m,{total:k(wn).total,page:k(wn).page,"onUpdate:page":e[5]||(e[5]=function(n){return k(wn).page=n}),row:k(wn).row,"onUpdate:row":e[6]||(e[6]=function(n){return k(wn).row=n}),onChange:k(_n)},null,8,["total","page","row","onChange"])]}),_:1})])}}}))}}})}();
