!function(){function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,u=function(){};return{s:u,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw s}}}}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function u(n,r,a,u){var l=r&&r.prototype instanceof i?r:i,c=Object.create(l.prototype);return o(c,"_invoke",function(n,r,a){var u,i,l,o=0,c=a||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return u=t,i=0,l=e,f.n=n,s}};function d(n,r){for(i=n,l=r,t=0;!p&&o&&!a&&t<c.length;t++){var a,u=c[t],d=f.p,v=u[2];n>3?(a=v===r)&&(l=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=d&&((a=n<2&&d<u[1])?(i=0,f.v=r,f.n=u[1]):d<v&&(a=n<3||u[0]>r||r>v)&&(u[4]=n,u[5]=r,f.n=v,i=0))}if(a||n>1)return s;throw p=!0,r}return function(a,c,v){if(o>1)throw TypeError("Generator is already running");for(p&&1===c&&d(c,v),i=c,l=v;(t=i<2?e:l)||!p;){u||(i?i<3?(i>1&&(f.n=-1),d(i,l)):f.n=l:f.v=l);try{if(o=2,u){if(i||(a="next"),t=u[a]){if(!(t=t.call(u,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=u.return)&&t.call(u),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((t=(p=f.n<0)?l:n.call(r,f))!==s)break}catch(t){u=e,i=1,l=t}finally{o=1}}return{value:t,done:p}}}(n,a,u),!0),c}var s={};function i(){}function c(){}function p(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),d=p.prototype=i.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=p,o(d,"constructor",p),o(p,"constructor",c),c.displayName="GeneratorFunction",o(p,a,"GeneratorFunction"),o(d),o(d,a,"Generator"),o(d,r,function(){return this}),o(d,"toString",function(){return"[object Generator]"}),(l=function(){return{w:u,m:v}})()}function o(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,n,r){function u(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},o(e,t,n,r)}function c(e,t,n,r,a,u,s){try{var i=e[u](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function s(e){c(u,r,a,s,i,"next",e)}function i(e){c(u,r,a,s,i,"throw",e)}s(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./site-legacy.js?v=1756369731","./index-legacy103.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./column-legacy.js?v=1756369731","./useStore-legacy12.js?v=1756369731","./useStore-legacy4.js?v=1756369731","./useController-legacy6.js?v=1756369731","./useController-legacy5.js?v=1756369731","./useController-legacy4.js?v=1756369731","./validator-legacy.js?v=1756369731","./useStore-legacy10.js?v=1756369731"],function(r,a){"use strict";var u,o,c,f,d,v,m,h,y,g,b,w,k,S,x,_,C,A,T,L,N,E,D,I,j,O,P,V,H,R,q,B,M,F,U,G,z,J,K,X,W,Y,Z,Q,$,ee,te,ne,re,ae,ue,se,ie,le,oe,ce,pe,fe,de,ve,me,he,ye,ge,be,we,ke,Se,xe,_e,Ce,Ae,Te,Le,Ne,Ee,De,Ie,je,Oe,Pe,Ve,He,Re,qe,Be,Me,Fe,Ue,Ge,ze,Je,Ke,Xe,We,Ye,Ze,Qe,$e,et,tt,nt,rt,at,ut,st,it,lt,ot,ct,pt,ft,dt,vt,mt,ht,yt,gt,bt,wt,kt,St,xt,_t,Ct,At,Tt,Lt,Nt,Et,Dt,It,jt;return{setters:[function(e){u=e.bV,o=e.aH,c=e.l,f=e.L,d=e.M,v=e.a3,m=e.K,h=e.o,y=e.a5,g=e.fi,b=e.c,w=e.d,k=e.e,S=e.fj,x=e.fk,_=e.a7,C=e.W,A=e.N,T=e.cY,L=e.cZ,N=e.$,E=e.h,D=e.A,I=e.bj,j=e.r,O=e.k,P=e.u,V=e.R,H=e.ai},function(e){R=e.applyCertOrderPay,q=e.checkSslMethod,B=e.applyBusSsl,M=e.checkUrlTxt,F=e.removeCloudCert,U=e.getDockerDeploySiteDomain,G=e.getDeploySiteDomain,z=e.uploadCertToCloud,J=e.getCertList,K=e.updateSslTask,X=e.setSslInfo,W=e.setProxyHttps,Y=e.setDockerHttps,Z=e.setSiteHttps,Q=e.closeSiteHttps,$=e.downloadCert,ee=e.ignoreHttpsMode,te=e.applyProxyCertArrange,ne=e.applyCertApi,re=e.getLetsEncryptList,ae=e.downloadCertToLocal,ue=e.setDockerCertToSite,se=e.setCertToSite,ie=e.delLetsEncrypt,le=e.getOrderDetail,oe=e.authDomainApi,ce=e.renewalCert,pe=e.validateDomain,fe=e.getDockerLetsEncryptSite,de=e.getLetsEncryptSite,ve=e.getComposerLine,me=e.getDnsData,he=e.setDomainDNS,ye=e.applyCertByca,ge=e.applyTrustAsiaCert,be=e.verifyTrustAsiaCret,we=e.verifyTrustAsiaCert,ke=e.getTrustAsiaList,Se=e.letCertInitApi,xe=e.letRenewCert,_e=e.reissueCertOrder,Ce=e.closeCertArrange,Ae=e.batchSetSsl,Te=e.setBatchCertToSite,Le=e.getDnsApiList,Ne=e.setDnsApiInfo},function(e){Ee=e._},function(e){De=e.s,Ie=e.r,je=e.g,Oe=e.k,Pe=e.e,Ve=e.B,He=e.D,Re=e.ax,qe=e.c,Be=e.q,Me=e.M,Fe=e.A,Ue=e.L,Ge=e.y,ze=e.m,Je=e.x,Ke=e.o,Xe=e.v,We=e.F,Ye=e.a_,Ze=e.J,Qe=e.z,$e=e.n,et=e.aB,tt=e.G,nt=e.P,rt=e.H,at=e.au,ut=e.aw,st=e.ay,it=e.p,lt=e.C,ot=e.aW,ct=e.al,pt=e.S,ft=e.ai,dt=e.aj,vt=e.a5,mt=e.t,ht=e.a$},function(e){yt=e._},function(e){gt=e.a,bt=e.u},function(e){wt=e.u,kt=e.S},function(e){St=e.u},function(e){xt=e.m,_t=e.o},function(e){Ct=e.u,At=e.p},function(e){Tt=e.h},function(e){Lt=e.j,Nt=e.b,Et=e.h,Dt=e.i,It=e.o},function(e){jt=e.g}],execute:function(){var Ot=St(),Pt=Ot.siteInfo,Vt=Ot.siteType,Ht=Ot.isRefreshList,Rt=De(Ct()).isRefreshLocalList,qt=wt(),Bt=qt.orderInfo,Mt=qt.sslApplicationInfo,Ft=qt.certVerifyInfo,Ut=qt.otherPopup,Gt=qt.isRefreshSSL,zt=qt.sslDnsApiInfo,Jt=kt(),Kt=Jt.buyArtificialServiceEvent,Xt=Jt.getCertAdminInfoEvent,Wt=Jt.submitCertInfoEvent,Yt=Jt.setBusSslDeployEvent,Zt=Jt.getSslListEvent,Qt=Jt.verifyBusCertEvent,$t=Jt.getCertSslListEvent,en=Jt.getDomainListEvent,tn=Jt.jumpSslTabEvent,nn=r("q",Ie(!1)),rn=r("p",Ie([])),an=["企业级证书","极速申请","防劫持/防篡改","提高SEO权重","赔付保证","不成功可退款","官方推荐(宝塔官网bt.cn也在使用)"],un=[{content:function(){return Pe("span",{class:"text-danger"},[Ve("如果您的站点有使用CDN、高防IP、反向代理、301重定向等功能，可能导致验证失败")])}},{content:"证书支持购买多年，只能一年签发一次（有效期一年），需在到期前30天内续签(续签暂不需要验证域名)。"},{content:"申请www.bt.cn这种以www为二级域名的证书，需绑定并解析顶级域名(bt.cn)，否则将验证失败。"},{content:"商用证书相对于普通证书，具有更高的安全性、赔付保障和支持通配符和多域名等方式。"}],sn=function(e){var t="text-green";return e.endDate?(e.endDay<=30&&(t="text-orange"),Pe("span",{class:e.endDay<=10?"text-danger":t},[e.endDay>0?"剩余".concat(e.endDay," 天"):"已过期"])):Pe("span",null,[Ve("--")])},ln=function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.oid,e.p=1,e.n=2,Kt({pdata:JSON.stringify({oid:n})});case 2:r=e.v,Bt.value=r.data,c({isAsync:!0,title:"购买人工服务",area:60,component:function(){return f(function(){return a.import("./pay-ssl-service-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:r.data}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),on=function(){var e=p(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Xt();case 1:n=e.v,Mt.value=s(s({},Mt.value),n.data),Bt.value=t,Js({orderInfo:t});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),cn=function(){var e=p(l().m(function e(t){var n,r,a,u;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Wt({oid:t.oid});case 1:n=e.v,-1===(r=n.data).code&&r.errors?(pn(r.errors),nn.value=!0):(a=r.msg||r.data.msg,u=r.status,d.request({msg:u?a||"提交成功":"资料提交错误，请检查管理员信息是否填写正确，如填写错误请联系客服重置订单",status:u}),u&&vn(t.oid,t.cert_ssl_type,t.pid)),mn(),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),pn=function(e){try{var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){t.push({field:n,error:e})})}),{data:t,total:t.length,other:{}}}catch(n){return{data:[],total:0,other:{}}}},fn=function(e){var t=e.oid;window.open("/ssl?action=download_cert&oid=".concat(t))},dn=function(){var e=p(l().m(function e(t){var n,r,a,u,s,i,o;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.oid,r=t.title,a=t.domainName,e.p=1,u=Pt.value.name,s=Vt.value,e.n=2,h({title:"部署证书",isHtml:!0,content:"是否部署该证书,是否继续？<br>\n\t\t    证书类型：".concat(r,"<br>\n\t\t    证书支持域名：").concat(a.join("、"),"<br>\n\t\t    部署站点名:").concat(u)});case 2:return i={proxy:{oid:n,site_name:u},docker:{oid:n,site_name:u},default:{oid:n,siteName:u}},e.n=3,Yt(i[s]||i.default);case 3:return o=e.v,mn(),Gs(),Gt.value=!0,Ht.value=!0,Rt.value=!0,tn("currentCertInfo"),e.a(2,o);case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),vn=function(){var e=p(l().m(function e(t,n,r){var a,u,i;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Qt(t,n,r);case 1:u=e.v,i=u.data,u.status&&Ks(s(s({},i),{},{cert_ssl_type:n,certType:n,pid:r})),null===(a=Ut.value)||void 0===a||a.unmount();case 2:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),mn=function(){var e=p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Zt({siteName:Pt.value.name});case 1:return t=e.v,Gt.value=!1,e.a(2,t);case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),hn=r("a5",Ie(!1)),yn=r("a8",Ie(0)),gn=Ie({}),bn={defalutList:[],domianNumList:[],classList:[],brandList:[],typeList:[]},wn=r("a9",Ie({addPrice:0,productName:"",price:0,totalPrice:0,originalPrice:0,deploymentPrice:0,pid:0,years:1,yearsPrice:0,number:1,extraNumber:0,extraPrice:0,install:1})),kn=r("a6",Ie({num:1,certClassAcitve:"OV",certClass:[{name:"OV证书",title:"推荐企业使用",value:"OV",tips:[],data:[]},{name:"DV证书",title:"推荐个人，测试使用",value:"DV",subscript:"热销",tips:[]},{name:"EV证书",title:"推荐大型政企使用，高安全性",value:"EV",tips:[]}],certBrandAcitve:"",certBrand:[{name:"宝塔证书",title:"宝塔证书",value:"宝塔证书",tips:[]},{name:"Positive",title:"Positive",value:"Positive",tips:[]},{name:"锐安信",title:"锐安信",value:"锐安信",tips:[]},{name:"CFCA",title:"CFCA",value:"CFCA",tips:[]},{name:"Digicert",title:"Digicert",value:"Digicert",tips:[]},{name:"GeoTrust",title:"GeoTrust",value:"GeoTrust",tips:[]},{name:"Sectigo",title:"Sectigo",value:"Sectigo",tips:[]},{name:"亚洲诚信",title:"亚洲诚信",value:"亚洲诚信",tips:[]}],certTypeAcitve:"single",certType:[{name:"single",title:"单域名",value:"single",tips:[]},{name:"multiple",title:"多域名",value:"multiple",tips:[]},{name:"wildcard",title:"泛域名",value:"wildcard",tips:[]},{name:"ip",title:"IP证书",value:"ip",tips:[]}],certLifeAcitve:1,certLife:[{name:"1年",title:"1年",value:1,tips:[]},{name:"2年",title:"2年",value:2,tips:[]},{name:"3年",title:"3年",value:3,tips:[]},{name:"4年",title:"4年",value:4,tips:[]},{name:"5年",title:"5年",value:5,tips:[]}],certDeployAcitve:1,certDeploy:[{name:"不需要",title:"不需要",value:0,tips:[]},{name:"部署服务",title:"部署服务",value:1,tips:[]},{name:"部署服务（国密）",title:"部署服务（国密）",value:2,tips:[]}]})),Sn={single:["仅支持绑定一个二级域名或者子域名，例如 bt.com、cloud.bt.com、dnspod.cloud.bt.com的其中之一 。","如需要绑定同级的所有子域名，例如*.bt.com，请购买泛域名证书。"],wildcard:["带通配符的域名，例如：*.bt.com、*.cloud.bt.com均为泛域名，包含同一级的全部子域名。","注意泛域名不支持跨级，例如*.bt.com 不包含 *.cloud.bt.com的支持"]},xn={0:[],1:["宝塔提供9:00 - 24:00的人工部署证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"],2:["宝塔提供9:00 - 24:00的人工部署国密算法证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"]},_n=(r("ab",je(function(){var e=kn.value.certClass.filter(function(e){return e.value===kn.value.certClassAcitve});return e&&e.length>0?e[0].tips:[]})),r("ac",je(function(){var e=kn.value.certBrand.filter(function(e){return e.value===kn.value.certBrandAcitve});return e&&e.length>0?e[0].tips:[]})),r("ad",je(function(){var e=kn.value.certType.filter(function(e){return e.value===kn.value.certTypeAcitve});return e&&e.length>0?e[0].tips:[]})),r("ae",je(function(){var e=kn.value.certLife.filter(function(e){return e.value===parseInt(kn.value.certLifeAcitve)});return e&&e.length>0?e[0].tips:[]})),r("af",je(function(){var e=kn.value.certDeploy.filter(function(e){return e.value===parseInt(kn.value.certDeployAcitve)});return e&&e.length>0?e[0].tips:[]})),r("a4",p(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,hn.value=!0,e.n=1,$t();case 1:if(t=e.v,n=t.data,r=t.status,hn.value=!1,r){e.n=2;break}return d.request({msg:"获取证书列表失败",status:!1}),e.a(2,{status:!1,msg:"获取证书列表失败"});case 2:gn.value=n.info.recommend,Cn(),Tn(n.info),Nn(n.data),En(),e.n=4;break;case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"获取证书列表失败"});case 4:return e.a(2)}},e,null,[[0,3]])}))),r("a7",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn.value.num,t=e;if(v(e)&&"number"!=typeof e?(e=Number(e.data),t=Number(kn.value.num)||1):t=Number(kn.value.num+e)||1,t&&(t<1||t>99))return kn.value.num=t<1?1:99,d.error("域名数量范围为1-99");kn.value.num=t,"wildcard"!==kn.value.certTypeAcitve&&(kn.value.certTypeAcitve=kn.value.num>1?"multiple":"single"),En()}),r("aa",function(e,t,n){n||(n=kn.value[t].filter(function(t){return t.value===e})),n.disable||("".concat(t,"Acitve")in kn.value&&(kn.value["".concat(t,"Acitve")]=e),"certClass"==t&&(kn.value.certBrandAcitve=_n()),En())}),function(){var e;return gn.value[null===(e=kn.value.certClassAcitve)||void 0===e?void 0:e.toLowerCase()]}),Cn=function(){kn.value.certClassAcitve="DV",kn.value.certBrandAcitve=_n(),kn.value.certTypeAcitve="single",kn.value.certLifeAcitve=1,kn.value.certDeployAcitve=1},An=function(e,t,n){return e.map(function(e,r){var a=n?n(e,t):t[e.value];return s(s({},e),{},{tips:a})})},Tn=function(e){var t=e.type,n=e.brand,r=e.times;kn.value.certClass=An(kn.value.certClass,t,function(e,t){return t["".concat(e.value).toLowerCase()]}),Sn.multiple=Sn.single,kn.value.certType=An(kn.value.certType,Sn),kn.value.certDeploy=An(kn.value.certDeploy,xn),kn.value.certBrand=An(kn.value.certBrand,n,function(e,t){return t["Positive"!==e.value?"".concat(e.value).toLowerCase():"Positive"]}),kn.value.certLife=An(kn.value.certLife,r,function(e,t){return t[e.value+"_year"]})},Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.num,n=e.classify,r=e.brand,a=e.type,u=e.life,s=e.deploy,i=kn.value;return t||(t=i.num),n||(n=i.certClassAcitve),r||(r=i.certBrandAcitve),a||(a=i.certTypeAcitve),u||(u=i.certLifeAcitve),s||(s=i.certDeployAcitve),{num:t,classify:n,brand:r,type:a,life:u,deploy:s}},Nn=function(e){var t=[];e.forEach(function(e){var n,r=null===(n=e.type.match(/(OV|DV|EV)/))||void 0===n?void 0:n[0],a=-1!==e.code.indexOf("wildcard"),u=-1!==e.code.indexOf("ip"),i=e.add_price>0,l=a?"wildcard":i?"multiple":"single";"Digicert"===e.brand&&(l=a?"wildcard":"single"),t.push(s(s({},e),{type:r,certType:l,isMulti:i,isIp:u}))}),bn.defalutList=t},En=function(){Dn(bn.defalutList),Pn(),Vn()},Dn=function(e){var t=Ln().num,n=e.filter(function(e){return!(t>1)||e.isMulti});n.length>0&&(bn.domianNumList=n,In(n))},In=function(e){var t=Ln().classify,n=e.filter(function(e){return e.type===t});n.length>0&&(bn.classList=n,jn(n))},jn=function(e){var t=Ln().brand,n=e.filter(function(e){return e.brand===t});n.length>0&&(bn.brandList=n,On(n))},On=function(e){var t=Ln().type;1===e.length&&(kn.value.certTypeAcitve=e[0].certType);var n=e.filter(function(e){var n="multiple"===kn.value.certTypeAcitve&&"wildcard"!==e.certType&&e.isMulti,r="wildcard"===kn.value.certTypeAcitve&&"wildcard"===e.certType&&e.isMulti,a="ip"===kn.value.certTypeAcitve&&e.isIp;return e.certType===t||n||r||a});n.length>0&&(bn.typeList=n)},Pn=function(){var e=bn.domianNumList,t=bn.classList,n=bn.brandList;bn.typeList;kn.value.certClass.forEach(function(t){var n=e.some(function(e){return e.type===t.value});"EV"==t.value&&"wildcard"===kn.value.certTypeAcitve&&(n=!1),t.disable=!n}),kn.value.certBrand.forEach(function(e){var n=!t.some(function(t){return t.brand===e.value});if(e.hidden=n,e.subscript=e.value===_n()?"推荐":"",e.value===kn.value.certBrandAcitve&&e.hidden){var r,a;if(kn.value.certBrandAcitve=_n(),e.value===kn.value.certBrandAcitve&&e.hidden)kn.value.certBrandAcitve=null==bn||null===(a=bn.classList)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.brand;var u=null==bn||null===(r=bn.classList)||void 0===r?void 0:r.filter(function(e){return e.brand===kn.value.certBrandAcitve});u.length>0&&(bn.brandList=u,On(u))}}),kn.value.certType.forEach(function(e){var t=!n.some(function(t){return!(!t.isIp||"ip"!==e.value)||t.certType===e.value});"single"===e.value&&kn.value.num>1&&(t=!0),"multiple"===e.value&&1===kn.value.num&&(t=!0),"multiple"===e.value&&kn.value.num>1&&(t=!1),"ip"===e.value&&kn.value.num>1&&(t=!0),e.hidden=t}),"CFCA"!==kn.value.certBrandAcitve&&2===kn.value.certDeployAcitve&&(kn.value.certDeployAcitve=1)},Vn=function(){var e=bn.typeList[0]||null;if(yn.value=(null==e?void 0:e.num)||0,e){var t=Ln(),n=t.num,r=t.life,a=t.deploy,u=e.price,s=e.other_price,i=e.add_price,l=e.pid,o=e.num,c=n-o<0?0:n-o,p=[0,e.install_price,e.install_price_v2][a],f=i*c,d=(f+u)*r+p,v=s+f+p;wn.value={addPrice:i||0,productName:e.title,price:u,totalPrice:d,originalPrice:v,deploymentPrice:p,pid:l,years:r,yearsPrice:u*r,number:o,extraNumber:c,extraPrice:f,install:Number(a)}}},Hn=Ie({oid:0,wxcode:"",alicode:"",qq:"",orderInfo:{}}),Rn=(r("ag",function(){var e=p(l().m(function e(t){var n,r,a,u,i,o,c,p,f,v,h,y,g,b,w;return l().w(function(e){for(;;)switch(e.n){case 0:return n=wn.value,r=n.pid,a=n.install,u=n.years,i=n.extraNumber,o={pdata:JSON.stringify({pid:r,install:a,years:u,num:i})},e.n=1,m({loading:"正在创建商业证书订单，请稍后...",request:R(o)});case 1:if(c=e.v,p=c.data,f=c.msg,p.status){e.n=2;break}return e.a(2,d.error(f));case 2:v=p.msg,h=v.oid,y=v.wxcode,g=v.alicode,b=v.qq,w=v.order_info,Hn.value={oid:h,wxcode:y,alicode:g,qq:b,orderInfo:w},di(s(s({},Hn.value),{},{productInfo:wn.value}));case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),[{content:"通配符证书只支持DNS验证"}]),qn=[{content:"多域名只支持DNS验证"}],Bn=r("M",Ie(!1)),Mn=r("R",Ie(!1)),Fn=(r("H",Ie("")),r("J",Ie(""))),Un=r("K",Ie([])),Gn=Ie([]),zn=r("F",Ie(!1)),Jn=r("O",Ie()),Kn=r("P",Ie({domain:""})),Xn=r("g",Ie("CNAME_CSR_HASH")),Wn=(r("h",Ie(!0)),r("n",Ie("dns"))),Yn=r("x",Ie(!1)),Zn=r("E",Ie(!1)),Qn=r("k",Ie(!1)),$n=[{content:"https或者http验证，必须保证网站能通过http/https访问"},{content:"域名前缀是www,提醒用户解析上级根域名，如申请www.bt.cn，请确保解析bt.cn"},{content:function(){return Pe("a",{class:"text-primary",href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},[Ve("如何验证商用证书?")])}}],er=(r("L",[{content:"申请之前，请确保域名已解析，如未解析会导致审核失败(包括根域名)"},{content:"申请www.bt.cn这种以www为二级域名的证书，需绑定并解析顶级域名(bt.cn)，否则将验证失败"},{content:"SSL证书可选名称赠送规则："},{content:"1、申请根域名(如：bt.cn),赠送下一级为www的域名(如：www.bt.cn)"},{content:"2、申请当前host为www的域名（如：www.bt.cn）,赠送上一级域名，(如: bt.cn)"},{content:"3、申请其它二级域名，(如：app.bt.cn)，赠送下一级为www的域名 (如：www.app.bt.cn)"}]),r("B",Ie([{value:"CNAME_CSR_HASH",label:"DNS验证(CNAME解析)",tips:"如网站还未备案完成，可选【DNS验证】",isCheck:"",checkTips:[]},{value:"HTTP_CSR_HASH",label:"文件验证(HTTP)",tips:"如网站未开启301、302、强制HTTPS、反向代理功能，请选择HTTP",isCheck:"",checkTips:[]},{value:"HTTPS_CSR_HASH",label:"文件验证(HTTPS)",tips:"如网站开启【强制HTTPS】，请选【HTTPS验证】",isCheck:"",checkTips:[]}]))),tr=(r("D",function(e,t,n){switch(t&&(Xn.value="HTTP_CSR_HASH"),n.value){case"CNAME_CSR_HASH":return!t;case"HTTP_CSR_HASH":case"HTTPS_CSR_HASH":return!e}}),[{content:"OV/EV证书申请流程条件："},{content:"1、填写网站验证信息(文件验证或DNS验证)"},{content:"2、完成邮箱认证，根据CA发送的邮件完善邮件内容(中文填写即可)"},{content:"3、企查查或者爱企查、百度地图、114best能查询到相关企业信息，且公司名和公司地址完全匹配"},{content:"4、企查查或其他平台留下的电话能保证周一到周五(7:00 - 15:00)能接听到CA的认证电话，电话号码归属地来自美国，请留意接听。"}]),nr=(r("j",je(function(){var e=[];return Zn.value&&e.push.apply(e,Rn),Yn.value&&e.push.apply(e,qn),e.push.apply(e,$n),"dv"!==Bt.value.type&&e.push.apply(e,tr),e})),r("y",je(function(){var e=Zn.value?"*":"www";return Yn.value?"多域名".concat(Zn.value?"通配符":"","证书，每行一个域名，支持").concat(Bt.value.limit,"个域名，必填项,例如：<div>").concat(e,".bt.cn</div><div>").concat(e,".bttest.cn</div>"):"请输入需要申请证书的域名（单域名".concat(Zn.value?"通配符":"","证书），必填项，例如：").concat(e,".bt.cn")})),r("f",Ie({domains:"",dcvMethod:"",auth_to:"",Administrator:{address:"",city:"",country:"",email:"",firstName:"",lastName:"",job:"",name:"",mobile:"",organation:"",postCode:"",state:""}}))),rr=je(function(){return nr.value.Administrator.lastName+nr.value.Administrator.firstName}),ar=(r("v",function(){nr.value.Administrator=s(s({},Mt.value),{},{name:""}),nr.value.Administrator.name=rr.value;var e=Bt.value,t=e.pid,n=e.oid,r=e.title,a=e.limit,u=e.install,i=e.code,l=i.indexOf("ev")>-1?"ev":i.indexOf("ov")>-1?"ov":"dv";Yn.value=i.indexOf("multi")>-1,Zn.value=i.indexOf("wildcard")>-1,Qn.value=i.indexOf("ip")>-1,Bt.value={pid:t,oid:n,title:r,limit:a,install:u,isMulti:Yn.value,isWildcard:Zn.value,isIp:Qn.value,type:l}}),r("z",p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,en();case 1:n=e.v,Un.value=n.data.map(function(e){return s({label:e.name,value:e.name},e)}),Bn.value=!0,Fn.value=(null===(t=Un.value)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.name)||"",Gn.value=Un.value,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))),r("I",function(e){Un.value=[],Gn.value.forEach(function(t){t.name.indexOf(e)>-1&&Un.value.push(t)}),Un.value.length||(Un.value=Gn.value)}),r("N",p(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:nr.value.domains=Fn.value,Bn.value=!1,Zn.value||ar();case 1:return e.a(2)}},e)}))),function(){var e=p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return zn.value=!0,e.n=1,q(Fn.value);case 1:t=e.v,n=t.data,zn.value=!1,er.value.forEach(function(e){y(n[e.value])?(e.isCheck=!!n[e.value],e.checkTips=!!n[e.value]):(e.isCheck=!1,e.checkTips=n[e.value])});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()),ur=(r("Q",Oe({domain:[u({message:"域名不能为空"}),{validator:function(e,t,n){o(t)?!Zn.value&&t.indexOf("*")>-1?n(new Error("当前为单域名证书，不支持通配符申请")):n():n(new Error("域名格式错误，请重新输入"))},trigger:["change"]}]})),r("A",function(){Mn.value=!0}),r("S",p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(t=Jn.value)||void 0===t?void 0:t.validate();case 1:nr.value.domains=Kn.value.domain,Mn.value=!1,Zn.value||ar();case 2:return e.a(2)}},e)}))),r("G",function(e){var t=Wn.value;if("dns"!==t){var n=zt.value.find(function(e){return e.value===t});if(n){var r=!n.data;(!e||e&&r)&&Ys({title:"设置".concat(n.info.title,"接口"),row:n.info})}}}),r("ah",function(){var e=p(l().m(function e(t,n){var r,a,u,i,o,c,p,f,m,h,y,b,w,k,S,x,_,C,A,T;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=null,t.value.domains){e.n=1;break}return e.a(2,d.error("域名不能为空"));case 1:if(!Bt.value.isIp){e.n=2;break}if(g(t.value.domains)){e.n=2;break}return e.a(2,d.error("IP证书申请域名格式错误，请输入正确的ipv4地址"));case 2:if(t.value.Administrator.state||t.value.Administrator.city){e.n=3;break}return e.a(2,d.error("所在地区不能为空"));case 3:if(t.value.Administrator.address||"dv"===Bt.value.type){e.n=4;break}return e.a(2,d.error("公司详细地址不能为空"));case 4:if(t.value.Administrator.organation){e.n=5;break}return e.a(2,d.error("公司名称不能为空"));case 5:if(t.value.Administrator.name){e.n=6;break}return e.a(2,d.error("姓名不能为空"));case 6:if(t.value.Administrator.email){e.n=7;break}return e.a(2,d.error("邮箱不能为空"));case 7:if(t.value.Administrator.mobile){e.n=8;break}return e.a(2,d.error("手机不能为空"));case 8:return e.p=8,r=d.load("正在提交证书信息，请稍后..."),u=t.value.Administrator,i=u.job,o=u.postCode,c=u.country,u.firstName,u.lastName,p=u.name,f=u.state,m=u.city,h=u.address,y=u.organation,b=u.email,w=u.mobile,e.n=9,B(JSON.stringify({pid:Bt.value.pid,cert_ssl_type:n,oid:Bt.value.oid,domains:null===(a=nr.value.domains)||void 0===a?void 0:a.split("\n").filter(function(e){return e.trim()}),dcvMethod:Xn.value,auth_to:Wn.value,Administrator:{job:i,postCode:o,country:c,lastName:p,state:f,city:m,address:h,organation:y,email:b,mobile:w}}));case 9:if(k=e.v,v(k.data.msg)&&k.data.msg.hasOwnProperty("code")?(S=k.data.errors,rn.value=[],Object.keys(S).forEach(function(e){S[e].forEach(function(t,n){rn.value.push({field:e,error:t})})}),nn.value=!0):(x=k.msg||k.data.msg,_=k.data.status,d.request(k.data||{msg:_?x||"提交成功":x||"资料提交错误，请检查管理员信息是否填写正确，如填写错误请联系客服重置订单",status:_})),!k.data.status){e.n=11;break}return Gt.value=!0,e.n=10,Qt(Bt.value.oid,n,Bt.value.pid);case 10:A=e.v,T=A.data,A.status,T&&Ks(s(s({},T),{},{cert_ssl_type:n,certType:n,pid:Bt.value.pid})),null===(C=Ut.value)||void 0===C||C.unmount();case 11:e.n=13;break;case 12:e.p=12,e.v;case 13:return e.p=13,r&&r.close(),e.f(13);case 14:return e.a(2)}},e,null,[[8,12,13,14]])}));return function(t,n){return e.apply(this,arguments)}}()),r("_",function(){var e=p(l().m(function e(t,n){var r,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r={url:t.url,content:t.content},e.n=1,m({loading:"正在验证商用证书，请稍后...",request:M(r),data:Number});case 1:a=e.v,or.value[n].status=a,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t,n){return e.apply(this,arguments)}}()),r("Z",p(l().m(function e(){var t,n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Qt(Ft.value.oid,Ft.value.cert_ssl_type,Ft.value.pid);case 1:return r=e.v,(a=r.data)&&(Ft.value=a),e.n=2,sr();case 2:"PENDING"===(null===(t=Ft.value)||void 0===t?void 0:t.certStatus)&&d.success("验证中，请耐心等待！"),"COMPLETE"===(null===(n=Ft.value)||void 0===n?void 0:n.certStatus)&&d.success("验证成功！"),Ut.value.unmount(),Gt.value=!0;case 3:return e.a(2)}},e)}))),r("Y",function(e){var t=Ft.value.res&&Ft.value.res.verification&&-1==Ft.value.res.verification.indexOf("dns");ir({oid:Ft.value.oid,type:lr.value,certType:Ft.value.certType,pid:Ft.value.pid,isIp:t})}),r("X",Ie([{content:"本次验证结果是由【本服务器验证】，实际验证将由【CA服务器】进行验证，请耐心等候"},{content:"请确保以上列表所有项都验证成功后点击【验证域名】重新提交验证"},{content:"如长时间验证不通过，请通过【修改验证方式】更改为【DNS验证】"},{content:function(){return Pe("span",null,[Ve("如何添加域名解析，《"),Pe("a",{href:"https://cloud.tencent.com/document/product/302/3446",class:"text-primary",target:"__blink"},[Ve("点击查看教程")]),Ve("》，和咨询服务器运营商")])}}]))),sr=r("T",p(l().m(function e(){var t,n,r,a,u,s,i,o,c,p,f;return l().w(function(e){for(;;)switch(e.n){case 0:if(null===(t=Ft.value)||void 0===t||!t.data){e.n=1;break}return n=Ft.value,r=n.data,a=r.dcvList,u=r.DCVdnsHost,s=r.DCVdnsType,i=r.DCVdnsValue,o=r.DCVfileName,c=r.DCVfileContent,p=n.paths,cr.value=null==a?void 0:a.map(function(e){return e.domainName}).join(","),lr.value=a[0].dcvMethod,f={dnsHost:u,dnsType:s,dnsValue:i,fileName:o,fileContent:c,filePath:"/.well-known/pki-validation/"},"CNAME_CSR_HASH"!==lr.value&&(or.value=null==p?void 0:p.map(function(e){return{url:e.url,status:e.status,content:c}}),ur.value.splice(3,1,{content:function(){return Pe("span",null,[Ve("SSL添加文件验证方式 ->> "),Pe("a",{href:"https://www.bt.cn/bbs/thread-56802-1-1.html",target:"_blank",class:"text-primary"},[Ve("查看教程")])])}})),e.a(2,f);case 1:return d.error("获取数据失败"),e.a(2,{});case 2:return e.a(2)}},e)}))),ir=function(e){return c({title:"验证域名-"+(e.type.indexOf("CNAME_")>-1?"DNS验证":"文件验证"),area:52,showFooter:!0,btn:["更改","取消"],component:function(){return f(function(){return a.import("./modify-verify-way-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:e})},lr=r("U",Ie("")),or=r("W",Ie([])),cr=r("V",Ie()),pr=function(e){var t=function(e,t){return Pe("span",{class:"bt-link",onClick:t},[e])},n=t("人工服务",function(){return Lt()}),r=t("详情",function(){return function(e){c({title:"多年期证书详情",area:52,compData:e,component:function(){return f(function(){return a.import("./mulit-cert-detail-legacy.js?v=1756369731")},void 0,a.meta.url)}})}(e)}),u=t("下载",function(){return fn(e)}),s=t("部署",function(){return dn(e)}),i=t("验证",function(){return vn(e.oid,e.cert_ssl_type,e.pid)}),l=t("续签",function(){return fi(e.oid)}),o=t("完善资料",function(){return on(e)}),p=e.orderStatus,d=[];switch(e.years&&e.years>1&&[5,15].includes(Number(p))&&d.push(r),Number(p)){case 0:e.install&&d.push(n),d.push(o);break;case 3:case 11:e.install&&d.push(n),d.push(i);break;case 5:d.push(s),d.push(u);break;case 7:d.push(l)}var v=[];return d.map(function(e,t){v.push(e),t<d.length-1&&v.push(Pe(yt,null,null))}),v},fr={id:"wechat-customer",class:"wechat-customer"},dr={style:{background:"rgba(32, 165, 58, 0.1)",width:"100%",height:"46px",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"}},vr={class:"qrcode-wechat",style:{width:"128px",height:"128px",margin:"8px 0 4px 0"}},mr={id:"wechatCustomerQrcode"},hr=qe({__name:"customer-popover",props:{trigger:{default:"click"},showArrow:{type:Boolean,default:!0},placement:{default:"left"}},setup:function(e,t){var r=t.expose,a=e,u=Ie(null),s=je(function(){return a.trigger}),i=je(function(){return a.showArrow}),l=je(function(){return a.placement});return r({BtCustomerPopover:function(){return u}}),function(e,t){var r=b,a=w,o=Re;return Be(),Me(o,ze({ref_key:"BtCustomerPopover",ref:u},e.$attrs,{trigger:Je(s),placement:Je(l),effect:"light","popper-class":"BtCustomerPopover","show-arrow":Je(i),"popper-style":{padding:"0",border:"0",background:"0"}}),{reference:Fe(function(){return[Ue(e.$slots,"default",{},void 0,!0)]}),default:Fe(function(){return[Ge("div",fr,[Ge("div",dr,[Pe(r,{target:"_blank",href:"https://www.bt.cn/new/wechat_customer",style:{"font-size":"16px",display:"flex","flex-direction":"row","flex-wrap":"nowrap","align-items":"center"}},{default:Fe(function(){return n(t[0]||(t[0]=[Ge("div",{class:"flex items-center border-b border-solid border-[#20a53a60] pb-4px"},[Ve(" 点击咨询客服 "),Ge("i",{class:"svgtofont-el-d-arrow-right ml-4px w-[15px]"})],-1)]))}),_:1})]),Ge("div",vr,[Ge("div",mr,[Pe(a,{src:"/customer/customer-qrcode.png"})])]),t[1]||(t[1]=Ge("div",{class:"wechat-title"},[Ge("img",{class:"icon",style:{width:"17px",height:"17px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAATlJREFUSEvtVrFOw0AMfed8AxJsZWGAgQHBXP4DCQa+Ioou7g18BRIg9T/KDGJggIGFbiDxDXGQowSBuGvrFISEmtF+7/nis312RVEMiWgIoMT375aIjpj5KeJrTMy8JSJjAPsRzEhErl1Zlhd1XZ8kRKZEdMjM0xlBBiIyATCIYZxzl857X6uTiHaY+TElZrUz87aIPCjvI0gIwVmF5uG7H1gFmZepxv85XTdqCCEcLMQ0gLz3jbbTOm/rPdkLBt0v0E77xysq2it9T2nhuTzPN4ho10KyYEXkXvvkBcC6hWjEvmqQMwCnANZa8p1RJAbfa41vAM7/0cUzczOiZ43zvunrtPVOntuO3+wrluJ12qspvFBm/+bR+u03nhPrkKZk2ZVINUZO964sy44Ta9FSK5GuQ1VVXb0DLf+sHQ9tLL0AAAAASUVORK5CYII="}),Ge("div",{class:"scan-title",style:{"font-size":"16px"}},"扫一扫")],-1)),t[2]||(t[2]=Ge("span",{class:"layui-layer-setwin wechat-close",style:{display:"block"}},[Ge("a",{href:"javascript:;",class:"layui-layer-ico layui-layer-close layui-layer-close2"})],-1))])]}),_:3},16,["trigger","placement","show-arrow"])}}}),yr=r("C",k(hr,[["__scopeId","data-v-f470e0a8"]])),gr={class:"h-full"},br={class:"recommendList"},wr={class:"text-[1.3rem] ml-[8px] text-stroke-primary"},kr={class:"flex flex-col w-full pt-[16px]"},Sr={class:"flex items-center"},xr={class:"flex items-center"},_r=qe({__name:"index",setup:function(e,t){var r=t.expose,a=wt(),u=a.sslAlertState,s=a.isRefreshSSL,i=S({request:mn,columns:[{label:"域名",prop:"domainName",width:120,render:function(e,t){return Pe("span",{class:"w-full whitespace-pre-line"},[e.domainName?e.domainName.join("、"):"--"])}},{label:"证书类型",prop:"title",showOverflowTooltip:!0},{label:"到期时间",width:100,render:sn,showOverflowTooltip:!0},{label:"状态",prop:"expire",width:160,showOverflowTooltip:!1,render:function(e,t){var n=[],r=function(e,t){return Pe("span",{style:"color: ".concat(e,";")},[t])},a=Pe(Re,{placement:"bottom-end",width:"400","popper-class":"white-theme",trigger:"click"},{default:function(){return Pe("div",{class:"bus-ssl-popover"},[Pe("div",{class:"ssl-popover-item"},[Pe("span",{class:"ssl-popover-title"},[Ve("自行排查")]),Pe("p",null,[Ve("以图文的形式，一步步教您验证并部署商业SSL")]),Pe("a",{class:"bt-link",href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},[Ve("如何验证商用证书?")])]),Pe("div",{class:"ssl-popover-item"},[Pe("span",{class:"ssl-popover-title"},[Ve("购买人工")]),Pe("p",null,[Ve("不会部署?人工客服帮你全程部署，不成功可退款")]),Pe(He,{size:"small",type:"primary",onClick:function(){return ln(e)}},{default:function(){return[Ve("购买人工")]}})])])},reference:function(){return Pe("span",{class:"bt-link"},[Ve("排查方法?")])}});if(e.cert_ssl_type)return function(e){var t=Pe(Re,{placement:"bottom-end",width:"400","popper-class":"white-theme",trigger:"click"},{default:function(){return Pe("div",{class:"bus-ssl-popover"},[Pe("div",{class:"ssl-popover-item"},[Pe("span",{class:"ssl-popover-title"},[Ve("自行排查")]),Pe("p",null,[Ve("以图文的形式，一步步教您验证并部署商业SSL")]),Pe("a",{class:"bt-link",href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},[Ve("如何验证商用证书?")])]),Pe("div",{class:"ssl-popover-item"},[Pe("span",{class:"ssl-popover-title"},[Ve("购买人工")]),Pe("p",null,[Ve("不会部署?人工客服帮你全程部署，不成功可退款")]),Pe(He,{size:"small",type:"primary",onClick:function(){return ln(e)}},{default:function(){return[Ve("购买人工")]}})])])},reference:function(){return Pe("span",{class:"bt-link"},[Ve("排查方法?")])}}),n=e.orderStatus,r=[];switch(Number(n)){case-1:r.push(Pe("span",{class:"text-danger"},[Ve("已取消")]));break;case 0:r.push(Pe("span",{class:"text-warning"},[Ve("待完善资料")])),e.install||r.push(t);break;case 1:r.push(Pe("span",{class:"text-warning"},[Ve("待审核")]));break;case 2:r.push(Pe("span",{class:"text-warning"},[Ve("正在提交CA")]));break;case 3:r.push(Pe("span",{class:"text-warning"},[Ve("待域名验证")]));break;case 4:r.push(Pe("span",{class:"text-warning"},[Ve("签发中")]));break;case 5:r.push(Pe("span",{class:"text-success"},[Ve("已签发")]));break;case 6:r.push(Pe("span",{class:"text-warning"},[Ve("取消确认")]));break;case 7:r.push(Pe("span",{class:"text-warning"},[Ve("待续费")]));break;case 8:r.push(Pe("span",{class:"text-warning"},[Ve("待吊销确认")]));break;case 9:r.push(Pe("span",{class:"text-warning"},[Ve("待重颁发")]));break;case 10:r.push(Pe("span",{class:"text-warning"},[Ve("重颁发中")]));break;case 11:r.push(Pe("span",{class:"text-warning"},[Ve("吊销中")]));break;case 12:r.push(Pe("span",{class:"text-danger"},[Ve("已吊销")]));break;default:r.push(Pe("span",{class:"text-warning"},[Ve("待完善资料")]))}var a=[];return r.map(function(e,t){a.push(e),t<r.length-1&&a.push(Pe(yt,null,null))}),a}(e);var u,s,i=e.domainName&&e.domainName.length>0;if(""!=e.certId||i)if(""==e.certId&&0!==e.domainName.length)n.push(Pe("span",{class:"bt-warn"},[Ve("待提交")]));else if(1===e.status)switch(e.orderStatus){case"COMPLETE":n.push(r("primary","订单完成"));break;case"PENDING":n.push((u="orange",s="验证中",Pe(Re,{trigger:"hover",placement:"left","popper-class":"popover-default",width:"300",enterable:!1,"open-delay":100,"close-delay":0},{default:function(){return Pe("div",{class:"flex items-center p-[2px] whitespace-nowrap"},[Ve("1、如填写错误，联系人工可重置订单"),Pe("br",null,null),Ve("2、如验证方式选择错误，联系人工修改验证方式")])},reference:function(){return Pe("div",{style:"color: ".concat(u,";")},[s])}})));break;case"CANCELLED":n.push(r("medium","已取消"));break;case"REISSUED":n.push(r("primary","已重签"));break;case"FAILED":n.push(r("danger","申请失败"));break;case"EXPIRED":n.push(r("medium","已过期"));break;default:n.push(r("orange","待验证"))}else switch(e.status){case 0:n.push(r("orange","未支付"));break;case-1:n.push(r("medium","已取消"))}else n.push(Pe("span",{class:"bt-warn",onClick:function(){return on(e)}},[Ve("待完善资料")])),n.push(a);var l=[];return n.map(function(e,t){l.push(e),t<n.length-1&&l.push(Pe(yt,null,null))}),l}},{label:"操作",prop:"ps",width:170,align:"right",render:function(e,t){if(e.cert_ssl_type)return pr(e);var n=function(e,t){return Pe("span",{class:"bt-link",onClick:t},[e])},r=n("人工服务",function(){return Lt()}),a=n("下载",function(){return fn(e)}),u=n("部署",function(){return dn(e)}),s=n("验证",function(){return vn(e.oid,e.cert_ssl_type,e.pid)}),i=n("续签",function(){return fi(e.oid)}),l=[],o=e.domainName&&e.domainName.length>0;if(""!=e.certId||o)if(""==e.certId&&0!==e.domainName.length)l.push(n("提交",function(){return cn(e)}));else if(1===e.status)switch(e.orderStatus){case"COMPLETE":1===e.ssl_state?l.push(Pe("span",null,[Ve("已部署")])):l.push(u),e.endDay<30&&l.push(i),l.push(a);break;case"PENDING":default:e.install&&l.push(r),l.push(s);break;case"CANCELLED":l.push(Pe("span",null,[Ve("无操作")]));break;case"FAILED":l.push(Pe("span",{class:"bt-danger cursor-default"},[Ve("申请失败")]));break;case"EXPIRED":l.push(u),l.push(a);case"REISSUED":}else l.push(Pe("span",null,[Ve("无操作")]));else e.install&&l.push(r),l.push(n("完善资料",function(){return on(e)}));var c=[];return l.map(function(e,t){c.push(e),t<l.length-1&&c.push(Pe(yt,null,null))}),c}}],extension:[x(),_(s)]}),l=i.BtTable,o=i.BtRefresh,c=i.refresh,p=Ke(function(){var e=document.querySelector("#pane-busSslList");e&&e.click()},1e3);return r({init:c}),function(e,t){var r=He,a=w,s=Ee,i=C;return Be(),Xe("div",gr,[Ge("div",br,[(Be(!0),Xe(We,null,Ye(Je(an),function(e,n){return Be(),Xe("div",{key:n,class:Ze("".concat(6===n?"w-[22rem]":"w-[14rem]"," recomItem"))},[t[0]||(t[0]=Ge("i",{class:"svgtofont-el-check font-bold text-[#ff8d00] text-[1.6rem]"},null,-1)),Ge("span",wr,Qe(e),1)],2)}),128))]),Ge("div",kr,[Pe(s,null,{"header-left":Fe(function(){return[Ge("div",Sr,[Pe(r,{type:"primary",onClick:Je(Ms)},{default:Fe(function(){return n(t[1]||(t[1]=[Ve(" 申请证书 ",-1)]))}),_:1},8,["onClick"]),Pe(yr,{placement:"right"},{default:Fe(function(){return[Ge("div",xr,[Pe(a,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=Ge("span",{class:"bt-link"},"售前客服",-1))])]}),_:1})])]}),"header-right":Fe(function(){return[Pe(Je(o))]}),content:Fe(function(){return[Pe(Je(l),{"max-height":Je(u)?320:380,onWheel:Je(p)},null,8,["max-height","onWheel"])]}),_:1})]),Pe(i,{options:Je(un),listStyle:"disc"},null,8,["options"])])}}}),Cr=k(_r,[["__scopeId","data-v-11bd1ded"]]),Ar=St(),Tr=Ar.siteType,Lr=Ar.siteInfo,Nr=wt().isRefreshSSL,Er=[{label:"所有",value:0},{label:"未过期",value:1},{label:"即将过期",value:2},{label:"已过期",value:3}],Dr=Ie(!1),Ir=Ie(),jr=Ie({}),Or=Ie(!1),Pr=Oe({typeValue:"全部",btnText:"部署证书",search:"",data:{all:[],site:[]},siteList:[]}),Vr=function(){var e=p(l().m(function e(){var t,n,r,a,u=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:Tr.value,0!==Pr.siteList.length){e.n=1;break}return d.error("请选择站点"),e.a(2);case 1:return n=jr.value,r=n.hash,a=n.subject,e.n=2,Xs({hash:r,subject:a,list:Pr.siteList,type:t});case 2:Or.value=!1;case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Hr=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,h({title:"删除证书",content:"删除后该证书将不会显示在证书夹，是否继续操作？",icon:"warning-filled"});case 1:return e.n=2,m({loading:"正在删除证书...",request:F({local:t.cloud_id>0?0:1,ssl_hash:t.hash}),message:!0});case 2:Fr.value=!0;case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();Ie([gt(),{label:"站点名称",prop:"name",render:function(e){return e.current?e.name+"(当前站点)":e.name}}]);var Rr=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return n={},r=!0,void 0!==t&&(n={cert_list:JSON.stringify(t.dns)},r=!1,jr.value=t),e.n=1,m({request:"docker"===Tr.value?U(n):G(n),data:{all:Array,site:Array}});case 1:a=e.v,Pr.data={all:a.all.map(function(e){return{name:e}}),site:a.site.map(function(e){return{name:e}})},r||(Or.value=!0,$e(function(){var e;Pr.data.all.forEach(function(e,t){e.name===Lr.value.name&&(e.current=!0,Pr.data.all.unshift(Pr.data.all.splice(t,1)[0]))}),null===(e=Ir.value)||void 0===e||e.toggleRowSelection(Pr.data.all.find(function(e){return e.name===Lr.value.name}),!0)}));case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),qr=function(e){Pr.siteList=e,e.length<=0?Pr.btnText="部署证书":Pr.btnText="部署证书[已选择".concat(e.length,"项]")},Br=function(e){Pr.typeValue=e},Mr=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,h({title:"上传云端证书",content:"将会上传证书信息至云端进行替换，是否继续操作？",icon:"warning-filled",type:"calc"});case 1:return e.n=2,m({loading:"正在上传证书至云端...",request:z({ssl_hash:t.hash}),message:!0});case 2:e.v,Nr.value=!0,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),Fr=Ie(!1),Ur=function(){var e=p(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:Fr.value=!0,Nr.value=!0,d.success("获取成功");case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Gr=function(){var e=p(l().m(function e(t){var n,r,a,u,s=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:Fr.value,e.p=1,r={search_limit:t.search_limit,search_name:t.search,force_refresh:Number(n)},Fr.value=!1,e.n=2,m({loading:Dr,request:J(r)});case 2:return a=e.v,u=a.data,A(u)||d.request(u),n&&d.success("获取成功"),e.a(2,{data:u,total:0,other:{}});case 3:return e.p=3,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),zr={class:"relative h-[45rem]"},Jr={class:"p-[20px]"},Kr={class:"flex flex-col p-[12px] bg-[#f5faf2]"},Xr={class:"mb-[4px]"},Wr={class:"mb-[4px]"},Yr={class:"mb-[4px]"},Zr={class:"flex justify-between mb-[1rem]"},Qr={class:"absolute bottom-0 w-full bg-[#f6f8f8] flex items-center justify-end p-[12px]"},$r=qe({__name:"index",setup:function(e,t){var r=t.expose;wt();var a,u=L({key:"search_limit",options:Er,other:{class:"!w-[10rem] mr-1rem",filterable:!0}}),s=T({request:Gr,columns:[{label:"域名",prop:"subject",render:function(e){var t;return et("div",{class:"whitespace-pre-wrap"},(null===(t=e.dns)||void 0===t?void 0:t.join("\n"))||e.subject)}},{label:"到期时间",prop:"not_after"},{label:"品牌",prop:"info.issuer",showOverflowTooltip:!0},{label:"位置",render:function(e){return e.cloud_id>0?"云端":"本地"}},bt([{onClick:(a=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Mr(t);case 1:f();case 2:return e.a(2)}},e)})),function(e){return a.apply(this,arguments)}),width:60,title:"上传云端",isHide:function(e){return e.cloud_id>0}},{onClick:Rr,title:"部署"},{onClick:Hr,title:"删除"}])],extension:[u,_(Fr)]}),i=s.BtTable,o=s.BtSearch,c=s.BtTableSelect,f=s.refresh;return r({init:f}),function(e,t){var r=He,a=N,u=at,s=ut,l=E,p=Ee,f=tt("bt-loading");return Be(),Xe("div",null,[Pe(p,null,{"header-left":Fe(function(){return[Pe(r,{type:"default",onClick:Je(Ur)},{default:Fe(function(){return n(t[4]||(t[4]=[Ve(" 从云端同步 ",-1)]))}),_:1},8,["onClick"])]}),"header-right":Fe(function(){return[Ge("div",null,[Pe(Je(c))]),Pe(Je(o),{class:"w-[30rem]",placeholder:"请输入域名搜索"})]}),content:Fe(function(){return[Pe(Je(i),{"max-height":500})]}),popup:Fe(function(){return[Pe(l,{title:"部署当前证书",modelValue:Je(Or),"onUpdate:modelValue":t[3]||(t[3]=function(e){return nt(Or)?Or.value=e:null}),area:52},{default:Fe(function(){var e;return[Ge("div",zr,[Ge("div",Jr,[Ge("div",Kr,[Ge("span",Xr,"认证域名："+Qe(Je(jr).subject),1),Ge("span",Wr,"证书类型："+Qe(null===(e=Je(jr).info)||void 0===e?void 0:e.issuer),1),Ge("span",Yr,"到期时间："+Qe(Je(jr).not_after),1)]),t[5]||(t[5]=Ge("span",{class:"!mt-[24px] !mb-[4px] inline-block"},"如下是需要批量部署证书的站点：",-1)),Ge("div",Zr,[Pe(a,{type:"button",modelValue:Je(Pr).typeValue,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Je(Pr).typeValue=e}),size:"default",options:[{label:"全部",value:"全部"},{label:"匹配站点",value:"匹配站点"}],onChange:Je(Br)},null,8,["modelValue","onChange"])]),rt((Be(),Me(s,{ref_key:"deploySiteTableRef",ref:Ir,onSelectionChange:Je(qr),data:Je(Pr).data["全部"===Je(Pr).typeValue?"all":"site"],"max-height":180},{default:Fe(function(){return[Pe(u,{type:"selection",width:"55"}),Pe(u,{label:"站点名称",prop:"name"},{default:Fe(function(e){return[Ve(Qe(String(e.row.name)+(e.row.current?"(当前站点)":"")),1)]}),_:1})]}),_:1},8,["onSelectionChange","data"])),[[f,"正在加载中，请稍后...","title"],[f,Je(Dr)]])]),Ge("div",Qr,[Pe(r,{type:"warning",onClick:t[1]||(t[1]=function(e){return Or.value=!1})},{default:Fe(function(){return n(t[6]||(t[6]=[Ve("取消",-1)]))}),_:1}),Pe(r,{type:"primary",onClick:t[2]||(t[2]=function(e){return Je(Vr)()})},{default:Fe(function(){return[Ve(Qe(Je(Pr).btnText),1)]}),_:1})])])]}),_:1},8,["modelValue"])]}),_:1})])}}}),ea=wt(),ta=ea.sslInfo,na=ea.sslTabActive,ra=St(),aa=ra.siteInfo,ua=ra.siteType,sa=ra.isRefreshList,ia=De(Ct()),la=ia.isRefreshLocalList,oa=[{content:function(){return Pe("span",null,[Ve("粘贴您的*.key以及*.pem内容，然后保存即可"),Pe("a",{href:"http://www.bt.cn/bbs/thread-704-1-1.html",class:"text-primary",target:"_blank"},[Ve("[帮助]")]),Ve("。")])}},{content:"如果浏览器提示证书链不完整,请检查是否正确拼接PEM证书"},{content:"PEM格式证书 = 域名证书.crt + 根证书(root_bundle).crt"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"}],ca=function(e){switch(e){case 3:na.value="busSslList";break;case 2:na.value="trustAsiaList";break;case 1:na.value="letsEncryptList";break;case 0:na.value="currentCertInfo";break;default:na.value="certFolderList"}},pa=Ie(!1),fa=Ie(!1),da=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:t?xt({onCancel:function(){ta.value.pushAlarm=!t}}):(fa.value="all"===ta.value.push.task_data.project,pa.value=!0);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),va=function(){var e=ta.value.push,t=e.id,n=e.task_data,r=e.sender;return{template_id:1,task_id:t,status:0,task_data:JSON.stringify({task_data:{status:!1,type:"site_ssl",project:fa.value?"all":aa.value.name,cycle:parseInt(n.cycle),title:"网站SSL到期提醒",interval:600,tid:1},sender:r,time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:0,total:3}})}},ma=function(){ta.value.pushAlarm=!0},ha=function(){var e=p(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return pa.value=!1,e.p=1,t=d.load("正在关闭证书到期提醒，请稍后..."),n=va(),e.n=2,K(n);case 2:r=e.v,d.request(r),r.status&&Gs(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,t&&t.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),ya=function(){var e=p(l().m(function e(){var t,n,r,a,u,s,i;return l().w(function(e){for(;;)switch(e.n){case 0:if(t=!1,n=ta.value,r=n.key,a=n.csr,u=n.type,s=aa.value.name,ba.value||wa.value){e.n=1;break}return e.a(2,d.error("请填写完整的证书内容"));case 1:if(ba.value===r&&wa.value===a){e.n=2;break}return t=!0,e.n=2,h({title:"证书保存提示",content:"当前证书内容发生改变，证书信息将同步更新，继续操作？"});case 2:return i={proxy:{site_name:s,key:ba.value,csr:wa.value},docker:{site_name:s,key:ba.value,csr:wa.value},default:{type:t?0:u,siteName:s,key:ba.value,csr:wa.value}},e.n=3,m({loading:"正在保存证书信息，请稍后...",request:X(i[ua.value]||i.default,ua.value),message:!0,success:function(e){e.status&&(sa.value=!0,la.value=!0,Gs())}});case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ga=function(){var e=p(l().m(function e(t){var n,r,a,u,s,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t){e.n=1;break}return e.n=1,h({title:"关闭强制HTTPS",content:"关闭强制HTTPS后需要清空浏览器缓存才能生效,是否继续操作?",icon:"warning-filled"});case 1:return n=aa.value.name,r=ua.value,u=(a={proxy:{site_name:n,force_https:t?"1":"0"},docker:{site_name:n,force_https:t?"1":"0"},default:{siteName:n}})[r]||a.default,i=(s={proxy:W,docker:Y,default:t?Z:Q})[r]||s.default,e.n=2,m({loading:"正在".concat(t?"开启":"关闭","强制HTTPS，请稍后..."),request:i(u),message:!0});case 2:return e.n=3,Gs();case 3:e.n=5;break;case 4:e.p=4,e.v,ta.value.https=!t;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),ba=je({get:function(){return ta.value.key},set:function(e){ta.value.key=e}}),wa=je({get:function(){return ta.value.csr},set:function(e){ta.value.csr=e}}),ka=function(){var e=p(l().m(function e(){var t,n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return t={siteName:aa.value.name,pem:wa.value,key:ba.value},e.n=1,m({loading:"正在下载证书，请稍后...",request:$(t),data:{status:Boolean,msg:String}});case 1:n=e.v,r=n.status,a=n.msg,r&&window.open("/download?filename="+encodeURIComponent(a));case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Sa=!0,xa=function(){try{Sa?Sa=!1:Fs()}catch(e){}},_a=(r("i",function(){try{var e,n={},r=ta.value.push;if(r&&t(r.status)){var a=ta.value.push,u=a.sender,s=(a.module,a.status,a.id);n={cycle:r.task_data.cycle||30,push:Array.isArray(u)?u:u?u.split(","):[],dueAlarm:r.status,id:s||(new Date).getTime(),domainName:aa.value.name}}return"all"===(null==r||null===(e=r.task_data)||void 0===e?void 0:e.project)&&r.status&&(n.allSsl=!0),{data:n,status:!0}}catch(i){return{status:!1,msg:"获取证书到期提醒配置失败"}}}),function(e){e.id;var t=e.allSsl,n=e.push,r=e.cycle,a=e.dueAlarm;return{template_id:1,task_id:ta.value.push.id,status:a?1:0,task_data:JSON.stringify({task_data:{status:a,type:"site_ssl",project:t?"all":aa.value.name,cycle:parseInt(r),title:"网站SSL到期提醒",interval:600,tid:1},sender:n,time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:0,total:3}})}}),Ca=(r("o",function(){var e=p(l().m(function e(t,n){var r,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n();case 1:return r=_a(t.value),e.n=2,m({loading:"正在设置到期提醒，请稍后...",request:K(r),message:!0});case 2:return a=e.v,Gs(),e.a(2,a.status);case 3:return e.p=3,e.v,e.a(2,!1)}},e,null,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}()),function(){var t=p(l().m(function t(n,r){var a,u,s,i,o,c,p,f,v;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!r){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,navigator.clipboard.readText();case 2:a=t.v,u=[/-----BEGIN PRIVATE KEY-----[\s\S]*?-----END PRIVATE KEY-----/,/-----BEGIN RSA PRIVATE KEY-----[\s\S]*?-----END RSA PRIVATE KEY-----/,/-----BEGIN EC PRIVATE KEY-----[\s\S]*?-----END EC PRIVATE KEY-----/],s=[/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/,/-----BEGIN CERTIFICATE REQUEST-----[\s\S]*?-----END CERTIFICATE REQUEST-----/],i=e("key"===n?u:s),t.p=3,i.s();case 4:if((o=i.n()).done){t.n=8;break}if(c=o.value,!(p=a.match(c))||!p[0]){t.n=7;break}d.success("已从粘贴板检测到".concat("key"===n?"密钥":"证书")),f=n,t.n="key"===f?5:"cert"===f?6:7;break;case 5:return ba.value=p[0],t.a(3,7);case 6:return wa.value=p[0],t.a(3,7);case 7:t.n=4;break;case 8:t.n=10;break;case 9:t.p=9,v=t.v,i.e(v);case 10:return t.p=10,i.f(),t.f(10);case 11:t.n=13;break;case 12:t.p=12,t.v;case 13:return t.a(2)}},t,null,[[3,9,10,11],[1,12]])}));return function(e,n){return t.apply(this,arguments)}}()),Aa=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:try{t(),"docker"===ua.value?Tt("httpsOfficersSite"):At("httpsOfficersSite")}catch(n){}case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ta=function(){var e=p(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m({request:ee({siteName:aa.value.name})});case 1:return e.n=2,Gs();case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),La={class:"flex flex-col w-full overflow-y-hidden"},Na={class:"flex items-center justify-between w-full"},Ea={class:"flex"},Da={class:"mr-[32px] text-[1.2rem]"},Ia={key:1,class:"ssl-status-info"},ja={class:"left flex-1"},Oa=["title"],Pa={class:"!mb-0"},Va={class:"right flex-1"},Ha=["title"],Ra={key:0},qa={key:1,class:"text-danger"},Ba={class:"!mb-0"},Ma={class:"flex items-center"},Fa={class:"flex flex-1 justify-start"},Ua={class:"flex-1 mr-[20px]"},Ga={class:"flex-1"},za={class:"my-[16px]"},Ja={class:"p-2rem"},Ka={class:"flex"},Xa={class:"ml-4"},Wa={class:"mt-8px flex items-center"},Ya=qe({__name:"index",setup:function(e,t){var r=t.expose,a=wt().sslInfo,u=["其他证书","Let's Encrypt","宝塔SSL","商业证书"],s=je(function(){return-1!==a.value.type?u[a.value.type]:u[0]}),i=st("popupClose",function(){});return it(xa),r({init:xa}),function(e,t){var r,u,l,o,c,p,f,d=ot,v=b,m=ct,h=pt,y=He,g=C,w=ft,k=dt,S=E;return Be(),Xe("div",La,[null===(r=Je(a))||void 0===r||!r.isCertInfo||null!==(u=Je(a))&&void 0!==u&&u.httpsMode||null===(l=Je(a))||void 0===l||!l.isStart?lt("",!0):(Be(),Me(d,{key:0,type:"error",class:"!mb-[16px]",onClose:Je(Ta)},{title:Fe(function(){return[Ge("div",Na,[Ge("div",Ea,[Ge("div",Da,[t[13]||(t[13]=Ve("网站安全：未开启HTTPS防窜站，站点访问可能存在风险。",-1)),Ge("span",{class:"ml-[1rem] bt-link",onClick:t[0]||(t[0]=function(e){return Je(Aa)(Je(i))})},">>前往开启")])])])]}),_:1},8,["onClose"])),null!==(o=Je(a))&&void 0!==o&&o.isCertInfo?(Be(),Xe("div",Ia,[Ge("div",ja,[Ge("div",null,[t[14]||(t[14]=Ge("span",null,"证书分类：",-1)),Ge("span",null,[Pe(v,{onClick:t[1]||(t[1]=function(e){return Je(ca)(Je(a).type)})},{default:Fe(function(){return[Ve(Qe(Je(s)),1)]}),_:1})])]),Ge("div",null,[t[15]||(t[15]=Ge("span",null,"认证域名：",-1)),Ge("span",{class:"truncate max-w-24rem",title:Je(a).dns.join("、")},Qe(Je(a).dns.join("、")),9,Oa)]),Ge("div",Pa,[t[16]||(t[16]=Ge("span",null,"强制HTTPS：",-1)),Ge("span",null,[Pe(m,{size:"small",class:"!mb-0",modelValue:Je(a).https,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Je(a).https=e}),onChange:Je(ga)},null,8,["modelValue","onChange"])])])]),Ge("div",Va,[Ge("div",null,[t[17]||(t[17]=Ge("span",null,"证书品牌：",-1)),Ge("span",{class:"truncate max-w-24rem",title:Je(a).issuer},Qe(Je(a).issuer),9,Ha)]),Ge("div",null,[t[18]||(t[18]=Ge("span",null,"到期时间：",-1)),Ge("span",null,[Number(Je(a).endtime)>0?(Be(),Xe("span",Ra,Qe(Je(a).notAfter),1)):(Be(),Xe("span",qa,"证书已过期"))])]),Ge("div",Ba,[t[20]||(t[20]=Ge("span",null,"到期提醒：",-1)),Ge("span",Ma,[Pe(m,{size:"small",class:"!mb-0",modelValue:Je(a).pushAlarm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Je(a).pushAlarm=e}),onChange:Je(da)},null,8,["modelValue","onChange"]),Pe(v,{class:"ml-[8px]",onClick:t[4]||(t[4]=function(e){return Je(xt)()})},{default:Fe(function(){return n(t[19]||(t[19]=[Ve(" 到期设置提醒 ",-1)]))}),_:1})])])])])):lt("",!0),Ge("div",Fa,[Ge("div",Ua,[t[21]||(t[21]=Ge("div",{class:"mb-[4px]"},"密钥(KEY)",-1)),Pe(h,{type:"textarea",rows:12,modelValue:Je(ba),"onUpdate:modelValue":t[5]||(t[5]=function(e){return nt(ba)?ba.value=e:null}),onFocus:t[6]||(t[6]=function(e){return Je(Ca)("key",Je(ba))})},null,8,["modelValue"])]),Ge("div",Ga,[t[22]||(t[22]=Ge("div",{class:"mb-[4px]"},"证书(PEM格式)",-1)),Pe(h,{type:"textarea",rows:12,modelValue:Je(wa),"onUpdate:modelValue":t[7]||(t[7]=function(e){return nt(wa)?wa.value=e:null}),onFocus:t[8]||(t[8]=function(e){return Je(Ca)("cert",Je(wa))})},null,8,["modelValue"])])]),Ge("div",za,[Pe(y,{type:"primary",class:"mr-[4px]",onClick:Je(ya)},{default:Fe(function(){var e;return[Ve(Qe(null!==(e=Je(a))&&void 0!==e&&e.isStart?"保存":"保存并启用证书"),1)]}),_:1},8,["onClick"]),null!==(c=Je(a))&&void 0!==c&&c.isSupportRenewal||1===(null===(p=Je(a))||void 0===p?void 0:p.type)?(Be(),Me(y,{key:0,type:"primary",class:"mr-[4px]",onClick:t[9]||(t[9]=function(e){return Je(li)()})},{default:Fe(function(){return n(t[23]||(t[23]=[Ve(" 续签证书 ",-1)]))}),_:1})):lt("",!0),Je(a).csr?(Be(),Me(y,{key:1,type:"default",class:"mr-[4px]",onClick:t[10]||(t[10]=function(e){return Je(ka)()})},{default:Fe(function(){return n(t[24]||(t[24]=[Ve(" 下载证书 ",-1)]))}),_:1})):lt("",!0),null!==(f=Je(a))&&void 0!==f&&f.isStart?(Be(),Me(y,{key:2,type:"default",onClick:Je(vi)},{default:Fe(function(){return n(t[25]||(t[25]=[Ve(" 关闭SSL ",-1)]))}),_:1},8,["onClick"])):lt("",!0)]),Pe(g,{options:Je(oa),"list-style":"disc",class:"ml-[20px]"},null,8,["options"]),Pe(S,{title:"关闭证书到期提醒",showFooter:"",modelValue:Je(pa),"onUpdate:modelValue":t[12]||(t[12]=function(e){return nt(pa)?pa.value=e:null}),onConfirm:Je(ha),onCancel:Je(ma),area:["auto"]},{default:Fe(function(){return[Ge("div",Ja,[Ge("div",Ka,[t[28]||(t[28]=Ge("i",{class:"svgtofont-el-warning-filled !text-[4rem] text-warning"},null,-1)),Ge("div",Xa,[t[27]||(t[27]=Ge("div",{class:"py-[.3rem] leading-[2.4rem] text-[1.3rem]"},"关闭证书到期提醒后将不在提醒和证书到期，是否继续操作？",-1)),Ge("div",Wa,[t[26]||(t[26]=Ge("div",null,"应用配置",-1)),Pe(k,{modelValue:Je(fa),"onUpdate:modelValue":t[11]||(t[11]=function(e){return nt(fa)?fa.value=e:null}),class:"!w-[20rem] ml-2rem"},{default:Fe(function(){return[Pe(w,{label:"应用到当前站点",value:!1}),Pe(w,{label:"应用到所有未设置过的站点",value:!0})]}),_:1},8,["modelValue"])])])]),Pe(g,{options:[{content:"任务优先级：单个站点的任务优先于所有站点的任务。"}],"list-style":"disc",class:"ml-4rem mt-2rem"})])]}),_:1},8,["modelValue","onConfirm","onCancel"])])}}}),Za=k(Ya,[["__scopeId","data-v-21e01e2e"]]),Qa=St(),$a=Qa.siteInfo,eu=Qa.siteType,tu=wt(),nu=tu.isRefreshLetSSL,ru=tu.sslDnsApiInfo,au=tu.otherPopup,uu=kt().jumpSslTabEvent,su=Ie(!1),iu=Oe({}),lu=Ie([]),ou=Ie([]),cu=Ie(!1),pu=Ie(""),fu=function(e){var t,n,r=(null===(t=e.domains)||void 0===t?void 0:t.length)>0,a=r?(n=e.endDay)<=0||n<=7?"text-danger":n<=15?"text-orange":"text-[#20a53a]":"text-[#333]",u=r?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--";return Pe("span",{class:a},[u])},du=function(e){var t="";if("pending"===e.status){if(e.expires<(new Date).getTime()/1e3)return t=Pe("span",null,[Ve("--")]);t=Pe("span",{class:"text-[#e6a23c]"},[Ve("待验证")])}else t=Pe("span",{class:"text-[#20a53a]"},[Ve("订单完成")]);return t},vu=[{content:function(){return Pe("span",{class:"text-danger"},[Ve("注意：请勿将SSL证书用于非法网站")])}},{content:function(){return Pe("span",null,[Ve("Let's Encrypt 证书申请和续签限制"),Pe("a",{class:"bt-link",href:"https://letsencrypt.org/zh-cn/docs/rate-limits/",target:"_blank"},[Ve("点击查看")])])}},{content:function(){return Pe(We,null,[Ve("Let's Encrypt因更换根证书，部分老旧设备访问时可能提示不可信，考虑购买")," ",Pe("span",{class:"bt-link",onClick:function(){return uu("busSslList")}},[Ve("[商业证书]")])])}},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败"},{content:"Let's Encrypt免费证书，有效期3个月，支持多域名。默认会自动续签"},{content:"若您的站点使用了CDN或301重定向会导致续签失败"},{content:"在未指定SSL默认站点时未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"}],mu=Ie([{label:"解析域名",prop:"domain"},{label:"记录值",showOverflowTooltip:!0,prop:"auth_value",render:function(e,t){var n="dns"===iu.auth_type?e.auth_value:e.file_path;return Pe("div",{class:"flex items-center"},[Pe("div",{class:"truncate w-[15rem]"},[n]),Pe("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return D({value:n})}},null)])}},{label:"类型",prop:"type",render:function(e,t){return"dns"===iu.auth_type?Pe("span",null,[e.type]):Pe("div",{class:"flex items-center"},[Pe("div",{class:"truncate w-[15rem]"},[e.content]),Pe("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return D({value:e.content})}},null)])}},{label:"必需",prop:"must",width:100}]),hu=Ie(!1),yu=function(){var e=p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m({loading:hu,request:re({siteName:$a.value.name}),data:Array});case 1:return t=e.v,e.a(2,{data:t,total:t.length,other:{}});case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),gu=function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.index,e.p=1,e.n=2,m({loading:"正在获取证书信息，请稍后...",request:ae({index:n}),message:!1,data:{status:Boolean,msg:String}});case 2:return(r=e.v).status?window.open(r.msg):d.request(r),e.a(2,{status:r.status,msg:r.msg});case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"下载失败"})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),bu=function(){var e=p(l().m(function e(t){var n,r,a,u,s,i=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.index,r=i.length>1&&void 0!==i[1]&&i[1],a=i.length>2&&void 0!==i[2]?i[2]:$a.value.name,e.p=1,u={index:n,siteName:a},e.n=2,m({loading:"正在部署证书，请稍候...",request:"docker"===eu.value?ue(u):se(u),message:!1,data:{status:Boolean,msg:String}});case 2:return s=e.v,Ws(s,r),s.status&&uu("currentCertInfo"),e.a(2,{status:s.status,msg:s.msg});case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"部署失败"})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),wu=function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.index,e.p=1,e.n=2,h({title:"删除证书订单",content:"确定删除证书订单吗？"});case 2:return e.n=3,m({loading:"正在删除证书，请稍候...",request:ie({index:n}),message:!0});case 3:return r=e.v,nu.value=!0,e.a(2,{status:r.status,msg:r.msg});case 4:return e.p=4,e.v,e.a(2,{status:!1,msg:"删除失败"})}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),ku=function(){var e=p(l().m(function e(t){var n,r,a,u,s;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m({loading:"正在验证证书申请状态，请稍后...",request:le({index:t.index}),message:!1});case 1:n=e.v,(r=n.data).hasOwnProperty("status")&&r.hasOwnProperty("msg")?d.request(r):(ou.value=r.auths,r.hasOwnProperty("error")?(cu.value=r.error,pu.value=r.error_msg):(cu.value=!1,pu.value=""),Object.assign(iu,t),lu.value=[],null===(a=r.auths)||void 0===a||a.forEach(function(e){lu.value.push(e.data)}),s="dns"===t.auth_type,mu.value[1].label=s?"记录值":"文件路径",mu.value[1].prop=s?"auth_value":"file_path",mu.value[2].label=s?"类型":"文件内容",mu.value[2].prop=s?"type":"content",Au.value[1].content="可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(null===(u=lu.value[0])||void 0===u||null===(u=u.domain)||void 0===u?void 0:u.replace("*.","")),c({title:"手动".concat("dns"===iu.auth_type?"解析TXT记录":"创建验证文件"),area:70,component:function(){return Pe("div",{class:"p-[1.5rem]"},[Ve("请按以下列表做TXT解析:"),Pe("span",{class:"ml-[.4rem] text-danger"},{errorMsg:pu}),Pe(Ee,null,i({content:function(){return Pe("div",{class:"max-h-[38rem] overflow-auto"},[ou.value.map(function(e,t){return e.data.length>0&&Pe("div",{key:t},[Pe("span",null,[Ve("验证域名："),e.domain]),Pe(O,{class:"my-[1rem]",column:mu.value,data:e.data},null),cu.value&&Pe("div",{class:"flex justify-end"},[Pe(He,{type:"default",onClick:function(){return Su(e)}},{default:function(){return[Ve("验证")]}})])])})])}},"footer-right",function(){return!cu.value&&Pe(He,{type:"default",onClick:_u},{default:function(){return[Ve("验证")]}})})),Pe(C,{options:Au.value,listStyle:"disc",class:"ml-[20px]"},null)])}}),nu.value=!0);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Su=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ei();case 1:return n=e.v,e.n=2,oe({index:iu.index,domain:t.domain});case 2:r=e.v,a=r.data,n._props.onCancel(),"valid"===a.status?d.success("验证成功"):!0===a.status?(su.value=!1,bu(a,!0)):$s(a,t.data,iu);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),xu=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return n=t.index,e.n=1,ei();case 1:return r=e.v,e.n=2,m({request:ce({index:n}),message:!1,data:{status:Boolean,msg:String}});case 2:a=e.v,r._props.onCancel(),d.msg({dangerouslyUseHTMLString:!0,message:a.msg,type:a.status?"success":"error",duration:a.status?2e3:0,showClose:!a.status}),a.status&&yu();case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),_u=function(){var e=p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ei();case 1:return t=e.v,e.n=2,m({request:pe({index:iu.index}),message:!1});case 2:n=e.v,t._props.onCancel(),!0===n.status?(su.value=!1,bu(n,!0)):$s({msg:n.data},lu.value,iu);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Cu=function(){mi({})},Au=Ie([{content:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{content:""},{content:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}]),Tu=r("aC",Ie([])),Lu=r("ap",Ie("dns")),Nu=r("az",Ie(!1)),Eu=r("ax",p(l().m(function e(){var t,n,r=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{id:$a.value.id},e.p=1,e.n=2,m({request:"docker"==eu.value?fe(t):de(t),data:{domains:Array}});case 2:return n=e.v,Du.domain=n.domains.map(function(e){return e.name}),Tu.value=n.domains,e.a(2,{data:n.domains,status:!0,msg:"获取站点数据成功"});case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"获取站点数据失败"})}},e,null,[[1,3]])}))),Du=(r("aw",function(){var e=p(l().m(function e(t){var n,r,a,u,i,o,c,p;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t=vt(t.value),n=eu.value,r=$a.value.name,0!==t.checkList.length){e.n=1;break}return d.error("请选择一个域名"),e.a(2,!1);case 1:if(a=Tu.value.filter(function(e){return t.checkList.includes(e.name)}),"1"!==t.resource||!Pu(a)||Du.auth_to){e.n=2;break}return d.error("选中的域名存在未设置DNS接口配置"),e.a(2,!1);case 2:if("1"!==t.resource||!t.autoWildcard||!t.checkList.some(function(e){return-1!==e.indexOf("*")})){e.n=3;break}return d.error("开启自动组合泛域名时不能选择泛域名"),e.a(2,!1);case 3:return u={domains:JSON.stringify(t.checkList),auth_type:"1"==t.resource?"dns":"http",auth_to:"1"===t.resource&&t.auth_to?"dns":JSON.stringify(t.checkList),auto_wildcard:t.autoWildcard?"1":"0",id:$a.value.id},e.n=4,ei();case 4:return i=e.v,o={proxy:s(s({},u),{},{site_name:r}),docker:s(s({},u),{},{site_name:r}),default:u},e.n=5,ne(o[n]||o.default,n);case 5:return c=e.v,i._props.onCancel(),e.n=6,au.value;case 6:return p=e.v,c.status&&(null==p||p.unmount()),ri(c.data,t),nu.value=!0,e.a(2,c.status);case 7:return e.p=7,e.v,d.error("程序发生错误！"),e.a(2,!1)}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),r("aE",function(e){c({isAsync:!0,title:"配置DNS接口",area:50,component:function(){return f(function(){return a.import("./set-domain-dns-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:{row:e,refresh:Eu},showFooter:!0})}),r("aq",function(e){var t=Lu.value;if("dns"!==t&&"http"!==t){var n,r=null===(n=ru.value)||void 0===n?void 0:n.find(function(e){return e.value===t});if(r){var a=!r.data;(!e||e&&a)&&Ys({title:"设置".concat(r.info.title,"接口"),row:r.info})}}}),r("aA",function(e){var t=Tu.value.filter(function(e){return 1===e.apply_ssl});Du.checkList=e?t.map(function(e){return e.name}):[],Nu.value=!1}),r("aB",function(e){var t=e.length;Du.checkAll=t===Du.domain.length,Nu.value=t>0&&t<Du.domain.length}),r("au",Oe({resource:"0",auth_to:!1,autoWildcard:!1,checkAll:!1,domain:[],checkList:[]}))),Iu=Ie([{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"},{content:function(){return Pe("span",null,[Ve("在DNS验证中，我们提供了多种自动化DNS-API，并提供了手动模式-"),Pe("span",{class:"bt-link",onClick:function(){I(),j.push({name:"domain"})}},[Ve("点击添加DNS接口")])])}},{content:"使用DNS接口申请证书可自动续期，手动模式下证书到期后需重新申请"}]),ju=[{content:function(){return Pe("span",{class:"text-danger"},[Ve("注意：请勿将SSL证书用于非法网站")])}},{content:"使用【DnsPod/阿里云DNS】等接口前您需要先在弹出的窗口中设置对应接口的API"}],Ou=Ie([{content:function(){return Pe("span",null,[" ",Ve("Let's Encrypt 证书申请和续签限制")," ",Pe("a",{class:"bt-link",target:"_blank",href:"https://letsencrypt.org/zh-cn/docs/rate-limits/"},[Ve("点击查看")])])}},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败"},{content:"Let's Encrypt免费证书，有效期3个月，支持多域名。默认会自动续签"},{content:"若您的站点使用了CDN或301重定向会导致续签失败"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"}]),Pu=(r("av",je(function(){var e="0"===Du.resource?Ou.value:Iu.value,t=ju.concat([]);return t.splice.apply(t,[1,0].concat(n(e))),t})),r("aD",function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}),r("ay",function(){Object.assign(Du,{resource:"0",auth_to:!1,autoWildcard:!1,checkAll:!1,domain:[],checkList:[]})}),function(e){return e.some(function(e){return 0===e.dns_status})}),Vu=r("al",Ie("正在申请证书...")),Hu=r("ak",Ie()),Ru=(r("aj",p(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:Hu.value=setInterval(p(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m({request:ve({filename:"/www/server/panel/logs/letsencrypt.log",num:10}),data:{msg:[String,Vu]}});case 1:e.n=3;break;case 2:e.p=2,e.v,clearInterval(Hu.value);case 3:return e.a(2)}},e,null,[[0,2]])})),2e3);case 1:return e.a(2)}},e)}))),r("at",Ie())),qu=r("ar",Ie([{title:"文件验证 - HTTP",name:"http",data:!1,config:!1}])),Bu=(r("as",function(){var e=p(l().m(function e(t){var n,r,a,u,i,o,c,p,f,v;return l().w(function(e){for(;;)switch(e.n){case 0:if(n=t.dns,r=t.id,a={domains:JSON.stringify(n),auth_type:"http",auth_to:r||"dns",auto_wildcard:"0"},"http"!==Lu.value){e.n=2;break}if(-1===(null==(u=JSON.stringify(n))?void 0:u.indexOf("*."))){e.n=1;break}return e.a(2,d.error("包含通配符的域名不能使用文件验证(HTTP)!"));case 1:e.n=5;break;case 2:if("dns"===Lu.value){e.n=4;break}if(i=ru.value.find(function(e){return e.value===Lu.value}),o=i.data,c=i.info.data,!o){e.n=3;break}a.auth_to="".concat(Lu.value,"|").concat(c[0].value,"|").concat(c[1].value),e.n=4;break;case 3:return d.error("指定dns接口没有设置密钥信息"),e.a(2);case 4:a.auth_type="dns";case 5:return a.id=$a.value.id,a.siteName=$a.value.name,e.n=6,au.value;case 6:return e.v.unmount(),e.n=7,ei();case 7:if(p=e.v,"proxy"!=$a.value.project_type&&"nginx"!=$a.value.project_type&&"docker"!=$a.value.project_type){e.n=9;break}return e.n=8,te(s(s({},a),{},{site_name:$a.value.name}),"docker"==$a.value.project_type?"docker":"proxy");case 8:v=e.v,e.n=11;break;case 9:return e.n=10,ne(a,eu.value);case 10:v=e.v;case 11:f=v.data,null==p||p.unmount(),ri(f,a);case 12:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),r("ao",p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return Lu.value="http",e.n=1,Zs();case 1:t=e.v,(n=t.data)&&Array.isArray(n)&&(qu.value=qu.value.concat(n));case 2:return e.a(2)}},e)}))),r("aH",Ie([]))),Mu=(r("aG",p(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m({request:me(),data:{data:[Array,Bu]}});case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}});case 3:return e.a(2)}},e,null,[[0,2]])}))),r("aF",function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t.dns_id){e.n=1;break}return d.error("请选择验证类型"),e.a(2);case 1:return n={dns_id:t.dns_id,ids:JSON.stringify(t.ids)},e.n=2,m({loading:"正在配置DNS接口，请稍候...",request:he(n),message:!0});case 2:return(r=e.v).status&&(t.dns_id="",t.ids=[],Eu()),e.a(2,r.status);case 3:return e.p=3,e.v,e.a(2,!1)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}()),qe({__name:"index",setup:function(e,t){var r=t.expose,a=wt(),u=a.isRefreshLetSSL,s=a.sslAlertState,i=S({request:yu,columns:[{label:"域名",prop:"domains",render:function(e,t){return Pe("span",{class:"w-full whitespace-pre-line"},[e.domains?e.domains.join("\n"):"--"])}},{label:"到期时间",prop:"expires",width:110,render:fu},{label:"订单状态",prop:"status",width:80,render:du},{label:"验证方式",prop:"auth_type",width:80,render:function(e,t){return Pe("span",null,["dns"===e.auth_type?"DNS验证":"文件验证"])}},{label:"操作",prop:"ps",width:190,showOverflowTooltip:!1,align:"right",render:function(e,t){var n=[];return"invalid"!==e.status&&("pending"!==e.status?n=[Pe("span",{class:"cursor-pointer bt-link",onClick:function(){return bu(e,!1)}},[Ve("部署")]),Pe(yt,null,null),Pe("span",{class:"cursor-pointer bt-link",onClick:function(){return gu(e)}},[Ve("下载")]),Pe(yt,null,null),Pe("span",{class:"cursor-pointer bt-link",onClick:function(){return xu(e)}},[Ve("续签")]),Pe(yt,null,null)]:e.expires>=(new Date).getTime()/1e3&&(n=[Pe("span",{class:"cursor-pointer bt-link",onClick:function(){return ku(e)}},[Ve("验证")]),Pe(yt,null,null)])),n.push(Pe("span",{class:"cursor-pointer bt-link",onClick:function(){return wu(e)}},[Ve("删除")])),n}}],extension:[x(),_(u)]}),l=i.BtTable,o=i.BtRefresh;return r({init:i.refresh}),function(e,t){var r=He,a=Ee,u=C;return Be(),Xe("div",null,[Pe(a,null,{"header-left":Fe(function(){return[Pe(r,{type:"primary",onClick:Je(Cu)},{default:Fe(function(){return n(t[0]||(t[0]=[Ve("申请证书",-1)]))}),_:1},8,["onClick"])]}),"header-right":Fe(function(){return[Pe(Je(o))]}),content:Fe(function(){return[Pe(Je(l),{"default-sort":{prop:"date",order:"descending"},maxHeight:Je(s)?280:320},null,8,["maxHeight"])]}),_:1}),Pe(u,{options:Je(vu),"list-style":"disc",class:"pl-1rem"},null,8,["options"])])}}})),Fu=jt().refs.isRefreshCertificateList,Uu=wt(),Gu=(Uu.sslInfo,Uu.sslTabActive,Uu.isRefreshSSL),zu=Uu.applySslInfo,Ju=St(),Ku=Ju.siteInfo,Xu=Ju.siteType,Wu=kt(),Yu=Wu.useDeployTrustAsiaCert,Zu=Wu.getDomainListEvent,Qu=Wu.jumpSslTabEvent,$u=P().payment,es=mt($u.value).bindUser,ts=Ie(!1),ns=Ie(""),rs=r("a2",Ie()),as=r("a1",Ie([])),us=[{content:function(){return Pe("span",{class:"text-danger"},[Ve("注意：请勿将SSL证书用于非法网站，一经发现，吊销证书。")])}},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败(包括根域名)。"},{content:"宝塔SSL申请的是免费版TrustAsia DV SSL CA - G5证书，仅支持单个域名申请。"},{content:"有效期90天，不支持续签，到期后需要重新申请，每个账号申请数量上限为3张。"},{content:"建议使用二级域名为www的域名申请证书,此时系统会默认赠送顶级域名为可选名称"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:function(){return Pe("span",null,[Ve("测试SSL申请注意事项及教程"),Pe("a",{href:"https://www.bt.cn/bbs/thread-33113-1-1.html",target:"_blank",class:"btlink"},[" ",Ve("使用帮助")])])}}],ss=function(e){switch(e.stateName){case"待验证":return Pe("span",{class:"text-[#e6a23c]"},[e.stateName]);case"已过期":return Pe("span",{class:"text-danger"},[e.stateName]);case"验证中":return Pe("span",{class:"text-[#fc6d26]"},[e.stateName]);case"审核已终止":return Pe("span",null,[e.stateName]);default:return Pe("span",{class:"text-[#20a53a]"},[e.stateName])}},is=r("a",function(e){if(!es.value)return Nt(),!1;rs.value=e,c({isAsync:!0,title:"申请免费宝塔SSL证书",area:60,component:function(){return f(function(){return a.import("./apply-bt-ssl-legacy2.js?v=1756369731")},void 0,a.meta.url)}})}),ls=function(){var e=p(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,vi();case 1:e.v,ps(),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),os=function(){var e=p(l().m(function e(t){var n,r,a,u,s,i,o,c=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:return n=t.partnerOrderId,r=c.length>1&&void 0!==c[1]&&c[1],a=Xu.value,u=Ku.value.name,i=(s={proxy:{site_name:u,partnerOrderId:n},default:{siteName:u,partnerOrderId:n}})[a]||s.default,e.n=1,Yu(i,a);case 1:o=e.v,Ws(o,r),Qu("currentCertInfo");case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),cs=function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return n={partnerOrderId:t.partnerOrderId,siteName:Ku.value.name},e.n=1,m({loading:"正在验证证书申请状态，请稍后...",request:we(n),message:!0,data:{status:Boolean,"data.stateCode":[String,"stateCode"]}});case 1:(r=e.v).status&&"COMPLETED"===r.stateCode?os(t,!0):d.success("等待CA验证中，若长时间未能成功验证，请登录官网使用DNS方式重新申请...");case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ps=function(){var e=p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m({loading:ts,request:ke({siteName:Ku.value.name})});case 1:return t=e.v,n=t.data,ns.value=n.partnerOrderId,Gu.value=!1,e.a(2,{data:n.data,total:n.data.length,other:{}});case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),fs=(r("a0",p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Zu();case 1:return t=e.v,as.value=t.data,rs.value&&rs.value.ssl_id&&(zu.value.domain=null===(n=as.value)||void 0===n||null===(n=n.find(function(e){return e.name===rs.value.authDomain}))||void 0===n?void 0:n.name),as.value=as.value.map(function(e){var t=e.name;e.id;return{value:t,label:t}}),e.a(2,{data:zu.value,status:!0});case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))),r("a3",function(){var e=p(l().m(function e(t){var n,r,a,u,i,o,c,p,f,v,h,y;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=null===(n=rs.value)||void 0===n?void 0:n.ssl_id,a=s(s({},t),{},{orgDivision:"总务",path:Ku.value.path}),r&&(a.ssl_id=r),delete a.data,a.status,u=r?ye:ge,e.n=1,m({loading:"正在提交证书申请资料，请稍后...",request:u(a)});case 1:if(i=e.v,o=i.data,c=i.msg,!(p=i.status)){e.n=3;break}return d.success(o.msg||c||"申请成功"),e.n=2,m({loading:"正在验证证书申请状态，请稍后...",request:be({partnerOrderId:o.partnerOrderId,siteName:Ku.value.name})});case 2:f=e.v,v=f.data,h=f.status,y=f.msg,h?"COMPLETED"==v.stateCode?(d.success("验证成功！即将开始证书部署！"),os(o)):d.success("等待CA验证中，若长时间未能成功验证，请登录官网使用DNS方式重新申请..."):d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:y,type:"error",duration:0,showClose:!0}),e.n=4;break;case 3:d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:o.msg||c,type:"error",duration:0,showClose:!0});case 4:return Gu.value=!0,Fu.value=!0,e.a(2,p);case 5:return e.p=5,e.v,e.a(2,!1)}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()),{class:"text-[1.2rem] h-[4.2rem] leading-[1.8rem]"}),ds={class:"flex flex-col w-full pt-[16px]"},vs=qe({__name:"index",setup:function(e,t){var r=t.expose,a=wt(),u=a.sslAlertState,s=a.isRefreshSSL,i=S({request:ps,columns:[{label:"域名",prop:"commonName"},{label:"到期时间",width:110,render:function(e,t){return V(e.endtime,"yyyy/MM/dd")}},{label:"状态",prop:"stateName",width:100,render:ss},{label:"操作",prop:"ps",width:200,showOverflowTooltip:!1,align:"right",render:function(e){if("审核已终止"===e.stateName)return Pe("span",null,[Ve("--")]);var t=[Pe("span",{class:"bt-link",onClick:function(){return os(e,!1)}},[Ve("部署")])];return"WF_DOMAIN_APPROVAL"===e.stateCode&&""!==e.authDomain?t=[Pe("span",{class:"bt-link",onClick:function(){return cs(e)}},[Ve("验证域名")]),Pe(ht,{direction:"vertical"},null),Pe("span",{class:"bt-link",onClick:function(){return is(e)}},[Ve("修改域名")])]:"WF_DOMAIN_APPROVAL"===e.stateCode&&""===e.authDomain?t=[Pe("span",{class:"bt-link",onClick:function(){return is(e)}},[Ve("填写域名")])]:e.partnerOrderId===ns.value&&(t=[Pe("span",null,[Ve("已部署")]),Pe(yt,null,null),Pe("span",{class:"bt-link",onClick:function(){return ls()}},[Ve("关闭")])]),t}}],extension:[x(),_(s)]}),l=i.BtTable,o=i.BtRefresh;return r({init:i.refresh}),function(e,t){var r=b,a=ot,s=He,i=Ee,c=C;return Be(),Xe("div",null,[Pe(a,{type:"error",closable:!1},{title:Fe(function(){return[Ge("span",fs,[t[2]||(t[2]=Ge("span",null," 提示：尊敬的用户您好，感谢您对宝塔免费证书的支持，由于证书签发机制的调整，原一年的免费证书，将缩短至90天。本调整将于2024年4月25日生效。请注意及时续签。 ",-1)),Pe(r,{class:"!inline-block",href:"https://www.trustasia.com/view-free-ssl-one-year-adjustment-announcement/",target:"_blank"},{default:Fe(function(){return n(t[1]||(t[1]=[Ve(" 查看详情 ",-1)]))}),_:1}),t[3]||(t[3]=Ve(" 。 ",-1))])]}),_:1}),Ge("div",ds,[Pe(i,null,{"header-left":Fe(function(){return[Pe(s,{type:"primary",onClick:t[0]||(t[0]=function(e){return Je(is)()})},{default:Fe(function(){return n(t[4]||(t[4]=[Ve(" 申请证书 ",-1)]))}),_:1})]}),"header-right":Fe(function(){return[Pe(Je(o))]}),content:Fe(function(){return[Pe(Je(l),{"default-sort":{prop:"date",order:"descending"},"max-height":Je(u)?280:320},null,8,["max-height"])]}),_:1})]),Pe(c,{options:Je(us),"list-style":"disc",class:"ml-[20px]"},null,8,["options"])])}}}),ms=P().payment,hs=mt(ms.value).bindUser,ys=wt(),gs=ys.sslInfo,bs=ys.certVerifyInfo,ws=ys.sslTabActive,ks=ys.letApplyInfo,Ss=ys.isRefreshSSL,xs=ys.pollingPopup,_s=ys.sslDnsApiInfo,Cs=ys.productInfo,As=ys.orderInfo,Ts=ys.otherPopup,Ls=St(),Ns=Ls.siteInfo,Es=Ls.siteType,Ds=Ls.isBindExtranet,Is=Ls.isRefreshList,js=Ls.batchConfig,Os=Ls.activeType,Ps=Ls.isSiteMult,Vs=De(Ct()).isRefreshLocalList,Hs=kt(),Rs=Hs.getSSLInfoEvent,qs=Hs.jumpSslTabEvent,Bs=je(function(){var e,t;return'当前证书 -<span class="'.concat(null!==(e=gs.value)&&void 0!==e&&e.isStart?"text-primary":"text-danger",'">[').concat(null!==(t=gs.value)&&void 0!==t&&t.isStart?"已部署SSL":"未部署SSL","]</span>")}),Ms=(r("t",[{label:function(){return Pe("span",{innerHTML:Bs.value},null)},name:"currentCertInfo",lazy:!0,render:function(){return Pe(Za,null,null)}},{label:"商用SSL证书",name:"busSslList",lazy:!0,render:function(){return Pe(Cr,null,null)}},{label:"测试证书",name:"trustAsiaList",lazy:!0,render:function(){return Pe(vs,null,null)}},{label:"Let's Encrypt",name:"letsEncryptList",lazy:!0,render:function(){return Pe(Mu,null,null)}},{label:"证书夹",name:"certFolderList",lazy:!0,render:function(){return Pe($r,null,null)}}]),r("d",function(){if(!hs.value)return Nt(),!1;ws.value="busSslList",c({isAsync:!0,title:"购买商业证书",area:[79],component:function(){return f(function(){return a.import("./apply-bus-ssl-legacy.js?v=1756369731")},void 0,a.meta.url)}})})),Fs=r("m",function(){var e,t,n=null===(e=Ns.value.project_type)||void 0===e?void 0:e.toLowerCase();Es.value=n,Ds.value=!(null===(t=Ns.value.project_config)||void 0===t||!t.bind_extranet);["php","html","phpasync","proxy","docker"].includes(n)&&(Ds.value=!0),Ds.value&&Us()}),Us=function(){var e=p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t=d.load("正在获取站点证书部署信息，请稍候..."),e.n=1,Gs();case 1:t.close();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Gs=r("aI",p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Rs({siteName:Ns.value.name});case 1:return t=e.v,n=t.data,zs(n),e.a(2,{data:n,status:!0,msg:"获取证书信息成功"});case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))),zs=function(e){var n=e.type,r=e.httpTohttps,a=e.https_mode,u=e.index,i=e.auth_type,l=e.key,o=e.csr,c=e.cert_data,p=void 0===c?{}:c,f=p.dns,d=void 0===f?[]:f,v=p.subject,m=void 0===v?"":v,h=p.issuer,y=void 0===h?"":h,g=p.endtime,b=void 0===g?"":g,w=p.notAfter,k=void 0===w?"":w,S=e.push,x=e.status,_=e.oid;gs.value=s(s({},gs.value),{},{isCertInfo:!!m,https:r,httpsMode:a,type:n,key:l||"",csr:o||"",index:u||"",authType:i||"",oid:_,dns:d||[],subject:m,issuer:y,endtime:b,notAfter:k,push:S,pushAlarm:!!("object"===t(S)?S.status:S),isSupportRenewal:function(){var e=!1;return b<=30&&(e=!0),2===n&&b<0&&(e=!0),0!==n&&-1!==n||(e=!1),e}(),isStart:x})},Js=r("an",function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return As.value=t.orderInfo,e.n=1,c({title:"完善商业证书资料",area:64,component:function(){return f(function(){return a.import("./bus-cert-verify-info-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:t});case 1:Ts.value=e.v;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Ks=r("$",function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return bs.value=t,e.n=1,c({title:"验证域名-"+(t.isCNAME?"DNS验证":"文件验证"),area:64,component:function(){return f(function(){return a.import("./bus-cert-verify-way-legacy.js?v=1756369731")},void 0,a.meta.url)}});case 1:Ts.value=e.v;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Xs=r("s",function(){var e=p(l().m(function e(t){var r,a,u,i,o,c,f,d,v,y,g,b,w;return l().w(function(e){for(;;)switch(e.n){case 0:return r=t.hash,a=t.subject,u=t.list,i=t.type,e.n=1,h({title:"部署证书",content:"批量部署证书后，原有证书将被覆盖，是否继续？",icon:"warning-filled"});case 1:if(!Ps.value){e.n=3;break}return o=js.value,c=o.enable,f=o.exclude,d=Et(u,f,c,{params:{certName:a,project_type:Os.value.toUpperCase(),ssl_hash:r}}),e.n=2,m({loading:"正在部署证书，请稍候...",request:Ae(d),success:function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:n=Dt(t.data),r=(r=n.data).map(function(e){return s(s({},e),{},{name:e.siteName})}),It(r,{title:"部署证书"});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()});case 2:Ps.value=!1,Is.value=!0,Vs.value=!0,e.n=5;break;case 3:return y=u.map(function(e){return{ssl_hash:r,siteName:e.name,certName:a}}),g={proxy:{BatchInfo:JSON.stringify(y),site_name:Ns.value.name},docker:{BatchInfo:JSON.stringify(y),site_name:Ns.value.name},default:{BatchInfo:JSON.stringify(y)}},b=g[i]||g.default,e.n=4,m({loading:"正在部署证书，请稍候...",request:Te(b,i),data:{faildList:Array,successList:Array}});case 4:return w=e.v,null!==(v=Ns.value)&&void 0!==v&&v.name&&Gs(),Is.value=!0,Vs.value=!0,e.n=5,_t({title:"批量部署结果",resultTitle:"部署证书操作",resultData:[].concat(n(w.faildList.map(function(e){return{name:e.siteName,status:!1,msg:e.msg||e.error_msg}})),n(w.successList.map(function(e){return{name:e.siteName,status:!0}})))});case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Ws=r("u",function(e,t){if(e.status)d.request(e),Gs(),Is.value=!0,Ss.value=!0,Vs.value=!0;else{var n=t?"当前证书已成功申请！自动部署失败，请尝试手动部署证书！\n":"";d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:n+e.msg,type:e.status?"success":"error",showClose:!e.status})}}),Ys=function(e){return c({isAsync:!0,title:e.title,area:50,component:function(){return f(function(){return a.import("./dns-verify-info-legacy.js?v=1756369731")},void 0,a.meta.url)},showFooter:!0,compData:e.row})},Zs=r("w",p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m({request:Le(),data:Array});case 1:return t=e.v,A(t)&&Qs(t),e.a(2,{data:t,status:!0});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"获取DNS接口信息失败"})}},e,null,[[0,2]])}))),Qs=function(e){_s.value=e.filter(function(e){return"CloudxnsDns"!==e.name}).map(function(e){return{label:e.title,value:e.name,config:!!e.data,data:!!e.data&&""!=e.data[0].value,info:e}})},$s=(r("ai",function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n={},t.forEach(function(e){n[e.key]=e.value}),r={pdata:JSON.stringify(n)},e.n=1,m({loading:"正在配置DNS接口，请稍候...",request:Ne(r),message:!0});case 1:return a=e.v,e.n=2,Zs();case 2:if(!a.status){e.n=3;break}return e.a(2,a.status);case 3:e.n=5;break;case 4:return e.p=4,e.v,e.a(2,{status:!1,msg:"验证失败"});case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}()),r("c",function(t,n,r){var a;if(t.msg&&H(t.msg))d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:t.msg,type:"error",showClose:!0,duration:0});else{var u,s,i="",l=t.msg[0];if(void 0===(null===(a=t.msg[1])||void 0===a?void 0:a.challenges))i+="\n\t\t\t<p><span>响应状态：</span>".concat(t.msg[1].status,"</p>\n\t\t\t<p><span>错误类型：</span>").concat(t.msg[1].type,"</p>\n\t\t\t<p><span>错误来源：</span><a href='https://letsencrypt.org/' style='color:#20a53a'>Let's Encrypt官网</a></p>\n\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t错误代码：\n\t\t\t\t<pre class=\"!text-white !bg-[#333] !inline-block !ml-[4px]\">\n\t\t\t\t\t").concat(t.msg[1].detail,"\n\t\t\t\t</pre>\n\t\t\t</div>");else if(null!==(u=t.msg[1])&&void 0!==u&&u.challenges[1]||null===(s=t.msg[1])||void 0===s||!s.challenges[0]||(t.msg[1].challenges[1]=t.msg[1].challenges[0]),"invalid"===t.msg[1].status){var o,c,p,f="",v=e(n);try{for(v.s();!(p=v.n()).done;){var m=p.value,h=m.outerText||m.auth_value;if(null!=h&&h.includes(t.msg[1].identifier.value)){var y=h.split("\t");if((null==y?void 0:y.length)>1){f=y[1];break}}}}catch(A){v.e(A)}finally{v.f()}var g=null===(o=t.msg[1])||void 0===o?void 0:o.identifier.value,b=null===(c=t.msg[1])||void 0===c?void 0:c.challenges[1],w=null==b?void 0:b.error.detail;if(i+="\n\t\t\t\t<p><span>验证域名：</span>".concat(g,"</p>\n\t\t\t"),"dns"===(null==r?void 0:r.type)||"dns"===(null==r?void 0:r.auth_type)){var k="_acme-challenge.".concat(g);i+="\n\t\t\t\t\t<p><span>验证解析：</span>".concat(k,"</p>\n\t\t\t\t\t<p><span>验证内容：</span>").concat(f||b.token,'</p>\n\t\t\t\t\t<div class="flex flex-col">\n\t\t\t\t\t\t错误代码：\n\t\t\t\t\t\t<pre class="!text-white !bg-[#333] !inline-block !ml-[4px]">\n\t\t\t\t\t\t\t').concat(w,"\n\t\t\t\t\t\t</pre>\n\t\t\t\t\t</div>\n\t\t\t\t")}else{var S,x,_,C="http://".concat(g,"/.well-known/acme-challenge/").concat(null===(S=t.msg[1])||void 0===S?void 0:S.challenges[0].token);i+="\n\t\t\t\t\t<p><span>验证URL：</span><a style='color:#20a53a' href='".concat(C,"' target='_blank'>点击查看</a></p>\n\t\t\t\t\t<p><span>验证内容：</span>").concat(null===(x=t.msg[1])||void 0===x?void 0:x.challenges[0].token,'</p>\n\t\t\t\t\t<div class="flex flex-col">\n\t\t\t\t\t\t错误代码：\n\t\t\t\t\t\t<pre class="!text-white !bg-[#333] !inline-block !ml-[4px]">\n\t\t\t\t\t\t\t').concat(null===(_=t.msg[1])||void 0===_?void 0:_.challenges[0].error.detail,"\n\t\t\t\t\t\t</pre>\n\t\t\t\t\t</div>\n\t\t\t\t")}i+="<p><span>验证结果：</span> <a style='color:red;'>验证失败</a></p>"}d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,icon:"x",message:'\n\t\t\t<div class="flex items-center justify-center mt-[.8rem] mb-2rem">\n\t\t\t\t<i class="svgtofont-el-circle-close-filled mr-[.8rem] text-[#F56C6C] !text-[3rem]"></i>\n\t\t\t\t<a style="color: red; font-size:16px">\n\t\t\t\t\t'.concat(l,'\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class="p-[2rem] border border-1 border-color-[#dedede] !rounded-[4px] !mb-[12px] !leading-[26px] bg-[#f8f8f8]">\n\t\t\t\t').concat(i,"\n\t\t\t</div>\n\t\t"),showClose:!0,duration:0})}})),ei=r("l",function(){return c({area:[50,25],showFooter:!1,component:function(){return f(function(){return a.import("./lets-encrypt-progress-legacy.js?v=1756369731")},void 0,a.meta.url)}})}),ti=Ie([{label:"解析域名",prop:"name"},{label:"记录值",prop:"txt",render:function(e,t){return Pe("div",{class:"flex items-center"},[Pe("div",{class:"truncate w-[15rem]"},[e.txt]),Pe("span",{class:"svgtofont-icon-copy ml-[4px] text-[#666] text-[1.6rem] w-[1.6rem] cursor-pointer",onClick:function(){return D({value:e.txt})}},null)])}},{label:"类型",prop:"type"},{label:"必需",prop:"force",width:100}]),ni=Ie(),ri=function(e,t){if(!1===e.status&&e.hasOwnProperty("msg")&&H(e.msg))d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:e.msg,type:"error",showClose:!0,duration:0});else if(!0!==e.status&&"pending"!==e.status&&void 0===(null==e?void 0:e.save_path))$s(e,ks.value.dnsTable,ks.value.info);else{if("pending"===e.status&&"dns"===e.auth_type){si(e,t);var n=[];e.auths.forEach(function(e){var t=[],r=e.domain.replace("*.","");t.push({name:"_acme-challenge.".concat(r),type:"TXT",txt:e.auth_value,force:"是"}),t.push({name:r,type:"CAA",txt:'0 issue "letsencrypt.org"',force:"否"}),n.push({domain:e.domain,data:t})});var r=[{content:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{content:"可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(e.auths[0].domain.replace("*.",""))},{content:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}],a=!!e.hasOwnProperty("error")&&e.error;return Object.assign(iu,e),void(ni.value=c({title:"手动解析TXT记录",area:70,component:function(){return Pe("div",{class:"p-[1.5rem]"},[Ve("请按以下列表做TXT解析:"),Pe(Ee,null,i({content:function(){return Pe("div",{class:"max-h-[38rem] overflow-auto"},[n.map(function(t,n){return Pe("div",{key:n},[t.data.length>0&&Pe(We,null,[Pe("span",null,[Ve("验证域名："),t.domain]),Pe(O,{class:"my-[1rem]",column:ti.value,data:t.data},null),a.value&&Pe("div",{class:"flex justify-end"},[Pe(He,{type:"default",onClick:function(){return ai({index:e.index,domain:t.domain})}},{default:function(){return[Ve("验证")]}})])])])})])}},"footer-right",function(){return!a.value&&Pe(He,{type:"default",onClick:_u},{default:function(){return[Ve("验证")]}})})),Pe(C,{options:r,listStyle:"disc",class:"ml-20x"},null)])}}))}ii(e)}},ai=function(){var e=p(l().m(function e(t){var n,r,a,u;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ei();case 1:return n=e.v,e.n=2,oe(t);case 2:if(r=e.v,a=r.data,null==n||n.unmount(),"valid"!==a.status){e.n=3;break}d.success("验证成功"),e.n=6;break;case 3:if(!0!==a.status){e.n=5;break}return e.n=4,ni.value;case 4:(u=e.v)&&u.unmount(),ui(a,!0),e.n=6;break;case 5:$s(a,ks.value.dnsTable,ks.value.info);case 6:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ui=function(){var e=p(l().m(function e(t){var n,r,a,u,s=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:return n=t.index,r=s.length>1&&void 0!==s[1]&&s[1],a=s.length>2&&void 0!==s[2]?s[2]:Ns.value.name,e.n=1,m({loading:"正在部署证书，请稍候...",request:se({index:n,siteName:a}),message:!1,data:{status:Boolean,msg:String}});case 1:u=e.v,Ws(u,r);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),si=function(e,t){ks.value.dnsTable=e.auths,ks.value.info.index=e.index,ks.value.info.type=t.auth_type},ii=function(){var e=p(l().m(function e(t,n){var r,a,u,s,i;return l().w(function(e){for(;;)switch(e.n){case 0:if(t.private_key&&t.cert&&t.root){e.n=1;break}return d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:"部署失败，请关闭SSL后重新尝试部署！",type:"error",showClose:!0,duration:0}),e.a(2);case 1:return r=t.private_key,a=t.cert,u=t.root,s=Ns.value.project_type,i={proxy:{site_name:Ns.value.name,key:r,csr:a+u},default:{type:1,siteName:Ns.value.name,key:r,csr:a+u}},e.n=2,m({loading:"正在保存证书信息，请稍后...",request:X(i[s]||i.default,s),message:!0,success:function(e){if(!0===e.status)Gs(),qs("currentCertInfo");else{var t=e.msg;t="当前证书申请并验证成功，自动部署失败，请尝试手动部署证书！\n"+t,d.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:t,type:"error",showClose:!0,duration:0})}}});case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),li=(r("am",function(e){c({title:"支付成功",area:[60,60],component:function(){return f(function(){return a.import("./pay-bus-success-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:e})}),r("r",p(l().m(function e(){var t,n,r,a,u,s,i,o,c,p=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:gs.value,n=t.type,r=t.oid,a=t.index,u=t.authType,s=p.length>1&&void 0!==p[1]?p[1]:Ns.value,i=s.name,3!==n){e.n=1;break}pi(r,n),e.n=4;break;case 1:if(32!==(null==a?void 0:a.length)||-1!==a.indexOf("/")||"dns"===u){e.n=2;break}ci(a),e.n=4;break;case 2:return e.n=3,m({request:Se({siteName:i,pem_file:a})});case 3:o=e.v,c=o.data,oi(c);case 4:return e.a(2)}},e)})))),oi=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:Ru.value=t,Ts.value=c({title:"续签Let's Encrypt证书",area:50,component:function(){return f(function(){return a.import("./lets-encrypt-renew-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:t});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ci=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ei();case 1:return n=e.v,e.n=2,m({request:xe({index:t})});case 2:r=e.v,a=r.data,n._props.onCancel(),ri(a,{auth_type:a.auth_type});case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),pi=function(e,t){if(3===t)fi(e)},fi=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,h({title:"商业证书续签",content:"当前证书订单需要重新生成新订单，需要手动续签，和重新部署证书，是否继续操作？"});case 1:return n={pdata:JSON.stringify({oid:t})},e.n=2,m({loading:"正在续签商业证书，可能等待时间较长，请稍后...",request:_e(n),data:Object});case 2:r=e.v,v(r)&&r.hasOwnProperty("order_info")?(a=r.order_info,di({oid:r.oid,wxcode:r.wxcode,alicode:r.alicode,orderInfo:a,productInfo:s(s({},a),{},{productName:a.title,totalPrice:r.data.price,isRenew:!0})})):d.request(r),Gs();case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),di=r("b",function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:Cs.value=t.productInfo,As.value=t.orderInfo,xs.value=c({title:"支付商业证书订单",area:[60],component:function(){return f(function(){return a.import("./pay-bus-ssl-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:t});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),vi=function(){var e=p(l().m(function e(){var t,n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return t=Es.value,n=Ns.value.name,a=(r={proxy:{site_name:n},default:{updateOf:1,siteName:n}})[t]||r.default,e.n=1,m({loading:"正在关闭证书，请稍后...",request:Ce(a,t),message:!0,success:function(){Is.value=!0,Vs.value=!0}});case 1:Gs();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),mi=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:Ts.value=c({isAsync:!0,title:"申请Let's Encrypt证书",area:64,component:function(){return f(function(){return a.import("./applay-lest-ssl-legacy.js?v=1756369731")},void 0,a.meta.url)},compData:t});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();r("e",function(){c({component:function(){return f(function(){return a.import("./index-legacy159.js?v=1756369731")},void 0,a.meta.url)},area:52,compData:{title:"SSL证书需求反馈收集",type:28,isNoRate:!0,softName:"1",isCard:!1,id:993}})})}}})}();
