!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,u=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw u}}}}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",u=n.toStringTag||"@@toStringTag";function l(n,r,o,u){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return a(s,"_invoke",function(n,r,o){var a,u,l,c=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,u=0,l=e,p.n=n,i}};function m(n,r){for(u=n,l=r,t=0;!f&&c&&!o&&t<s.length;t++){var o,a=s[t],m=p.p,d=a[2];n>3?(o=d===r)&&(l=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(u=0,p.v=r,p.n=a[1]):m<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,p.n=d,u=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,d),u=s,l=d;(t=u<2?e:l)||!f;){a||(u?u<3?(u>1&&(p.n=-1),m(u,l)):p.n=l:p.v=l);try{if(c=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(f=p.n<0)?l:n.call(r,p))!==i)break}catch(t){a=e,u=1,l=t}finally{c=1}}return{value:t,done:f}}}(n,o,u),!0),s}var i={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(a(t={},r,function(){return this}),t),m=f.prototype=c.prototype=Object.create(p);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,a(m,"constructor",f),a(f,"constructor",s),s.displayName="GeneratorFunction",a(f,u,"GeneratorFunction"),a(m),a(m,u,"Generator"),a(m,r,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),(o=function(){return{w:l,m:d}})()}function a(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,n,r){function u(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},a(e,t,n,r)}function u(e,t,n,r,o,a,u){try{var l=e[a](u),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function l(e){u(a,r,o,l,i,"next",e)}function i(e){u(a,r,o,l,i,"throw",e)}l(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./config-legacy.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731"],function(n,r){"use strict";var a,u,i,c,s,f,p,m,d,v,y,b,E,h,g,x,k,w,A,I,S,T,_,j,V,D;return{setters:[function(e){a=e.l,u=e.L,i=e.o,c=e.K,s=e.M,f=e.j,p=e.c},function(e){m=e.c,d=e.r,v=e.p,y=e.q,b=e.v,E=e.y,h=e.e,g=e.x,x=e.A,k=e.F,w=e.a_,A=e.P,I=e.C,S=e.B,T=e.af,_=e.D,j=e.z,V=e.ag},function(e){D=e.ag},null],execute:function(){var P={class:"p-24px"},C={class:"flex items-center"},R={class:"w-[20rem] flex ml-[1rem]"},N={class:"my-6 flex items-center leading-[3rem]"},G={class:"flex ml-[1rem]"},O={key:0,class:"flex mt-12px"},F={class:"flex-1 mr-20px"},K={class:"flex-1"},U={class:"list-disc text-[#777] px-20px pt-12px"},Y={class:"flex items-center"};n("default",m({__name:"no-port-config",props:{compData:{}},emits:["close"],setup:function(n,m){var z=m.emit,B=n,M=z,q=d("auto"),L=[{title:"自定义证书",value:"auto"},{title:"不部署证书",value:"no"},{title:"选择已有证书",value:"select"}],Q=d(B.compData),Z=function(e){q.value=e,"select"===e&&a({title:"选择已有证书",component:function(){return u(function(){return r.import("./cert-list-dialog-legacy.js?v=1756369731")},void 0,r.meta.url)},area:70,compData:{refreshData:function(e){Q.value.domain=(null==e?void 0:e.dns[0].replace(/^\*\./,"panel."))||"",Q.value.cert=(null==e?void 0:e.fullchain)||"",Q.value.key=(null==e?void 0:e.privkey)||"",Q.value.certInfo=e.info||{}}}})},$=function(){if(!B.compData.domain)return s.error("域名不能为空"),!1;return/^(?!:\/\/)([a-zA-Z0-9-_]{1,63}\.)+[a-zA-Z]{2,6}$/.test(B.compData.domain)?!!("no"===q.value||B.compData.key&&B.compData.cert)||(s.error("请填写证书内容"),!1):(s.error("域名格式不正确"),!1)},H=function(){var e=l(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:if($()){e.n=1;break}return e.a(2);case 1:return e.n=2,i({title:"提示",icon:"warning-filled",content:"基于Nginx/Apache，如果环境运行异常会导致无法访问，是否继续操作？"});case 2:return e.n=3,c({loading:"正在设置免端口访问配置，请稍候...",request:D({domain:B.compData.domain,key:"no"===q.value?"":Q.value.key,cert:"no"===q.value?"":Q.value.cert}),message:!0});case 3:B.compData.refresh(),M("close");case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),J=function(){var e=l(o().m(function e(n,r){var a,u,l,i,c,f,p,m,d;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!r){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,navigator.clipboard.readText();case 2:a=e.v,u=[/-----BEGIN PRIVATE KEY-----[\s\S]*?-----END PRIVATE KEY-----/,/-----BEGIN RSA PRIVATE KEY-----[\s\S]*?-----END RSA PRIVATE KEY-----/,/-----BEGIN EC PRIVATE KEY-----[\s\S]*?-----END EC PRIVATE KEY-----/],l=[/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/,/-----BEGIN CERTIFICATE REQUEST-----[\s\S]*?-----END CERTIFICATE REQUEST-----/],i=t("key"===n?u:l),e.p=3,i.s();case 4:if((c=i.n()).done){e.n=8;break}if(f=c.value,!(p=a.match(f))||!p[0]){e.n=7;break}s.success("已从粘贴板检测到".concat("key"===n?"密钥":"证书")),m=n,e.n="key"===m?5:"cert"===m?6:7;break;case 5:return Q.value.key=p[0],e.a(3,7);case 6:return Q.value.cert=p[0],e.a(3,7);case 7:e.n=4;break;case 8:e.n=10;break;case 9:e.p=9,d=e.v,i.e(d);case 10:return e.p=10,i.f(),e.f(10);case 11:e.n=13;break;case 12:e.p=12,e.v;case 13:return e.a(2)}},e,null,[[3,9,10,11],[1,12]])}));return function(t,n){return e.apply(this,arguments)}}(),W=function(){window.location.href="/site/nginx"};return v(function(){q.value=B.compData.use_ssl?"auto":"no"}),function(t,n){var r=f,o=V,a=T,u=_,l=p;return y(),b("div",P,[E("div",C,[n[6]||(n[6]=E("span",null,"绑定域名：",-1)),E("div",R,[h(r,{modelValue:g(Q).domain,"onUpdate:modelValue":n[0]||(n[0]=function(e){return g(Q).domain=e}),placeholder:"请输入绑定域名"},null,8,["modelValue"])])]),E("div",N,[n[7]||(n[7]=E("span",null,"SSL证书：",-1)),E("div",G,[h(a,{modelValue:g(q),"onUpdate:modelValue":n[1]||(n[1]=function(e){return A(q)?q.value=e:null}),size:"small",onChange:Z},{default:x(function(){return[(y(),b(k,null,w(L,function(e,t){return h(o,{key:t,label:e.value},{default:x(function(){return[E("span",null,j(e.title),1)]}),_:2},1032,["label"])}),64))]}),_:1},8,["modelValue"])])]),"no"!==g(q)?(y(),b("div",O,[E("div",F,[n[8]||(n[8]=E("div",{class:"text-[1.2rem] mb-[.8rem]"},"密钥(KEY)",-1)),h(r,{class:"text-[1.2rem]",type:"textarea",modelValue:g(Q).key,"onUpdate:modelValue":n[2]||(n[2]=function(e){return g(Q).key=e}),rows:13,size:"small",onFocus:n[3]||(n[3]=function(e){return J("key",g(Q).key)})},null,8,["modelValue"])]),E("div",K,[n[9]||(n[9]=E("div",{class:"text-[1.2rem] mb-[.8rem]"},"证书(PEM格式)",-1)),h(r,{type:"textarea",modelValue:g(Q).cert,"onUpdate:modelValue":n[4]||(n[4]=function(e){return g(Q).cert=e}),rows:13,size:"small",onFocus:n[5]||(n[5]=function(e){return J("cert",g(Q).cert)})},null,8,["modelValue"])])])):I("",!0),h(u,{onClick:H,type:"primary",class:"mt-4"},{default:x(function(){return e(n[10]||(n[10]=[S("保存",-1)]))}),_:1}),E("ul",U,[E("li",null,[n[11]||(n[11]=S("配置后可在网站--反向代理项目中管理,",-1)),E("span",{class:"text-[#20a53a] cursor-pointer",onClick:W},"点击前往")]),n[14]||(n[14]=E("li",null,"配置此域名的证书到面板，浏览器即可信任访问",-1)),E("li",null,[E("div",Y,[n[13]||(n[13]=S(" 粘贴您的*.key以及*.pem内容，然后保存即可 ",-1)),h(l,{href:"https://www.bt.cn/bbs/thread-105443-1-1.html"},{default:x(function(){return e(n[12]||(n[12]=[S("帮助",-1)]))}),_:1})])]),n[15]||(n[15]=E("li",null,"如果浏览器提示证书链不完整,请检查是否正确拼接PEM证书",-1)),n[16]||(n[16]=E("li",null,"PEM格式证书 = 域名证书.crt + 根证书(root_bundle).crt",-1))])])}}}))}}})}();
