import{g as e,j as l,f as a,k as t,t as s,l as o,m as u,n,q as d,b as r,r as p,d as i,v as m,w as c,x as _,y as f,z as b,A as y,B as h,C as V,D as v,E as x,F as g,G as k,H as w,I as C,J as j,K as U,L as z,M as L,N as T,O as I,P as B,Q as R,R as F,S as P,T as H,U as M,V as O,W as S,X as W,Y as q,Z as A,_ as D,$ as G,a0 as Q,a1 as E}from"./index430.js?v=1756369731";import{j as J,_ as K,H as N,W as X,aM as Y,k as Z,a0 as $,a2 as ee,e as le}from"./utils-lib.js?v=1756369731";import{c as ae,w as te,p as se,G as oe,q as ue,v as ne,H as de,x as re,M as pe,A as ie,e as me,F as ce,a_ as _e,_ as fe,B as be,a9 as ye,ai as he,aj as Ve,T as ve,aQ as xe,D as ge,a7 as ke,y as we,I as Ce,al as je,r as Ue,C as ze}from"./base-lib.js?v=1756369731";import{_ as Le}from"./index103.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";import"./validator.js?v=1756369731";import"./useController4.js?v=1756369731";import"./useController5.js?v=1756369731";import"./site.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./useStore4.js?v=1756369731";import"./useController6.js?v=1756369731";import"./useMethod5.js?v=1756369731";const Te={class:"p-[20px]"},Ie=ae({__name:"setting-proxy",setup:m=>(te(()=>l.value,()=>{e(l.value)}),se(()=>{e(l.value)}),(e,l)=>{const m=J,c=ye,_=he,f=Ve,b=K,y=N,h=ve,V=xe,v=ge,x=ke,g=oe("bt-loading");return ue(),ne("div",Te,[de((ue(),pe(x,{ref_key:"proxyFormRef",ref:r,model:re(t),rules:re(p),"label-width":"110px",disabled:re(i)},{default:ie(()=>[me(c,{label:"代理目录",prop:"path"},{default:ie(()=>[me(m,{modelValue:re(t).path,"onUpdate:modelValue":l[0]||(l[0]=e=>re(t).path=e),disabled:"",placeholder:"请输入代理目录",width:"42rem"},null,8,["modelValue"])]),_:1}),me(c,{label:"目标",prop:"targetType"},{default:ie(()=>[me(f,{class:"!w-[16rem]",modelValue:re(t).targetType,"onUpdate:modelValue":l[1]||(l[1]=e=>re(t).targetType=e),placeholder:"请选择"},{default:ie(()=>[(ue(!0),ne(ce,null,_e(re(s),e=>(ue(),pe(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),me(c,{label:" ",prop:"proxysite"},{default:ie(()=>[me(m,{modelValue:re(t).proxysite,"onUpdate:modelValue":l[2]||(l[2]=e=>re(t).proxysite=e),placeholder:"http"!==re(t).targetType?"请选择sock文件":"请输入目标URL",width:"42rem",onInput:re(o)},fe({_:2},["http"!==re(t).targetType?{name:"append",fn:ie(()=>[me(y,{onClick:re(u)},{default:ie(()=>[me(b,{icon:"el-folder-opened",class:"cursor-pointer"})]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","placeholder","onInput"])]),_:1}),me(c,{label:"发送域名(host)",prop:"todomain"},{default:ie(()=>[me(m,{modelValue:re(t).todomain,"onUpdate:modelValue":l[3]||(l[3]=e=>re(t).todomain=e),placeholder:"请输入发送域名",width:"42rem"},null,8,["modelValue"])]),_:1}),me(c,{label:"备注"},{default:ie(()=>[me(m,{modelValue:re(t).ps,"onUpdate:modelValue":l[4]||(l[4]=e=>re(t).ps=e),placeholder:"请输入备注,可为空",width:"42rem"},null,8,["modelValue"])]),_:1}),me(c,{label:"websocket支持"},{default:ie(()=>[me(V,{disabled:!re(n),effect:"dark",content:"全局websocket已开启，不允许单独关闭",placement:"top"},{default:ie(()=>[me(h,{disabled:re(n),modelValue:re(t).websocket,"onUpdate:modelValue":l[5]||(l[5]=e=>re(t).websocket=e)},null,8,["disabled","modelValue"])]),_:1},8,["disabled"])]),_:1}),me(c,{label:"连接超时时间",prop:"proxy_connect_timeout"},{default:ie(()=>[me(m,{modelValue:re(t).proxy_connect_timeout,"onUpdate:modelValue":l[6]||(l[6]=e=>re(t).proxy_connect_timeout=e),textType:"秒",width:"41rem"},{append:ie(()=>[...l[9]||(l[9]=[be(" 秒 ",-1)])]),_:1},8,["modelValue"])]),_:1}),me(c,{label:"后端请求超时时间",prop:"proxy_send_timeout"},{default:ie(()=>[me(m,{modelValue:re(t).proxy_send_timeout,"onUpdate:modelValue":l[7]||(l[7]=e=>re(t).proxy_send_timeout=e),textType:"秒",width:"41rem"},{append:ie(()=>[...l[10]||(l[10]=[be(" 秒 ",-1)])]),_:1},8,["modelValue"])]),_:1}),me(c,{label:"代理响应超时时间",prop:"proxy_read_timeout"},{default:ie(()=>[me(m,{modelValue:re(t).proxy_read_timeout,"onUpdate:modelValue":l[8]||(l[8]=e=>re(t).proxy_read_timeout=e),textType:"秒",width:"41rem"},{append:ie(()=>[...l[11]||(l[11]=[be(" 秒 ",-1)])]),_:1},8,["modelValue"])]),_:1}),me(c,{label:" "},{default:ie(()=>[me(v,{type:"primary",onClick:re(d)},{default:ie(()=>[...l[12]||(l[12]=[be("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules","disabled"])),[[g,re(a)]])])})}),Be={class:"p-[20px]"},Re=ae({__name:"setting-custom",setup:e=>(te(()=>l.value.custom_conf,e=>{e&&(c.config=e)}),se(m),(e,l)=>{const t=J,s=ye,o=ge,u=ke,n=X,d=oe("bt-loading");return ue(),ne("div",Be,[de((ue(),pe(u,{ref:"customFormRef",model:re(c),"label-width":"100px",disabled:re(i)},{default:ie(()=>[me(s,{label:"需要插入的配置",prop:"config"},{default:ie(()=>[me(t,{modelValue:re(c).config,"onUpdate:modelValue":l[0]||(l[0]=e=>re(c).config=e),placeholder:re(_),type:"textarea",width:"42rem",rows:6,resize:"none"},null,8,["modelValue","placeholder"])]),_:1}),me(s,{label:" "},{default:ie(()=>[me(o,{type:"primary",onClick:re(f)},{default:ie(()=>[...l[1]||(l[1]=[be("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","disabled"])),[[d,re(a)]]),me(n,{options:re(b),class:"mt-2rem ml-[20px]"},null,8,["options"])])})}),Fe=ae({__name:"setting-replace",setup(e){te(()=>l.value.sub_filter,()=>{x(l.value.sub_filter)});const{BtOperation:a}=Y({options:[{label:"添加内容替换",type:"button",active:!0,onClick:y}]});return(e,l)=>{const t=Z,s=Le,o=X,u=oe("bt-loading");return ue(),ne("div",null,[me(s,null,{"header-left":ie(()=>[me(re(a))]),content:ie(()=>[de((ue(),pe(t,{ref:"siteProxyTable",data:re(h).subfilter,"max-height":350,column:re(V)},{empty:ie(()=>[...l[0]||(l[0]=[we("div",{class:"flex items-center justify-center"},"当前列表为空",-1)])]),_:1},8,["data","column"])),[[u,"正在加载中，请稍后...","title"]])]),_:1}),me(o,{options:re(v)},null,8,["options"])])}}}),Pe={class:"p-[20px]"},He={class:"mt-[1.6rem]"},Me={class:"flex items-center"},Oe={class:"ml-[20px]"},Se=ae({__name:"setting-cache",setup:e=>(te(()=>l.value.proxy_cache,e=>{if(e){g.status=e.cache_status;let l="",a="m";e.expires.length>1&&(l=e.expires.slice(0,-1),a=e.expires.slice(-1)),g.time=l,g.unit=a}}),(e,l)=>{const t=je,s=ye,o=J,u=he,n=Ve,d=ge,r=ke,p=X,m=oe("bt-loading");return ue(),ne("div",Pe,[de((ue(),pe(r,{ref_key:"cacheFormRef",ref:j,class:"h-[38rem]",model:re(g),"label-width":"100px",rules:e.cacheFormRules,disabled:re(i)},{default:ie(()=>[me(s,{label:"缓存开关",prop:"status"},{default:ie(()=>[me(t,{modelValue:re(g).status,"onUpdate:modelValue":l[0]||(l[0]=e=>re(g).status=e),onChange:re(k)},null,8,["modelValue","onChange"])]),_:1}),de(we("div",He,[me(s,{label:"缓存时间",prop:"time"},{default:ie(()=>[we("div",Me,[me(o,{modelValue:re(g).time,"onUpdate:modelValue":l[1]||(l[1]=e=>re(g).time=e)},null,8,["modelValue"]),me(s,{prop:"unit"},{default:ie(()=>[me(n,{class:"ml-[1rem] !w-[8rem]",modelValue:re(g).unit,"onUpdate:modelValue":l[2]||(l[2]=e=>re(g).unit=e),placeholder:"请选择"},{default:ie(()=>[(ue(!0),ne(ce,null,_e(re(w),e=>(ue(),pe(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),_:1})],512),[[Ce,re(g).status]]),me(s,{label:" "},{default:ie(()=>[de(me(d,{type:"primary",class:"!mt-[1.6rem]",onClick:re(C)},{default:ie(()=>[...l[3]||(l[3]=[be("保存",-1)])]),_:1},8,["onClick"]),[[Ce,re(g).status]])]),_:1})]),_:1},8,["model","rules","disabled"])),[[m,re(a)]]),we("div",Oe,[me(p,{options:re(U)},null,8,["options"])])])})}),We={class:"p-[20px]"},qe={class:"mt-[1.6rem]"},Ae={class:"flex items-center"},De={class:"ml-[20px]"},Ge=ae({__name:"setting-compress",setup:e=>(te(()=>l.value.gzip,e=>{e?z(e):L.status=!1}),se(()=>{z(l.value.gzip)}),(e,l)=>{const t=je,s=ye,o=J,u=he,n=Ve,d=ge,r=ke,p=X,m=oe("bt-loading");return ue(),ne("div",We,[de((ue(),pe(r,{ref_key:"compressFormRef",ref:R,class:"h-[38rem]",model:re(L),rules:re(F),"label-width":"100px",disabled:re(i)},{default:ie(()=>[me(s,{label:"内容压缩",prop:"status"},{default:ie(()=>[me(t,{modelValue:re(L).status,"onUpdate:modelValue":l[0]||(l[0]=e=>re(L).status=e),onChange:re(T)},null,8,["modelValue","onChange"])]),_:1}),de(we("div",qe,[me(s,{label:"压缩类型",prop:"type"},{default:ie(()=>[me(o,{modelValue:re(L).type,"onUpdate:modelValue":l[1]||(l[1]=e=>re(L).type=e),type:"textarea",width:"42rem",rows:6,resize:"none"},null,8,["modelValue"])]),_:1}),me(s,{label:"压缩级别",prop:"level"},{default:ie(()=>[me(n,{class:"!w-[42rem]",modelValue:re(L).level,"onUpdate:modelValue":l[2]||(l[2]=e=>re(L).level=e)},{default:ie(()=>[(ue(),ne(ce,null,_e(9,e=>me(u,{key:e,label:e,value:String(e)},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),me(s,{label:"压缩最小长度",prop:"minLength"},{default:ie(()=>[we("div",Ae,[me(o,{modelValue:re(L).minLength,"onUpdate:modelValue":l[3]||(l[3]=e=>re(L).minLength=e)},null,8,["modelValue"]),me(s,{prop:"unit"},{default:ie(()=>[me(n,{class:"ml-[1rem] !w-[8rem]",modelValue:re(L).unit,"onUpdate:modelValue":l[4]||(l[4]=e=>re(L).unit=e),placeholder:"请选择"},{default:ie(()=>[(ue(!0),ne(ce,null,_e(re(I),e=>(ue(),pe(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),_:1})],512),[[Ce,re(L).status]]),de(me(s,{label:" ",class:"mt-[1.6rem]"},{default:ie(()=>[me(d,{type:"primary",onClick:re(B)},{default:ie(()=>[...l[5]||(l[5]=[be("保存",-1)])]),_:1},8,["onClick"])]),_:1},512),[[Ce,re(L).status]])]),_:1},8,["model","rules","disabled"])),[[m,re(a)]]),we("div",De,[me(p,{options:re(P)},null,8,["options"])])])})}),Qe=ae({__name:"setting-ip-list",setup(e){const a=Ue();te(()=>l.value.ip_limit,e=>{e?A(e):(S.white=[],S.black=[])},{deep:!0});const{BtOperation:t}=Y({options:[{label:"添加IP".concat("ipBlackList"===H.value?"黑":"白","名单"),type:"button",active:!0,onClick:M}]});return se(O),(e,l)=>{const s=Z,o=$,u=Le,n=X;return ue(),ne("div",null,[me(u,null,{"header-left":ie(()=>[me(re(t))]),content:ie(()=>["ipBlackList"!==re(H)?(ue(),pe(s,{key:0,ref_key:"tableListRef",ref:a,data:re(S).white,"max-height":390,column:re(W)},{empty:ie(()=>[...l[0]||(l[0]=[we("div",{class:"flex items-center justify-center"},"当前列表为空",-1)])]),_:1},8,["data","column"])):(ue(),pe(s,{key:1,ref_key:"tableListRef",ref:a,data:re(S).black,"max-height":390,column:re(W)},{empty:ie(()=>[...l[1]||(l[1]=[we("div",{class:"flex items-center justify-center"},"当前列表为空",-1)])]),_:1},8,["data","column"]))]),"footer-left":ie(()=>[me(o,{"table-ref":re(a),options:re(q)},null,8,["table-ref","options"])]),_:1}),"ipBlackList"!==re(H)?(ue(),pe(n,{key:0,class:"mt-[2rem] ml-[1.6rem]",options:[{content:"注意：设置IP白名单后会默认禁止除白名单以外的所有IP访问"}]})):ze("",!0)])}}}),Ee={class:"p-[20px]"},Je={class:"ml-[0px]"},Ke=ae({__name:"setting-buffer",setup:e=>(te(()=>l.value.proxy_buffering,e=>{D.status=!!e},{immediate:!0}),(e,l)=>{const a=je,t=ye,s=ke,o=X;return ue(),ne("div",Ee,[me(s,{class:"h-[38rem]",model:re(D),"label-width":"140px"},{default:ie(()=>[me(t,{label:"proxy_buffering开关",prop:"status"},{default:ie(()=>[me(a,{modelValue:re(D).status,"onUpdate:modelValue":l[0]||(l[0]=e=>re(D).status=e),onChange:re(G)},null,8,["modelValue","onChange"])]),_:1})]),_:1},8,["model"]),we("div",Je,[me(o,{options:re(Q)},null,8,["options"])])])})}),Ne=le(ae({__name:"setting",setup(e){const{BtTabs:l}=ee({type:"card",value:H,options:[{label:"反向代理",name:"proxy",lazy:!0,render:()=>me(Ie,null,null)},{label:"自定义配置",name:"custom",lazy:!0,render:()=>me(Re,null,null)},{label:"内容替换",name:"replace",lazy:!0,render:()=>me(Fe,null,null)},{label:"缓存",name:"cache",lazy:!0,render:()=>me(Se,null,null)},{label:"内容压缩",name:"compress",lazy:!0,render:()=>me(Ge,null,null)},{label:"IP黑名单",name:"ipBlackList",lazy:!0,render:()=>me(Qe,null,null)},{label:"IP白名单",name:"ipWhiteList",lazy:!0,render:()=>me(Qe,null,null)},{label:"buffer缓冲",name:"buffer",lazy:!0,render:()=>me(Ke,null,null)}]});return te(()=>H.value,()=>{E()}),se(async()=>{E()}),(e,a)=>(ue(),pe(re(l),{class:"p-[1.6rem]"}))}}),[["__scopeId","data-v-744f915b"]]);export{Ne as default};
