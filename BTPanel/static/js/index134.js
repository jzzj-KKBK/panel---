import{c as a,c1 as e,r as s,p as l,q as t,v as o,e as r,A as i,y as n,x as m,M as u,F as c,a_ as d,P as p,ac as f,a9 as v,a7 as b,T as _}from"./base-lib.js?v=1756369731";import{clearRedisDb as x}from"./database.js?v=1756369731";import{o as y,K as g}from"./utils-lib.js?v=1756369731";import{g as j}from"./useStore2.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const w={class:"p-20px"},k={class:"border border-[#ececec] p-16px w-[22rem] max-h-[20rem] overflow-auto"},h={key:1,class:"text-light-50 text-[1.2rem]"},D=a({__name:"index",props:{compData:{default:()=>({keyList:[],sid:0})}},setup(a,{expose:D}){const{refs:{isRefreshTable:S}}=j(),V=a,q=e(V.compData,"keyList"),J=e(V.compData,"sid"),L=s();return D({onConfirm:async a=>{await y({icon:"warning-filled",title:"提示",content:"此操作将清空选中的数据库, 是否继续?"});const e=JSON.stringify(q.value.filter(a=>L.value.includes(a.name)).map(a=>a.id));await g({loading:"正在清空，请稍后...",request:x({data:JSON.stringify({ids:e,sid:J.value})}),message:!0,success:a=>{a.status&&(S.value=!0)}}),a()}}),l(()=>{L.value=q.value.map(a=>a.name)}),(a,e)=>{const s=_,l=f,x=v,y=b;return t(),o("div",w,[r(y,null,{default:i(()=>[r(x,{label:"选择数据库"},{default:i(()=>[n("div",k,[m(q).length?(t(),u(l,{key:0,modelValue:m(L),"onUpdate:modelValue":e[0]||(e[0]=a=>p(L)?L.value=a:null)},{default:i(()=>[(t(!0),o(c,null,d(m(q),(a,e)=>(t(),u(s,{class:"w-full !mr-0",label:a.name,key:e},null,8,["label"]))),128))]),_:1},8,["modelValue"])):(t(),o("span",h,"暂无数据"))])]),_:1})]),_:1})])}}});export{D as default};
