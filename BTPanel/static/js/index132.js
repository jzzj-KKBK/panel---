import{c as a,k as e,p as s,q as o,v as r,e as m,A as t,x as l,ai as i,aj as n,a9 as d,a7 as p}from"./base-lib.js?v=1756369731";import{setModulePermission as u,getModulePermission as c}from"./database.js?v=1756369731";import{K as b,at as _,M as f,e as g}from"./utils-lib.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const j={class:"p-[1.6rem]"},v=g(a({__name:"index",props:{compData:{default:()=>({name:""})}},setup(a,{expose:g}){const v=a,w=e({permission:[]});return s(async()=>{const a=await b({loading:"正在获取权限，请稍后...",request:c({data:JSON.stringify({user_name:v.compData.name})},"mongodb"),data:{status:Boolean,msg:String,data:Object}});w.permission=a.roles,a.status||f.error(a.msg)}),g({onConfirm:async a=>{try{await b({loading:"正在修改权限，请稍后...",request:u({data:JSON.stringify({user_name:v.compData.name,db_permission:w.permission})},"mongodb"),message:!0}),a()}catch(e){_(e,"修改权限-onConfirm")}}}),(a,e)=>{const s=i,u=n,c=d,b=p;return o(),r("div",j,[m(b,{class:"m-[1.6rem]",ref:"permissionForm",model:l(w),"label-width":"5rem"},{default:t(()=>[m(c,{label:"访问权限",prop:"permission"},{default:t(()=>[m(u,{modelValue:l(w).permission,"onUpdate:modelValue":e[0]||(e[0]=a=>l(w).permission=a),class:"!w-[32rem]",multiple:"",placeholder:"请选择"},{default:t(()=>[m(s,{label:"数据库所有者",value:"dbOwner"}),m(s,{label:"读取数据",value:"read"}),m(s,{label:"读取和写入数据",value:"readWrite"}),m(s,{label:"用户管理员",value:"userAdmin"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}}),[["__scopeId","data-v-bd53bbc1"]]);export{v as default};
