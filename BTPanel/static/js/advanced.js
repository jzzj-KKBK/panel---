import{c as a,r as e,q as l,v as s,e as u,A as t,x as n,Q as o,y as d,B as r,P as c,S as m,a9 as i,D as p,a7 as _,aA as f,aC as b}from"./base-lib.js?v=1756369731";import{bG as g}from"./firewall.js?v=1756369731";import{K as v,b as y,e as V}from"./utils-lib.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const q={class:"flex flex-col p-[1.6rem]"},j=V(a({__name:"advanced",props:{compData:{default:()=>({config:{minutes:"",scan_count:"",cleanup_days:""}})}},emits:["update:config"],setup(a,{emit:V}){const j=a,w=V,x=e("1"),U=e(),k=e(j.compData.config),C={minutes:[{required:!0,message:"请输入扫描时间",trigger:"blur"}],scan_count:[{required:!0,message:"请输入访问次数",trigger:"blur"}],cleanup_days:[{required:!0,message:"请输入最大天数",trigger:"blur"}]},D=async()=>{await U.value.validate();let a={};"1"===x.value?(a.minutes=k.value.minutes,a.scan_count=k.value.scan_count):a.cleanup_days=k.value.cleanup_days,await v({loading:"正在保存规则，请稍后...",request:g(a),success:e=>{y().request(e),e.status&&w("update:config",a)}})};return(a,e)=>{const g=m,v=i,y=p,V=_,j=f,w=b;return l(),s("div",q,[u(w,{type:"card",modelValue:n(x),"onUpdate:modelValue":e[5]||(e[5]=a=>c(x)?x.value=a:null)},{default:t(()=>[u(j,{label:"拦截规则",name:"1"},{default:t(()=>[u(V,{model:n(k),rules:C,ref_key:"formRef",ref:U,class:"relative w-full","label-position":"right",onSubmit:e[2]||(e[2]=o(()=>{},["prevent"]))},{default:t(()=>[u(v,{prop:"minutes",label:"扫描时间"},{default:t(()=>[u(g,{modelValue:n(k).minutes,"onUpdate:modelValue":e[0]||(e[0]=a=>n(k).minutes=a),class:"form-input"},null,8,["modelValue"]),e[6]||(e[6]=d("span",{class:"ad-unit"},"分钟",-1))]),_:1}),u(v,{prop:"scan_count",label:"访问次数"},{default:t(()=>[u(g,{modelValue:n(k).scan_count,"onUpdate:modelValue":e[1]||(e[1]=a=>n(k).scan_count=a),class:"form-input"},null,8,["modelValue"]),e[7]||(e[7]=d("span",{class:"ad-unit"},"次",-1))]),_:1}),u(v,{label:"",class:"ml-40"},{default:t(()=>[u(y,{type:"primary",onClick:D},{default:t(()=>[...e[8]||(e[8]=[r("保存",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u(j,{label:"数据清理",name:"2"},{default:t(()=>[u(V,{model:n(k),rules:C,class:"relative w-full","label-position":"right",onSubmit:e[4]||(e[4]=o(()=>{},["prevent"]))},{default:t(()=>[u(v,{prop:"cleanup_days",label:"扫描数据超过"},{default:t(()=>[u(g,{modelValue:n(k).cleanup_days,"onUpdate:modelValue":e[3]||(e[3]=a=>n(k).cleanup_days=a),class:"form-input"},null,8,["modelValue"]),e[9]||(e[9]=d("span",{class:"ad-unit"},"天，将自动清理",-1))]),_:1}),u(v,{class:"ml-40"},{default:t(()=>[u(y,{type:"primary",onClick:D},{default:t(()=>[...e[10]||(e[10]=[r("保存",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-7e8dc045"]]);export{j as default};
