import{r as e,k as a,c as s,q as l,v as t,y as p,x as o,e as n,aG as r,p as d,A as i,B as c,P as m,C as u,F as h,a_ as v,M as y,bW as f,bX as g,T as x,aj as S,D as b,al as w,S as V,a9 as _,a7 as k,ai as P}from"./base-lib.js?v=1756369731";import{M as q,K as C,gq as L,gr as A,o as M,bz as U,gs as j,aq as N,at as D,gt as B,ar as I,as as W,gu as z,gv as F,W as G,e as H,j as K}from"./utils-lib.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";const T=e(!1),X=e([]),E=e(""),J=e("phpService"),O=a({phpPort:8888,onSSL:!0,phpSSL:"",phpPass:!0}),Q=e(!1),R=a({username:"",password:"",repass:""}),Y=async()=>{R.password.length<3||R.username.length<3?q.error("输入的账号密码需要大于三位"):R.password===R.repass?await C({loading:"正在保存密码，请稍后...",request:L({...R,siteName:"phpmyadmin"}),message:!0,success:()=>{Q.value=O.phpPass}}):q.error("两次输入的密码不一致")},Z=async()=>{await C({request:F(),data:{status:Boolean,port:String,auth:Boolean},success:e=>{O.onSSL=e.status,O.phpSSL=e.port,O.phpPass=e.auth,Q.value=O.phpPass}})},$=async()=>{await C({loading:"正在保存SSL端口，请稍后...",request:A({port:O.phpSSL}),message:!0})},ee=async e=>{await M({title:"提示",icon:"warning-filled",width:"35rem",content:"您真的要".concat(e?"启动":"停止","phpmyadmin服务吗？")}),await C({loading:"正在".concat(e?"启动":"停止","phpmyadmin服务..."),request:U({name:"phpmyadmin",type:e?"start":"stop"}),message:!0})},ae=async e=>{await C({loading:"正在".concat(e?"开启":"关闭","，请稍后..."),request:j({v:O.onSSL?1:0}),message:!0,success:Z})},se=async e=>{await C({loading:"正在保存配置，请稍后...",request:L(e),message:!0})},le=async()=>{J.value="phpService";try{const e=await N({sName:"phpmyadmin"});T.value=e.data.status,E.value=Array.isArray(e.data.ext.phpversion)?e.data.ext.phpversion[0]:e.data.ext.phpversion,O.phpPort=Number(e.data.ext.port)}catch(e){D(e)}},te=async e=>{!e&&Q.value&&(O.phpPass=!e,await M({title:"提示",icon:"warning-filled",content:"您真的要关闭访问认证吗?"}),C({loading:"正在设置状态，请稍后...",request:L({password:"close",siteName:"phpmyadmin"}),message:!0,success:()=>{O.phpPass=e,Q.value=O.phpPass}}))},pe=(e,a)=>{J.value=e,"phpService"==e?le():"phpVersion"==e?(async()=>{await C({request:z(),data:[Array,X]})})():"phpSafety"==e&&Z()},oe=[{content:"面板访问需要登录面板后，才能通过面板访问phpMyAdmin"},{content:"若通过面板为phpMyAdmin开启了密码访问，请使用【通过公共访问】"},{content:"如通过面板访问无响应，请使用通过公共访问进行访问phpmyadmin"},{content:"如访问出现502，请检查php运行是否正常或尝试更换其他php版本进行访问"},{content:"关闭公共访问权限可提升安全性，可到软件商店->phpMyAdmin中关闭",class:"text-danger"}],ne=async e=>{try{const{data:a}=await N({sName:"phpmyadmin"});if("panel"===e){if(null==a?void 0:a.ext.auth)return void q.error("当前phpMyAdmin已开启密码访问，请使用【通过公共访问】进行访问");if("false"===(null==a?void 0:a.setup))return void q.error("当前phpMyAdmin未安装，请先安装phpMyAdmin");C({loading:"正在跳转phpMyAdmin，请稍后...",request:B({table:"config",key:"mysql_root",id:1}),success:e=>{I("root",e.data)}})}else a.status?C({loading:"正在跳转phpMyAdmin，请稍后...",request:B({table:"config",key:"mysql_root",id:1}),success:e=>{W("","root",e.data,a.ext.url)}}):q.error("未开启公共访问权限，请开启后再访问")}catch(a){D(a)}},re={class:"p-[16px]"},de={class:"flex items-center w-full mb-[16px]"},ie={class:"relative w-[14rem] bg-#e6e6e6 h-[4.2rem] mr-[24px] rounded-[2px]"},ce={class:"relative w-[14rem] bg-#e6e6e6 h-[4.2rem] rounded-[2px]"},me=H(s({__name:"service",setup:e=>(e,a)=>{const s=G;return l(),t("div",re,[p("div",de,[p("div",ie,[p("div",{class:"h-[4rem] leading-[4rem] text-center w-full cursor-pointer link-hover",onClick:a[0]||(a[0]=e=>o(ne)("panel"))},"通过面板访问"),a[2]||(a[2]=p("span",{class:"bg-contain inline-block recommend-bg absolute -top-[0.1rem] -left-[0.1rem]"},null,-1))]),p("div",ce,[p("div",{class:"h-[4rem] leading-[4rem] text-center w-full cursor-pointer link-hover",onClick:a[1]||(a[1]=e=>o(ne)())},"通过公共访问")])]),n(s,{options:o(oe),class:"pl-2rem list-disc"},null,8,["options"])])}}),[["__scopeId","data-v-a5f20872"]]),ue={class:"flex items-start"},he={class:"recycle-bin-content flex h-[58rem]"},ve={class:"recycle-type-table w-[96%] h-full"},ye={key:0},fe={class:"php-bottom mb-[12px]"},ge={key:1,class:"p-[20px]"},xe={key:2},Se={class:"php-bottom flex items-center"},be={class:"php-bottom flex flex-col"},we={class:"flex items-center"},Ve={class:"php-bottom flex-col"},_e=H(s({__name:"index",props:{compData:{default:{}}},setup(e){const a=e;return r(()=>{"string"==typeof a.compData&&(J.value=a.compData)}),d(le),(e,a)=>{const s=f,r=g,d=x,q=P,C=S,L=b,A=K,M=w,U=V,j=_,N=k;return l(),t("div",ue,[p("div",he,[n(r,{"default-active":o(J),class:"el-menu-vertical-demo w-[14rem]",onSelect:o(pe),"background-color":"#f0f0f1"},{default:i(()=>[n(s,{index:"phpService"},{default:i(()=>[...a[11]||(a[11]=[p("span",null,"服务",-1)])]),_:1}),n(s,{index:"phpVersion"},{default:i(()=>[...a[12]||(a[12]=[p("span",null,"php版本",-1)])]),_:1}),n(s,{index:"phpSafety"},{default:i(()=>[...a[13]||(a[13]=[p("span",null,"安全设置",-1)])]),_:1})]),_:1},8,["default-active","onSelect"])]),p("div",ve,["phpService"==o(J)?(l(),t("div",ye,[p("div",fe,[n(d,{modelValue:o(T),"onUpdate:modelValue":a[0]||(a[0]=e=>m(T)?T.value=e:null),onChange:o(ee)},{default:i(()=>[...a[14]||(a[14]=[c("启用公共访问权限",-1)])]),_:1},8,["modelValue","onChange"])]),n(me)])):u("",!0),"phpVersion"==o(J)?(l(),t("div",ge,[a[16]||(a[16]=p("span",null,"php版本",-1)),n(C,{class:"mx-[12px] !w-[15.6rem]",modelValue:o(E),"onUpdate:modelValue":a[1]||(a[1]=e=>m(E)?E.value=e:null),placeholder:"请选择"},{default:i(()=>[(l(!0),t(h,null,v(o(X),e=>(l(),y(q,{key:e.version,label:e.name,value:e.version},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n(L,{type:"primary",onClick:a[2]||(a[2]=e=>o(se)({phpversion:o(E)}))},{default:i(()=>[...a[15]||(a[15]=[c("保存",-1)])]),_:1})])):u("",!0),"phpSafety"==o(J)?(l(),t("div",xe,[p("div",Se,[a[18]||(a[18]=p("span",{class:"mr-[12px]"},"访问端口",-1)),n(A,{class:"!mb-0 mr-[12px] !w-[14rem]",modelValue:o(O).phpPort,"onUpdate:modelValue":a[3]||(a[3]=e=>o(O).phpPort=e),width:"14rem",type:"number"},null,8,["modelValue"]),n(L,{type:"primary",onClick:a[4]||(a[4]=e=>o(se)({port:o(O).phpPort}))},{default:i(()=>[...a[17]||(a[17]=[c("保存",-1)])]),_:1})]),p("div",be,[p("div",we,[a[19]||(a[19]=p("span",{class:"mr-[12px]"},"开启SSL",-1)),n(M,{modelValue:o(O).onSSL,"onUpdate:modelValue":a[5]||(a[5]=e=>o(O).onSSL=e),onChange:o(ae),"active-color":"#20a53a","inactive-color":"#cdcdcd",class:"!m-0"},null,8,["modelValue","onChange"])]),p("div",null,[a[21]||(a[21]=p("span",{class:"mr-[12px]"},"SSL端口",-1)),n(A,{class:"!mb-0 mr-[12px] !w-[14rem]",modelValue:o(O).phpSSL,"onUpdate:modelValue":a[6]||(a[6]=e=>o(O).phpSSL=e),width:"14rem",type:"number"},null,8,["modelValue"]),n(L,{type:"primary",onClick:o($)},{default:i(()=>[...a[20]||(a[20]=[c("保存",-1)])]),_:1},8,["onClick"])])]),p("div",Ve,[p("div",null,[a[22]||(a[22]=p("span",{class:"mr-[12px]"},"密码访问",-1)),n(M,{modelValue:o(O).phpPass,"onUpdate:modelValue":a[7]||(a[7]=e=>o(O).phpPass=e),"active-color":"#20a53a","inactive-color":"#cdcdcd",onChange:o(te),class:"!m-0"},null,8,["modelValue","onChange"])]),p("div",null,[o(O).phpPass?(l(),y(N,{key:0,"label-position":"right","label-width":"80px",class:"-ml-3.2rem",model:o(R)},{default:i(()=>[n(j,{label:"授权账号"},{default:i(()=>[n(U,{modelValue:o(R).username,"onUpdate:modelValue":a[8]||(a[8]=e=>o(R).username=e),placeholder:"不修改请留空"},null,8,["modelValue"])]),_:1}),n(j,{label:"访问密码"},{default:i(()=>[n(U,{type:"password",modelValue:o(R).password,"onUpdate:modelValue":a[9]||(a[9]=e=>o(R).password=e),placeholder:"不修改请留空"},null,8,["modelValue"])]),_:1}),n(j,{label:"重复密码"},{default:i(()=>[n(U,{type:"password",modelValue:o(R).repass,"onUpdate:modelValue":a[10]||(a[10]=e=>o(R).repass=e),placeholder:"不修改请留空"},null,8,["modelValue"])]),_:1}),n(j,{label:" "},{default:i(()=>[n(L,{type:"primary",onClick:o(Y)},{default:i(()=>[...a[23]||(a[23]=[c("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])):u("",!0)])])])):u("",!0)])])}}}),[["__scopeId","data-v-257c6244"]]);export{_e as default};
