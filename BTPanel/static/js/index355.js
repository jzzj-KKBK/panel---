import{G as e,j1 as a,M as l,j as s}from"./utils-lib.js?v=1756369731";import{c as t,r,a4 as u,q as i,v as m,e as o,x as n,g as d,B as v}from"./base-lib.js?v=1756369731";import{u as p,a as c,g as b}from"./index65.js?v=1756369731";import{i as f,k as j,c as x,b as h,h as y,f as T}from"./form-item.js?v=1756369731";import{_ as w}from"./validator.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index103.js?v=1756369731";import"./index145.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";const g={class:"p-[2rem]"},_=t({__name:"index",setup(t,{expose:_}){var q,C;const{isAlarmEdit:V,alarmRowData:P,nodeAlarmRefresh:R}=p(),U=r(0),k=r(V.value&&["222","223"].includes(null==(C=null==(q=P.value)?void 0:q.task_data)?void 0:C.tid)?"master":"clb"),{BtForm:A,submit:B}=e({data:c,options:e=>d(()=>{var a,l;return[...V.value?[]:[f("告警类型","alarmType",[{label:"负载均衡",value:"clb"},{label:"主从复制",value:"master"}],{attrs:{onChange:e=>{k.value=e}}}),"clb"===k.value&&f("负载均衡类型","lcbType",[{label:"HTTP负载均衡",value:0},{label:"TCP/UDP负载均衡",value:1}],{attrs:{onChange:a=>{U.value=a,e.value.name=""}}})],..."master"===k.value?[f("主从复制类型","masterType",[{label:"Mysql",value:"222"},{label:"Redis",value:"223"}],{attrs:{disabled:V.value}})]:[],..."clb"===k.value?[j("负载均衡名称","name",0===U.value?null==(a=P.value)?void 0:a.clbList:null==(l=P.value)?void 0:l.tcpList,{attrs:{class:"!w-[32rem]",placeholder:"请选择负载均衡",filterable:!0,disabled:V.value},onChange:e=>{},rules:[{required:!0,message:"请选择负载均衡"}]}),...0===e.value.lcbType?[x("成功状态码","successCode",{attrs:{class:"!w-[32rem]",placeholder:"多个用逗号隔开，如：200,301,302,403,404"}})]:[h("连接失败次数","failTimes",{attrs:{class:"!w-[32rem]",placeholder:"如果n次后仍然无法正常连接则告警",rules:[{required:!0,message:"请输入连接失败次数"}]}})]]:[],y("配置发送次数",()=>o("div",{class:"flex items-center"},[o(s,{modelValue:e.value.sendTimes,"onUpdate:modelValue":a=>e.value.sendTimes=a,class:"!w-[8rem] mr-2",placeholder:"请输入发送次数",type:"text"},null),o("span",{class:"text-gray-400 text-[12px]"},[v("次后停止推送，次日再次监控")])]),"sendTimes"),y("告警方式",()=>o("div",null,[o(w,{class:"!w-[32rem]",modelValue:e.value.type,"onUpdate:modelValue":a=>e.value.type=a,multiple:!0,"is-show-api":!1,"all-alarm":!0},null)]),"type",{rules:[{required:!0,validator:(e,a,l)=>{a&&0!==a.length?l():l(new Error("请选择告警方式"))}}]}),T(" ",[{content:"每隔1分钟进行检测异常后将发送告警"}])]}),submit:async(e,s,t)=>{await s();const r=b(e.value),u=await a(r);return l.request(u),R.value=!0,u.status}});return _({onConfirm:B}),u(()=>{P.value=[]}),(e,a)=>(i(),m("div",g,[o(n(A))]))}});export{_ as default};
