import{_ as e}from"./index103.js?v=1756369731";import{c as s,H as t,e as a,R as l,l as r,L as n,K as o,o as c,aj as i,u as p,a6 as m,d,a7 as u,cu as _,a8 as x}from"./utils-lib.js?v=1756369731";import{_ as f}from"./index145.js?v=1756369731";import{c as h,r as w,p as b,q as y,v,y as g,e as k,A as C,x as j,B as L,F as T,a_ as S,aC as D,M as R,f as E,aA as B,j as O,s as P,a$ as M,aM as q,t as A,aW as I}from"./base-lib.js?v=1756369731";import{_ as F}from"./we-com.js?v=1756369731";import{e as z,p as V}from"./validator.js?v=1756369731";import{C as H}from"./useController13.js?v=1756369731";import{o as N}from"./useMethod11.js?v=1756369731";import{t as K,v as W,w as Y,x as $}from"./ssl.js?v=1756369731";import{a as G,c as J}from"./column.js?v=1756369731";import{r as Q}from"./useMethod10.js?v=1756369731";const U={class:"p-16px"},X={class:"py-52px flex justify-center flex-col items-center"},Z={class:"flex mb-16px justify-center"},ee={class:"mb-16px"},se={class:"w-76% rounded-lg overflow-hidden"},te={class:"rounded-lg overflow-hidden text-0"},ae=a(h({__name:"index",setup(e){const a=w([["自动部署概览","deploy-overview.png"]]),l=e=>"https://www.bt.cn/Public/new/plugin/ssl-deploy/".concat(e);return b(async()=>{}),(e,r)=>{const n=s,o=t,c=E,i=B,p=D;return y(),v("div",U,[g("div",X,[r[7]||(r[7]=g("div",{class:"mb-12px text-center text-24px font-bold"},"宝塔SSL自动部署",-1)),g("div",Z,[r[5]||(r[5]=g("div",{class:"text-center text-14px mr-[10px] color-desc text-[#999]"},"自动部署SSL证书到服务器",-1)),k(n,{href:"https://www.bt.cn/new/wechat_customer",class:"!text-[1.4rem] mr-[10px]"},{default:C(()=>[...r[2]||(r[2]=[g("img",{src:F,class:"w-[16px] h-[16px]"},null,-1),g("span",null,"联系客服",-1)])]),_:1}),g("div",{class:"flex items-center mr-[10px]",onClick:r[0]||(r[0]=e=>j(z)({name:"SSL证书需求反馈收集",type:28,id:993,isNoRate:!0,softName:"1",isCard:!1}))},[...r[3]||(r[3]=[g("i",{class:"svgtofont-desired !text-[1.6rem] mr-[4px]"},null,-1),g("span",{class:"bt-link !text-[1.4rem]"},"需求反馈",-1)])]),k(n,{href:"https://www.bt.cn/bbs/thread-141273-1-1.html",class:"!text-[1.4rem] mr-[4px]"},{default:C(()=>[...r[4]||(r[4]=[L(">> 使用文档",-1)])]),_:1})]),r[8]||(r[8]=g("div",{class:"mb-16px"},[g("ul",{class:"ul-style"},[g("li",null,"自动部署SSL证书到服务器"),g("li",null,"支持宝塔、Let's Encrypt、商用证书"),g("li",null,"支持单域名、多域名、通配符域名")])],-1)),g("div",ee,[k(o,{type:"primary",size:"large",class:"!text-[16px] w-[140px]",onClick:r[1]||(r[1]=e=>j(V)({sourceId:351,disablePro:!1}))},{default:C(()=>[...r[6]||(r[6]=[L("立即购买",-1)])]),_:1})]),g("div",se,[k(p,{"tab-position":"left",class:"carousel"},{default:C(()=>[(y(!0),v(T,null,S(j(a),(e,s)=>(y(),R(i,{label:e[0],lazy:"",key:s},{default:C(()=>[g("div",te,[k(c,{src:l(e[1]),class:"max-h-[100%] object-scale-down","preview-src-list":[l(e[1])]},null,8,["src","preview-src-list"])])]),_:2},1032,["label"]))),128))]),_:1})])])])}}}),[["__scopeId","data-v-6c0be9fc"]]),le=O("SSL-DEPLOY-STORE",()=>{const e=w(!1);return{deployFormData:w({}),siteList:w([]),certificateDeployTaskList:w([]),isRefreshDeployTaskList:e}}),{isRefreshDeployTaskList:re}=P(le()),ne=(e,s)=>{r({title:"".concat(e?s.task_name+" - 编辑":"创建","部署任务"),area:48,component:()=>n(()=>import("./index396.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),showFooter:!0,confirmText:"".concat(e?"保存":"创建"),compData:{isEdit:e,row:s||{}}})},oe=[{content:"创建",dropdownClass:"bg-white",splitButton:!0,active:!0,event:()=>{ne(!1,{})}}],ce=async e=>{try{const{data:s}=await Y(e);return{data:s.data,total:i(s.page),other:{search_history:[]}}}catch(s){return{data:[],total:0,other:{search_history:[]}}}},ie=[G(),{label:"名称",prop:"task_name"},{label:"云端任务名",isCustom:!1,render:e=>2===e.access_state?e.synchron_info.synchron_name:"--"},{label:"证书域名",isCustom:!0,render:e=>2===e.access_state?e.synchron_info.host:"--"},{label:"证书品牌",isCustom:!1,render:e=>2===e.access_state?e.synchron_info.host_brand:"--"},{label:"到期时间",isCustom:!0,width:180,prop:"cert_expire_time",render:e=>2===e.access_state?l(e.synchron_info.endtime):"--"},{label:"网站",isCustom:!0,prop:"sites",width:280,showOverflowTooltip:!0},{label:"最近部署时间",isCustom:!0,width:180,prop:"deploy_time",render:e=>e.deploy_time?l(e.deploy_time):"--"},{label:"最近部署状态",isCustom:!0,prop:"deploy_status",render:e=>{const s={1:k("span",{class:"text-[#20a53a]"},[L("成功")]),0:k("span",null,[L("--")]),"-1":k("span",{class:"text-danger cursor-pointer",onClick:()=>(async e=>{o({loading:"正在获取部署任务详情",request:K({task_id:e.id}),success:({data:s})=>{const{msg:t}=s;r({title:"".concat(e.task_name," 部署状态详情"),area:48,component:()=>n(()=>import("./index397.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{...t}})}})})(e)},[L("失败")])};return s[e.deploy_status]||s[0]}},{label:"接入状态",isCustom:!0,prop:"access_state",render:e=>{const s=new Map([[1,"等待接入"],[2,"成功"],[-1,"失败"]]);return k("span",{class:new Map([[1,"text-warning"],[2,"text-[#20a53a]"],[-1,"text-danger"]]).get(e.access_state)},[s.get(e.access_state)])}},{label:"操作",fixed:"right",width:120,render:e=>{const s=(e,s)=>k("span",{class:"bt-link",onClick:s},[e]),t=s("编辑",()=>{ne(!0,e)}),a=s("删除",()=>(e=>{c({title:"删除部署任务",content:"确定要删除 ".concat(e.task_name," 部署任务吗？"),confirmText:"删除",cancelText:"取消",onConfirm:()=>{o({loading:"正在删除部署任务",message:!0,request:W({task_id:e.id}),success:e=>{e.status&&(re.value=!0)}})}})})(e)),l=[];return l.push(t),l.push(k(M,{direction:"vertical"},null)),l.push(a),l}}],pe=[{label:"删除",value:"delete",event:async(e,s,t,a)=>{const{label:l,value:c}=a;let i=t.value.map(e=>e.id).join(",");await r({title:"批量".concat(l,"部署任务"),area:46,component:()=>n(()=>import("./index118.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{resultTitle:"批量".concat(l,"部署任务"),resultData:t.value,resultColumn:[{label:"名称",prop:"task_name"},J()],autoTitle:"批量".concat(l,"部署任务")},showFooter:!0,onConfirm:async()=>{await(async e=>{if("delete"===e)return o({loading:"正在删除部署任务",request:$({task_ids:i}),success:e=>{const{data:s}=e;let t={resultData:[...s.faildList,...s.successList],resultTitle:"".concat(l,"部署任务"),resultColumn:[{label:"名称",prop:"task_name"},{label:"操作结果",render:e=>k("div",{class:e.status?"text-primary":"text-danger"},[k(q("spam"),null,{default:()=>[e.error_msg]})])}]};Q(t)}})})(c),re.value=!0}})}}],me=()=>{window.open("https://www.bt.cn/bbs/thread-141973-1-1.html","_blank","noopener,noreferrer")},de={key:0},ue={class:"flex items-center"},_e={class:"flex ml-[12px] items-center"},xe={class:"flex items-center"},fe={key:1},he=h({__name:"index",setup(t){const{mainHeight:a,payment:l}=p(),{authType:r}=A(l.value),{isRefreshDeployTaskList:n}=P(le()),o=x(pe),{BtTable:c,BtPage:i,BtRecommendSearch:h,BtColumn:w,BtBatch:b,BtSearch:L}=m({request:ce,columns:ie,extension:[u(n),o,_("search",{name:"ssl",key:"get_deploy_list",list:[],showRecommend:!1})]});return(t,l)=>{const n=I,o=f,p=d,m=s,u=e;return"free"!==j(r)?(y(),v("div",de,[k(n,{type:"warning",class:"!mb-[1.2rem] !p-[1.2rem]",closable:!1,"show-icon":""},{title:C(()=>[...l[0]||(l[0]=[g("span",{class:"text-[1.3rem]"},[g("span",null,"提示：请先在宝塔官网->SSL模块->自动同步中创建同步任务，请不要泄露同步任务的密钥")],-1)])]),_:1}),k(u,null,{"header-left":C(()=>[g("div",ue,[k(o,{options:j(oe)},null,8,["options"]),k(H,{placement:"right"},{default:C(()=>[g("div",_e,[k(p,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-[1.5rem] h-[1.5rem]",all:!0}),l[1]||(l[1]=g("span",{class:"bt-link"},"售前客服",-1))])]),_:1}),k(m,{class:"ml-[12px]",onClick:j(N)},{default:C(()=>[...l[2]||(l[2]=[g("div",{class:"flex items-center"},[g("span",{class:"svgtofont-desired text-[1.6rem]"}),g("span",null,"需求反馈")],-1)])]),_:1},8,["onClick"]),k(m,{class:"ml-[12px]",onClick:j(me)},{default:C(()=>[...l[3]||(l[3]=[g("div",{class:"flex items-center"},[g("span",{class:"text-[1.2rem]"},">>"),g("span",null,"使用说明")],-1)])]),_:1},8,["onClick"])])]),"header-right":C(()=>[g("div",xe,[k(j(L),{type:"ssl-deploy",placeholder:"请输入名称/域名",class:"!w-[270px] mr-[10px]"}),k(j(w))])]),content:C(()=>[k(j(c),{"min-height":j(a)},null,8,["min-height"])]),"footer-left":C(()=>[k(j(b))]),"footer-right":C(()=>[k(j(i))]),_:1})])):(y(),v("div",fe,[k(ae)]))}}}),we=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));export{we as i,me as o,le as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
