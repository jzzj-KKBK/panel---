!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}var n=["id"];function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function r(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach(function(n){o(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function u(t,r,o,a){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return i(s,"_invoke",function(t,r,o){var a,i,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return a=n,i=0,u=e,p.n=t,c}};function v(t,r){for(i=t,u=r,n=0;!f&&l&&!o&&n<s.length;n++){var o,a=s[n],v=p.p,m=a[2];t>3?(o=m===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=v&&((o=t<2&&v<a[1])?(i=0,p.v=r,p.n=a[1]):v<m&&(o=t<3||a[0]>r||r>m)&&(a[4]=t,a[5]=r,p.n=m,i=0))}if(o||t>1)return c;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,m),i=s,u=m;(n=i<2?e:u)||!f;){a||(i?i<3?(i>1&&(p.n=-1),v(i,u)):p.n=u:p.v=u);try{if(l=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((n=(f=p.n<0)?u:t.call(r,p))!==c)break}catch(n){a=e,i=1,u=n}finally{l=1}}return{value:n,done:f}}}(t,o,a),!0),s}var c={};function l(){}function s(){}function f(){}n=Object.getPrototypeOf;var p=[][r]?n(n([][r]())):(i(n={},r,function(){return this}),n),v=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=f,i(v,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,o,"GeneratorFunction"),i(v),i(v,o,"Generator"),i(v,r,function(){return this}),i(v,"toString",function(){return"[object Generator]"}),(a=function(){return{w:u,m:m}})()}function i(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,n,t,r){function a(n,t){i(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},i(e,n,t,r)}function u(e,n,t,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void t(e)}u.done?n(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./site-legacy.js?v=1756369731","./column-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./useStore-legacy4.js?v=1756369731"],function(e,t){"use strict";var o,i,u,l,s,f,p,v,m,d,y,b,h,g,w,j,k,_,O,S,x,C,P,D,T,E,G,M,F,q,L,N,W,J;return{setters:[function(e){o=e.bU,i=e.A,u=e.M,l=e.u,s=e._,f=e.l,p=e.L,v=e.o,m=e.K},function(e){d=e.siteRname,y=e.getNpsQuestion,b=e.addSiteTypes,h=e.modifySiteTypes,g=e.removeSiteType,w=e.batchPhpType,j=e.removeProject},function(e){k=e.b,_=e.B,O=e.c},function(e){S=e._},function(e){x=e.c,C=e.r,P=e.t,D=e.p,T=e.a4,E=e.e,G=e.ax,M=e.B,F=e.H,q=e.G},function(e){L=e.c,N=e.h},function(e){W=e.u,J=e.S}],execute:function(){var z,B=new EventTarget,I=x({props:{onClick:{type:Function,default:function(){}},row:{type:Object,default:function(){return{}}},refresh:{type:Function,default:function(){}}},setup:function(e,n){var t=C(!1),r=C(!1),l=C(!1),s=P(e).row,f=C("site-name-".concat(o(5),"-").concat(s.value.id)),p=function(){t.value=!1},v=function(){r.value=!0,t.value=!0;var e=document.getElementById(f.value);e&&setTimeout(function(){e.focus()},100)},m=function(e){"Enter"!==e.key&&13!==e.keyCode||y(e)},y=function(){var n=c(a().m(function n(o){var i;return a().w(function(n){for(;;)switch(n.p=n.n){case 0:if(n.p=0,s.value.rname!==o.target.value){n.n=1;break}return r.value=!1,t.value=!1,n.a(2);case 1:return n.n=2,d({id:s.value.id,rname:o.target.value});case 2:i=n.v,u.request(i),t.value=!1,r.value=!1,i.status&&e.refresh(),n.n=4;break;case 3:n.p=3,n.v,t.value=!1;case 4:return n.a(2)}},n,null,[[0,3]])}));return function(e){return n.apply(this,arguments)}}();return D(function(){B.addEventListener("hide-all-popovers",p)}),T(function(){B.removeEventListener("hide-all-popovers",p)}),function(){return E("div",null,[E(G,{placement:"right",width:"220","popper-class":"myPopover",visible:t.value},{default:function(){return E("div",{class:"web_name_hover",onMouseenter:function(){l.value=!0},onMouseleave:function(){l.value=!1,r.value||(t.value=!1)}},[E("div",{class:"web_name_title"},[M("网站名："),E("span",{class:"web_name_text"},[r.value?"":s.value.rname,E("input",{id:f.value,class:"bt-input ".concat(r.value?"":"hide"),onKeyup:m,onBlur:y,size:"mini",value:s.value.rname,placeholder:"点击编辑内容，按回车或失去焦点自动保存",style:"width: 140px;"},null)])]),E("div",{class:"web_name_setting"},[E("span",{class:"web_name_copy bt-link",onClick:function(){i({value:s.value.rname})}},[E("i",{class:"svgtofont-icon-copy mr-4x text-[#666] text-[1.6rem]"},null),M("复制网站名")]),E("span",{onClick:v,class:"web_name_rename bt-link"},[E("i",{class:"svgtofont-icon-memo-active mr-4x text-[#666] text-[1.6rem]"},null),M("重命名")])])])},reference:function(){return E("span",{onMouseenter:function(){B.dispatchEvent(new CustomEvent("hide-all-popovers")),t.value=!0},onMouseleave:function(){setTimeout(function(){r.value||l.value||(t.value=!1)},500)},onClick:function(){e.onClick(s)},class:"justify-start bt-link cursor-pointer"},[s.value.rname])}})])}}}),H=l().plugin,K=W(),A=K.isRefreshList,R=K.activeType,U=K.batchConfig,Q=K.isSiteMult,V=J(),X=V.delGeneralProjectEvent,Y=V.getClassList,Z=V.setProjectStatusEvent,$=(e("e",C()),e("j",C([]))),ee=(e("b",function(e){return{label:(null==e?void 0:e.label)||"项目名称",prop:"name",minWidth:120,sortable:!0,render:function(n){var t=H.value.web,r="java"===(null==e?void 0:e.type)&&!(n.is_file_ok||void 0===n.is_file_ok);return E("div",{class:"flex items-center inline-block truncate"},[null!=n&&n.waf&&(null!=n&&n.isWaf||void 0===(null==n?void 0:n.isWaf))?E("span",{class:"w-[1.6rem] mr-[4px] cursor-pointer flex items-center",onClick:function(){e.openPlugin&&e.openPlugin(n,"iconWaf")}},[E(s,{icon:"left-waf",class:"!text-[2rem] ".concat(n.waf.status&&"nginx"===(null==t?void 0:t.type)&&null!=t&&t.status&&null!=t&&t.setup?"!text-primary":"!text-[#999]"),size:20},null)]):"",E("span",{class:"!w-full !whitespace-pre-line flex ml-[4px]",title:null!=n&&n.cn_name&&n.name!==(null==n?void 0:n.cn_name)?null==n?void 0:n.cn_name:""},["php"===(null==e?void 0:e.type)?E(I,{row:n,onClick:function(){return e.onClick(n)},refresh:function(){A.value=!0}},null):E("span",{onClick:function(){r||e.onClick(n)},class:"justify-start cursor-pointer ".concat(r?"":"bt-link"," ")},[n.name])])])}}}),e("g",function(e){var n=null==e?void 0:e.type;return k({prop:"run",event:e.onClick,data:["未启动","运行中"],width:80,function:function(t){var r=null==t?void 0:t.run;return null!=e&&e.prop&&(r=null!==t[e.prop]),"nodejs"===n&&"pm2"===t.project_config.project_type&&void 0===t.run?F(E("div",{class:"loading h-[2rem]"},null),[[q("bt-loading"),!0]]):E(G,{placement:"right",width:"160","popper-class":"detail-popover",trigger:"hover"},{default:function(){return E("div",{class:"flex items-center"},[E("span",{class:"bt-link cursor-pointer",onClick:function(){return e.onClick(t)}},[r?"停止":"启动"]),E(S,null,null),E("span",{class:"bt-link cursor-pointer",onClick:function(){return e.onClick(t,"restart")}},[M("重启")]),E(S,null,null),E("span",{class:"bt-link cursor-pointer",onClick:function(){return e.onClick(t,"setting")}},[M("告警设置")])])},reference:function(){return E(_,{modelValue:r?1:0,data:["未启动","运行中"],onClick:function(){return e.onClick(t)}},null)}})}})}),e("c",function(e){return{label:"到期时间",isCustom:!0,sortable:!0,prop:"edate",minWidth:100,width:100,render:function(e){var n=(new Date).setHours(0,0,0,0),t=Date.now(),r="0000-00-00"!==e.edate?new Date(e.edate).getTime():null,o=r&&r<n;return E("span",{class:"cursor-pointer "+(o?"bt-danger":r&&r-t<6048e5?"bt-warn":"bt-link"),onClick:function(){return ee(e)}},[o?"已过期":"0000-00-00"===e.edate?"永久":e.edate])}}}),function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f({title:"【".concat(e.name,"】到期时间设置"),area:48,component:function(){return p(function(){return t.import("./index-legacy203.js?v=1756369731")},void 0,t.meta.url)},compData:{rowData:e,isMult:n},showFooter:!0})}),ne=(e("d",function(e){return{label:"SSL证书",prop:"site_ssl",isCustom:!0,sortable:!0,minWidth:100,width:100,render:function(n){var t,r,o;return E("span",{class:"cursor-pointer ".concat(-1===n.ssl?"text-[#f0ad4e]":(null===(t=n.ssl)||void 0===t?void 0:t.endtime)<0?"text-danger":"text-[#20a53a]"),onClick:function(){e.onClick(n)}},[-1===n.ssl?"未部署":(null===(r=n.ssl)||void 0===r?void 0:r.endtime)>0?"剩余".concat(null===(o=n.ssl)||void 0===o?void 0:o.endtime,"天"):"已过期"])}}}),e("n",function(){return{label:"端口",prop:"port",width:120}}),e("u",function(){return{label:"部署证书",value:"deploy",event:(e=c(a().m(function e(n,t,r,o,i,u){return a().w(function(e){for(;;)switch(e.n){case 0:U.value=u,Q.value=!0,ne(r.value,i);case 1:return e.a(2)}},e)})),function(n,t,r,o,a,i){return e.apply(this,arguments)})};var e}),e("a",function(e){return{label:"设置分类",value:"setClass",event:(n=c(a().m(function n(t,r,o,i,u,l){return a().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,L({name:"分类",options:e.classList.value.filter(function(e){return"all"!==e.value&&"-2"!==e.value}),selectList:o.value,request:function(){var n=c(a().m(function n(t,r){var i,c,s;return a().w(function(n){for(;;)switch(n.n){case 0:return i=l.exclude,c=l.enable,s=N(o.value,i,c,{params:{project_type:R.value.toUpperCase(),id:t.id}}),n.n=1,m({loading:"正在批量设置分类，请稍后...",request:w(s),message:!0});case 1:u&&u(),A.value=!0,r(),e.callback&&e.callback();case 2:return n.a(2)}},n)}));return function(e,t){return n.apply(this,arguments)}}()});case 1:return n.a(2)}},n)})),function(e,t,r,o,a,i){return n.apply(this,arguments)})};var n}),e("o",function(e,n){f({title:(null==e?void 0:e.title)||"批量操作结果",area:n||42,component:function(){return p(function(){return t.import("./index-legacy118.js?v=1756369731")},void 0,t.meta.url)},compData:e})}),e("k",function(e,n){var r="go"===e;f({title:"".concat(r?"Go":"Python","-").concat(r?"SDK":"","版本管理"),area:50,component:function(){return p(function(){return t.import("./index-legacy216.js?v=1756369731")},void 0,t.meta.url)},compData:{type:e,refresh:n}})}),e("i",function(){var e=c(a().m(function e(n){var t,r,o,i,c=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:R.value,e.n=1,v({title:"".concat("删除".concat(t,"项目-").concat(n.name)),content:"".concat("风险操作，此操作不可逆，删除".concat(n.name,"项目后您将无法管理该项目，是否继续操作？")),type:"input",input:{content:"删除项目"}});case 1:return e.p=1,r={python:{data:JSON.stringify({name:n.name})},default:{data:JSON.stringify({project_name:n.name})}},o=r[t]||r.default,e.n=2,X(o);case 2:i=e.v,u.request(i),i.status&&(A.value=!0),e.n=4;break;case 3:return e.p=3,e.v,u.error("删除失败"),e.a(2,{status:!1,msg:"删除失败"});case 4:return e.a(2)}},e,null,[[1,3]])}));return function(n){return e.apply(this,arguments)}}()),e("h",{get:(z=c(a().m(function e(){var n,t;return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Y();case 1:return n=e.v,t=n.data,$.value=t,e.a(2,t)}},e)})),function(){return z.apply(this,arguments)}),add:function(e){return b(r(r({},e),{},{ps:""}),R.value)},update:function(e){var t=e.id,o=function(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,n);return h(r(r({type_id:t},o),{},{ps:""}),R.value)},delete:function(e){var n=e.id;return g({type_id:n},R.value)}}),e("s",function(){var e=c(a().m(function e(n,t){var r,o,i,c,l,s,f=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=f.length>2&&void 0!==f[2]?f[2]:R.value,e.p=1,o=(new Date).setHours(0,0,0,0),!("0000-00-00"!==n.edate&&new Date(n.edate).getTime()/1e3<o/1e3)){e.n=2;break}return u.error("项目已过期，请设置站点到期时间后再操作"),e.a(2);case 2:return i={start:"即将启动项目".concat(n.name,"，确定要启动项目吗？"),stop:"停用项目".concat(n.name,"后，项目将无法访问，确定要停用项目吗？"),restart:"即将重启项目".concat(n.name,"，确定要重启项目吗？")},e.n=3,v({icon:"warning-filled",title:"设置项目状态",content:i[t]});case 3:return c={python:{data:JSON.stringify({name:n.name})},nodejs:{project_name:n.name,project_type:n.project_config.project_type||"nodejs",status:t},java:{project_name:n.name},phpasync:{sitename:n.name,project_action:t},default:{data:JSON.stringify({project_name:n.name})}},l=c[r]||c.default,"nodejs"===r&&"pm2"===n.project_config.project_type&&(l.pm2_name=n.pm2_name||n.project_config.pm2_name),e.n=4,Z(l,t,r);case 4:return s=e.v,A.value=!0,e.a(2,s);case 5:return e.p=5,e.v,e.a(2,{status:!1,msg:"操作失败"})}},e,null,[[1,5]])}));return function(n,t){return e.apply(this,arguments)}}()),e("m",function(e){return f({title:"到期提醒配置",area:50,showFooter:!0,confirmText:"保存配置",component:function(){return p(function(){return t.import("./ssl-expire-configure-legacy.js?v=1756369731")},void 0,t.meta.url)},compData:!!e,onCancel:(null==e?void 0:e.onCancel)||function(){}})}),e("f",c(a().m(function e(){var n,r,o,i;return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m({request:y({version:-1,product_type:14})});case 1:if(o=e.v,(i=o.data).status){e.n=2;break}return e.a(2,u.error("请求失败，请稍候重试"));case 2:f({component:function(){return p(function(){return t.import("./index-legacy159.js?v=1756369731")},void 0,t.meta.url)},area:52,compData:{name:"网站",type:14,id:null===(n=i.msg[0])||void 0===n?void 0:n.id,description:null===(r=i.msg[0])||void 0===r?void 0:r.question}});case 3:return e.a(2)}},e)}))),e("q",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{readonly:!1,theme:"chrome"};return{mode:"ace/mode/nginx",theme:"ace/theme/".concat(e.theme),wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:e.readonly,fontSize:"12px"}}),e("r",function(e){return f({title:e.title,area:68,component:function(){return p(function(){return t.import("./log-details-legacy.js?v=1756369731")},void 0,t.meta.url)},compData:e})}),e("l",function(){var e=c(a().m(function e(n,t,o,i){var u,l,s,f;return a().w(function(e){for(;;)switch(e.n){case 0:return u=i.label,l=i.value,s=new Map([["delete","批量删除选中的项目后，项目将无法恢复"]]),f=function(){var e=c(a().m(function e(n,t){var o,i,u,c,s;return a().w(function(e){for(;;)switch(e.n){case 0:o=new Map([["delete",j]]),i=n.name,u=o.get(l),s=l,e.n="delete"===s?1:3;break;case 1:if(!u){e.n=3;break}return e.n=2,u({data:JSON.stringify({project_name:i})},R.value);case 2:return c=e.v,e.a(2,r(r({},n),{},{batchStatus:c.status?1:2,message:c.status?c.data.msg:c.data.data}));case 3:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),e.n=1,n({title:"批量".concat(u),content:"".concat(s.get(l),"，是否继续操作？"),column:[{label:"项目名称",prop:"name"},O()],onConfirm:function(){var e=c(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t(f);case 1:return A.value=!0,e.a(2,!1)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(n,t,r,o){return e.apply(this,arguments)}}()),e("t",{create:"创建文件",modify:"编辑文件",unlink:"删除文件",mkdir:"新建文件夹",rmdir:"删除文件夹",rename:"文件重命名",link:"创建软链",chmod:"修改文件权限",chown:"修改所有者"}),e("p",{localhost:"服务器磁盘",alioss:"阿里云OSS",ftp:"FTP",sftp:"SFTP",msonedrive:"微软OneDrive",qiniu:"七牛云",txcos:"腾讯COS",upyun:"又拍云",tianyiyun:"天翼云",jdcloud:"京东云",aws_s3:"亚马逊存储","Google Cloud":"谷歌云","Google Drive":"谷歌网盘",bos:"百度云",obs:"华为云",webdav:"WebDav",minio:"MinIO",dogecloud:"多吉云COS"}),function(e,n){return f({isAsync:!0,title:"批量设置证书",area:68,component:function(){return p(function(){return t.import("./index-legacy217.js?v=1756369731")},void 0,t.meta.url)},compData:e,onCancel:function(){n&&n()}})})}}})}();
