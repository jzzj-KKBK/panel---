import{r as e,k as t,aB as a,c as l,g as s,w as n,p as o,a4 as r,G as c,q as u,v as i,y as m,e as d,x as p,A as v,B as h,P as f,H as g,K as _,F as y,a_ as x,I as k,J as w,D as b,S as C,T as j,av as D,ax as R,Q as P,z as V,C as S,O as q,ba as I,M as T,ap as E,ao as M,an as O,aQ as A,b8 as H,b5 as L,b9 as U}from"./base-lib.js?v=1756369731";import{ay as B,l as N,L as W,M as F,o as K,bv as Q,b$ as z,K as J,aQ as G,c0 as X,u as Y,e as $,h as Z,aA as ee,R as te,c as ae}from"./utils-lib.js?v=1756369731";import{o as le,t as se,N as ne}from"./useMethods.js?v=1756369731";import{u as oe}from"./use-socket-request.js?v=1756369731";import{_ as re}from"./index145.js?v=1756369731";import{_ as ce}from"./index116.js?v=1756369731";import{B as ue}from"./index140.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";import"./ace.js?v=1756369731";const{refs:{orchestrationData:ie}}=B(),me=e(null),de=e(!1),pe=e=>{switch(e){case"running":return{text:"运行中",type:"success"};case"exited":return{text:"已停止",type:"danger"};default:return{text:"异常",type:"warning"}}},ve=e(!0),he=async e=>{N({isAsync:!0,component:()=>W(()=>import("./index223.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{wsConfirm:e},title:"添加容器编排",area:60,btn:"确定"})},fe=async({params:e,close:t})=>{try{return new Promise(async(a,l)=>{await N({isAsync:!0,title:"添加日志 - 请耐心等待不要关闭此窗口",area:60,component:()=>W(()=>import("./index224.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{init:l=>{me.value.socketRequest({params:e,onMessage:e=>{t(),l(e.msg),-1===(null==e?void 0:e.data)&&(F.request(e),ie.value.refreshList="force",a(e))}})}}})})}catch(a){}},ge=async()=>{var e;null==(e=me.value)||e.socketDestroy();const{socketRequest:t,socketDestroy:a}=oe("/ws_modsoc",!1);return me.value={socketRequest:t,socketDestroy:a},new Promise((e,t)=>{e(me.value)})},_e=(e,t)=>{if(!e.startsWith("0.0.0.0:"))return;const a=window.vite_public_ip,l=e.split("->")[0].split(":")[1],s="".concat(t,"://").concat(a,":").concat(l);window.open(s,"_blank")},{refs:{orchestrationData:ye}}=B(),xe=e(""),ke=e([]),we=t({con:!1,log:!1}),be=e("容器日志"),Ce=e(!1),je=e("暂无日志信息"),De=e=>{const t=[{text:"重启",command:"restart"},{text:"停止",command:"stop"},{text:"强制停止",command:"kill"}],a=[{text:"启动",command:"start"}],l=[{text:"重启",command:"restart"},{text:"强制停止",command:"kill"}];switch(e){case"running":return t;case"exited":return a;default:return l}},Re=e=>{switch(e){case"running":return{text:"运行中",type:"success"};case"exited":return{text:"已停止",type:"danger"};default:return{text:"异常",type:"warning"}}},Pe=async(e,t=!0)=>{try{let a="";switch(e){case"stop":"stop"===e&&(a="停止");case"start":"start"===e&&(a="启动");case"restart":"restart"===e&&(a="重启");case"update":"update"===e&&(a="更新");case"rebuild":"rebuild"===e&&(a="重建");case"down":"down"===e&&(a="停止并删除所有容器"),t&&await K({icon:"warning-filled",title:"【".concat(ye.value.currentCompose.name,"】").concat(a),width:"35rem",content:"容器编排即将".concat(a,",是否继续？")});const l={mod_name:"docker",sub_mod_name:"com",def_name:e,path:ye.value.currentCompose.path,project_name:ye.value.currentCompose.name,ws_callback:e};N({isAsync:!0,title:"编排【".concat(ye.value.currentCompose.name,"】日志"),area:60,component:()=>W(()=>import("./index224.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{init:e=>{me.value.socketRequest({params:l,onMessage:t=>{-1===t.data&&F.request(t),e(t.msg)}})}}});break;case"delete":(async e=>{try{await K({icon:"warning-filled",title:"删除容器编排【".concat(e.name,"】"),width:"35rem",content:"将删除指定容器编排【".concat(e.name,"】,是否继续？")});const t={mod_name:"docker",sub_mod_name:"com",def_name:"delete",project_name:e.name,path:e.path,ws_callback:"delete"};return ie.value.noRefresh=!0,new Promise((e,a)=>{let l=F.load("正在删除中");me.value.socketRequest({params:t,onMessage:t=>{-1===(null==t?void 0:t.data)&&(l.close(),F.request(t),ie.value.noRefresh=!1,ie.value.refreshList=!0,e(t))}})})}catch(t){}})(ye.value.currentCompose)}}catch(a){}},Ve=async e=>{try{const t=await z({container_id:e.ID});t.status?(be.value="容器【".concat(e.Name,"】日志"),je.value=t.data.msg,Ce.value=!0):F.error(t.msg)}catch(t){}},Se=async(e,t)=>{const a={id:t.ID,status:e};J({request:G({data:JSON.stringify(a)}),loading:"正在设置容器状态，请稍后...",message:!0})},qe=async()=>{try{if(!ye.value.currentCompose.path)return void(we.con=!1);const e={mod_name:"docker",sub_mod_name:"com",def_name:"get_project_ps",path:ye.value.currentCompose.path,ws_callback:"get_project_ps"};we.con=!0,me.value.socketRequest({params:e,onMessage:e=>{ke.value=Q(e.data,"array",[]),we.con=!1,ke.value.map(e=>{e.port=e.Ports.split(",").filter(e=>""!==e)})}})}catch(e){}},Ie=async()=>{try{if(!ye.value.currentCompose.path)return void(we.log=!1);const e={mod_name:"docker",sub_mod_name:"com",def_name:"get_logs",path:ye.value.currentCompose.path,ws_callback:"get_logs"};we.log=!0;let t=0;const a=[];me.value.socketRequest({params:e,onMessage:e=>{we.log=!1;let l=Q(e.msg,"string","",null,!0);if("暂无日志信息"===l)return xe.value=l,void(t=0);t>=200&&a.shift(),a.push(l),t++,xe.value=a.join("\n")}})}catch(e){}},{refs:{orchestrationData:Te}}=B(),Ee=e(""),Me=e({}),Oe=e([]),Ae=e([]),He=t({checked:!1,showCheckPopover:!1,showSlectPopover:!1,popoverContent:"",type:""}),Le=e(!1),Ue=[{active:!0,content:"添加容器编排",event:()=>he(fe)}];let Be=null,Ne=e(!0);const We=e({}),Fe=e(""),Ke=e=>{switch(e.run_status){case"running":return{text:"运行中",type:"success"};case"exited":return{text:"已停止",type:"danger"};default:return{text:"异常",type:"warning"}}},Qe=e=>{const t=Oe.value.indexOf(e.name);-1===t?(Oe.value.push(e.name),He.checked=Oe.value.length===Ae.value.length):(Oe.value.splice(t,1),He.checked=!1)},ze=e=>{Fe.value=e.remark,We.value[e.name]=!0},Je=e=>{const t={},a=e.map(e=>(t[e.name]=Oe.value.includes(e.name),e.name));return Oe.value=Oe.value.filter(e=>a.includes(e)),t},Ge=e=>{switch(clearTimeout(Be),He.showSlectPopover=!1,He.showCheckPopover=!1,e){case"select":He.showSlectPopover=!0,Be=setTimeout(()=>{He.showSlectPopover=!1},2e3);break;case"check":He.showCheckPopover=!0,Be=setTimeout(()=>{He.showCheckPopover=!1},2e3)}},Xe=()=>{if(0===Oe.value.length||""===He.type)switch(!0){case 0===Oe.value.length:He.popoverContent="请先选择要操作的容器编排",Ge("check");break;case""===He.type:He.popoverContent="请选择批量操作",Ge("select")}},Ye=e=>{e?(Oe.value=Ae.value.map(e=>e.name),Me.value=Je(Ae.value)):(Oe.value=[],Me.value=Je(Ae.value))},$e=()=>Ze(),Ze=async()=>{try{await K({icon:"warning-filled",title:"批量删除容器编排",width:"35rem",content:"将批量删除选中的".concat(Oe.value.length,"个容器编排,是否继续？")});const e={mod_name:"docker",sub_mod_name:"com",def_name:"batch_delete",project_list:[],ws_callback:"batch_delete"};Oe.value.map(t=>{const a=Ae.value.find(e=>e.name===t);a&&e.project_list.push({project_name:t,path:a.path})});const t=[];Te.value.noRefresh=!0;let l=F.load("正在删除中");me.value.socketRequest({params:e,onMessage:e=>{let s=Q(e.data,"object",!1);s&&t.push({name:s.project_name,status:s.status}),-1===e.data&&(Te.value.noRefresh=!1,l.close(),Le.value=!1,N({title:"批量删除结果",area:42,component:()=>W(()=>import("./index118.js?v=1756369731"),__vite__mapDeps([]),import.meta.url),compData:{resultData:t,autoTitle:"批量删除完成",resultColumn:[{label:"容器编排名称",prop:"name"},{label:"操作结果",align:"right",render:e=>a("span",{class:e.status?"text-primary":e.status?"text-danger":""},e.status?"删除成功":"删除失败")}]}}))}})}catch(e){}},et=e=>{e.target.blur()},tt=async(e,t)=>{We.value[t.name]=!1,Te.value.isEdit=!1,e.target.value!==t.remark&&(await J({request:X({remark:e.target.value,name:t.name,path:t.path}),message:!0,success:a=>{a.status&&(t.remark=e.target.value)}}),at(t))},at=async e=>{We.value[e.name]||(await ge(),st(),Te.value.currentCompose=e,e.path===Te.value.currentCompose.path&&(Te.value.refreshItem=!Te.value.refreshItem))},lt=()=>{N({title:"编排模板",area:100,component:()=>W(()=>import("./index225.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},st=async e=>{try{const t={mod_name:"docker",sub_mod_name:"com",def_name:"get_project_list",ws_callback:"get_project_list"};Te.value.refreshList=!1,me.value.socketRequest({params:t,onMessage:async t=>{if(Te.value.isEdit)return;if(Ae.value=t.data||[],Te.value.loading=!1,Me.value=Je(Ae.value),ve.value=0===Ae.value.length,0===Ae.value.length)return void(Ne.value=!1);if(Te.value.noRefresh)return;Ae.value.forEach(e=>{We.value[e.name]||(We.value[e.name]=!1)});const a=Te.value.currentCompose.name,l=Ae.value.find(e=>e.name===a);!l&&a&&(await ge(),st()),"force"===e?at(Ae.value[0]):Te.value.currentCompose=l||Ae.value[0],Ne.value=!1}})}catch(t){Te.value.loading=!1,Ne.value=!1}},nt={class:"flex items-center flex-wrap gap-[10px] p-[1.6rem]"},ot={class:"w-full relative"},rt=["onClick"],ct={class:"w-[1.6rem]"},ut={class:"flex flex-col ml-[1rem] w-[60%] truncate"},it={class:"truncate compose-title"},mt=["onClick"],dt=["value","onBlur"],pt={class:"batch-select"},vt={class:"ml-[1rem]"},ht=$(l({__name:"index",setup(e){const{mainHeight:t}=Y(),{refs:{orchestrationData:a}}=B(),l=s(()=>Ee.value?Ae.value.filter(e=>e.name.includes(Ee.value)):Ae.value),T=s(()=>0===Oe.value.length),E=s(()=>Ae.value.length!==Oe.value.length&&Oe.value.length>0);return n(()=>a.value.refreshList,e=>{e&&st(e)}),o(()=>{st()}),r(()=>{Ee.value="",Oe.value=[],Me.value={},Ae.value=[],He.checked=!1,He.showCheckPopover=!1,He.showSlectPopover=!1,He.popoverContent="",He.type="",Le.value=!1,We.value={},Fe.value="",Ne.value=!0,clearTimeout(Be),Be=null}),(e,s)=>{const n=re,o=b,r=C,M=j,O=I,A=D,H=R,L=c("focus"),U=c("bt-loading");return u(),i("div",{class:"left-list",style:_({height:"".concat(p(t)-90,"px")})},[m("div",nt,[d(n,{options:p(Ue)},null,8,["options"]),d(o,{onClick:p(lt)},{default:v(()=>[...s[10]||(s[10]=[h("编排模板",-1)])]),_:1},8,["onClick"]),m("div",ot,[d(r,{modelValue:p(Ee),"onUpdate:modelValue":s[0]||(s[0]=e=>f(Ee)?Ee.value=e:null),placeholder:"请输入关键字",clear:""},{prefix:v(()=>[...s[11]||(s[11]=[m("i",{class:"svgtofont-el-search"},null,-1)])]),_:1},8,["modelValue"])])]),g((u(),i("div",{class:"table-con",style:_({height:"".concat(p(t)-270,"px")})},[(u(!0),i(y,null,x(p(l),e=>(u(),i("div",{key:e.name,class:w(["list-item h-[5.4rem]",{active:e.name===p(a).currentCompose.name}]),onClick:t=>p(at)(e)},[d(M,{modelValue:p(Me)[e.name],"onUpdate:modelValue":t=>p(Me)[e.name]=t,onChange:t=>p(Qe)(e),onClick:s[1]||(s[1]=P(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onChange"]),g(m("div",ct,null,512),[[k,!p(Le)]]),d(O,{type:p(Ke)(e).type,class:"ml-[1rem] w-[5rem] status-tag text-center !h-[1.9rem] !leading-[1.9rem] !px-[.4rem]"},{default:v(()=>[h(V(p(Ke)(e).text),1)]),_:2},1032,["type"]),m("div",ut,[m("span",it,V(e.name),1),p(We)[e.name]?S("",!0):(u(),i("span",{key:0,class:w(["remark-text",e.remark?"":"empty-remark"]),onClick:P(t=>p(ze)(e),["stop"])},V(e.remark||"点击编辑备注"),11,mt)),p(We)[e.name]?g((u(),i("input",{key:1,type:"text",class:"remark-input",title:"点击编辑备注，回车或失焦保存",value:p(Fe),placeholder:"点击编辑备注",onClick:s[2]||(s[2]=P(()=>{},["stop"])),onFocus:s[3]||(s[3]=e=>p(a).isEdit=!0),onKeyup:s[4]||(s[4]=q((...e)=>p(et)&&p(et)(...e),["enter"])),onMousedown:s[5]||(s[5]=P(()=>{},["stop"])),onMouseup:s[6]||(s[6]=P(()=>{},["stop"])),onBlur:t=>p(tt)(t,e)},null,40,dt)),[[L]]):S("",!0)])],10,rt))),128)),g(d(A,{description:"当前列表为空"},null,512),[[k,0===p(l).length]])],4)),[[U,p(Ne)],[U,"正在获取列表","title"]]),m("div",pt,[d(H,{modelValue:p(He).showCheckPopover,"onUpdate:modelValue":s[8]||(s[8]=e=>p(He).showCheckPopover=e),trigger:"manual","popper-class":"popper-danger",placement:"top-start",content:p(He).popoverContent},{reference:v(()=>[d(M,{modelValue:p(He).checked,"onUpdate:modelValue":s[7]||(s[7]=e=>p(He).checked=e),indeterminate:p(E),onChange:p(Ye)},null,8,["modelValue","indeterminate","onChange"])]),_:1},8,["modelValue","content"]),m("div",{class:"relative flex items-center",onClick:s[9]||(s[9]=(...e)=>p(Xe)&&p(Xe)(...e))},[m("div",{class:w(["absolute w-full h-full z-999 cursor-not-allowed",p(T)?"":"hidden"])},null,2),m("div",vt,[d(o,{type:"primary",disabled:p(T),onClick:p($e)},{default:v(()=>[...s[12]||(s[12]=[h(" 批量删除 ",-1)])]),_:1},8,["disabled","onClick"])])])])],4)}}}),[["__scopeId","data-v-249b41a9"]]),ft={class:"menu-col h-full"},gt={class:"p-[1.6rem] !pt-0 overflow-y-auto",style:{height:"calc(100% - 50px)"}},_t={class:"flex flex-col w-full"},yt={class:"flex items-center w-full"},xt=["title"],kt=["onClick"],wt={class:"flex items-center ml-[2rem]"},bt=["title"],Ct={class:"flex flex-wrap content-center gap-[1rem]",style:{"grid-template-columns":"repeat(2, auto)"}},jt={class:"-m-[12px]"},Dt=["onClick"],Rt=["onClick"],Pt={class:"mt-[1.6rem] bg-[rgba(255,255,255,var(--bg-opacity))] rounded-[1.6rem]"},Vt=$(l({__name:"index",setup(e){const{mainHeight:t}=Y(),{refs:{orchestrationData:a}}=B(),l=s(()=>a.value.currentCompose);return n(()=>l.value.path,()=>{qe(),Ie()}),n(()=>a.value.refreshItem,e=>{qe(),Ie()}),n(()=>de.value,e=>{e&&(de.value=!1,Pe("start",!1))}),r(()=>{xe.value="",ke.value=[],we.con=!1,we.log=!1,be.value="容器日志",Ce.value=!1,je.value="暂无日志信息"}),(e,a)=>{const l=I,s=E,n=M,o=O,r=b,k=A,C=R,j=D,P=ce,q=Z,H=c("bt-loading");return u(),i("div",ft,[m("div",{class:"mt-[1.6rem] bg-[rgba(255,255,255,var(--bg-opacity))] rounded-[1.6rem]",style:_("height: calc(100% - ".concat(p(t)>800?410:255,"px)"))},[a[3]||(a[3]=m("div",{class:"card-title"},"容器列表",-1)),g((u(),i("div",gt,[(u(!0),i(y,null,x(p(ke),e=>(u(),i("div",{class:"card-item con-item w-full !rounded-0",key:e.ID},[m("div",_t,[m("div",yt,[m("div",{class:"flex items-center",style:{width:"calc(100% - 160px)"},title:e.Name},[m("span",{class:"inline-block truncate leading-normal cursor-pointer",style:{"max-width":"calc(100% - 60px)"},onClick:t=>p(le)({...e,id:e.ID,name:e.Name})},V(e.Name),9,kt),d(o,{placement:"bottom",onCommand:t=>p(Se)(t,e)},{dropdown:v(()=>[d(n,null,{default:v(()=>[(u(!0),i(y,null,x(p(De)(e.State),e=>(u(),T(s,{key:e.command,command:e.command},{default:v(()=>[h(V(e.text),1)]),_:2},1032,["command"]))),128))]),_:2},1024)]),default:v(()=>[d(l,{type:p(Re)(e.State).type,class:"status-tag w-[5rem] text-center ml-[.5rem]",title:""},{default:v(()=>[h(V(p(Re)(e.State).text),1)]),_:2},1032,["type"])]),_:2},1032,["onCommand"])],8,xt),m("div",wt,[d(k,{effect:"dark",content:"容器终端",placement:"top","open-delay":500},{default:v(()=>[d(r,{onClick:t=>p(se)({id:e.ID,status:e.State})},{default:v(()=>[...a[1]||(a[1]=[m("div",{class:"flex items-center"},[m("span",{class:"fileTerminal-icon"}),h("终端")],-1)])]),_:2},1032,["onClick"])]),_:2},1024),d(k,{effect:"dark",content:"容器日志",placement:"top","open-delay":500},{default:v(()=>[d(r,{type:"default",onClick:t=>p(Ve)(e),class:"ml-[1rem]"},{default:v(()=>[...a[2]||(a[2]=[m("div",{class:"flex items-center"},[m("span",{class:"record-icon"}),h("日志")],-1)])]),_:2},1032,["onClick"])]),_:2},1024)])]),m("div",{class:"text-[#ccc] w-[40%] truncate mt-[-.4rem]",title:e.ID},V(e.ID),9,bt)]),m("div",{class:w(["flex items-center justify-between mt-[1.2rem]",e.port.length>0?"mt-[1.6rem]":""])},[m("div",Ct,[(u(!0),i(y,null,x(e.port,e=>(u(),T(C,{key:e,disabled:!e.startsWith("0.0.0.0:"),trigger:"hover",placement:"bottom",width:"12.5rem","popper-class":"!min-w-[12.5rem]"},{reference:v(()=>[d(l,{type:"info",class:w({"cursor-pointer":e.startsWith("0.0.0.0:")}),onClick:t=>p(_e)(e,"http")},{default:v(()=>[h(V(e),1)]),_:2},1032,["class","onClick"])]),default:v(()=>[m("div",jt,[m("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-[#f5f5f5]",onClick:t=>p(_e)(e,"http")}," HTTP协议访问 ",8,Dt),m("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-[#f5f5f5]",onClick:t=>p(_e)(e,"https")}," HTTPS协议访问 ",8,Rt)])]),_:2},1032,["disabled"]))),128))])],2)]))),128)),0!==p(ke).length||p(we).con?S("",!0):(u(),T(j,{key:0,style:{height:"calc(100% - 50px)"},description:"暂无容器"}))])),[[H,p(we).con],[H,"正在获取容器列表","title"]])],4),m("div",Pt,[a[4]||(a[4]=m("div",{class:"card-title"},"编排日志",-1)),g((u(),i("div",{class:"card-item !p-[.8rem] h-full",style:_({height:p(t)>800?"33rem":"18rem"})},[d(P,{title:"全屏查看-编排日志",content:p(xe),isHtml:!0,fullScreen:{title:"全屏查看-编排日志",onRefresh:p(Ie)},class:"h-full font-[PingFang SC]"},null,8,["content","fullScreen"])],4)),[[H,p(we).log],[H,"正在获取编排日志","title"]])]),d(q,{title:p(be),area:[60,40],modelValue:p(Ce),"onUpdate:modelValue":a[0]||(a[0]=e=>f(Ce)?Ce.value=e:null),"append-to-body":!0},{default:v(()=>[d(P,{title:"全屏查看-日志",content:p(je),isHtml:!0,isRefreshBtn:!1,class:"h-[40rem] font-[PingFang SC]"},null,8,["content"])]),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-fd1f5017"]]),{refs:{orchestrationData:St}}=B(),qt=e(""),It=e(""),Tt={config:"",env:""},Et=e(0),Mt={mode:"ace/mode/yaml",theme:"ace/theme/chrome"},Ot=e=>{ee("Path",e.path),window.location.href=window.location.origin+"/files"},At=async e=>{try{const t={mod_name:"docker",sub_mod_name:"com",def_name:"get_config",path:St.value.currentCompose.path,ws_callback:"get_config"},a=await me.value.socketRequest({params:t});a.status?(Tt.config=Q(a.data.config,"string",""),Tt.env=Q(a.data.env,"string",""),qt.value=Tt.config,It.value=Tt.env):F.error(a.msg),setTimeout(()=>{Et.value=e.value.offsetWidth-20},100)}catch(t){}},Ht=async()=>{try{await K({title:"保存文件",width:"35rem",icon:"warning-filled",content:"即将保存文件，保存后将重启容器编排，是否继续？"});const e={mod_name:"docker",sub_mod_name:"com",def_name:"save_config",config:qt.value,env:It.value,path:St.value.currentCompose.path,ws_callback:"save_config"},t=await me.value.socketRequest({params:e});t.status?(de.value=!0,Tt.config=qt.value,Tt.env=It.value):F.request(t)}catch(e){Lt()}},Lt=()=>{qt.value=Tt.config,It.value=Tt.env},Ut={style:{height:"calc(100% - 20px)"}},Bt={class:"px-[1.6rem] pb-[1.6rem] h-full"},Nt={class:"text-[1.4rem] mt-[.8rem] mb-[1.2rem] !pt-0 flex items-center truncate"},Wt=["title"],Ft={style:{height:"calc(100% - 75px)"}},Kt={class:"flex items-center justify-end mt-[1.6rem]"},Qt=$(l({__name:"index",setup(t){const{mainHeight:a}=Y(),{refs:{orchestrationData:l}}=B(),o=e(null),c=e(null),g=e(null),y=s(()=>l.value.currentCompose);return n(()=>y.value.path,()=>{At(g)}),n(()=>l.value.refreshItem,e=>{At(g)}),r(()=>{qt.value="",It.value="",Tt.config="",Tt.env=""}),(e,t)=>{const l=ue,s=b;return u(),i("div",Ut,[m("div",{ref_key:"editorRef",ref:g,class:"bg-[rgba(255,255,255,var(--bg-opacity))] rounded-[1.6rem] mt-[1.6rem] h-full"},[t[6]||(t[6]=m("div",{class:"card-title"},"配置文件",-1)),m("div",Bt,[m("div",Nt,[t[3]||(t[3]=h(" docker-compose文件内容 ",-1)),m("span",{class:"ml-[1rem] path",title:p(y).path,onClick:t[0]||(t[0]=e=>p(Ot)({path:p(y).path}))},"跳转目录",8,Wt)]),m("div",Ft,[d(l,{ref_key:"yamlRef",ref:o,style:_(" height: calc(100% - ".concat(p(a)>800?336:244,"px)")),class:"compose-editor",modelValue:p(qt),"onUpdate:modelValue":t[1]||(t[1]=e=>f(qt)?qt.value=e:null),autoSave:!1,request:{},editorOption:p(Mt),onSave:p(Ht)},null,8,["style","modelValue","editorOption","onSave"]),t[5]||(t[5]=m("div",{class:"my-[1rem] text-[1.4rem]"},".env",-1)),d(l,{ref_key:"envRef",ref:c,style:_({height:p(a)>800?"200px":"100px"}),modelValue:p(It),"onUpdate:modelValue":t[2]||(t[2]=e=>f(It)?It.value=e:null),autoSave:!1,request:{},editorOption:p(Mt),onSave:p(Ht)},null,8,["style","modelValue","editorOption","onSave"]),m("div",Kt,[d(s,{type:"primary",onClick:p(Ht)},{default:v(()=>[...t[4]||(t[4]=[h("保存",-1)])]),_:1},8,["onClick"])])])])],512)])}}}),[["__scopeId","data-v-ea1461b6"]]),zt={class:"relative h-full"},Jt={class:"p-[1.6rem] compose-menu !mt-[0rem] rounded-[1.6rem] bg-[rgba(255,255,255,var(--bg-opacity))]"},Gt={class:"flex items-center justify-between"},Xt={class:"flex items-center"},Yt={class:"text-[1.8rem] whitespace-nowrap"},$t={class:"flex justify-center mt-[1.6rem] gap-[1rem] items-center text-[1.2rem] text-[#909399]"},Zt={class:"whitespace-nowrap"},ea={class:"whitespace-nowrap"},ta={class:"flex items-center ml-[5rem]"},aa=$(l({__name:"index",setup(e){const{mainHeight:t,mainWidth:a}=Y(),{refs:{orchestrationData:l}}=B(),n=s(()=>l.value.currentCompose);return ge(),ie.value.currentCompose.path="",ie.value.currentCompose.name="",ie.value.loading=!0,r(()=>{var e;ie.value.currentCompose.path="",null==(e=me.value)||e.socketDestroy(),de.value=!1,me.value=null}),(e,s)=>{const o=H,r=b,f=L,y=ae,x=U,w=D,C=c("bt-loading");return u(),i("div",{class:"relative container-table-tab !bg-transparent",style:_({height:"".concat(p(t)-170,"px")})},[m("div",zt,[d(x,{gutter:20,class:"!mx-0"},{default:v(()=>[d(o,{xs:24,sm:8,md:8,lg:5,xl:4,class:"!pl-0"},{default:v(()=>[d(ht)]),_:1}),g((u(),T(o,{xs:24,sm:16,md:16,lg:19,xl:20,class:"!pl-0 !pr-0",style:_({height:"".concat(p(t)-80,"px"),overflowY:p(a)<984?"auto":"hidden",overflowX:"hidden",borderRadius:"1.6rem"})},{default:v(()=>{var e,a,l,c;return[m("div",Jt,[m("div",Gt,[m("div",Xt,[m("span",Yt,[m("span",null,V(null==(e=p(n))?void 0:e.name),1),m("span",$t,[m("span",Zt,"创建时间："+V((null==(a=p(n))?void 0:a.time)?p(te)(null==(l=p(n))?void 0:l.time):"--"),1),m("span",ea,"容量数量："+V(null==(c=p(n))?void 0:c.container_count),1)])]),m("div",ta,[d(f,null,{default:v(()=>["danger"===p(pe)(p(n).run_status).type?(u(),T(r,{key:0,type:"default",onClick:s[0]||(s[0]=e=>p(Pe)("start"))},{default:v(()=>[...s[7]||(s[7]=[h("启动",-1)])]),_:1})):S("",!0),"danger"!==p(pe)(p(n).run_status).type?(u(),T(r,{key:1,type:"default",onClick:s[1]||(s[1]=e=>p(Pe)("stop"))},{default:v(()=>[...s[8]||(s[8]=[h("停止",-1)])]),_:1})):S("",!0),"danger"!==p(pe)(p(n).run_status).type?(u(),T(r,{key:2,type:"default",onClick:s[2]||(s[2]=e=>p(Pe)("restart"))},{default:v(()=>[...s[9]||(s[9]=[h("重启",-1)])]),_:1})):S("",!0),d(r,{type:"default",onClick:s[3]||(s[3]=e=>p(Pe)("update"))},{default:v(()=>[...s[10]||(s[10]=[h("更新镜像",-1)])]),_:1}),d(r,{type:"default",onClick:s[4]||(s[4]=e=>p(Pe)("rebuild"))},{default:v(()=>[...s[11]||(s[11]=[h("重建",-1)])]),_:1}),d(r,{class:"!hover:bg-danger !hover:text-white !hover:border-danger",type:"default",onClick:s[5]||(s[5]=e=>p(Pe)("delete"))},{default:v(()=>[...s[12]||(s[12]=[h("删除",-1)])]),_:1})]),_:1}),d(y,{class:"ml-[1.6rem]",onClick:p(ne)},{default:v(()=>[...s[13]||(s[13]=[h("需求反馈",-1)])]),_:1},8,["onClick"])])])])]),d(x,{gutter:20,style:_({height:"".concat(p(t)-178,"px")})},{default:v(()=>[d(o,{xs:24,sm:24,md:24,lg:14,xl:16,style:{height:"100%"}},{default:v(()=>[d(Vt)]),_:1}),d(o,{xs:24,sm:24,md:24,lg:10,xl:8,style:{height:"100%"},class:"lt-xl:pt-[1.6rem] !pl-0"},{default:v(()=>[d(Qt)]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[k,!p(ve)||p(l).loading],[C,p(l).loading],[C,"正在获取数据","title"]]),g(d(o,{class:"bg-[rgba(255,255,255,var(--bg-opacity))] overflow-hidden rounded-[1.6rem]",xs:24,sm:16,md:16,lg:19,xl:18},{default:v(()=>[d(w,{style:_({height:"".concat(p(t)-120,"px"),borderRadius:"1.6rem"}),description:"当前暂无容器编排"},{default:v(()=>[m("span",{class:"cursor-pointer text-primary hover:text-[#1d9534]",onClick:s[6]||(s[6]=e=>p(he)(p(fe)))},"点击添加容器编排")]),_:1},8,["style"])]),_:1},512),[[k,p(ve)&&!p(l).loading]])]),_:1})])],4)}}}),[["__scopeId","data-v-37b310e3"]]);export{aa as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
