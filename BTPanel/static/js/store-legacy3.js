!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function i(e,a,u,o){var i=a&&a.prototype instanceof c?a:c,l=Object.create(i.prototype);return n(l,"_invoke",function(e,n,a){var u,o,i,c=0,l=a||[],f=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return u=e,o=0,i=t,v.n=n,s}};function p(e,n){for(o=e,i=n,r=0;!f&&c&&!a&&r<l.length;r++){var a,u=l[r],p=v.p,d=u[2];e>3?(a=d===n)&&(i=u[(o=u[4])?5:(o=3,3)],u[4]=u[5]=t):u[0]<=p&&((a=e<2&&p<u[1])?(o=0,v.v=n,v.n=u[1]):p<d&&(a=e<3||u[0]>n||n>d)&&(u[4]=e,u[5]=n,v.n=d,o=0))}if(a||e>1)return s;throw f=!0,n}return function(a,l,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),o=l,i=d;(r=o<2?t:i)||!f;){u||(o?o<3?(o>1&&(v.n=-1),p(o,i)):v.n=i:v.v=i);try{if(c=2,u){if(o||(a="next"),r=u[a]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,o<2&&(o=0)}else 1===o&&(r=u.return)&&r.call(u),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);u=t}else if((r=(f=v.n<0)?i:e.call(n,v))!==s)break}catch(r){u=t,o=1,i=r}finally{c=1}}return{value:r,done:f}}}(e,u,o),!0),l}var s={};function c(){}function l(){}function f(){}r=Object.getPrototypeOf;var v=[][u]?r(r([][u]())):(n(r={},u,function(){return this}),r),p=f.prototype=c.prototype=Object.create(v);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=f,n(p,"constructor",f),n(f,"constructor",l),l.displayName="GeneratorFunction",n(f,o,"GeneratorFunction"),n(p),n(p,o,"Generator"),n(p,u,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:d}})()}function n(e,t,r,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}n=function(e,t,r,a){function o(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?u?u(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},n(e,t,r,a)}function t(e,n,t,r,a,u,o){try{var i=e[u](o),s=i.value}catch(e){return void t(e)}i.done?n(s):Promise.resolve(s).then(r,a)}function r(e){return function(){var n=this,r=arguments;return new Promise(function(a,u){var o=e.apply(n,r);function i(e){t(o,a,u,i,s,"next",e)}function s(e){t(o,a,u,i,s,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1756369731","./base-lib-legacy.js?v=1756369731","./store-legacy4.js?v=1756369731","./validator-legacy.js?v=1756369731"],function(n,t){"use strict";var a,u,o,i,s,c,l,f,v,p,d,m,g,h,y,w,b,S,k,_,T,x,j,P,O,q,I,U,L,R,E,H,C,M,V,D,G,N,B;return{setters:[function(e){a=e.u,u=e.K,o=e.cM,i=e.o,s=e.R,c=e.l,l=e.L,f=e.M,v=e.r,p=e.cB,d=e.cJ,m=e.cN,g=e.cO,h=e.cP,y=e.bb,w=e.cH,b=e.cI,S=e.at,k=e.Z,_=e.ai,T=e.cC,x=e.Q,j=e.bz,P=e.cQ,O=e.cR,q=e.cS,I=e.cT,U=e.cU,L=e.cV},function(e){R=e.j,E=e.t,H=e.s,C=e.r,M=e.ay,V=e.k},function(e){D=e.H},function(e){G=e.u,N=e.p,B=e.v}],execute:function(){n("H",R("HOME-HEADER-STORE",function(){var n,R=a(),F=R.panelVersion,$=R.payment,A=R.updatePush,J=R.panel,Q=R.push,z=R.plugin,K=R.getUpdatePushInfo,Z=R.getOldSenderAlarmListInfo,W=E($.value),X=W.bindUser,Y=W.authType,ee=W.authExpirationTime,ne=D(),te=H(ne),re=te.panelInfo,ae=te.systemInfo,ue=E(re.value),oe=ue.upgrade,ie=ue.currentInfo,se=function(){var n=r(e().m(function n(){return e().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,G();case 1:if(!n.v){n.n=2;break}return n.a(2,null);case 2:return n.n=3,u({loading:"正在获取数据，请稍后...",request:o(),success:function(){var n=r(e().m(function n(r){var a;return e().w(function(e){for(;;)switch(e.n){case 0:if(1!==(a=r.data).upgrade){e.n=2;break}return e.n=1,i({title:"修复面板",content:'<div class="flex items-center">\n              <div class="mr-1rem w-[4rem]"><img width="40" src="/static/icons/icon-upgrade.svg"></img></div>\n              <div class="flex-1">\n                <div class="text-[1.6rem] leading-2.4rem">发现新版本，继续修复面板能修复使用中遇到的各种异常问题</div>\n              </div>\n            </div>\n            <div class="pl-5rem mt-[4px]">\n              <div>最新版本：'.concat(a.cloud.version,"</div>\n              <div>更新时间：").concat(s(1e3*a.cloud.update_time),"</div>\n            </div>"),icon:!1,width:"40rem",isHtml:!0,confirmText:"继续修复"});case 1:u({loading:"正在修复面板，请稍后...",request:o({force:1}),message:!0,success:function(e){localStorage.clear(),sessionStorage.clear(),e.status&&setTimeout(function(){c({title:"正在".concat("repair"===a.type?"修复":"更新","面板，请耐心等候..."),area:70,compData:{type:"repair"},component:function(){return l(function(){return t.import("./index-legacy23.js?v=1756369731")},void 0,t.meta.url)}})},1500)}}),e.n=3;break;case 2:f.msg({message:'<div style="line-height:22px;">\n              <div>当前已是最新版本</div>\n              <div>当前版本：'.concat(a.local.version,"</div>\n              <div>更新时间：").concat(s(1e3*a.local.update_time),"</div>\n            </div>"),type:"success",dangerouslyUseHTMLString:!0});case 3:return e.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()});case 3:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),ce=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)if(0===e.n)return e.a(2,c({title:"历史版本",area:[60,52],component:function(){return l(function(){return t.import("./index-legacy319.js?v=1756369731")},void 0,t.meta.url)}}))},n)}));return function(){return n.apply(this,arguments)}}(),le=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,G();case 1:if(!e.v){e.n=2;break}return e.a(2,null);case 2:return e.a(2,c({title:"重启服务器或者面板",area:[33,11],component:function(){return l(function(){return t.import("./index-legacy155.js?v=1756369731")},void 0,t.meta.url)}}))}},n)}));return function(){return n.apply(this,arguments)}}(),fe=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,G();case 1:if(!e.v){e.n=2;break}return e.a(2,null);case 2:return e.a(2,c({area:50,component:function(){return l(function(){return t.import("./index-legacy320.js?v=1756369731")},void 0,t.meta.url)}}))}},n)}));return function(){return n.apply(this,arguments)}}(),ve=C([["plunge","30+款付费插件"],["function","20+企业版专享功能"],["certificate","2张SSL商用证书"],["message","1000条免费短信"],["time","5分钟极速响应"],["other","更多特权>>"]]),pe=C([["plugin","30+款付费插件"],["more","20+企业版专享功能"],["recom","2张SSL商用证书"],["message","1000条免费短信"],["speed","5分钟极速响应"],["other","更多特权>>"]]),de=J.value.isDebug,me=E(re.value),ge=me.isBeta,he=me.cloudBeta,ye=me.isUpgrade,we=me.grayscale,be=C(!1),Se=C(!1),ke=C(""),_e=C(!1),Te=C(null),xe=C({}),je=C({}),Pe=C({phone:"",status:!1}),Oe=C({phone:[{validator:function(e,n,t){Pe.value.status?/^1[3456789]\d{9}$/.test(n)||/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(n)?t():t(new Error("请输入正确的手机号码或邮箱")):t()}}],give:[{required:!0,validator:function(e,n,t){0===n.length?t(new Error("请选择至少一种告警方式")):t()},trigger:["blur","change"]}]}),qe=M("popupClose",function(){}),Ie=function(e){return/^1[3456789]\d{9}$/.test(e)?"phone":/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e)?"email":"unknown"},Ue=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:A.value.updatePush?Ce(!A.value.updatePush):u({loading:"正在设置更新提醒，请稍后...",request:p({task_id:A.value.updateTaskId,status:0}),message:!0});case 1:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Le=function(){var n=r(e().m(function n(t){var r,a,u,o,s;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=t?"升级Linux测试版":"切换到正式版",u=t?"请仔细阅读内测升级须知，是否升级Linux测试版？":"是否从测试版切换到正式版？",e.n=1,i({type:"calc",title:a,content:u});case 1:if(r=f.load("正在".concat(a,"，请稍候...")),localStorage.clear(),sessionStorage.clear(),!de){e.n=3;break}return e.n=2,g();case 2:Se.value=!0;case 3:if(!t){e.n=5;break}return e.n=4,U();case 4:s=e.v,e.n=7;break;case 5:return e.n=6,L();case 6:s=e.v;case 7:if((o=s).status){e.n=8;break}return e.a(2,f.request(o));case 8:e.n=10;break;case 9:return e.p=9,e.v,e.a(2,!1);case 10:return e.p=10,qe(),localStorage.clear(),sessionStorage.clear(),e.f(10);case 11:return e.a(2,r)}},n,null,[[0,9,10,11]])}));return function(e){return n.apply(this,arguments)}}(),Re=function(){var n=r(e().m(function n(r){var a,o;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"boolean"!=typeof r){e.n=4;break}return e.n=1,i({title:"升级面板",content:"温馨提示：升级面板，有助于面板的BUG修复和功能加强，但不会影响用户的数据，即使面板发生故障，用户数据也不会受到影响。请您放心进行升级。"});case 1:return e.n=2,Le(r);case 2:if(a=e.v){e.n=3;break}return e.a(2);case 3:e.n=7;break;case 4:if(0===oe.value){e.n=6;break}return e.n=5,i({title:"升级面板",content:'<div class="flex items-center">\n            <div class="mr-1rem w-[4rem]"><img width="40" src="/static/icons/icon-upgrade.svg"></img></div>\n              <div class="flex-1">\n                <div class="text-[1.6rem] leading-2.4rem">升级面板可以修复大部分已知BUG，同时安装最新的功能，用户数据也不会受到影响</div>\n              </div>\n            </div>\n            <div class="pl-5rem mt-[4px]">\n              <div>即将更新到：'.concat(ie.value.version,"</div>\n              <div>更新时间：").concat(s(1e3*ie.value.update_time),"</div>\n            </div>"),icon:!1,width:"40rem",isHtml:!0,confirmText:"继续升级"});case 5:return u({loading:"正在升级面板，请稍后...",request:d({force:!0,version:ie.value.version}),message:!0,success:function(e){localStorage.clear(),sessionStorage.clear(),e.status&&setTimeout(function(){c({title:"正在更新面板，请耐心等候...",area:70,compData:{type:"upgrade"},component:function(){return l(function(){return t.import("./index-legacy23.js?v=1756369731")},void 0,t.meta.url)}})},1500)}}),e.a(2);case 6:return f.msg({message:'<div style="line-height:22px;">\n              <div>当前已是最新版本</div>\n              <div>当前版本：'.concat(ie.value.version,"</div>\n              <div>更新时间：").concat(s(1e3*ie.value.update_time),"</div>\n            </div>"),type:"success",dangerouslyUseHTMLString:!0}),e.a(2);case 7:return e.n=8,He({check:!0});case 8:return e.n=9,m({toUpdate:"yes"});case 9:if(o=e.v,!Se.value){e.n=11;break}return e.n=10,g();case 10:Se.value=!1;case 11:o.status?(f.success({msg:o.msg,onClose:function(){return window.location.reload()}}),setTimeout(function(){window.location.reload()},2e3)):f.error(o.msg),e.n=13;break;case 12:e.p=12,e.v,a&&a.close();case 13:return e.p=13,a&&a.close(),qe(),localStorage.clear(),sessionStorage.clear(),e.f(13);case 14:return e.a(2)}},n,null,[[0,12,13,14]])}));return function(e){return n.apply(this,arguments)}}(),Ee=function(){var n=r(e().m(function n(t){return e().w(function(n){for(;;)switch(n.n){case 0:if(""!==ke.value){n.n=1;break}throw f.error("还有必填项没有填写哦~"),new Error("还有必填项没有填写哦~");case 1:Te.value.validate(function(){var n=r(e().m(function n(r){var a,o;return e().w(function(e){for(;;)switch(e.n){case 0:r&&(a=Ie(Pe.value.phone),o={questions:JSON.stringify({22:ke.value}),product_type:18,software_name:1,rate:0},Pe.value.status&&(o.feedback=JSON.stringify("phone"===a?{phone:Pe.value.phone}:{email:Pe.value.phone})),u({loading:"正在提交问卷，请稍后...",request:y(o),success:function(e){e.status&&(B(),t())}}));case 1:return e.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}());case 2:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),He=function(){var n=r(e().m(function n(){var t,r,a,u,o,i,s,c,l,f,v,p,d,m,g,h=arguments;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.p=1,e.n=2,w(t);case 2:return r=e.v,a=r.data,u=window.vite_public_version,o=null==u?void 0:u.split(".").pop(),i=Number.parseInt(o).toString()===o&&2===o.length,s=a.msg,c=s.is_beta,l=s.version,f=s.beta,v=s.downUrl,p=s.updateMsg,d=s.uptime,m=s.grayscale_test,he.value=c,ge.value=i,xe.value=f,je.value={downUrl:v,updateMsg:p,version:l,uptime:d},we.value=m,a.status&&(ye.value=b(F.value,ge.value?f.version:l)),e.a(2,a);case 3:return e.p=3,g=e.v,S(g),e.a(2,!1)}},n,null,[[1,3]])}));return function(){return n.apply(this,arguments)}}(),Ce=function(){var n=r(e().m(function n(r){return e().w(function(e){for(;;)switch(e.n){case 0:Ve.value=r||!1,Be.value.switch=!0,c({title:"更新提示",area:50,btn:!0,component:function(){return l(function(){return t.import("./alarm-legacy.js?v=1756369731")},void 0,t.meta.url)}});case 1:return e.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),Me=function(){var n=r(e().m(function n(){var t,r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,be.value=!0,e.n=1,He({check:!0});case 1:if(t=e.v,!k(t)){e.n=2;break}return e.a(2);case 2:!t.status&&_(t.msg)&&(qe(),f.error(t.msg)),e.n=4;break;case 3:e.p=3,r=e.v,S(r);case 4:return e.p=4,be.value=!1,e.f(4);case 5:return e.a(2)}},n,null,[[0,3,4,5]])}));return function(){return n.apply(this,arguments)}}(),Ve=C(!1),De=C(),Ge=C(),Ne=C(!1),Be=C({switch:A.value.updatePush,give:[""],option:{}}),Fe=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return Ne.value=!0,e.n=1,Z();case 1:Ne.value=!1,Be.value.give=A.value.modulePush,Be.value.option=Q.value.config;case 2:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),$e=C(!0),Ae=C(!1),Je=C(),Qe=C([]),ze=V({webServe:!1,mysqlServe:!1,restartServe:!1,serveStart:!1}),Ke=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i({icon:"warning-filled",title:"重启面板",content:"即将重启面板服务，继续吗？"});case 1:u({loading:"正在重启面板，请稍候...",request:x(),message:!0,success:function(e){e.status&&setTimeout(function(){localStorage.clear(),sessionStorage.clear(),window.location.reload()},1e3)}});case 2:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Ze=function(){var n=r(e().m(function n(){var t,r,a,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,re.value.isRestart=!0,Qe.value.splice(0,Qe.value.length),$e.value=!1,(r=null===(t=Je.value)||void 0===t?void 0:t.$el)&&(a=r.querySelector(".el-dialog__footer"),r.querySelector(".el-dialog__body").style.height="48rem",a&&(a.style.display="none")),ze.webServe=!0,e.n=1,j({name:z.value.webserver,type:"stop"});case 1:return ze.mysqlServe=!0,e.n=2,j({name:"mysqld",type:"stop"});case 2:return ze.restartServe=!0,e.n=3,P();case 3:ze.serveStart=!0,We(),e.n=5;break;case 4:e.p=4,u=e.v,S(u);case 5:return e.a(2)}},n,null,[[0,4]])}));return function(){return n.apply(this,arguments)}}(),We=function(){n=setInterval(r(e().m(function t(){var r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,O();case 1:(r=e.v)&&(r.hasOwnProperty("status")||void 0!==r.code)&&(f.success("服务器重启成功!"),setTimeout(function(){localStorage.clear(),sessionStorage.clear(),window.location.reload()},2e3),clearInterval(n)),e.n=3;break;case 2:e.p=2,a=e.v,S(a);case 3:return e.a(2)}},t,null,[[0,2]])})),3e3)},Xe=C(""),Ye=function(){var t=r(e().m(function t(){var r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n&&clearTimeout(n),e.n=1,q();case 1:r=e.v,(a=r.data).status||_(a.data)?(Xe.value=_(a.data)?a.data:a.msg||"暂无日志",_(a.data)?(f.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:a.msg+"".concat(a.status?"<br>请按 Ctrl+F5 刷新缓存，或等待5s自动刷新！":""),type:a.status?"success":"error",showClose:!a.status,duration:a.status?5e3:0}),a.status&&setTimeout(function(){localStorage.clear(),sessionStorage.clear(),window.location.reload()},5e3)):n=setTimeout(function(){Ye()},2e3)):f.error(a.msg),e.n=3;break;case 2:e.p=2,e.v,n&&clearTimeout(n),n=setTimeout(function(){Ye()},2e3);case 3:return e.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),en=C(!1),nn=C([]),tn=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,u({loading:en,request:I(),data:[Array,nn]});case 1:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}();return{bindUser:X,authType:Y,authExpirationTime:ee,systemInfo:ae,panelInfo:re,panelVersion:F,formPhone:Te,jumpRouter:function(e){v.push({path:"/config/".concat(e)})},histVersionInfoDialog:ce,onRepair:se,restartSeverDialog:le,updateVersionDialog:fe,advantageList:ve,productPayment:function(){N({disablePro:!0,sourceId:300})},loading:be,isUpgrade:ye,grayscale:we,isBeta:ge,betaInfo:xe,officialInfo:je,update:A,isNPSShow:_e,questions:ke,form:Pe,rules:Oe,onOpen:Me,submit:Ee,ignoreUpdatEVersion:function(e,n){u({loading:"正在忽略本次更新，请稍后...",request:h({version:e}),message:!0,success:function(e){e.status&&n()}})},getUpdatePushInfo:K,openUpdateReminder:Ue,updateReminderDialog:Ce,updateVersion:Re,alarmRef:De,pushMsgRef:Ge,msgForm:Be,checkedLoad:Ne,renderPushConfig:Fe,refreshAlarmEvent:function(){var e;null===(e=De.value)||void 0===e||e.refresh(),f.success("刷新成功")},onCancel:function(){A.value.updatePush=Ve.value},onConfirm:function(n){Ge.value.validate(function(){var t=r(e().m(function t(r){var a;return e().w(function(e){for(;;)switch(e.n){case 0:r&&(a={task_data:JSON.stringify({task_data:{tid:"10",type:"panel_update",title:"面板更新提醒",status:Be.value.switch,count:0,interval:600,project:""},status:Be.value.switch,sender:Be.value.give,number_rule:{day_num:0,total:2},time_rule:{send_interval:0,time_range:[0,86399]}}),template_id:"10"},u({loading:"正在提交更新提示，请稍后...",request:T(a),message:!0,success:function(e){n(),K()}}));case 1:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},showFooter:$e,showServer:Ae,serverRestartRef:Je,tipsList:Qe,courseList:ze,clearRestart:function(){n&&clearInterval(n)},onRestartServer:Ze,onRestartPanel:Ke,logContent:Xe,getLog:Ye,hisLoading:en,histVersion:nn,getHistoryVersion:tn,$reset:function(){_e.value=!1,ke.value="",Pe.value={phone:"",status:!1}},v2AdvantageList:pe}}))}}})}();
