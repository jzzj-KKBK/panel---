import{u as e,a6 as l,a7 as a,cX as s,cZ as t,ag as o,d3 as n,J as r,al as i,e as m,a8 as u}from"./utils-lib.js?v=1756369731";import{c as p,g as c,p as d,q as f,v as h,x as v,M as y,A as x,y as b,e as g,P as k,C as _,B as C,s as w,F as V,a_ as j,K as B,D as T,aA as S,aj as q,ai as P}from"./base-lib.js?v=1756369731";import{_ as R}from"./index123.js?v=1756369731";import{r as L,i as M,b as U,f as A,p as D,e as H,g as F,h as O,j as W,k as z,s as E,l as I,m as J,n as K,o as N,T as X,q as Z,v as G,w as Q,x as Y,y as $,z as ee,A as le,B as ae}from"./useController8.js?v=1756369731";import{_ as se}from"./index117.js?v=1756369731";import{_ as te}from"./index103.js?v=1756369731";import{_ as oe}from"./index116.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./useStore6.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";import"./useStore7.js?v=1756369731";import"./validator.js?v=1756369731";const ne={class:"flex items-center"},re={class:"flex items-center"},ie={class:"mr-1rem"},me={class:"mr-1rem"},ue={class:"flex items-center mr-1rem"},pe=p({__name:"index",setup(n){const{payment:r}=e(),i=s({options:[{label:"登录日志",value:"login"},{label:"操作日志",value:"action"}],key:"ftpType"}),m=t({options:[{label:"全部",value:"all"},{label:"上传",value:"upload"},{label:"下载",value:"download"},{label:"删除",value:"delete"},{label:"重命名",value:"rename"}],key:"type",other:{style:"width: 10rem"}}),{BtTable:u,BtSearch:p,BtPage:w,BtRefresh:V,BtRadioButton:j,BtTableSelect:B,refresh:T,param:S}=l({request:L,columns:c(()=>"login"===S.value.ftpType?[{label:"用户名",prop:"user"},{label:"登录ip",prop:"ip"},{label:"状态",prop:"status"},{label:"登陆时间",prop:"in_time"},{label:"登出时间",prop:"out_time"}]:[{label:"操作ip",prop:"ip"},{label:"文件",prop:"file"},{label:"操作类型",prop:"type"},{label:"操作时间",prop:"time"}]),extension:[i,m,a(H)]});return d(()=>{M.value=!0}),(e,l)=>{const a=o,s=te,t=se;return f(),h("div",null,["ltd"===v(r).authType?(f(),y(s,{key:0},{"header-left":x(()=>[b("div",ne,[l[1]||(l[1]=b("span",{class:"!w-[6.8rem]"},"ftp用户名：",-1)),g(a,{filterable:"",onChange:v(T),class:"!w-[16rem] lt-xl:w-[12rem]",modelValue:v(U),"onUpdate:modelValue":l[0]||(l[0]=e=>k(U)?U.value=e:null),options:v(A)},null,8,["onChange","modelValue","options"])])]),"header-right":x(()=>[b("div",re,[b("div",ie,["action"===v(S).ftpType?(f(),y(v(B),{key:0})):_("",!0)]),b("div",me,[g(v(p),{placeholder:"请输入搜索关键字",class:"!lt-xl:w-[14rem] !at-xl:w-[14rem]"})]),b("div",ue,[l[2]||(l[2]=C(" 日志类型： ",-1)),g(v(j))]),g(v(V))])]),content:x(()=>["login"===v(S).ftpType?(f(),y(v(u),{key:0})):(f(),y(v(u),{key:1}))]),"footer-right":x(()=>[g(v(w))]),_:1})):(f(),y(t,{key:1,data:v(D),class:"px-[20%] my-[8rem]"},null,8,["data"]))])}}}),ce={class:"flex items-center mb-[12px] justify-between flex-1 flex-wrap"},de={class:"flex items-center"},fe={key:0,class:"flex items-center flex-nowrap"},he={class:"flex items-center"},ve=m(p({__name:"index",setup(l){const{mainHeight:a}=e(),s=F(),{mysqlActive:t,checkList:o}=w(s);return d(O),(e,l)=>{const s=T,m=n,u=r,p=R,c=S,d=i;return f(),y(d,{type:"bg-card",modelValue:v(t),"onUpdate:modelValue":l[6]||(l[6]=e=>k(t)?t.value=e:null),onTabClick:v(K)},{default:x(()=>[(f(!0),h(V,null,j(v(W),(e,n)=>(f(),y(c,{label:e.label,name:e.value,key:n},{default:x(()=>[b("div",ce,[b("div",de,[g(s,{class:"!mr-[8px]",onClick:v(z)},{default:x(()=>[...l[7]||(l[7]=[C(" 清空日志 ",-1)])]),_:1},8,["onClick"]),"mysqlError"===v(t)?(f(),h("div",fe,[l[8]||(l[8]=C(" 级别： ",-1)),g(m,{modelValue:v(o),"onUpdate:modelValue":l[0]||(l[0]=e=>k(o)?o.value=e:null),onChange:l[1]||(l[1]=e=>v(O)(v(E))),class:"mr-[12px] flex !flex-nowrap",options:v(I)},null,8,["modelValue","options"])])):_("",!0)]),b("div",he,[g(u,{class:"mr-1rem w-[26rem]",modelValue:v(E),"onUpdate:modelValue":l[2]||(l[2]=e=>k(E)?E.value=e:null),onSearch:l[3]||(l[3]=e=>v(O)(v(E))),onClear:l[4]||(l[4]=()=>E.value=""),placeholder:"请输入搜索关键字"},null,8,["modelValue"]),g(p,{onRefresh:l[5]||(l[5]=e=>v(O)(v(E)))})])]),g(oe,{content:v(J),isHtml:!0,autoScroll:!0,fullScreen:{title:"全屏查看-Mysql日志",onRefresh:()=>v(O)(v(E))},style:B("height:".concat(v(a)-246,"px"))},null,8,["content","fullScreen","style"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue","onTabClick"])}}}),[["__scopeId","data-v-4ccceb98"]]),ye={class:"flex items-center"},xe=p({__name:"index",setup(e){const a=F(),{refreshPlugin:s}=w(a),{getPluginLogData:t}=a,o=u(X),{BtTable:n,BtPage:r,BtSearch:i,BtRefresh:m,BtBatch:p,refresh:c}=l({request:async e=>{const{p:l,limit:a,search:s}=e;return t({p:l,ROWS:a,search:s})},columns:N.value,extension:[o]});return s.value=c,(e,l)=>{const a=te;return f(),h("div",null,[g(a,null,{"header-right":x(()=>[b("div",ye,[g(v(i),{class:"mr-1rem !lt-lg:w-[16rem]",placeholder:"请输入搜索关键字"}),g(v(m))])]),content:x(()=>[g(v(n))]),"footer-left":x(()=>[g(v(p))]),"footer-right":x(()=>[g(v(r))]),_:1})])}}}),be={class:"items-start flex"},ge={key:2,class:"flex items-center mr-8px"},ke={class:"flex items-center"},_e=p({__name:"index",setup(l){const{mainWidth:a}=e(),{getMenuList:s}=F(),{menuOptions:t,currentName:o,phpData:n,phpChecked:i,logsMsg:m,logPath:u}=w(F());return d(async()=>{await s(),t.value.length&&Z(t.value[0])}),(e,l)=>{const s=T,p=P,c=q,d=r;return f(),h("div",be,[g(ae,{logsType:"soft",onTabClick:v(le),"menu-options":v(t),logContent:v(m)},{LogView:x(()=>[v(G)?(f(),h("div",{key:0,style:B("width:".concat(v(a)-290,"px"))},["Mysql"===v(o)?(f(),y(ve,{key:0})):_("",!0),"FTP"===v(o)?(f(),y(pe,{key:1})):_("",!0),v(Q).includes(v(o))?(f(),y(xe,{key:2,path:v(u)},null,8,["path"])):_("",!0)],4)):_("",!0)]),LogLeft:x(()=>["Mysql"!=v(o)&&v(u)?(f(),y(s,{key:0,class:"!m-0",type:"default",onClick:v(Y)},{default:x(()=>[...l[4]||(l[4]=[C(" 导出日志 ",-1)])]),_:1},8,["onClick"])):_("",!0),"Mysql"!=v(o)?(f(),y(s,{key:1,class:"!m-0 !mx-[8px]",type:"default",onClick:v($)},{default:x(()=>[...l[5]||(l[5]=[C(" 清空日志 ",-1)])]),_:1},8,["onClick"])):_("",!0),"Php"===v(o)?(f(),h("div",ge,[l[6]||(l[6]=C(" php版本： ",-1)),g(c,{onChange:v(ee),modelValue:v(i),"onUpdate:modelValue":l[0]||(l[0]=e=>k(i)?i.value=e:null),class:"!w-[8rem] mr-[4px]"},{default:x(()=>[(f(!0),h(V,null,j(v(n),(e,l)=>(f(),y(p,{key:l,label:e.version,value:e.version},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])])):_("",!0)]),LogRight:x(()=>[b("div",ke,[g(d,{class:"!w-[26rem] mr-1rem",modelValue:v(E),"onUpdate:modelValue":l[1]||(l[1]=e=>k(E)?E.value=e:null),onSearch:l[2]||(l[2]=e=>v(Z)({name:v(o)},v(E))),placeholder:"请输入日志内容名称"},null,8,["modelValue"]),g(v(R),{onRefresh:l[3]||(l[3]=e=>v(Z)({name:v(o)},v(E)))})])]),_:1},8,["onTabClick","menu-options","logContent"])])}}});export{_e as default};
