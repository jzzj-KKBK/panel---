import{e,d as l,Z as a,M as t,R as n,o as s,K as i,bT as o,cj as c,ah as u,l as r,L as d,aq as m,at as f,u as p,p as v,v as h,b as k,ck as g,cl as x,c as y,ap as w,J as C}from"./utils-lib.js?v=1756369731";import{c as _,s as b,r as L,p as I,aD as R,q as T,M as E,A as S,x as N,v as A,e as F,B as z,C as B,F as V,n as j,w as M,y as D,a_ as O,H as P,I as U,J as K,aQ as q,Q as H,z as W,g as $,D as Y,ap as G,ao as J,an as X,b5 as Q,j as Z,k as ee,U as le,a$ as ae,ar as te,ax as ne,aG as se,a4 as ie,G as oe,P as ce,K as ue,O as re,bn as de,T as me,S as fe,av as pe,bo as ve,aN as he,bp as ke,bq as ge}from"./base-lib.js?v=1756369731";import{F as xe,c as ye,a as we,g as Ce,o as _e,b as be,M as Le,C as Ie,p as Re,S as Te,d as Ee,e as Se,f as Ne,h as Ae,i as Fe,j as ze,k as Be,l as Ve,s as je,m as Me,n as De,q as Oe,r as Pe,t as Ue,u as Ke,v as qe,w as He,x as We,y as $e,z as Ye,A as Ge,B as Je,D as Xe,E as Qe,G as Ze,H as el,I as ll,J as al,K as tl,L as nl,N as sl,O as il,P as ol,Q as cl,R as ul,T as rl,U as dl}from"./store.js?v=1756369731";import{p as ml,k as fl,l as pl,e as vl}from"./validator.js?v=1756369731";import{C as hl,a as kl,b as gl}from"./default.js?v=1756369731";import{_ as xl}from"./index104.js?v=1756369731";import{_ as yl}from"./index112.js?v=1756369731";import{s as wl}from"./vue-virtual-scroller.esm.js?v=1756369731";import"./vue-virtual-scroller.js?v=1756369731";import"./file-icon.js?v=1756369731";import{g as Cl,d as _l,a as bl,c as Ll,b as Il,C as Rl}from"./files.js?v=1756369731";import{c as Tl,a as El,u as Sl}from"./column.js?v=1756369731";const Nl=e(_({__name:"menu",setup(e,{expose:l}){const a=xe(),{fileTabList:t,closeTabs:n}=b(a),{closeOther:s,closeRight:i}=a,o=L(),c=()=>{o.value.visible=!1},u=e=>{o.value&&o.value.visible&&c()};return I(()=>{document.addEventListener("click",u)}),R(()=>{document.removeEventListener("click",u)}),l({show:e=>{o.value.visible=!0,j(()=>{ye(e,o.value.contextmenuRef)})},hide:c}),(e,l)=>(T(),E(N(kl),{ref_key:"contextmenu",ref:o},{default:S(()=>[N(t).length>1?(T(),A(V,{key:0},[F(N(hl),{onClick:N(s)},{default:S(()=>[...l[0]||(l[0]=[z("关闭其它",-1)])]),_:1},8,["onClick"]),N(n).index<N(t).length-1?(T(),E(N(hl),{key:0,onClick:N(i)},{default:S(()=>[...l[1]||(l[1]=[z("关闭右侧",-1)])]),_:1},8,["onClick"])):B("",!0)],64)):B("",!0)]),_:1},512))}}),[["__scopeId","data-v-6fadf655"]]),Al={class:"tabs-wrapper"},Fl={class:"tabs"},zl=["onContextmenu","onClick"],Bl={class:"flex items-center",style:{"margin-right":"20px"}},Vl={class:"file-name"},jl=["onClick"],Ml={class:"tabs-icon__scroll"},Dl={class:"tabs-icon__scroll"},Ol=e(_({__name:"index",setup(e,{expose:a}){const t=xe(),{fileTabActive:n,fileTabList:s,isAddTabs:i,disabledCutTab:o,scrollWidth:c,showLeftArrow:u,showRightArrow:r,contextRef:d}=b(t),{handleRightClick:m,watchWindowResize:f,watchScrollWidth:p,watchTabsWidth:v,cutTab:h,scrollLeft:k,scrollRight:g,closeTab:x}=t;return M(()=>c.value,e=>{p(e)}),M(()=>s.value.length,()=>{v()},{immediate:!0}),I(()=>{f(),j(()=>{c.value=0})}),a({watchWindowResize:f}),(e,a)=>{const t=l,c=q;return T(),A("div",Al,[D("div",Fl,[(T(!0),A(V,null,O(N(s),(e,l)=>(T(),E(c,{enterable:!1,"show-after":2e3,transition:"",key:e.id,content:e.param.path,placement:"bottom"},{default:S(()=>[D("div",{class:K(["tab-item",{on:N(n)===l,disabledTab:N(o)&&N(n)!==l}]),style:{position:"relative"},onContextmenu:H(a=>N(m)(a,e,l),["prevent"]),onClick:e=>N(h)(l)},[D("div",Bl,[F(t,{src:"/file/file-dir.svg",class:"w-[1.8rem]"}),D("div",Vl,W(e.label),1)]),D("div",{class:"close",slot:"reference",onClick:H(l=>N(x)(e,e.id),["stop"])},[...a[3]||(a[3]=[D("i",{class:"svgtofont-el-close"},null,-1)])],8,jl)],42,zl)]),_:2},1032,["content"]))),128)),F(c,{content:"点击添加新窗口",placement:"bottom","show-after":500},{default:S(()=>[P(D("i",{class:K(["tab-add-item svgtofont-el-plus !cursor-pointer",{disabledTab:N(o)}]),onClick:a[0]||(a[0]=e=>N(we)({path:"/www"}))},null,2),[[U,N(i)]])]),_:1}),F(Nl,{ref_key:"contextRef",ref:d},null,512)]),D("div",null,[P(D("div",Ml,[D("i",{class:"svgtofont-el-caret-left",onClick:a[1]||(a[1]=e=>N(k)())})],512),[[U,N(u)]]),P(D("div",Dl,[D("i",{class:"svgtofont-el-caret-right",onClick:a[2]||(a[2]=e=>N(g)())})],512),[[U,N(r)]])])])}}}),[["__scopeId","data-v-a6784810"]]),Pl={class:"nav nav-btn"},Ul={class:"left flex items-center flex-wrap"},Kl={class:"inline-flex items-center"},ql={class:"items-center inline-flex"},Hl=["title"],Wl={class:"max-w-[16rem] text-space"},$l={class:"text-[#999]"},Yl={class:"flex items-center"},Gl={class:"flex items-center truncate"},Jl=["title"],Xl={class:"!max-w-[12rem] truncate inline-block"},Ql={class:"right flex items-center"},Zl={key:0,class:"flex items-center text-[#f0ad4e] mr-8px"},ea={class:"right flex items-center"},la={class:"flex items-center"},aa=e(_({__name:"index",setup(e){const t=xe(),{mainWidth:n,copyFilesData:s,fileTabActiveData:i,diskList:o,favoriteList:c,fileBatchNum:u}=b(t),{cloudList:r,actionsBtn:d,fileBatchEvent:m,handleChangeMenu:f,handleCommand:p,openPlugin:v,collectCommand:h,createCommand:k,initNavBtn:g}=t,x=$(()=>n.value>1530);return I(()=>{g(),j(()=>{const e=setInterval(async()=>{if(window.$extension){const l=await window.$extension();a(l.extensionElement)&&!l.extensionElement&&clearTimeout(e),l.extensionElement&&(l.extensionElement({custom:{getDiskList:Ce}}),clearTimeout(e))}},1e3)})}),(e,a)=>{var t;const g=Y,y=G,w=l,C=J,_=X,b=Q,L=xl;return T(),A("div",Pl,[D("div",Ul,[F(_,{class:"",onCommand:N(p),"show-timeout":250},{dropdown:S(()=>[F(C,null,{default:S(()=>[F(y,{command:"upload",class:"upload-btn"},{default:S(()=>[...a[8]||(a[8]=[D("span",{class:"upload-icon !mr-[.6rem]"},null,-1),z("上传文件/文件夹",-1)])]),_:1}),F(y,{command:"openUrlLinkDown",divided:""},{default:S(()=>[D("div",Kl,[F(w,{src:"/file/url-down.svg",class:"w-[1.6rem] align-middle mr-4px"}),a[9]||(a[9]=z(" URL链接下载 ",-1))])]),_:1}),(T(!0),A(V,null,O(N(r),e=>(T(),E(y,{key:e.command,command:e.command},{default:S(()=>[D("div",ql,[F(w,{src:"/file/".concat(e.icon,".svg"),class:"mr-4px w-[1.6rem] align-middle"},null,8,["src"]),z(" "+W(e.name)+" ",1),a[10]||(a[10]=D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"},null,-1))])]),_:2},1032,["command"]))),128))]),_:1})]),default:S(()=>[F(g,{class:"upload-btn",onClick:N(_e)},{default:S(()=>[...a[7]||(a[7]=[D("span",{class:"upload-icon"},null,-1),z("上传/下载",-1),D("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["onCommand"]),F(_,{onCommand:N(k),"show-timeout":250},{dropdown:S(()=>[F(C,null,{default:S(()=>[F(y,{command:"file"},{default:S(()=>[F(w,{src:"/file_icon/file_text2.png",class:"mr-4px mt-4px w-[1.6rem] align-text-bottom"}),a[13]||(a[13]=z("新建空白文本",-1))]),_:1}),F(y,{command:"dir"},{default:S(()=>[F(w,{src:"/file_icon/folder_win10.png",class:"mr-4px mt-4px w-[1.6rem] align-text-bottom"}),a[14]||(a[14]=z("新建文件夹 ",-1))]),_:1}),F(y,{command:"link"},{default:S(()=>[F(w,{class:"mr-4px w-[1.6rem] align-text-bottom",src:"/file/url-down.svg"}),a[15]||(a[15]=z("新建软链接文件",-1))]),_:1})]),_:1})]),default:S(()=>[F(g,null,{default:S(()=>[F(w,{class:"mr-4px w-[1.4rem] align-bottom",src:"/file_icon/folder_create.png"}),a[11]||(a[11]=z(" 新建",-1)),a[12]||(a[12]=D("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1))]),_:1})]),_:1},8,["onCommand"]),F(g,{class:"search-btn",onClick:N(be)},{default:S(()=>[...a[16]||(a[16]=[D("span",{class:"flex items-center"},"文件内容搜索",-1)])]),_:1},8,["onClick"]),F(_,{onCommand:N(h),"show-timeout":250},{dropdown:S(()=>[F(C,{class:"max-h-[23rem] overflow-auto"},{default:S(()=>[N(c).length?B("",!0):(T(),E(y,{key:0,disabled:""},{default:S(()=>[...a[18]||(a[18]=[D("span",null,"暂无收藏",-1)])]),_:1})),(T(!0),A(V,null,O(N(c),e=>(T(),E(y,{key:e.path,command:e},{default:S(()=>[D("div",{class:"h-[2.7rem]",title:e.path},[F(w,{src:"".concat("file"===e.type?"/file_icon/file_text2.png":"/file_icon/folder_win10.png"),class:"mr-4px mt-4px w-[1.6rem] align-top"},null,8,["src"]),D("span",Wl,[z(W(e.name),1),D("span",$l," ("+W(e.path)+")",1)])],8,Hl)]),_:2},1032,["command"]))),128))]),_:1})]),default:S(()=>[F(g,{onClick:N(Le)},{default:S(()=>[...a[17]||(a[17]=[D("span",{class:"file-menu-icon favorites-file-icon mr-4px"},null,-1),z("收藏夹",-1),D("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["onCommand"]),F(g,{class:"terminal-btn !ml-0",onClick:N(Ie)},{default:S(()=>[...a[19]||(a[19]=[D("div",{class:"flex items-center"},[D("span",{class:"fileTerminal-icon"}),z("终端")],-1)])]),_:1},8,["onClick"]),a[29]||(a[29]=D("div",{id:"extension-cosfs"},null,-1)),D("div",Yl,[1===(null==(t=N(o))?void 0:t.length)?(T(),E(g,{key:0,class:"search-btn !mr-0",onClick:a[0]||(a[0]=e=>N(Re)("/"))},{default:S(()=>{var e;return[D("span",Gl,[a[20]||(a[20]=D("i",{class:"svgtofont-file-hdd text-1.8rem mr-4px svg-icon"},null,-1)),z(" "+W("/(根目录)".concat((null==(e=N(o)[0])?void 0:e.size[2])||"")),1)])]}),_:1})):(T(),E(_,{key:1,onCommand:N(Re)},{dropdown:S(()=>[F(C,null,{default:S(()=>[(T(!0),A(V,null,O(N(o),(e,l)=>(T(),E(y,{command:e.path,key:l},{default:S(()=>[D("div",{class:"inline-block w-full flex items-center",title:"".concat(e.path,"（").concat(e.size[2]||"","）")},[D("div",Xl,W(l?e.path:"/(根目录)")+"("+W(e.size[2]||"")+")",1)],8,Jl)]),_:2},1032,["command"]))),128))]),_:1})]),default:S(()=>[F(g,{class:"!mr-0",onClick:a[1]||(a[1]=e=>N(Re)("/"))},{default:S(()=>{var e;return[a[21]||(a[21]=D("i",{class:"svgtofont-file-hdd text-1.8rem mr-4px svg-icon"},null,-1)),z(" "+W("/(根目录)".concat((null==(e=N(o)[0])?void 0:e.size[2])||"")),1),a[22]||(a[22]=D("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1))]}),_:1})]),_:1},8,["onCommand"]))]),F(_,{"show-timeout":250,class:"nav-btn-more-btn"},{dropdown:S(()=>[F(C,null,{default:S(()=>[F(y,{onClick:N(Te)},{default:S(()=>[...a[24]||(a[24]=[z("分享列表",-1)])]),_:1},8,["onClick"]),F(y,{onClick:N(Ee)},{default:S(()=>[...a[25]||(a[25]=[z("文件操作记录",-1)])]),_:1},8,["onClick"]),F(y,{onClick:N(Se)},{default:S(()=>[...a[26]||(a[26]=[z("文件足迹",-1)])]),_:1},8,["onClick"]),F(y,{class:"flex items-center",onClick:a[2]||(a[2]=e=>N(v)("tamper_core",75))},{default:S(()=>[...a[27]||(a[27]=[D("i",{class:"svgtofont-icon-ltd !text-[1.6rem] !mr-0 text-[#9B7E48]"},null,-1),z("企业级防篡改",-1)])]),_:1}),F(y,{class:"flex items-center",onClick:a[3]||(a[3]=e=>N(v)("rsync",70))},{default:S(()=>[...a[28]||(a[28]=[D("i",{class:"svgtofont-icon-ltd !text-[1.6rem] !mr-0 text-[#9B7E48]"},null,-1),z("文件同步",-1)])]),_:1})]),_:1})]),default:S(()=>[F(g,null,{default:S(()=>[...a[23]||(a[23]=[z("更多功能",-1),D("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)])]),_:1})]),_:1})]),D("div",Ql,[N(u).length?B("",!0):P((T(),A("div",Zl,[...a[30]||(a[30]=[D("i",{class:"svgtofont-el-info-filled text-[#f0ad4e] mt-2px mr-4px text-[1.3rem]"},null,-1),z(" 文件操作可使用右键 ",-1)])],512)),[[U,N(x)]]),P(D("div",ea,[F(b,{class:"flex-nowrap !inline-flex"},{default:S(()=>[(T(!0),A(V,null,O(N(d),e=>P((T(),E(g,{key:e.type,class:"!mr-[-1px]",onClick:l=>e.handler()},{default:S(()=>[D("span",{class:K([e.icon,"file-menu-icon mr-4px"])},null,2),z(W(e.label),1)]),_:2},1032,["onClick"])),[[U,N(n)>(e.hide||0)&&N(n)>=1720]])),128)),N(n)<1720?(T(),E(_,{key:0,onCommand:N(m)},{dropdown:S(()=>[F(C,{class:"batch-btn-list"},{default:S(()=>[F(y,{command:"copy"},{default:S(()=>[...a[32]||(a[32]=[D("span",{class:"file-menu-icon copy-file-icon"},null,-1),z("复制",-1)])]),_:1}),F(y,{command:"cut"},{default:S(()=>[...a[33]||(a[33]=[D("span",{class:"file-menu-icon cut-file-icon"},null,-1),z("剪切",-1)])]),_:1}),F(y,{command:"compress"},{default:S(()=>[...a[34]||(a[34]=[D("span",{class:"file-menu-icon compress-file-icon"},null,-1),z("压缩",-1)])]),_:1}),F(y,{command:"auth"},{default:S(()=>[...a[35]||(a[35]=[D("span",{class:"file-menu-icon authority-file-icon"},null,-1),z("权限",-1)])]),_:1}),F(y,{command:"del"},{default:S(()=>[...a[36]||(a[36]=[D("span",{class:"file-menu-icon delete-file-icon"},null,-1),z("删除",-1)])]),_:1})]),_:1})]),default:S(()=>[F(g,{class:"!m-0 border",style:{"border-left":"1px solid #dcdfe6"}},{default:S(()=>[...a[31]||(a[31]=[z("更多",-1),D("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)])]),_:1})]),_:1},8,["onCommand"])):B("",!0)]),_:1})],512),[[U,N(u).length>1]]),P(F(L,null,null,512),[[U,N(u).length>1]]),P(F(g,{onClick:N(Ne)},{default:S(()=>[...a[37]||(a[37]=[z("粘贴",-1)])]),_:1},8,["onClick"]),[[U,N(s).files.length>0]]),F(g,{onClick:a[4]||(a[4]=e=>N(Ae)())},{default:S(()=>[...a[38]||(a[38]=[D("i",{class:"svgtofont-el-delete mr-4px"},null,-1),z("回收站 ",-1)])]),_:1}),D("div",la,[D("span",{onClick:a[5]||(a[5]=e=>N(f)("list")),class:K(["list"===N(i).type?"active":"","menu-type menu-left list-view"])},[...a[39]||(a[39]=[D("span",{class:"list-icon"},null,-1)])],2),D("span",{onClick:a[6]||(a[6]=e=>N(f)("icon")),class:K(["list"!==N(i).type?"active":"","menu-type menu-right icon-view"])},[...a[40]||(a[40]=[D("span",{class:"grid-icon"},null,-1)])],2)])])])}}}),[["__scopeId","data-v-4958697c"]]),ta=""+new URL("../images/file/share-list-active.svg",import.meta.url).href,na=""+new URL("../images/file/favorite-list-star.svg",import.meta.url).href,sa=""+new URL("../icons/icon-top.svg",import.meta.url).href,ia=""+new URL("../images/file_icon/icon-new-file-lock.svg",import.meta.url).href,oa=""+new URL("../images/file_icon/icon-new-file-unlock.svg",import.meta.url).href,ca=Z("FILES-LOG-ANALYZE-STORE",()=>{const e=L({});let l=null;const a=ee({limit:200,auto:!1,time:5,search:"",data:"",last:"",file:""}),s=L(!1),i=async()=>{const e={file:a.file,limit:a.limit,search:a.search};a.last=n((new Date).getTime());try{s.value=!0;const l=await Cl({data:JSON.stringify(e)});a.data=l.data.data}catch(l){}finally{s.value=!1}};return{compData:e,loading:s,quickForm:a,limitOptions:[{label:"200/行",value:200},{label:"500/行",value:500},{label:"1000/行",value:1e3},{label:"2000/行",value:2e3},{label:"5000/行",value:5e3}],changeLimit:e=>{a.limit=e},getLog:i,setAutoRefresh:()=>{a.auto?l=setInterval(()=>{i()},1e3*a.time):clearInterval(l)},checkTime:e=>{const l=Number(e.replace(/[^\d]/g,""));a.time=l<2?2:l,t.warn("最小刷新时间为2秒")},init:()=>{Object.assign(a,{limit:200,auto:!1,time:5,search:"",data:"",last:"",file:Fe(e.value.fileItem.fileName)}),i()},$reset:()=>{s.value=!1,l&&clearInterval(l)}}}),ua=Z("FILES-VIRUS-SCAN-STORE",()=>{const e=L(""),l=L("loading"),a=L(!1),n=L("");let r=null;const d=L(),m=ee({scanInfo:"",scanCount:0,scanningCount:0,scanningText:"进行中",shellCount:0}),f=L([]),p=L(""),v=(e,a)=>{if("token error"===a.data)return t.error("token error"),void(null==r||r.close());const n=JSON.parse(a.data);m.scanInfo=n.info,n.is_count&&(m.scanCount=n.count,m.scanningCount=n.is_count),n.path&&f.value.push({path:n.path,name:n.path.substring(n.path.lastIndexOf("/")+1)}),n.result&&(l.value="success",m.scanningText="已完成",m.scanInfo="扫描已完成",m.scanningCount=m.scanCount,m.shellCount=n.result.length,n.result.length>0&&(l.value="danger"),t.success("扫描完成！"),null==r||r.close())},h=async e=>{await s({title:"提示",content:"确定删除文件【"+e.path+"】，删除后文件将移至回收站，是否继续操作？",icon:"warning",type:"calc"}),i({loading:"正在删除文件，请稍后...",request:_l({path:e.path,type:"File"}),message:!0,success:l=>{l.status&&(f.value=f.value.filter(l=>l.path!==e.path))}})},k=async e=>{await s({title:"提示",content:"是否确定提交误报反馈",type:"calc"}),i({loading:"正在提交误报反馈，请稍后...",request:c({filename:e.path}),message:!0,success:l=>{l.stauts&&(f.value=f.value.filter(l=>l.path!==e.path))}})},g=async e=>{p.value=e.path,await i({loading:"正在获取文件内容，请稍后...",request:bl({path:e.path}),success:e=>{n.value=e.data.data,a.value=!0}})},x=le([El(),{label:"文件名",prop:"name",width:160},{label:"文件路径",prop:"path"},Sl([{onClick:k,title:"误报"},{onClick:g,title:"打开文件",width:70},{onClick:h,title:"删除"}])]),y=[{label:"删除",value:"delete",event:async(e,l,a,t,n)=>{const s=async e=>await _l({path:e.path,type:"File"});await e({title:"批量删除",content:"批量删除选中文件，删除后文件将移至回收站，是否继续操作？",column:[{prop:"path",label:"文件路径"},Tl()],onConfirm:async()=>(await l(s),f.value=f.value.filter(e=>!a.value.some(l=>l.path===e.path)),!1)})}}];return{path:e,scanLoad:l,scanningData:m,tableColumns:x,tableData:f,scanTableRef:d,batchOptions:y,editorPopup:a,editorValue:n,saveFile:async()=>{await i({loading:"正在保存文件，请稍后...",request:o({path:p.value,data:n.value,encoding:"utf-8"}),message:!0})},cancelScan:async()=>{await s({title:"提示",content:"查杀正在进行中，确定要停止扫描吗？"}),m.scanningText="已取消",l.value="success",null==r||r.close()},scanData:async()=>{f.value=[],r=u({route:"/ws_panel",onMessage:v}),l.value="loading",m.scanningText="进行中",m.scanInfo="正在扫描中...",null==r||r.send({"x-http-token":window.vite_public_request_token}),null==r||r.send({def_name:"ws_webshell_check",mod_name:"files",path:e.value,ws_callback:"1"})},$reset:()=>{f.value=[],l.value="loading",a.value=!1,n.value="",p.value="",Object.assign(m,{scanInfo:"",scanCount:0,scanningCount:0,scanningText:"进行中",shellCount:0})}}}),ra=Z("FILES-RIGHT-MENU-STORE",()=>{const e=xe(),{authType:l,copyFilesData:a,createListType:n}=b(e),{refreshFilesList:i,watchCreateListType:o}=e,c=ze(),{contextRow:u,isBatch:p}=b(c),v=L(null),h=L(!0),k=()=>{u.value&&(u.value.isFav=!u.value.isFav,x())},g=()=>{v.value.visible=!1},x=()=>{u.value&&(h.value=!0)};return{authType:l,refreshFilesList:i,contextmenu:v,showOpen:h,contextRow:u,isBatch:p,copyFilesData:a,watchCurrentRow:x,openCloud:async(e,a="down")=>{if("ltd"!==l.value)ml({sourceId:73});else try{const{data:l}=await m({sName:e});if(!l.setup)return void fl({name:l.name,type:"i",pluginInfo:l});const t={type:a,zName:l.title,pname:e};t.rowData=u.value,Ue(t)}catch(t){f(t)}},openEvent:(e,a,n)=>{a.includes("压缩预览")?"ltd"!==l.value?ml({disablePro:!0,sourceId:171}):n?Oe(e):t.error("暂不支持该类型文件预览"):Pe(e)},handleReName:e=>{e.oldName=e.fileName,e.isReName=!0},show:e=>{v.value.visible=!0,j(()=>{ye(e,v.value.contextmenuRef)})},hide:g,handleClickOutside:e=>{v.value&&v.value.visible&&g()},create:e=>{n.value=e,o(e)},toping:async()=>{var e;Array.isArray(u.value)||((null==(e=u.value)?void 0:e.isTop)&&await s({title:"取消置顶文件",content:"您是否要取消置顶【".concat(u.value.fileName,"】？")}),u.value&&De(u.value,u.value.isTop?"unset":"set"))},share:async()=>{var e;u.value&&!Array.isArray(u.value)&&((null==(e=u.value)?void 0:e.isShare)?Me(u.value):je(u.value))},collection:async()=>{u.value&&!Array.isArray(u.value)&&(u.value.isFav?(await s({title:"收藏文件",icon:"warning",content:"您是否要取消【".concat(u.value.fileName,"】的收藏？")}),Ve(u.value,k)):Be(u.value,k))},openLogAnalyze:e=>{const{compData:l}=b(ca());l.value={fileItem:e},r({title:"【".concat(e.fileName,"】日志写入分析"),area:85,component:()=>d(()=>import("./index233.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})},openTrojanScan:e=>{const l=ua(),{path:a}=b(l);a.value=e.path,r({title:"木马扫描【".concat(e.fileName,"】"),area:85,component:()=>d(()=>import("./index234.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})}}}),da={key:0},ma={key:3,class:"right-menu-divider"},fa={key:1},pa={key:2},va=e(_({__name:"index",setup(e,{expose:l}){const{enterpriseRec:a}=p(),t=ra(),{contextRow:n,isBatch:s,authType:i,contextmenu:o,showOpen:c,copyFilesData:u}=b(t),{refreshFilesList:r,openEvent:d,handleReName:m,show:f,hide:v,handleClickOutside:h,openCloud:k,create:g,toping:x,share:y,collection:w,openLogAnalyze:C,openTrojanScan:_,watchCurrentRow:L}=t,V=$(()=>{var e;let l="";if("dir"===(null==(e=n.value)?void 0:e.type))l="打开";else{if(!n.value)return l;switch(Ke(n.value.ext)){case"images":l="预览";break;case"video":l="播放";break;case"compress":H?l=n.value.ext.toUpperCase()+"压缩预览":c.value=!1;break;default:l="编辑"}}return l}),j=$(()=>{let e=!1;return n.value?("images"!==Ke(n.value.ext)&&"video"!==Ke(n.value.ext)||(e=!0),e):e}),M=$(()=>{var e;let l="";return l=0==(null==(e=n.value)?void 0:e.isShare)?"外链分享":"取消分享",l}),O=$(()=>{var e;let l="";return l=(null==(e=n.value)?void 0:e.isTop)?"取消置顶":"置顶",l}),K=$(()=>{var e;let l="";return l=(null==(e=n.value)?void 0:e.isFav)?"取消收藏":"添加到收藏夹",l}),q=$(()=>{var e;let l=!0;return"dir"!==(null==(e=n.value)?void 0:e.type)&&(l=!1),n.value&&null!=qe.get(n.value.path)&&(l=!1),l}),H=$(()=>{var e;return["zip","rar","gz","tar","war","tgz","bz2","7z","tar.gz"].includes((null==(e=n.value)?void 0:e.ext)||"")});return $(()=>{var e;let l=!1;return(null==(e=n.value)?void 0:e.isSearch)&&(l=!0),l}),I(()=>{L(),document.addEventListener("click",h)}),R(()=>{document.removeEventListener("click",h)}),l({show:f,hide:v}),(e,l)=>{const t=ae;return T(),E(N(kl),{ref_key:"contextmenu",ref:o},{default:S(()=>{var e,o;return[Array.isArray(N(n))||!(null==(e=N(n))?void 0:e.fileName)||N(s)?B("",!0):(T(),A("div",da,[N(c)||N(H)?(T(),E(N(hl),{key:0,onClick:l[0]||(l[0]=e=>N(d)(N(n),N(V),N(H)))},{default:S(()=>[l[36]||(l[36]=D("span",{class:"file-menu-icon open-file-icon"},null,-1)),z(" "+W(N(V)),1)]),_:1})):B("",!0),"dir"===N(n).type?(T(),E(N(hl),{key:1,onClick:l[1]||(l[1]=e=>N(we)(N(n)))},{default:S(()=>[...l[37]||(l[37]=[D("span",{class:"file-menu-icon open-tab-icon"},null,-1),z("在新窗口打开",-1)])]),_:1})):B("",!0),"sql"===N(n).ext?(T(),E(N(hl),{key:2,onClick:l[2]||(l[2]=e=>N(He)(N(n)))},{default:S(()=>[...l[38]||(l[38]=[D("span",{class:"file-menu-icon"},null,-1),z("导入数据库",-1)])]),_:1})):B("",!0),N(c)||N(H)?(T(),A("div",ma)):B("",!0),"dir"!==N(n).type?(T(),E(N(hl),{key:4,onClick:l[3]||(l[3]=e=>N(We)(N(n)))},{default:S(()=>[...l[39]||(l[39]=[D("span",{class:"file-menu-icon download-file-icon"},null,-1),z("下载",-1)])]),_:1})):B("",!0),"dir"!==N(n).type&&"bt_split"!==N(n).ext&&"bt_split_json"!==N(n).ext?(T(),E(N(hl),{key:5,onClick:l[4]||(l[4]=e=>N($e)(N(n)))},{default:S(()=>[...l[40]||(l[40]=[D("span",{class:"file-menu-icon"},null,-1),z("文件拆分",-1)])]),_:1})):B("",!0),"dir"!==N(n).type&&"bt_split_json"===N(n).ext?(T(),E(N(hl),{key:6,onClick:l[5]||(l[5]=e=>N(Ye)(N(n)))},{default:S(()=>[...l[41]||(l[41]=[D("span",{class:"file-menu-icon"},null,-1),z("文件合并",-1)])]),_:1})):B("",!0),F(N(hl),{onClick:N(w)},{default:S(()=>[l[42]||(l[42]=D("span",{class:"file-menu-icon favorites-file-icon"},null,-1)),z(W(N(K)),1)]),_:1},8,["onClick"]),F(N(hl),{onClick:N(y)},{default:S(()=>[l[43]||(l[43]=D("span",{class:"file-menu-icon not-elf-icon svgtofont-el-share text-[#31dc48] font-bold !text-[1.6rem]"},null,-1)),z(W(N(M)),1)]),_:1},8,["onClick"]),"ltd"===N(i)?(T(),E(N(hl),{key:7,onClick:N(x)},{default:S(()=>[l[44]||(l[44]=D("span",{class:"file-menu-icon toping-icon"},null,-1)),z(W(N(O)),1)]),_:1},8,["onClick"])):B("",!0),N(q)?(T(),E(N(hl),{key:8,onClick:l[6]||(l[6]=e=>N(Ge)(N(n)))},{default:S(()=>[...l[45]||(l[45]=[D("span",{class:"file-menu-icon rsync-icon"},null,-1),z("文件同步",-1)])]),_:1})):B("",!0),"log"===N(n).ext?(T(),E(N(hl),{key:9,onClick:l[7]||(l[7]=e=>N(C)(N(n)))},{default:S(()=>[...l[46]||(l[46]=[D("span",{class:"file-menu-icon"},null,-1),z("监听日志",-1)])]),_:1})):B("",!0),l[65]||(l[65]=D("div",{class:"right-menu-divider"},null,-1)),"dir"===N(n).type?(T(),E(N(hl),{key:10,onClick:l[8]||(l[8]=e=>N(_)(N(n)))},{default:S(()=>[...l[47]||(l[47]=[D("i",{class:"file-menu-icon svgtofont-icon-bug-scan not-elf-icon svgtofont-el-orange text-[#c77f22] !text-[1.6rem]"},null,-1),z("木马扫描",-1)])]),_:1})):B("",!0),"dir"!==N(n).type&&N(a)?(T(),E(N(gl),{key:11},{title:S(()=>[...l[48]||(l[48]=[D("span",null,[D("span",{class:"file-menu-icon upload-file-icon"}),D("span",{class:"align-text-top"},"上传到云存储")],-1)])]),default:S(()=>[F(N(hl),{onClick:l[9]||(l[9]=e=>N(k)("bos","upload"))},{default:S(()=>[...l[49]||(l[49]=[D("div",{class:"flex items-center w-full"},[D("div",{class:"flex items-center"},[D("span",{class:"file-menu-icon baidu-icon"}),z("百度云存储")]),D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)])]),_:1}),F(N(hl),{onClick:l[10]||(l[10]=e=>N(k)("alioss","upload"))},{default:S(()=>[...l[50]||(l[50]=[D("div",{class:"flex items-center w-full"},[D("div",{class:"flex items-center"},[D("span",{class:"file-menu-icon ali-icon"}),z("阿里云存储")]),D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)])]),_:1}),F(N(hl),{onClick:l[11]||(l[11]=e=>N(k)("txcos","upload"))},{default:S(()=>[...l[51]||(l[51]=[D("div",{class:"flex items-center w-full"},[D("div",{class:"flex items-center"},[D("span",{class:"file-menu-icon txcos-icon"}),z("腾讯云存储")]),D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)])]),_:1}),F(N(hl),{onClick:l[12]||(l[12]=e=>N(k)("obs","upload"))},{default:S(()=>[...l[52]||(l[52]=[D("div",{class:"flex items-center w-full"},[D("div",{class:"flex items-center"},[D("span",{class:"file-menu-icon huawei-icon"}),z("华为云存储")]),D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)])]),_:1})]),_:1})):B("",!0),F(N(hl),{onClick:l[13]||(l[13]=e=>N(Je)(N(n),"auth"))},{default:S(()=>[...l[53]||(l[53]=[D("span",{class:"file-menu-icon authority-icon"},null,-1),z("权限",-1)])]),_:1}),l[66]||(l[66]=D("div",{class:"right-menu-divider"},null,-1)),F(N(hl),{onClick:l[14]||(l[14]=e=>N(Xe)(N(n),"copy"))},{default:S(()=>[...l[54]||(l[54]=[D("span",{class:"file-menu-icon copy-file-icon"},null,-1),z("复制",-1)])]),_:1}),F(N(hl),{onClick:l[15]||(l[15]=e=>N(Xe)(N(n),"cut"))},{default:S(()=>[...l[55]||(l[55]=[D("span",{class:"file-menu-icon cut-file-icon"},null,-1),z("剪切",-1)])]),_:1}),P(F(N(hl),{onClick:N(Ne)},{default:S(()=>[...l[56]||(l[56]=[D("span",{class:"file-menu-icon paste-icon"},null,-1),z("粘贴",-1)])]),_:1},8,["onClick"]),[[U,0!==N(u).files.length]]),F(N(hl),{onClick:l[16]||(l[16]=e=>N(m)(N(n)))},{default:S(()=>[...l[57]||(l[57]=[D("span",{class:"file-menu-icon rename-file-icon"},null,-1),z("重命名",-1)])]),_:1}),F(N(hl),{onClick:l[17]||(l[17]=e=>N(Qe)(N(n)))},{default:S(()=>[...l[58]||(l[58]=[D("span",{class:"file-menu-icon delete-file-icon"},null,-1),z("删除",-1)])]),_:1}),l[67]||(l[67]=D("div",{class:"right-menu-divider"},null,-1)),F(N(hl),{onClick:l[18]||(l[18]=e=>N(Ze)(N(n)))},{default:S(()=>[...l[59]||(l[59]=[D("span",{class:"file-menu-icon compress-file-icon"},null,-1),z("创建压缩",-1)])]),_:1}),"dir"!==N(n).type&&N(j)?(T(),E(N(hl),{key:12,onClick:l[19]||(l[19]=e=>N(el)(N(n)))},{default:S(()=>[...l[60]||(l[60]=[D("span",{class:"file-menu-icon format-file-icon"},null,-1),z("格式转换",-1)])]),_:1})):B("",!0),N(H)?(T(),E(N(hl),{key:13,onClick:l[20]||(l[20]=e=>N(ll)(N(n)))},{default:S(()=>[...l[61]||(l[61]=[D("span",{class:"file-menu-icon decompress-file-icon"},null,-1),z("解压",-1)])]),_:1})):B("",!0),"ltd"===N(i)?(T(),E(N(hl),{key:14,onClick:l[21]||(l[21]=e=>N(al)(N(n)))},{default:S(()=>[...l[62]||(l[62]=[D("span",{class:"file-menu-icon create-copy-icon"},null,-1),z("创建副本",-1)])]),_:1})):B("",!0),l[68]||(l[68]=D("div",{class:"right-menu-divider"},null,-1)),"ltd"===N(i)&&"dir"!==N(n).type?(T(),E(N(hl),{key:15,onClick:l[22]||(l[22]=e=>N(tl)(N(n)))},{default:S(()=>[...l[63]||(l[63]=[D("span",{class:"file-menu-icon email-icon"},null,-1),z("发送到邮箱",-1)])]),_:1})):B("",!0),F(N(hl),{onClick:l[23]||(l[23]=e=>N(Je)(N(n)))},{default:S(()=>[...l[64]||(l[64]=[D("span",{class:"file-menu-icon status-icon"},null,-1),z("属性",-1)])]),_:1})])),N(s)&&Array.isArray(N(n))?(T(),A("div",fa,[F(N(hl),{onClick:l[24]||(l[24]=e=>N(nl)(N(n),"copy"))},{default:S(()=>[...l[69]||(l[69]=[D("span",{class:"file-menu-icon copy-file-icon"},null,-1),z("复制",-1)])]),_:1}),F(N(hl),{onClick:l[25]||(l[25]=e=>N(nl)(N(n),"cut"))},{default:S(()=>[...l[70]||(l[70]=[D("span",{class:"file-menu-icon cut-file-icon"},null,-1),z("剪切",-1)])]),_:1}),F(N(hl),{onClick:l[26]||(l[26]=e=>N(sl)(N(n)))},{default:S(()=>[...l[71]||(l[71]=[D("span",{class:"file-menu-icon authority-icon"},null,-1),z("权限",-1)])]),_:1}),F(N(hl),{onClick:l[27]||(l[27]=e=>N(Ze)(N(n)))},{default:S(()=>[...l[72]||(l[72]=[D("span",{class:"file-menu-icon compress-file-icon"},null,-1),z("创建压缩",-1)])]),_:1}),F(N(hl),{onClick:l[28]||(l[28]=e=>N(el)(N(n)))},{default:S(()=>[...l[73]||(l[73]=[D("span",{class:"file-menu-icon format-file-icon"},null,-1),z("格式转换",-1)])]),_:1}),F(N(hl),{onClick:l[29]||(l[29]=e=>N(il)(N(n)))},{default:S(()=>[...l[74]||(l[74]=[D("span",{class:"file-menu-icon delete-file-icon"},null,-1),z("删除",-1)])]),_:1})])):B("",!0),(null==(o=N(n))?void 0:o.fileName)||N(s)?B("",!0):(T(),A("div",pa,[F(N(hl),{onClick:N(r)},{default:S(()=>[...l[75]||(l[75]=[D("span",{class:"file-menu-icon refresh-icon"},null,-1),z("刷新",-1)])]),_:1},8,["onClick"]),l[88]||(l[88]=D("div",{class:"right-menu-divider"},null,-1)),F(N(hl),{onClick:N(ol)},{default:S(()=>[...l[76]||(l[76]=[D("span",{class:"file-menu-icon upload-icon"},null,-1),z("上传",-1)])]),_:1},8,["onClick"]),F(N(gl),null,{title:S(()=>[...l[77]||(l[77]=[D("span",null,[D("span",{class:"file-menu-icon folder_create"}),D("span",{class:"align-text-top"},"新建文件夹/文件 ")],-1)])]),default:S(()=>[F(N(hl),{onClick:l[30]||(l[30]=e=>N(g)("dir"))},{default:S(()=>[...l[78]||(l[78]=[D("span",{class:"file-menu-icon dirF-icon"},null,-1),z("新建文件夹",-1)])]),_:1}),F(N(hl),{onClick:l[31]||(l[31]=e=>N(g)("file"))},{default:S(()=>[...l[79]||(l[79]=[D("span",{class:"file-menu-icon file-icon"},null,-1),z("新建文件",-1)])]),_:1}),F(N(hl),{onClick:N(cl)},{default:S(()=>[...l[80]||(l[80]=[D("span",{class:"file-menu-icon dirLink-icon"},null,-1),z("软链接文件",-1)])]),_:1},8,["onClick"])]),_:1}),F(N(gl),null,{title:S(()=>[...l[81]||(l[81]=[D("span",null,[D("span",{class:"file-menu-icon download-file-icon"}),D("span",{class:"align-text-top"},"从云存储下载")],-1)])]),default:S(()=>[F(N(hl),{onClick:l[32]||(l[32]=e=>N(k)("bos"))},{default:S(()=>[...l[82]||(l[82]=[D("div",{class:"flex items-center w-full"},[D("div",{class:"flex items-center"},[D("span",{class:"file-menu-icon baidu-icon"}),z("百度云存储")]),D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)])]),_:1}),F(N(hl),{onClick:l[33]||(l[33]=e=>N(k)("alioss"))},{default:S(()=>[...l[83]||(l[83]=[D("div",{class:"flex items-center w-full"},[D("div",{class:"flex items-center"},[D("span",{class:"file-menu-icon ali-icon"}),z("阿里云存储")]),D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)])]),_:1}),F(N(hl),{onClick:l[34]||(l[34]=e=>N(k)("txcos"))},{default:S(()=>[...l[84]||(l[84]=[D("div",{class:"flex items-center w-full"},[D("div",{class:"flex items-center"},[D("span",{class:"file-menu-icon txcos-icon"}),z("腾讯云存储")]),D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)])]),_:1}),F(N(hl),{onClick:l[35]||(l[35]=e=>N(k)("obs"))},{default:S(()=>[...l[85]||(l[85]=[D("div",{class:"flex items-center w-full"},[D("div",{class:"flex items-center"},[D("span",{class:"file-menu-icon huawei-icon"}),z("华为云存储")]),D("i",{class:"svgtofont-icon-ltd ml-4px text-[#A88E5F] !text-1.8rem"})],-1)])]),_:1})]),_:1}),F(N(hl),{onClick:N(Ie)},{default:S(()=>[...l[86]||(l[86]=[D("span",{class:"file-menu-icon terminals-icon"},null,-1),z("终端",-1)])]),_:1},8,["onClick"]),0!==N(u).files.length?(T(),E(t,{key:0,class:"!mt-0 !mb-0"})):B("",!0),P(F(N(hl),{onClick:N(Ne)},{default:S(()=>[...l[87]||(l[87]=[D("span",{class:"file-menu-icon paste-icon"},null,-1),z("粘贴",-1)])]),_:1},8,["onClick"]),[[U,0!==N(u).files.length]])]))]}),_:1},512)}}}),[["__scopeId","data-v-a6d799ee"]]),ha={key:0,class:"svgtofont-el-loading animate-spin mr-2px"},ka={class:"text-primary cursor-pointer"},ga={key:0},xa={key:1},ya={class:"p-12px w-[28rem]"},wa={key:0,class:"bg-[#f4f4f5] text-[#909399] !mb-12px !py-[.5rem] !pr-0 !pl-[1rem] rounded-[.4rem]"},Ca={class:"text-[1.2rem]"},_a={class:"item"},ba={class:"truncate w-[16rem] inline-block ml-1rem"},La={class:"item"},Ia={class:"con"},Ra={class:"item"},Ta={class:"con"},Ea={class:"item"},Sa={class:"con"},Na={class:"item"},Aa={class:"con"},Fa={class:"item"},za={class:"con"},Ba={class:"item"},Va={class:"con"},ja={class:"item"},Ma={class:"con"},Da=e(_({__name:"index",props:{row:{},status:{type:Boolean,default:!1}},setup(e){const l=k(),t=e,s=ze(),{authType:o,diskAnalysis:c}=b(s),{buyPlugin:u}=s,r=L(!1),d=L("defalut"),m=te(t,"row"),f=te(t,"status"),p=L("计算");M(()=>f.value,e=>{var l;r.value=e,d.value="",a(e)&&!e&&(null==(l=m.value)?void 0:l.diskInfo)&&(p.value=h(m.value.diskInfo.total_asize))},{immediate:!0});return(e,a)=>{const t=q,s=ae,f=ne;return T(),A("a",{class:"flex items-center",title:"点击计算大小",onClick:a[2]||(a[2]=e=>(async e=>{if(c.value.reqEnd&&c.value.isSetup&&"ltd"===o.value){const a=await i({loading:r,request:Ll({path_list:JSON.stringify([e.path]),is_refresh:!1})});a.status?(m.value.diskInfo=Object.values(a.data)[0]?Object.values(a.data)[0]:e,p.value=h(m.value.diskInfo.total_asize)):l.error(a.msg)}else{r.value=!0;const l=await Il({path:e.path});r.value=!1,m.value.diskInfo={...e,size:l.data},p.value=l.data}d.value=""})(N(m)))},[N(r)?(T(),A("span",ha)):B("",!0),D("div",ka,[N(v)(N(m).diskInfo)?(T(),A("span",ga,"计算")):(T(),A("span",xa,[F(f,{placement:"right","popper-class":"myPopover",trigger:"hover",width:"304"},{reference:S(()=>[D("span",null,W(N(p)),1)]),default:S(()=>[D("div",ya,[N(c).isSetup?B("",!0):(T(),A("div",wa,[D("span",Ca,W(N(c).isBuy||"ltd"===N(o)?"安装":"购买")+"硬盘分析工具畅享更多信息， ",1),D("a",{class:"text-[1.2rem] btlink",onClick:a[0]||(a[0]=(...e)=>N(u)&&N(u)(...e))},"立即"+W(N(c).isBuy||"ltd"===N(o)?"安装":"购买"),1)])),a[14]||(a[14]=D("div",{class:"item"},[D("div",{class:"title !text-[#333]"},"目录详情"),D("div",{class:"con"})],-1)),D("div",_a,[a[3]||(a[3]=D("div",{class:"title"},"目录路径:",-1)),F(t,{effect:"light",content:N(m).diskInfo.full_path||N(m).diskInfo.path,placement:"top"},{default:S(()=>[D("div",ba,W(N(m).diskInfo.full_path||N(m).diskInfo.path),1)]),_:1},8,["content"])]),D("div",La,[a[4]||(a[4]=D("div",{class:"title"},"目录大小:",-1)),D("div",Ia,W(N(m).diskInfo.size||N(p)),1)]),D("div",Ra,[a[5]||(a[5]=D("span",{class:"ltd-icon"},null,-1)),a[6]||(a[6]=D("div",{class:"title"},"文件夹数量:",-1)),D("div",Ta,W(N(m).diskInfo.full_path?N(m).diskInfo.dir_num:"----------"),1)]),D("div",Ea,[a[7]||(a[7]=D("span",{class:"ltd-icon"},null,-1)),a[8]||(a[8]=D("div",{class:"title"},"文件数量:",-1)),D("div",Sa,W(N(m).diskInfo.full_path?N(m).diskInfo.file_num:"----------"),1)]),D("div",Na,[a[9]||(a[9]=D("div",{class:"title"},"权限:",-1)),D("div",Aa,[z(W(N(m).diskInfo.accept||N(m).diskInfo.rootLevel)+" ",1),D("a",{class:"ml-[2rem] bt-link",onClick:a[1]||(a[1]=e=>N(Je)(N(m),"auth"))},"修改权限")])]),D("div",Fa,[a[10]||(a[10]=D("div",{class:"title"},"所属用户:",-1)),D("div",za,W(N(m).diskInfo.user),1)]),F(s,{class:"!my-[1rem]"}),D("div",Ba,[a[11]||(a[11]=D("div",{class:"title"},"最后修改时间:",-1)),D("div",Va,W(N(m).time),1)]),D("div",ja,[a[12]||(a[12]=D("span",{class:"ltd-icon"},null,-1)),a[13]||(a[13]=D("div",{class:"title"},"权限变更时间:",-1)),D("div",Ma,W(N(m).diskInfo.full_path?N(n)(N(m).diskInfo.ctime):"-----------"),1)])])]),_:1})]))])])}}}),[["__scopeId","data-v-6727ddd3"]]),Oa={class:"table-head flex h-[3.6rem] overflow-hidden"},Pa={class:"flex flex-shrink-0 w-[30px] px-[10px]"},Ua={class:"custom-td"},Ka=["onClick"],qa={key:0,class:"flex flex-col ml-8px justify-center"},Ha=["onClick","onTouchend","onContextmenu"],Wa={class:"custom-td w-[30px]"},$a=["onClick"],Ya=["id"],Ga={class:"custom-td w-[420px] flex justify-between items-center"},Ja={class:"flex items-center w-[50%] flex-1"},Xa=["src"],Qa=["onClick","title"],Za={class:"flex items-center cursor-pointer item-option"},et=["onClick"],lt=["onClick"],at=["onClick"],tt=["onClick"],nt={class:"custom-td w-[120px]"},st=["onClick"],it={class:"custom-td w-[150px]"},ot=["title"],ct={class:"custom-td w-[100px]"},ut={class:"custom-td w-[160px]"},rt=["onMouseenter","onMouseleave"],dt=["title"],mt=["onClick"],ft=["onClick"],pt=["onClick"],vt=["onClick"],ht=["onClick"],kt=["onClick"],gt=["onClick"],xt=["onClick"],yt=["onClick"],wt=["onClick"],Ct=["onClick"],_t=e(_({__name:"index",setup(e,{expose:l}){const{mainWidth:a}=p(),{isHaveScoller:t}=b(xe()),n=ze(),{mainHeight:s,headData:i,dataList:o,selectList:c,checkedAll:u,dataList:r,imgIndex:d,showViewer:m,imgList:f,scrollHeight:v,scrollHeightBottom:k,isShowShadow:g,context:x,scrollRef:y,navBtnHeight:w,fileTabActiveData:C}=b(n),{bindMouseDown:_,clickName:R,handleBlurCheck:j,handleEvent:q,handleRightClick:Y,handleCheckFile:G,handleCheckAll:J,handleFileLock:X,handleEnPsView:Q,handleLvPsView:Z,handleSetPs:ee,handleReName:le,openImgView:ae,opearationIconClick:te,onReNameKeyup:ne,sortTable:ve,closeImgPreView:he,init:ke,$reset:ge}=n,ye=$(()=>c.value.length>0&&c.value.length!=o.value.length),we=$(()=>new Set(c.value)),Ce=L(Math.random());M(()=>o.value,()=>{Ce.value=Math.random(),_()}),se(()=>{var e,l,t;(null==(e=y.value)?void 0:e.$el)&&a.value<1140&&(null==(t=null==(l=y.value)?void 0:l.$el)||t.addEventListener("scroll",()=>{var e,l,a,t;if(document.querySelector(".table-head")){document.querySelector(".table-head").scrollLeft=null==(e=y.value)?void 0:e.$el.scrollLeft;const n=null==(l=y.value)?void 0:l.$el.scrollWidth,s=null==(a=y.value)?void 0:a.$el.clientWidth;(null==(t=y.value)?void 0:t.$el.scrollLeft)===n-s?document.querySelectorAll(".custom-operate").forEach(e=>{e.classList.remove("shaow")}):document.querySelectorAll(".custom-operate").forEach(e=>{e.classList.add("shaow")})}}))}),M(()=>a.value,e=>{const l=document.querySelector(".custom-tbody");if(l){const e=36*r.value.length>l.clientHeight;t.value=!!e}},{immediate:!0});const _e=$(()=>t.value?10.8:10);return I(ke),ie(ge),l({handleCheckAll:J,selectList:c}),(e,l)=>{const t=me,n=fe,r=pe,p=oe("input-select"),_=oe("blur-check"),b=oe("bt-loading");return T(),A("div",{class:"h-full files-list relative",onContextmenu:l[4]||(l[4]=H(e=>N(Y)(e,null),["prevent"]))},[D("div",Oa,[D("div",Pa,[D("div",Ua,[F(t,{indeterminate:N(ye),modelValue:N(u),"onUpdate:modelValue":l[0]||(l[0]=e=>ce(u)?u.value=e:null),onChange:N(J)},null,8,["indeterminate","modelValue","onChange"])])]),(T(!0),A(V,null,O(N(i),(e,l)=>(T(),A("div",{class:K("files-head-item  ".concat(e.class||""," !w-[").concat(e.width,"rem]  ").concat(N(a)<=1140&&"operation"===e.type?"shaow":"")),style:ue({...e.style,minWidth:"operation"===e.type?N(_e)+"rem":"auto"}),key:l,onClick:l=>N(ve)(e)},[D("span",null,W(e.label),1),e.sortable?(T(),A("div",qa,[D("i",{class:K("svgtofont-el-caret-top text-[1.6rem] leading-[.6rem] hover:text-[#20a53a90] text-[#CBCBCB] ".concat("asc"===e.sort?"!text-primary":""))},null,2),D("i",{class:K("svgtofont-el-caret-bottom text-[1.6rem] leading-[.8rem] hover:text-[#20a53a90] text-[#CBCBCB] ".concat("desc"===e.sort?"!text-primary":""))},null,2)])):B("",!0)],14,Ka))),128))]),P((T(),E(N(wl),{key:N(Ce),class:K(["custom-tbody scrollTable relative",{"shadow-top":N(v)===N(k)&&N(g),"shadow-bottom":0===N(v)&&N(g),"shadow-bottom-top":N(v)>0&&N(v)<N(k)&&N(g)}]),style:ue("height:".concat(N(s)-(N(w)||64)-230,"px")),items:N(o),"item-size":36,buffer:500,"emit-update":!0,"key-field":"vid",ref_key:"scrollRef",ref:y},{default:S(({item:e})=>[D("div",{class:K("custom-tr flex ".concat(N(we).has(e.path)?"row-checked":"")),onClick:l=>N(q)(l,e),onTouchend:l=>N(q)(l,e),onContextmenu:H(l=>N(Y)(l,e),["prevent"])},[D("div",Wa,[D("div",{class:"custom-checkbox",onClick:l=>N(G)(e)},[D("i",{id:"vid-"+e.vid,class:"checkbox--icon"},null,8,Ya)],8,$a)]),D("div",Ga,[D("div",Ja,[e.isSmallImage?(T(),A("img",{key:0,src:e.isSmallImage,class:"w-[2.4rem] h-[2.4rem]"},null,8,Xa)):(T(),A("i",{key:1,class:K("icon-bg ".concat(["zip","rar","7z","gz","tar.gz","tgz","war"].includes(e.ext)?"compress":e.ext,"-icon"))},null,2)),D("span",{class:K("cursor-pointer hover:text-primary truncate max-w-[84%] ml-[4px] fileName ".concat(e.isReName?"hidden":"")),onClick:l=>N(R)(e),title:e.fileName+e.isLink},W(e.fileName+e.isLink),11,Qa),e.isReName?P((T(),E(n,{key:2,modelValue:e.fileName,"onUpdate:modelValue":l=>e.fileName=l,class:"ml-8px",onKeydown:l[1]||(l[1]=re(H(()=>{},["stop"]),["native"])),onKeyup:re(l=>N(ne)(e),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])),[[p],[_,N(j)]]):B("",!0)]),P(D("div",Za,[e.isSync?(T(),A("span",{key:0,class:"btlink",onClick:l[2]||(l[2]=e=>N(pl)({name:"rsync"}))},W("modules"===e.isSync?"文件同步接收端":"文件同步发送端"),1)):B("",!0),"bt_split_json"===e.ext?(T(),A("span",{key:1,class:"btlink ml-8px",onClick:l=>N(Ye)(e)},"[文件合并]",8,et)):B("",!0),e.isShare?(T(),A("img",{key:2,src:ta,class:"foot-btn field-share-icon",onClick:l=>N(te)(e,"share")},null,8,lt)):B("",!0),e.isFav?(T(),A("img",{key:3,src:na,class:"foot-btn field-favorite-icon",onClick:l=>N(te)(e,"favorite")},null,8,at)):B("",!0),e.isTop?(T(),A("img",{key:4,src:sa,class:"foot-btn field-top-icon",onClick:l=>N(te)(e,"top")},null,8,tt)):B("",!0)],512),[[U,!e.isReName]])]),D("div",nt,[D("div",{class:"tamper-icon-item cursor-pointer",onClick:l=>N(X)(e)},[e.isLock?(T(),A(V,{key:0},[l[5]||(l[5]=D("span",{class:"btlink"},"受保护",-1)),l[6]||(l[6]=D("img",{src:ia,class:"tamper-file-lock"},null,-1))],64)):(T(),A(V,{key:1},[l[7]||(l[7]=D("span",null,"未保护",-1)),l[8]||(l[8]=D("img",{src:oa,class:"tamper-file-unlock"},null,-1))],64))],8,st)]),D("div",it,[D("span",{class:"truncate inline-block w-full",title:e.rootLevel+"/"+e.user},W(e.rootLevel+"/"+e.user),9,ot)]),D("div",ct,["dir"===e.type?(T(),E(Da,{key:0,row:e,status:e.isDirComputed,class:"size-link"},null,8,["row","status"])):(T(),A(V,{key:1},[z(W(N(h)(e.size)),1)],64))]),D("div",ut,[D("span",null,W(e.time),1)]),D("div",{class:"custom-td min-w-[20rem]",onMouseenter:l=>N(Q)(e),onMouseleave:l=>N(Z)(l,e)},[D("span",{class:K({hidden:e.isPsEdit,"ml-[.1rem] w-[18rem] truncate inline-block":!0}),title:e.ps},W(e.ps),11,dt),e.isPsEdit?(T(),E(n,{key:0,modelValue:e.ps,"onUpdate:modelValue":l=>e.ps=l,onBlur:l=>N(ee)(e),onKeyup:l[3]||(l[3]=re(e=>e.target.blur(),["enter"]))},null,8,["modelValue","onUpdate:modelValue","onBlur"])):B("",!0)],40,rt),D("div",{class:K("custom-operate custom-td flex-1 justify-end min-w-[30.4rem] file-action sticky -right-2px !bg-inherit  ".concat(N(a)<=1140?"shaow":""))},[D("div",{class:K(" ".concat(N(a)<=1140?"":"hidden"," "))},["text"===e.icon&&e.isFile?(T(),A("a",{key:0,class:"btlink",onClick:l=>N(Pe)(e)},"编辑",8,mt)):B("",!0),"images"===e.icon&&e.isFile?(T(),A("a",{key:1,class:"btlink",onClick:l=>N(ae)(e)},"预览",8,ft)):B("",!0),"video"===e.icon&&e.isFile?(T(),A("a",{key:2,class:"btlink",onClick:l=>N(ul)(e)},"播放",8,pt)):B("",!0),D("a",{class:"btlink",onClick:l=>N(Xe)(e,"copy")},"复制",8,vt),D("a",{class:"btlink",onClick:l=>N(Xe)(e,"cut")},"剪切",8,ht),D("a",{class:"btlink",onClick:l=>N(le)(e)},"重命名",8,kt),D("a",{class:"btlink",onClick:l=>N(Je)(e,"auth")},"权限",8,gt),D("a",{class:"btlink",onClick:l=>N(Ze)(e)},"压缩",8,xt),"compress"===e.icon?(T(),A("a",{key:3,class:"btlink",onClick:l=>N(ll)(e)},"解压",8,yt)):B("",!0),D("a",{class:"btlink",onClick:l=>N(Qe)(e,()=>{c.value=[]})},"删除",8,wt),D("a",{class:"btlink",onClick:l=>N(Y)(l,e)},[...l[9]||(l[9]=[z(" 更多 ",-1),D("span",{class:"svgtofont-el-arrow-down !text-[12px] align-bottom"},null,-1)])],8,Ct)],2)],2)],42,Ha)]),_:1},8,["style","items","class"])),[[b,N(C).loading],[b,"正在加载文件列表，请稍后...","title"]]),0===N(o).length?(T(),A("div",{key:0,class:"flex justify-center items-center absolute left-[45%] top-0",style:ue("height:".concat(N(s)-(N(w)||64)-220-36,"px"))},[F(r,{description:"暂无数据"})],4)):B("",!0),F(va,{ref_key:"context",ref:x},null,512),N(m)?(T(),E(N(de),{key:1,"z-index":1e4,onClose:N(he),initialIndex:N(d),"url-list":N(f)},null,8,["onClose","initialIndex","url-list"])):B("",!0)],32)}}}),[["__scopeId","data-v-3c8e0825"]]),bt=ze(),{mainWidth:Lt,mainHeight:It}=p(),{dataList:Rt,selectList:Tt,navBtnHeight:Et}=b(bt),{handleEvent:St,watchSelectListLength:Nt}=bt,At=L([]),Ft=L(!1),zt=L(null),Bt=L(!1),Vt=L({x:0,y:0}),jt=L(null),Mt=L(null),Dt=L(0),Ot=L(!1),Pt=L(null),Ut=L(!1),Kt=L(0),qt=L(0),Ht=L(null),Wt=$(()=>{const e=Lt.value-32,l=Math.floor((Lt.value-32)/100);return(e-100*l)/(l/2)+2}),$t=$(()=>{const e=It.value-(Et.value||64)-193,l=Math.floor((Lt.value-32)/100);return Math.floor(e/100)*(l-1)}),Yt=()=>{if(!Ot.value&&At.value.length!==Rt.value.length){if(Ot.value=!0,At.value.length<Rt.value.length)for(let e=0;e<$t.value;e++)Dt.value<Rt.value.length&&(At.value.push(Rt.value[Dt.value]),Dt.value++);Ot.value=!1}},Gt=(e,l)=>{if(Bt.value)return;e.stopPropagation(),e.preventDefault();const a=e,t=a.ctrlKey||a.metaKey,n=a.shiftKey;if(t){const e=Tt.value.indexOf(l.path);Tt.value=-1===e?[...Tt.value,l.path]:Tt.value.filter(e=>e!==l.path),Pt.value=l}else if(n&&Pt.value){const e=Rt.value.findIndex(e=>e.path===l.path),a=Rt.value.findIndex(e=>e.path===Pt.value.path),t=Math.min(e,a),n=Math.max(e,a);Tt.value=Rt.value.slice(t,n+1).map(e=>e.path)}else Tt.value=[l.path],Pt.value=l;St(e,l),Nt()},Jt=e=>{if(0!==e.button)return;const l=Ht.value;if(!l)return;const a=l.getBoundingClientRect();if(!(e.clientX<a.left||e.clientX>a.right||e.clientY<a.top||e.clientY>a.bottom)){if(Bt.value=!0,Kt.value=l.scrollTop,qt.value=l.scrollTop,Vt.value={x:e.clientX-a.left,y:e.clientY-a.top+l.scrollTop},jt.value){const l=jt.value.style;l.display="block",l.left="".concat(e.clientX-a.left,"px"),l.top="".concat(e.clientY-a.top,"px"),l.width="0",l.height="0"}if(!e.ctrlKey&&!e.metaKey){e.target.closest(".icon-file-item")||(Tt.value=[],Pt.value=null)}document.addEventListener("mousemove",Xt),document.addEventListener("mouseup",Zt)}},Xt=e=>{if(!Bt.value||!jt.value||!Ht.value)return;const l=Ht.value,a=l.getBoundingClientRect();if(e.clientY-a.top<80){const t=Math.ceil((80-(e.clientY-a.top))/4);l.scrollTop-=Math.min(t,20)}else if(a.bottom-e.clientY<80){const t=Math.ceil((80-(a.bottom-e.clientY))/4);l.scrollTop+=Math.min(t,20)}qt.value=l.scrollTop;const t=e.clientX-a.left,n=e.clientY-a.top+qt.value,s=Math.min(Vt.value.x,t),i=Math.min(Vt.value.y,n),o=Math.abs(t-Vt.value.x),c=Math.abs(n-Vt.value.y),u=jt.value.style;u.left="".concat(s,"px"),u.top="".concat(i-qt.value,"px"),u.width="".concat(o,"px"),u.height="".concat(c,"px"),Ut.value||(Ut.value=!0,requestAnimationFrame(()=>{en(s,i,o,c,e),Ut.value=!1}))},Qt=()=>{const e=Ht.value;e&&Bt.value&&jt.value&&(qt.value=e.scrollTop)},Zt=e=>{if(Bt.value=!1,jt.value&&(jt.value.style.display="none",jt.value.style.width="0",jt.value.style.height="0"),Tt.value.length>0){const e=Tt.value[Tt.value.length-1];Pt.value=Rt.value.find(l=>l.path===e)}document.removeEventListener("mousemove",Xt),document.removeEventListener("mouseup",Zt),Nt()},en=(e,l,a,t,n)=>{if(!Ht.value)return;const s=Ht.value,i=s.getBoundingClientRect(),o=e,c=l,u=e+a,r=l+t,d=new Set,m=s.getElementsByClassName("icon-file-item");for(let f=0;f<m.length;f++){const e=m[f],l=e.getBoundingClientRect(),a={left:l.left-i.left,top:l.top-i.top+s.scrollTop,right:l.right-i.left,bottom:l.bottom-i.top+s.scrollTop};if(!(u<a.left||o>a.right||r<a.top||c>a.bottom)){const l=e.getAttribute("data-filename"),a=Rt.value.find(e=>e.fileName===l);a&&d.add(a.path)}}if(n.ctrlKey||n.metaKey){const e=new Set(Tt.value);d.forEach(l=>e.add(l)),Tt.value=Array.from(e)}else Tt.value=Array.from(d);Nt()},ln=e=>{(e.ctrlKey||e.metaKey)&&"a"===e.key.toLowerCase()?(e.preventDefault(),Tt.value=Rt.value.map(e=>e.path)):"Escape"===e.key&&(Tt.value=[],Pt.value=null),Nt()},an=()=>{window.addEventListener("keydown",ln)},tn=()=>{document.removeEventListener("mousemove",Xt),document.removeEventListener("mouseup",Zt),window.removeEventListener("keydown",ln)},nn={class:"flex flex-col"},sn={class:"flex items-center"},on={class:"max-w-[40rem] inline-block truncate"},cn={key:0},un={key:1},rn={key:2},dn=["data-filename","onTouchend","onClick","onContextmenu"],mn=["src"],fn=["onClick","title"],pn={class:"flex flex-col items-center cursor-pointer icon-option"},vn=["onClick"],hn=["onClick"],kn=["onClick"],gn=["onClick"],xn={key:0,src:ia,class:"tamper-file-lock"},yn=_({__name:"index",setup(e){const l=ze(),{mainHeight:a,dataList:t,selectList:n,imgIndex:s,showViewer:i,imgList:o,context:c,navBtnHeight:u}=b(l),{clickName:r,handleBlurCheck:d,handleEvent:m,handleRightClick:f,handleFileLock:p,onReNameKeyup:v,closeImgPreView:k,opearationIconClick:g}=l;return M(()=>t.value,()=>(At.value=[],Dt.value=0,void Yt()),{immediate:!0}),ve(Ht,async()=>Yt(),{distance:15}),I(an),ie(tn),(e,l)=>{const x=fe,y=q,w=pe,C=oe("input-select"),_=oe("blur-check");return T(),A("div",{ref_key:"containerRef",ref:Mt,class:"files-icon-wrapper h-full",onMousedown:l[3]||(l[3]=(...e)=>N(Jt)&&N(Jt)(...e)),onContextmenu:l[4]||(l[4]=H(e=>N(f)(e,null),["prevent"]))},[D("div",{class:"files-icon-scroll",ref_key:"scrollContainerRef",ref:Ht,onScrollPassive:l[1]||(l[1]=(...e)=>N(Qt)&&N(Qt)(...e)),onMousedown:l[2]||(l[2]=(...e)=>N(Jt)&&N(Jt)(...e))},[D("div",{class:"flex items-start files-icon flex-wrap content-start",style:ue("column-gap:".concat(N(Wt),"px;row-gap:10px"))},[(T(!0),A(V,null,O(N(At),(e,a)=>(T(),E(y,{effect:"dark","show-after":1e3,placement:"right",key:a,disabled:e.isReName},{content:S(()=>[D("div",nn,[D("p",sn,[l[5]||(l[5]=z(" 名称：",-1)),D("span",on,W(e.fileName),1)]),D("p",null,"权限："+W(e.rootLevel+"/"+e.user),1),"dir"!==e.type?(T(),A("p",cn,"大小："+W(N(h)(e.size)),1)):B("",!0),D("p",null,"修改时间："+W(e.time),1),e.ps?(T(),A("p",un,[l[6]||(l[6]=z(" 备注：",-1)),D("span",{class:K({hidden:e.isPsEdit,"ml-[.1rem] w-[18rem] truncate inline-block":!0})},W(e.ps),3)])):B("",!0),D("p",null,[l[7]||(l[7]=z(" 企业级防篡改：",-1)),D("span",null,W(e.isLock?"受保护":"未保护"),1)]),e.isSync?(T(),A("p",rn,W("modules"===e.isSync?"文件同步：接收端":"文件同步：发送端"),1)):B("",!0)])]),default:S(()=>{var a;return[D("div",{class:K(["icon-file-item cursor-pointer",{"icon-file-active":N(n).includes(e.path),dragging:N(Ft)&&(null==(a=N(zt))?void 0:a.path)===e.path}]),"data-filename":e.fileName,onTouchend:l=>N(m)(l,e),onClick:l=>N(Gt)(l,e),onContextmenu:H(l=>N(f)(l,e),["prevent"])},[e.isSmallImage?(T(),A("img",{key:0,src:e.isSmallImage,class:"w-[4.4rem] h-[4.4rem] cursor-pointer"},null,8,mn)):(T(),A("i",{key:1,class:K("icon-file icon-bg ".concat(["zip","rar","7z","gz","tar.gz","tgz","war"].includes(e.ext)?"compress":e.ext,"-icon "))},null,2)),D("span",{onClick:l=>N(r)(e),class:K("fileName  ".concat(e.isReName?"!hidden":"")),title:e.fileName+e.isLink},W(e.fileName+e.isLink),11,fn),e.isReName?P((T(),E(x,{key:2,modelValue:e.fileName,"onUpdate:modelValue":l=>e.fileName=l,class:"mt-[4px]",onKeydown:l[0]||(l[0]=re(H(()=>{},["stop"]),["native"])),onKeyup:re(l=>N(v)(e),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])),[[C],[_,N(d)]]):B("",!0),P(D("div",pn,[e.isShare?(T(),A("img",{key:0,src:ta,title:"外链分享",class:"field-icon w-[16px] h-[16px]",onClick:l=>N(g)(e,"share")},null,8,vn)):B("",!0),e.isFav?(T(),A("img",{key:1,src:na,title:"收藏文件",class:"field-icon field-favorite-icon",onClick:l=>N(g)(e,"favorite")},null,8,hn)):B("",!0),e.isTop?(T(),A("img",{key:2,src:sa,title:"置顶",class:"field-icon !w-[18px] !h-[18px]",onClick:l=>N(g)(e,"top")},null,8,kn)):B("",!0)],512),[[U,!e.isReName]]),e.isReName?B("",!0):(T(),A("div",{key:3,class:"absolute bottom-3px right-[2px] cursor-pointer p-2px rounded-[4px] hover:bg-[#20a53a20]",onClick:l=>N(p)(e)},[e.isLock?(T(),A("img",xn)):B("",!0)],8,gn))],42,dn)]}),_:2},1032,["disabled"]))),128)),0===N(t).length?(T(),A("div",{key:0,class:"flex justify-center items-center absolute left-[45%] top-0",style:ue("height:".concat(N(a)-(N(u)||64)-220-36,"px"))},[F(w,{description:"暂无数据"})],4)):B("",!0)],4)],544),P(D("div",{ref_key:"selectionBoxRef",ref:jt,class:"selection-box"},null,512),[[U,N(Bt)]]),F(va,{ref_key:"context",ref:c},null,512),N(i)?(T(),E(N(de),{key:0,onClose:N(k),initialIndex:N(s),"url-list":N(o)},null,8,["onClose","initialIndex","url-list"])):B("",!0)],544)}}}),wn={class:"flex px-12px pt-12px justify-between"},Cn={class:"flex items-center"},_n={class:"mr-[1rem]"},bn={key:1,class:"svgtofont-el-loading animate-spin"},Ln={key:2,class:"cursor-pointer",style:{color:"green"}},In={class:""},Rn=e(_({__name:"index",setup(e){const l=xe(),{mainHeight:a,fileTabActiveData:t,dirLength:n,fileLength:s,navBtnHeight:i,listView:o,btnPopover:c,size:u,sizeShow:r,sizeLoad:d,dataList:m}=b(l),{refreshFilesList:f,unbindKeydown:p,sizeComputed:v,checkRoot:h,initMain:w}=l,C=k(),_=L();return se(()=>{_.value&&_.value.addEventListener("scroll",()=>{})}),I(async()=>{var e;w();const l=g("dirCalcPath");if(l){x("dirCalcPath");try{const a=await Rl({path:l});!1!==a.status&&"done"===(null==(e=a.data)?void 0:e.status)||setTimeout(()=>{C.error("有未完成的目录大小计算任务，请稍后再试！")},200)}catch(a){}}}),ie(()=>{p()}),(e,l)=>{const m=y,p=ne,k=yl,g=oe("bt-loading");return T(),A("div",{class:"file-main-view overflow-auto overflow-y-hidden",ref_key:"boxScroll",ref:_},[F(he,{name:"fade",mode:"out-in"},{default:S(()=>[P((T(),A("div",{class:"relative w-full",style:ue({height:"".concat(N(a)-(N(i)||64)-193,"px")})},["list"==N(t).type?(T(),E(_t,{key:0,ref_key:"listView",ref:o,class:"w-full"},null,512)):B("",!0),"icon"==N(t).type?(T(),E(yn,{key:1,ref:"iconView",class:"w-full"},null,512)):B("",!0)],4)),[[g,N(t).loading],[g,"正在加载中，请稍后...","title"]])]),_:1}),D("div",wn,[D("div",Cn,[D("span",_n,"共"+W(N(n))+"个目录，"+W(N(s))+"个文件，文件大小",1),F(p,{trigger:"hover",placement:"top-start",width:"260","popper-class":N(c)?"popper-danger whitespace-pre-wrap !transition-none":"whitespace-pre-wrap",content:N(c)?"当前目录为系统根目录（/）,执行获取文件大小将占用大量磁盘IO,将导致服务器运行缓慢。":"安装《堡塔硬盘分析工具》可以一键扫描所有目录大小 "},{reference:S(()=>[D("div",{onClick:l[0]||(l[0]=(...e)=>N(v)&&N(v)(...e)),onMouseover:l[1]||(l[1]=(...e)=>N(h)&&N(h)(...e))},[N(r)||N(d)?B("",!0):(T(),E(m,{key:0},{default:S(()=>[...l[5]||(l[5]=[z("计算",-1)])]),_:1})),N(d)?(T(),A("span",bn)):B("",!0),N(r)&&!N(d)?(T(),A("span",Ln,W(N(u)),1)):B("",!0)],32)]),_:1},8,["popper-class","content"])]),D("div",In,[F(k,{page:N(t).param.p,"onUpdate:page":l[2]||(l[2]=e=>N(t).param.p=e),row:N(t).param.showRow,"onUpdate:row":l[3]||(l[3]=e=>N(t).param.showRow=e),rowList:[100,500,1e3,1500,2e3],total:N(t).total,onChange:l[4]||(l[4]=e=>N(f)())},null,8,["page","row","total"])])])],512)}}}),[["__scopeId","data-v-a959a089"]]),Tn={class:"file-manager"},En={class:"module-ui file-operation-area relative"},Sn={class:"nav"},Nn={class:"nav-path"},An={class:"path-input"},Fn={class:"fold-dir-list"},zn=["onClick"],Bn=["onClick"],Vn={class:"path-name"},jn=["onClick"],Mn={class:"fold-dir-list"},Dn=["onClick"],On={class:"navSearch"},Pn={class:"absolute right-[5.4rem] top-0 flex items-center"},Un=e(_({__name:"index",setup(e){const l=xe(),{mainHeight:a,mainWidth:t,navBtnHeight:n,disabledCutTab:s,dirPath:i,pathInputRef:o,pathInputMode:c,pathListGroup:u,more:r,searchVal:m,searchHistory:f,searchRef:p,isChildren:v}=b(l),{$reset:h,refreshFilesList:k,searchEvent:x,handleDragOff:y,refreshList:_,cutPathInputMode:R,cutDirPath:E,getCurrentFoldDirList:z,goBack:B,init:$}=l,Y=L(),G=L(g("Path"));return M(()=>G.value,e=>{j(()=>{e?dl(e):k()})},{immediate:!0}),M(()=>t.value,e=>{j(()=>{var e;const l=document.querySelector(".nav-btn"),a=(null==l?void 0:l.offsetHeight)||0;n.value=a,null==(e=Y.value)||e.watchWindowResize()})}),M(()=>c.value,()=>{c.value||j(()=>{var e;null==(e=o.value)||e.select()})}),I(()=>{$(),j(()=>{d(()=>import("./index115.js?v=1756369731"),__vite__mapDeps([]),import.meta.url)})}),ie(h),(e,l)=>{const a=q,n=pe,d=w,h=C,g=me,b=ge;return T(),A("div",Tn,[D("div",En,[D("div",{class:"h-full w-full flex flex-col relative",onDragenter:l[11]||(l[11]=H(()=>{},["prevent"])),onDragover:l[12]||(l[12]=H(e=>N(y)(e),["prevent"]))},[F(Ol,{ref_key:"filesTabs",ref:Y},null,512),D("div",Sn,[D("div",Nn,[D("div",{class:"back rounded-l-[1rem] relative",onClick:l[0]||(l[0]=(...e)=>N(B)&&N(B)(...e))},[D("i",{class:K(["svgtofont-el-back",{disabledBack:N(s)}])},null,2)]),D("div",An,[P(D("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>ce(i)?i.value=e:null),ref_key:"pathInputRef",ref:o,type:"text",class:"h-full w-full pl-8px",onBlur:l[2]||(l[2]=e=>N(R)(!0)),onKeydown:l[3]||(l[3]=H(()=>{},["stop"])),onKeyup:l[4]||(l[4]=re(e=>N(E)(N(i),!0),["enter"]))},null,544),[[ke,N(i)],[U,!N(c)]]),P(D("div",{class:"path-list-group",onClick:l[6]||(l[6]=e=>N(R)(!1))},[P(D("div",{class:"svgtofont-el-arrow-left font-bold px-[.2rem] h-full leading-[2.9rem] cursor-pointer border-l border-r border-white relative hover:border-#e1e1e1 hover:bg-[#f5f7fa]",onClick:l[5]||(l[5]=H(e=>N(r).showUl=!0,["stop"]))},[P(D("ul",Fn,[(T(!0),A(V,null,O(N(r).list,(e,t)=>(T(),A("li",{class:"fold-dir-item",key:t},[F(a,{effect:"dark",content:e.path,placement:"right","show-after":500},{default:S(()=>[D("div",{class:"w-full flex items-center",onClick:H(l=>N(E)(e.path),["stop"])},[l[13]||(l[13]=D("span",{class:"dir-icon flex-shrink-0 !h-[1.6rem]"},null,-1)),D("span",null,W(e.name),1)],8,zn)]),_:2},1032,["content"])]))),128))],512),[[U,N(r).showUl]])],512),[[U,N(r).showMore]]),(T(!0),A(V,null,O(N(u),(e,t)=>P((T(),A("div",{key:t,class:"path-group-item",onClick:H(l=>N(E)(e.path),["stop"])},[F(a,{effect:"dark",content:e.name,placement:"bottom","show-after":500},{default:S(()=>[D("span",Vn,W(e.name),1)]),_:2},1032,["content"]),D("div",{class:"svgtofont-el-arrow-right path-name-icon",onClick:H(l=>N(z)(e.path,t),["stop"])},[P((T(),A("ul",Mn,[(T(!0),A(V,null,O(e.list,(e,t)=>(T(),A("li",{class:"fold-dir-item",key:t},[F(a,{effect:"dark",content:e.path,placement:"right","show-after":500},{default:S(()=>[D("div",{class:"w-full flex items-center",onClick:H(l=>N(E)(e.path),["stop"])},[l[14]||(l[14]=D("span",{class:"dir-icon flex-shrink-0 !h-[1.6rem]"},null,-1)),D("span",null,W(e.name),1)],8,Dn)]),_:2},1032,["content"])]))),128)),P(F(n,{"image-size":60,description:"暂无数据"},null,512),[[U,!e.list.length]])])),[[U,e.showFold],[b,e.loading]])],8,jn)],8,Bn)),[[U,e.show]])),128))],512),[[U,N(c)]])]),D("span",{class:"refresh rounded-r-[1rem]",onClick:l[7]||(l[7]=(...e)=>N(_)&&N(_)(...e))},[D("i",{class:K({"svgtofont-el-refresh-right":!N(s),"svgtofont-el-loading cursor-not-allowed animate-spin":N(s)})},null,2)]),P(D("div",{class:"flex items-center ml-8px w-[10rem]",onClick:l[8]||(l[8]=e=>N(vl)({name:"文件管理",type:21,isCard:!0}))},[...l[15]||(l[15]=[D("i",{class:"svgtofont-desired text-[1.6rem]"},null,-1),D("span",{class:"bt-link"},"需求反馈",-1)])],512),[[U,N(t)>1280]])]),D("div",On,[F(h,{disabledPopover:!1,class:"!w-[30rem]",ref_key:"searchRef",ref:p,modelValue:N(m),"onUpdate:modelValue":l[9]||(l[9]=e=>ce(m)?m.value=e:null),onSearch:N(x),placeholder:"搜索文件/目录",clearable:!1},{default:S(()=>[F(d,{list:{historyList:N(f),recommendList:N(rl)},name:"files",keys:"get_list",onUpdate:N(k),onSearch:N(x)},null,8,["list","onUpdate","onSearch"])]),_:1},8,["modelValue","onSearch"]),D("div",Pn,[F(g,{modelValue:N(v),"onUpdate:modelValue":l[10]||(l[10]=e=>ce(v)?v.value=e:null),class:""},{default:S(()=>[...l[16]||(l[16]=[D("span",{class:"text-[#999]"},"包含子目录",-1)])]),_:1},8,["modelValue"])])])]),F(aa),F(Rn)],32)])])}}}),[["__scopeId","data-v-a73c28e3"]]),Kn=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"}));export{ca as F,ua as a,Kn as i};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
