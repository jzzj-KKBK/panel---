import{K as a,al as e,c as s,W as l,b as t}from"./utils-lib.js?v=1756369731";import{c as n,r as o,g as u,p as r,G as i,H as m,x as d,q as c,v as p,e as v,P as f,y as g,B as y,A as b,C as x,D as j}from"./base-lib.js?v=1756369731";import{B as h}from"./index140.js?v=1756369731";import{u as _,S as C}from"./useStore4.js?v=1756369731";import{getConfigFile as w}from"./site.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./ace.js?v=1756369731";const V={class:"flex items-center justify-between my-[4px]"},k={key:0,class:"flex items-center"},S={class:"my-[12px]"},E=n({__name:"index",setup(n){const E=t(),{siteInfo:F}=_(),{getFileEvent:H,saveFileEvent:q}=C(),D=o(!1),U=o(!1),A=o(""),B=o([]),T=o(""),z=[{content:"此处为站点主配置文件,若您不了解配置规则,请勿随意修改."}],G=u(()=>B.value.find(a=>a.type===A.value)),I=async()=>{const a=await q({path:A.value,data:T.value,encoding:"utf-8"});E.msg({dangerouslyUseHTMLString:!0,message:a.msg,type:a.status?"success":"error",duration:a.status?2e3:0}),a.status&&K()},K=async(a=A.value)=>{U.value=!0;const e=await H({path:a});T.value=e.data.data,U.value=!1},L=a=>{A.value=a,K()};return r(()=>{a({loading:D,request:w({sitename:F.value.name}),success:a=>{B.value=[],Object.keys(a.data).forEach(e=>{B.value.push({label:e,lazy:!0,name:a.data[e],render:()=>v("span",null,null)})}),A.value=B.value[0].name,K()}})}),(a,t)=>{var n;const o=e,u=s,r=h,_=j,C=l,w=i("bt-loading");return m((c(),p("div",null,[v(o,{type:"card",modelValue:d(A),"onUpdate:modelValue":t[0]||(t[0]=a=>f(A)?A.value=a:null),options:d(B),onChange:L},null,8,["modelValue","options"]),g("div",V,[t[5]||(t[5]=g("span",{class:"text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),"伪静态配置文件"===(null==(n=d(G))?void 0:n.label)?(c(),p("span",k,[t[4]||(t[4]=y("规则转换工具： ",-1)),v(u,{href:"https://www.bt.cn/Tools",target:"_blank"},{default:b(()=>[...t[3]||(t[3]=[y("Apache转Nginx ",-1),g("i",{class:"svgtofont-el-link"},null,-1)])]),_:1})])):x("",!0)]),g("div",S,[m(v(r,{class:"!h-[40rem] border border-[#DCDFE6] rounded-[4px]",modelValue:d(T),"onUpdate:modelValue":t[1]||(t[1]=a=>f(T)?T.value=a:null),id:"configContent",request:!1,onSave:I},null,8,["modelValue"]),[[w,d(U)]])]),v(_,{type:"primary",onClick:t[2]||(t[2]=a=>I())},{default:b(()=>[...t[6]||(t[6]=[y("保存",-1)])]),_:1}),v(C,{options:z,class:"ml-2rem"})])),[[w,d(D)]])}}});export{E as default};
