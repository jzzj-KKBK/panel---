!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.toStringTag||"@@toStringTag";function u(t,o,a,l){var u=o&&o.prototype instanceof c?o:c,s=Object.create(u.prototype);return n(s,"_invoke",function(t,n,o){var a,l,u,c=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,l=0,u=e,p.n=n,i}};function d(t,n){for(l=t,u=n,r=0;!f&&c&&!o&&r<s.length;r++){var o,a=s[r],d=p.p,m=a[2];t>3?(o=m===n)&&(u=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(l=0,p.v=n,p.n=a[1]):d<m&&(o=t<3||a[0]>n||n>m)&&(a[4]=t,a[5]=n,p.n=m,l=0))}if(o||t>1)return i;throw f=!0,n}return function(o,s,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),l=s,u=m;(r=l<2?e:u)||!f;){a||(l?l<3?(l>1&&(p.n=-1),d(l,u)):p.n=u:p.v=u);try{if(c=2,a){if(l||(o="next"),r=a[o]){if(!(r=r.call(a,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,l<2&&(l=0)}else 1===l&&(r=a.return)&&r.call(a),l<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((r=(f=p.n<0)?u:t.call(n,p))!==i)break}catch(r){a=e,l=1,u=r}finally{c=1}}return{value:r,done:f}}}(t,a,l),!0),s}var i={};function c(){}function s(){}function f(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(n(r={},a,function(){return this}),r),d=f.prototype=c.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,l,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,n(d,"constructor",f),n(f,"constructor",s),s.displayName="GeneratorFunction",n(f,l,"GeneratorFunction"),n(d),n(d,l,"Generator"),n(d,a,function(){return this}),n(d,"toString",function(){return"[object Generator]"}),(t=function(){return{w:u,m:m}})()}function n(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,r,o){function l(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(l("next",0),l("throw",1),l("return",2))},n(e,t,r,o)}function r(e,t,n,r,o,a,l){try{var u=e[a](l),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}System.register(["./base-lib-legacy.js?v=1756369731","./utils-lib-legacy.js?v=1756369731","./index-legacy117.js?v=1756369731","./firewall-legacy.js?v=1756369731","./useMethod-legacy6.js?v=1756369731","./__commonjsHelpers__-legacy.js?v=1756369731","./validator-legacy.js?v=1756369731","./index-legacy104.js?v=1756369731","./column-legacy.js?v=1756369731","./useStore-legacy5.js?v=1756369731"],function(e,n){"use strict";var o,l,u,i,c,s,f,p,d,m,y,b,v,g,h,w,j,P,_,O,V,S,D,k,U,T,I,x,A,E,N,C,G;return{setters:[function(e){o=e.c,l=e.r,u=e.U,i=e.k,c=e.p,s=e.q,f=e.M,p=e.A,d=e.e,m=e.x,y=e.v,b=e.a_,v=e.F,g=e.C,h=e.P,w=e.a9,j=e.aj,P=e.S,_=e.a7,O=e.ai},function(e){V=e.u,S=e.jz,D=e.K,k=e.ag,U=e.j,T=e.W,I=e.h,x=e.e},function(e){A=e._},function(e){E=e.w,N=e.v},function(e){C=e.a,G=e.g},null,null,null,null,null],execute:function(){var n=o({__name:"add-port-rule",props:{compData:{default:function(){}}},setup:function(e,n){var o=n.expose,x=e,q=V().payment.value.authType,F=l(!1),J=l(),M=u(x.compData.isEdit),R={title:"指定域名-功能介绍",ps:"系统防火墙将会放行/阻止设置域名所解析的A/AAAA记录",source:106,desc:["放行/阻止域名解析记录"],tabImgs:[{title:"防火墙禁止端口",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/specify_domain_1.png"},{title:"域名解析已生效",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/specify_domain_2.png"},{title:"设置效果",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/specify_domain_3.png"}]},z=i({protocol:"tcp",port:"",choose:"all",types:"accept",brief:"",address:"",domain:"",chain:"INPUT"}),H=[{content:"支持添加多个端口，如：80,88"},{content:"支持添加多个端口范围，如：80,88,90-99,110-120"},{content:"默认配置下防火墙无法管理Docker容器端口"},{content:"此操作将重载防火墙，未持久化的 iptables 规则会清空，请先备份保存！"}],K=[{title:"入站(默认)",key:"INPUT"},{title:"出站",key:"OUTPUT"}],W="请输入指定IP，多个IP请用,隔开或换行。例如192.168.1.1,192.168.1.2",B=[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"},{label:"TCP/UDP",value:"all"}],L=[{title:"所有IP",key:"all"},{title:"指定IP",key:"point"}],Q=[{title:"放行",key:"accept"},{title:"禁止",key:"drop"}],X={port:[{validator:S,trigger:["blur"],required:!0}],address:[{trigger:["blur","change"],required:!0,message:"请输入指定IP"}],domain:[{trigger:["blur","change"],required:!0,message:"请输入指定域名"}]},Y=function(e){try{z.port=e.replace(/[^0-9,-]/g,"")}catch(t){}},Z=function(e){if(J.value.clearValidate(),"ltd"!==q&&"domain"===e)return z.choose="all",void(F.value=!0);z.choose=e},$=function(){var e=a(a({},z),{},{operation:"add",strategy:z.types});if("all"===e.choose&&delete e.address,e.brief||(e.brief=""),M.value&&(e.id=x.compData.id),M.value){var t=a({},x.compData);return t.noNps&&delete t.noNps,{old_data:JSON.stringify(t),new_data:JSON.stringify(e)}}return e},ee=function(){var e,n=(e=t().m(function e(n){var r,o;return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,J.value.validate();case 1:return e.n=2,$();case 2:return r=e.v,o="domain"===z.choose,e.n=3,D({loading:"正在提交，请稍后...",message:!0,request:M.value?E(r,o):N(r,o),success:function(e){e.status&&n()}});case 3:return x.compData.refreshFn(),e.n=4,C();case 4:G(),M.value;case 5:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(o,a){var l=e.apply(t,n);function u(e){r(l,o,a,u,i,"next",e)}function i(e){r(l,o,a,u,i,"throw",e)}u(void 0)})});return function(e){return n.apply(this,arguments)}}();return c(function(){var e;if(z.port=(null===(e=x.compData)||void 0===e?void 0:e.port)||"",x.compData.isEdit){var t,n="all"===(null===(t=x.compData)||void 0===t?void 0:t.Address);Object.assign(z,{protocol:x.compData.Protocol,port:x.compData.Port,types:x.compData.Strategy,brief:x.compData.brief,chain:x.compData.Chain,address:n?"":x.compData.Address,domain:x.compData.domain}),z.choose=n?"all":""===x.compData.domain?"point":"domain"}}),o({onConfirm:ee}),function(e,t){var n=k,r=w,o=U,a=O,l=j,u=P,i=T,c=A,V=I,S=_;return s(),f(S,{ref_key:"editPortRulesRef",ref:J,rules:X,model:m(z),class:"p-[2rem] addfrom"},{default:p(function(){return[d(r,{label:"协议"},{default:p(function(){return[d(n,{modelValue:m(z).protocol,"onUpdate:modelValue":t[0]||(t[0]=function(e){return m(z).protocol=e}),class:"!w-[24rem]",options:B},null,8,["modelValue"])]}),_:1}),d(r,{label:"端口",prop:"port"},{default:p(function(){return[d(o,{modelValue:m(z).port,"onUpdate:modelValue":t[1]||(t[1]=function(e){return m(z).port=e}),width:"24rem",placeholder:"请输入端口",disabled:m(M),onInput:Y},null,8,["modelValue","disabled"])]}),_:1}),d(r,{label:"来源"},{default:p(function(){return[d(l,{modelValue:m(z).choose,"onUpdate:modelValue":t[2]||(t[2]=function(e){return m(z).choose=e}),onChange:Z,class:"!w-[24rem]"},{default:p(function(){return[(s(),y(v,null,b(L,function(e,t){return d(a,{key:t,label:e.title,value:e.key},null,8,["label","value"])}),64))]}),_:1},8,["modelValue"])]}),_:1}),"point"===m(z).choose?(s(),f(r,{key:0,label:"指定IP",prop:"address"},{default:p(function(){return[d(o,{type:"textarea",rows:3,width:"24rem",modelValue:m(z).address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return m(z).address=e}),placeholder:W,clearable:""},null,8,["modelValue","placeholder"])]}),_:1})):g("",!0),d(r,{label:"策略"},{default:p(function(){return[d(l,{modelValue:m(z).types,"onUpdate:modelValue":t[4]||(t[4]=function(e){return m(z).types=e}),class:"!w-[24rem]"},{default:p(function(){return[(s(),y(v,null,b(Q,function(e,t){return d(a,{key:t,label:e.title,value:e.key},null,8,["label","value"])}),64))]}),_:1},8,["modelValue"])]}),_:1}),d(r,{label:"方向"},{default:p(function(){return[d(l,{modelValue:m(z).chain,"onUpdate:modelValue":t[5]||(t[5]=function(e){return m(z).chain=e}),class:"!w-[24rem]"},{default:p(function(){return[(s(),y(v,null,b(K,function(e){return d(a,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])}),64))]}),_:1},8,["modelValue"])]}),_:1}),d(r,{label:"备注"},{default:p(function(){return[d(u,{modelValue:m(z).brief,"onUpdate:modelValue":t[6]||(t[6]=function(e){return m(z).brief=e}),class:"!w-[24rem] special-input",clearable:"",placeholder:"请填写备注，可为空"},null,8,["modelValue"])]}),_:1}),d(i,{options:H,listStyle:"disc",class:"pl-[6rem] pt-[1.2rem]"}),d(V,{title:"指定域名-功能介绍",area:60,modelValue:m(F),"onUpdate:modelValue":t[7]||(t[7]=function(e){return h(F)?F.value=e:null})},{default:p(function(){return[d(c,{data:R,class:"p-4rem"})]}),_:1},8,["modelValue"])]}),_:1},8,["model"])}}});e("default",x(n,[["__scopeId","data-v-247d5224"]]))}}})}();
