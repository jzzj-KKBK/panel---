import{K as e,bT as a,v as l,j as s,al as t,e as n}from"./utils-lib.js?v=1756369731";import{r as i,k as c,c as o,p as d,G as m,q as u,M as r,A as p,e as _,y as b,H as f,x as v,P as x,B as y,aA as h,D as g,au as V,aw as C,a9 as j,a7 as k}from"./base-lib.js?v=1756369731";import{B as w}from"./index140.js?v=1756369731";import{S as T,_ as E}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1756369731";import{X as q,Y as z,V as U}from"./validator.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./ace.js?v=1756369731";import"./column.js?v=1756369731";import"./index104.js?v=1756369731";const G=T(),I=i({}),P={bind:"监听IP",port:"监听端口",cachesize:"最大缓存容量",maxconn:"最大连接数限制",curr_connections:"当前打开的连接数",cmd_get:"GET请求数",get_hits:"GET命中次数",get_misses:"GET失败次数",hit:"GET命中率",curr_items:"当前被缓存的数据行数",evictions:"因内存不足而被清理的缓存行数",bytes:"当前已使用内存",bytes_read:"请求总大小",bytes_written:"发送总大小"},A=i("service"),B=i(""),H=i(!1),M=i(!1),S=i([]),D=c({ip:"",cachesize:"",maxconn:"",port:"",btn_set_memcached:""}),N=i(""),O=i([]),X=async()=>{await e({loading:"正在保存中，请稍后...",request:q(D),message:!0})},F=async()=>{await e({loading:"正在保存中，请稍后...",request:a({path:"/etc/init.d/memcached",data:B.value,encoding:"utf-8"}),message:!0})},K=({props:{name:a}})=>{switch(a){case"service":R();break;case"performance":(async()=>{await e({loading:H,request:z(),success:e=>{D.ip=e.data.bind,D.cachesize=e.data.cachesize,D.maxconn=e.data.maxconn,D.port=e.data.port}})})();break;case"config":(async()=>{await e({loading:H,request:U({path:"/etc/init.d/memcached"}),data:{data:[String,B]}})})();break;case"load":(async()=>{await e({loading:H,request:z(),success:e=>{S.value=[];const a=["bytes","bytes_read","bytes_written"];Object.keys(e.data).forEach(s=>{"limit_maxbytes"!==s&&S.value.push({name:s,ps:P[s],value:a.includes(s)?l(Number(e.data[s])):e.data[s]})})}})})()}},R=e=>{A.value="service",e&&(I.value=e),G.init(I.value),N.value=I.value.version.split(".")[0]+"."+I.value.version.split(".")[1],O.value=I.value.versions},Y={class:"my-[12px]"},Z={class:"flex flex-col text-[#666] performance"},J={class:"flex items-center"},L={class:"flex items-center"},Q={class:"flex items-center"},W={class:"flex items-center"},$=n(o({__name:"index",props:{compData:{default:{}}},setup(e){const a=e;return d(()=>{R(a.compData)}),(e,a)=>{const l=h,n=w,i=g,c=V,o=C,d=s,T=j,q=k,z=t,U=m("bt-loading");return u(),r(z,{modelValue:v(A),"onUpdate:modelValue":a[5]||(a[5]=e=>x(A)?A.value=e:null),type:"left-bg-card",onTabClick:v(K)},{default:p(()=>[_(l,{label:"服务",name:"service"},{default:p(()=>[_(E)]),_:1}),_(l,{label:"配置文件",name:"config"},{default:p(()=>[a[7]||(a[7]=b("span",{class:"my-[4px] text-[#666]"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),b("div",Y,[f(_(n,{class:"!h-[36rem] !w-[full]",modelValue:v(B),"onUpdate:modelValue":a[0]||(a[0]=e=>x(B)?B.value=e:null),id:"configContent",filePath:"/etc/init.d/memcached"},null,8,["modelValue"]),[[U,v(H)]])]),_(i,{onClick:v(F),type:"primary"},{default:p(()=>[...a[6]||(a[6]=[y("保存",-1)])]),_:1},8,["onClick"]),a[8]||(a[8]=b("ul",{class:"leading-8 mt-20px text-[1.2rem] list-disc ml-[20px]"},[b("li",null,"此处为memcached主配置文件,若您不了解配置规则,请勿随意修改")],-1))]),_:1}),_(l,{label:"负载状态",name:"load"},{default:p(()=>[f((u(),r(o,{"max-height":"500",data:v(S),border:"",style:{width:"100%"}},{default:p(()=>[_(c,{prop:"name",label:"字段"}),_(c,{prop:"value",label:"当前值"}),_(c,{prop:"ps",label:"说明"})]),_:1},8,["data"])),[[U,v(H)]])]),_:1}),f((u(),r(l,{label:"性能调整",name:"performance"},{default:p(()=>[b("div",Z,[_(q,{model:v(D)},{default:p(()=>[_(T,{label:"BindIp"},{default:p(()=>[b("div",J,[_(d,{modelValue:v(D).ip,"onUpdate:modelValue":a[1]||(a[1]=e=>v(D).ip=e)},null,8,["modelValue"]),a[9]||(a[9]=b("span",{class:"unit"},"监听IP,请勿随意修改",-1))])]),_:1}),_(T,{label:"PORT"},{default:p(()=>[b("div",L,[_(d,{modelValue:v(D).port,"onUpdate:modelValue":a[2]||(a[2]=e=>v(D).port=e),type:"number"},null,8,["modelValue"]),a[10]||(a[10]=b("span",{class:"unit"}," 监听端口,一般无需修改",-1))])]),_:1}),_(T,{label:"CACHESIZE"},{default:p(()=>[b("div",Q,[_(d,{modelValue:v(D).cachesize,"onUpdate:modelValue":a[3]||(a[3]=e=>v(D).cachesize=e),type:"number"},null,8,["modelValue"]),a[11]||(a[11]=b("span",{class:"unit"}," MB,缓存大小,建议不要大于512M",-1))])]),_:1}),_(T,{label:"MAXCONN"},{default:p(()=>[b("div",W,[_(d,{modelValue:v(D).maxconn,"onUpdate:modelValue":a[4]||(a[4]=e=>v(D).maxconn=e),type:"number"},null,8,["modelValue"]),a[12]||(a[12]=b("span",{class:"unit"},"最大连接数,建议不要大于40960",-1))])]),_:1}),_(T,{label:" "},{default:p(()=>[_(i,{onClick:v(X),type:"primary"},{default:p(()=>[...a[13]||(a[13]=[y("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])])]),_:1})),[[U,v(M)]])]),_:1},8,["modelValue","onTabClick"])}}}),[["__scopeId","data-v-56f9696c"]]);export{$ as default};
