import{c as e,r as a,ay as s,k as l,p as t,q as o,v as u,e as n,A as m,x as r,y as i,B as d,al as c,a9 as p,a7 as f}from"./base-lib.js?v=1756369731";import{_}from"./validator.js?v=1756369731";import{K as b,j as v,b as h}from"./utils-lib.js?v=1756369731";import{bk as x,bl as V}from"./firewall.js?v=1756369731";import"./__commonjsHelpers__.js?v=1756369731";import"./index104.js?v=1756369731";import"./column.js?v=1756369731";const g={class:"p-[2rem]"},j={class:"flex"},y=e({__name:"index",setup(e,{expose:y}){const w=h(),k=a(!1),C=s("popupClose"),U=a(),q=l({give:[],status:!1,hour:12,minute:0}),A=e=>{q.give=e},B=async()=>{b({request:V(),success:e=>{const a=e.data;q.status="1"===a.status||1===a.status,q.hour=a.hour,q.minute=a.minute,""!=a.channel&&(q.give=a.channel.split(","))}})};return t(()=>{B()}),y({onConfirm:async()=>{const{give:e,minute:a,hour:s,status:l}=q;let t=e.join(",");if(0===t.indexOf(",")&&(t=t.substring(1)),0===e.length||""===t)return w.error("请选择告警方式");const o={status:l?1:0,hour:s,minute:a,channel:t};await U.value.validate(),b({request:x(o),loading:k,message:!0,success:e=>{e.status&&C&&C()}})}}),(e,a)=>{const s=c,l=p,t=v,b=_,h=f;return o(),u("div",g,[n(h,{model:r(q),disabled:r(k),ref_key:"scanForm",ref:U},{default:m(()=>[n(l,{label:"自动扫描"},{default:m(()=>[n(s,{modelValue:r(q).status,"onUpdate:modelValue":a[0]||(a[0]=e=>r(q).status=e)},null,8,["modelValue"])]),_:1}),n(l,{label:"每天"},{default:m(()=>[i("div",j,[n(t,{type:"number",class:"!w-[13rem] mr-4",min:"0",max:"23",modelValue:r(q).hour,"onUpdate:modelValue":a[1]||(a[1]=e=>r(q).hour=e)},{append:m(()=>[...a[4]||(a[4]=[d("小时",-1)])]),_:1},8,["modelValue"]),n(t,{type:"number",class:"!w-[13rem]",min:"0",max:"59",modelValue:r(q).minute,"onUpdate:modelValue":a[2]||(a[2]=e=>r(q).minute=e)},{append:m(()=>[...a[5]||(a[5]=[d("分钟",-1)])]),_:1},8,["modelValue"])])]),_:1}),n(l,{label:"告警方式"},{default:m(()=>[n(b,{class:"!w-[30rem]",modelValue:r(q).give,"onUpdate:modelValue":a[3]||(a[3]=e=>r(q).give=e),limit:["sms","wx_account"],isMult:!0,needAll:!1,onChange:A},null,8,["modelValue"])]),_:1}),n(l,{label:" "},{default:m(()=>[i("div",{class:"text-[#666]"},[a[6]||(a[6]=d(" 配置后状态未更新,请尝试[ ",-1)),i("span",{class:"text-[#20a53a] hover:text-[#1d9534] cursor-pointer",onClick:B}," 手动刷新 "),a[7]||(a[7]=d(" ] ",-1))])]),_:1})]),_:1},8,["model","disabled"])])}}});export{y as default};
