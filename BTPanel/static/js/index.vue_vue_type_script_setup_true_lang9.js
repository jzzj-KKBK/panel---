import{M as s,p as e,c as r}from"./utils-lib.js?v=1756369731";import{c as t,k as a,g as l,w as i,p as o,q as c,v as m,y as n,J as u,x as d,z as f,K as x,e as p,A as g,B as v,C as y}from"./base-lib.js?v=1756369731";import{m as _}from"./useMethod4.js?v=1756369731";const w={class:"flex items-start"},b={class:"flex flex-1"},k={class:"mr-[12px] text-[1.2rem] min-w-[16rem] max-w-30rem"},C={class:"flex items-center"},h={key:0,class:"flex items-center"},j=t({__name:"index",props:{server:{default:()=>({sid:0,ip:""})}},setup(t){const j=t,A=a({status:!1,msg:"检查中...",error:!1}),M=l(()=>A.status?"svgtofont-el-success-filled text-[#20A53A]":"svgtofont-el-circle-close-filled text-[#EF0808]"),S=async()=>{z(),s.success("刷新成功")},q=()=>{s.msg({dangerouslyUseHTMLString:!0,message:String(A.error)||"暂无异常信息",type:"error",showClose:!0,duration:0})},z=async()=>{if(e(j.server.sid))return s.error("查询失败");A.msg="连接中...";const{db_status:r,msg:t,err_msg:a}=await _(j.server.sid);A.status=r,A.msg=r?"正常":t,A.error=!r&&a};return i(()=>j.server.sid,s=>{!e(s)&&z()},{immediate:!0}),o(()=>{}),(s,e)=>{const t=r;return c(),m("div",w,[n("i",{class:u("text-[1.6rem] mr-[4px] ".concat(d(M)))},null,2),n("div",b,[n("div",k,[n("span",null,f(s.server.ip)+"状态：",1),n("span",{style:x("color:#".concat(d(A).status?"20a53a":"ef0808"))},f(d(A).msg),5)]),n("div",C,[e[2]||(e[2]=n("i",{class:"svgtofont-icon-refresh text-[1.4rem] mr-[4px] text-[#20a53a]"},null,-1)),p(t,{onClick:S},{default:g(()=>[...e[0]||(e[0]=[v("刷新",-1)])]),_:1}),d(A).error?(c(),m("div",h,[p(t,{onClick:q,class:"ml-8px"},{default:g(()=>[...e[1]||(e[1]=[v("| 查看异常信息",-1)])]),_:1})])):y("",!0)])])])}}});export{j as _};
